function k2(t,e){for(var r=0;r<e.length;r++){const s=e[r];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function E2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wy={exports:{}},Mc={},$y={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var go=Symbol.for("react.element"),T2=Symbol.for("react.portal"),S2=Symbol.for("react.fragment"),I2=Symbol.for("react.strict_mode"),C2=Symbol.for("react.profiler"),A2=Symbol.for("react.provider"),P2=Symbol.for("react.context"),R2=Symbol.for("react.forward_ref"),D2=Symbol.for("react.suspense"),M2=Symbol.for("react.memo"),L2=Symbol.for("react.lazy"),Op=Symbol.iterator;function V2(t){return t===null||typeof t!="object"?null:(t=Op&&t[Op]||t["@@iterator"],typeof t=="function"?t:null)}var Hy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qy=Object.assign,Gy={};function Ni(t,e,r){this.props=t,this.context=e,this.refs=Gy,this.updater=r||Hy}Ni.prototype.isReactComponent={};Ni.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ni.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ky(){}Ky.prototype=Ni.prototype;function Qh(t,e,r){this.props=t,this.context=e,this.refs=Gy,this.updater=r||Hy}var Yh=Qh.prototype=new Ky;Yh.constructor=Qh;qy(Yh,Ni.prototype);Yh.isPureReactComponent=!0;var Fp=Array.isArray,Qy=Object.prototype.hasOwnProperty,Xh={current:null},Yy={key:!0,ref:!0,__self:!0,__source:!0};function Xy(t,e,r){var s,i={},a=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Qy.call(e,s)&&!Yy.hasOwnProperty(s)&&(i[s]=e[s]);var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){for(var d=Array(c),u=0;u<c;u++)d[u]=arguments[u+2];i.children=d}if(t&&t.defaultProps)for(s in c=t.defaultProps,c)i[s]===void 0&&(i[s]=c[s]);return{$$typeof:go,type:t,key:a,ref:o,props:i,_owner:Xh.current}}function O2(t,e){return{$$typeof:go,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jh(t){return typeof t=="object"&&t!==null&&t.$$typeof===go}function F2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Up=/\/+/g;function Od(t,e){return typeof t=="object"&&t!==null&&t.key!=null?F2(""+t.key):e.toString(36)}function xl(t,e,r,s,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case go:case T2:o=!0}}if(o)return o=t,i=i(o),t=s===""?"."+Od(o,0):s,Fp(i)?(r="",t!=null&&(r=t.replace(Up,"$&/")+"/"),xl(i,e,r,"",function(u){return u})):i!=null&&(Jh(i)&&(i=O2(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Up,"$&/")+"/")+t)),e.push(i)),1;if(o=0,s=s===""?".":s+":",Fp(t))for(var c=0;c<t.length;c++){a=t[c];var d=s+Od(a,c);o+=xl(a,e,r,d,i)}else if(d=V2(t),typeof d=="function")for(t=d.call(t),c=0;!(a=t.next()).done;)a=a.value,d=s+Od(a,c++),o+=xl(a,e,r,d,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ko(t,e,r){if(t==null)return t;var s=[],i=0;return xl(t,s,"","",function(a){return e.call(r,a,i++)}),s}function U2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jt={current:null},yl={transition:null},B2={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:yl,ReactCurrentOwner:Xh};function Jy(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Ko,forEach:function(t,e,r){Ko(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Ko(t,function(){e++}),e},toArray:function(t){return Ko(t,function(e){return e})||[]},only:function(t){if(!Jh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=Ni;oe.Fragment=S2;oe.Profiler=C2;oe.PureComponent=Qh;oe.StrictMode=I2;oe.Suspense=D2;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B2;oe.act=Jy;oe.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=qy({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Xh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(d in e)Qy.call(e,d)&&!Yy.hasOwnProperty(d)&&(s[d]=e[d]===void 0&&c!==void 0?c[d]:e[d])}var d=arguments.length-2;if(d===1)s.children=r;else if(1<d){c=Array(d);for(var u=0;u<d;u++)c[u]=arguments[u+2];s.children=c}return{$$typeof:go,type:t.type,key:i,ref:a,props:s,_owner:o}};oe.createContext=function(t){return t={$$typeof:P2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:A2,_context:t},t.Consumer=t};oe.createElement=Xy;oe.createFactory=function(t){var e=Xy.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:R2,render:t}};oe.isValidElement=Jh;oe.lazy=function(t){return{$$typeof:L2,_payload:{_status:-1,_result:t},_init:U2}};oe.memo=function(t,e){return{$$typeof:M2,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=yl.transition;yl.transition={};try{t()}finally{yl.transition=e}};oe.unstable_act=Jy;oe.useCallback=function(t,e){return jt.current.useCallback(t,e)};oe.useContext=function(t){return jt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return jt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return jt.current.useEffect(t,e)};oe.useId=function(){return jt.current.useId()};oe.useImperativeHandle=function(t,e,r){return jt.current.useImperativeHandle(t,e,r)};oe.useInsertionEffect=function(t,e){return jt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return jt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return jt.current.useMemo(t,e)};oe.useReducer=function(t,e,r){return jt.current.useReducer(t,e,r)};oe.useRef=function(t){return jt.current.useRef(t)};oe.useState=function(t){return jt.current.useState(t)};oe.useSyncExternalStore=function(t,e,r){return jt.current.useSyncExternalStore(t,e,r)};oe.useTransition=function(){return jt.current.useTransition()};oe.version="18.3.1";$y.exports=oe;var S=$y.exports;const Zy=E2(S),z2=k2({__proto__:null,default:Zy},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W2=S,$2=Symbol.for("react.element"),H2=Symbol.for("react.fragment"),q2=Object.prototype.hasOwnProperty,G2=W2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K2={key:!0,ref:!0,__self:!0,__source:!0};function ev(t,e,r){var s,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)q2.call(e,s)&&!K2.hasOwnProperty(s)&&(i[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:$2,type:t,key:a,ref:o,props:i,_owner:G2.current}}Mc.Fragment=H2;Mc.jsx=ev;Mc.jsxs=ev;Wy.exports=Mc;var n=Wy.exports,Tu={},tv={exports:{}},Ot={},rv={exports:{}},nv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,G){var Z=$.length;$.push(G);e:for(;0<Z;){var ke=Z-1>>>1,Me=$[ke];if(0<i(Me,G))$[ke]=G,$[Z]=Me,Z=ke;else break e}}function r($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var G=$[0],Z=$.pop();if(Z!==G){$[0]=Z;e:for(var ke=0,Me=$.length,Gn=Me>>>1;ke<Gn;){var Ut=2*(ke+1)-1,Kn=$[Ut],Xt=Ut+1,Gr=$[Xt];if(0>i(Kn,Z))Xt<Me&&0>i(Gr,Kn)?($[ke]=Gr,$[Xt]=Z,ke=Xt):($[ke]=Kn,$[Ut]=Z,ke=Ut);else if(Xt<Me&&0>i(Gr,Z))$[ke]=Gr,$[Xt]=Z,ke=Xt;else break e}}return G}function i($,G){var Z=$.sortIndex-G.sortIndex;return Z!==0?Z:$.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var d=[],u=[],m=1,f=null,p=3,b=!1,E=!1,k=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j($){for(var G=r(u);G!==null;){if(G.callback===null)s(u);else if(G.startTime<=$)s(u),G.sortIndex=G.expirationTime,e(d,G);else break;G=r(u)}}function I($){if(k=!1,j($),!E)if(r(d)!==null)E=!0,J(M);else{var G=r(u);G!==null&&Pe(I,G.startTime-$)}}function M($,G){E=!1,k&&(k=!1,y(w),w=-1),b=!0;var Z=p;try{for(j(G),f=r(d);f!==null&&(!(f.expirationTime>G)||$&&!D());){var ke=f.callback;if(typeof ke=="function"){f.callback=null,p=f.priorityLevel;var Me=ke(f.expirationTime<=G);G=t.unstable_now(),typeof Me=="function"?f.callback=Me:f===r(d)&&s(d),j(G)}else s(d);f=r(d)}if(f!==null)var Gn=!0;else{var Ut=r(u);Ut!==null&&Pe(I,Ut.startTime-G),Gn=!1}return Gn}finally{f=null,p=Z,b=!1}}var P=!1,N=null,w=-1,T=5,R=-1;function D(){return!(t.unstable_now()-R<T)}function A(){if(N!==null){var $=t.unstable_now();R=$;var G=!0;try{G=N(!0,$)}finally{G?C():(P=!1,N=null)}}else P=!1}var C;if(typeof v=="function")C=function(){v(A)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,B=se.port2;se.port1.onmessage=A,C=function(){B.postMessage(null)}}else C=function(){x(A,0)};function J($){N=$,P||(P=!0,C())}function Pe($,G){w=x(function(){$(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){E||b||(E=!0,J(M))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(d)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var Z=p;p=G;try{return $()}finally{p=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Z=p;p=$;try{return G()}finally{p=Z}},t.unstable_scheduleCallback=function($,G,Z){var ke=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ke+Z:ke):Z=ke,$){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=Z+Me,$={id:m++,callback:G,priorityLevel:$,startTime:Z,expirationTime:Me,sortIndex:-1},Z>ke?($.sortIndex=Z,e(u,$),r(d)===null&&$===r(u)&&(k?(y(w),w=-1):k=!0,Pe(I,Z-ke))):($.sortIndex=Me,e(d,$),E||b||(E=!0,J(M))),$},t.unstable_shouldYield=D,t.unstable_wrapCallback=function($){var G=p;return function(){var Z=p;p=G;try{return $.apply(this,arguments)}finally{p=Z}}}})(nv);rv.exports=nv;var Q2=rv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y2=S,Mt=Q2;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sv=new Set,Va={};function ws(t,e){ci(t,e),ci(t+"Capture",e)}function ci(t,e){for(Va[t]=e,t=0;t<e.length;t++)sv.add(e[t])}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Su=Object.prototype.hasOwnProperty,X2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bp={},zp={};function J2(t){return Su.call(zp,t)?!0:Su.call(Bp,t)?!1:X2.test(t)?zp[t]=!0:(Bp[t]=!0,!1)}function Z2(t,e,r,s){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eN(t,e,r,s){if(e===null||typeof e>"u"||Z2(t,e,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wt(t,e,r,s,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zh=/[\-:]([a-z])/g;function em(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zh,em);st[e]=new wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zh,em);st[e]=new wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zh,em);st[e]=new wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new wt(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function tm(t,e,r,s){var i=st.hasOwnProperty(e)?st[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eN(e,r,i,s)&&(r=null),s||i===null?J2(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,s=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,s?t.setAttributeNS(s,e,r):t.setAttribute(e,r))))}var $r=Y2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qo=Symbol.for("react.element"),Us=Symbol.for("react.portal"),Bs=Symbol.for("react.fragment"),rm=Symbol.for("react.strict_mode"),Iu=Symbol.for("react.profiler"),iv=Symbol.for("react.provider"),av=Symbol.for("react.context"),nm=Symbol.for("react.forward_ref"),Cu=Symbol.for("react.suspense"),Au=Symbol.for("react.suspense_list"),sm=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),ov=Symbol.for("react.offscreen"),Wp=Symbol.iterator;function Zi(t){return t===null||typeof t!="object"?null:(t=Wp&&t[Wp]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,Fd;function da(t){if(Fd===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Fd=e&&e[1]||""}return`
`+Fd+t}var Ud=!1;function Bd(t,e){if(!t||Ud)return"";Ud=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){s=u}t.call(e.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=s.stack.split(`
`),o=i.length-1,c=a.length-1;1<=o&&0<=c&&i[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==a[c]){var d=`
`+i[o].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=o&&0<=c);break}}}finally{Ud=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?da(t):""}function tN(t){switch(t.tag){case 5:return da(t.type);case 16:return da("Lazy");case 13:return da("Suspense");case 19:return da("SuspenseList");case 0:case 2:case 15:return t=Bd(t.type,!1),t;case 11:return t=Bd(t.type.render,!1),t;case 1:return t=Bd(t.type,!0),t;default:return""}}function Pu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bs:return"Fragment";case Us:return"Portal";case Iu:return"Profiler";case rm:return"StrictMode";case Cu:return"Suspense";case Au:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case av:return(t.displayName||"Context")+".Consumer";case iv:return(t._context.displayName||"Context")+".Provider";case nm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sm:return e=t.displayName||null,e!==null?e:Pu(t.type)||"Memo";case nn:e=t._payload,t=t._init;try{return Pu(t(e))}catch{}}return null}function rN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pu(e);case 8:return e===rm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function lv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nN(t){var e=lv(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yo(t){t._valueTracker||(t._valueTracker=nN(t))}function cv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),s="";return t&&(s=lv(t)?t.checked?"true":"false":t.value),t=s,t!==r?(e.setValue(t),!0):!1}function Bl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ru(t,e){var r=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function $p(t,e){var r=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;r=Cn(e.value!=null?e.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dv(t,e){e=e.checked,e!=null&&tm(t,"checked",e,!1)}function Du(t,e){dv(t,e);var r=Cn(e.value),s=e.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mu(t,e.type,r):e.hasOwnProperty("defaultValue")&&Mu(t,e.type,Cn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Hp(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Mu(t,e,r){(e!=="number"||Bl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ua=Array.isArray;function Zs(t,e,r,s){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&s&&(t[r].defaultSelected=!0)}else{for(r=""+Cn(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Lu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qp(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(z(92));if(ua(r)){if(1<r.length)throw Error(z(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Cn(r)}}function uv(t,e){var r=Cn(e.value),s=Cn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function Gp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xo,mv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,s,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,s,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xo=Xo||document.createElement("div"),Xo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Oa(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ja={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sN=["Webkit","ms","Moz","O"];Object.keys(ja).forEach(function(t){sN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ja[e]=ja[t]})});function fv(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ja.hasOwnProperty(t)&&ja[t]?(""+e).trim():e+"px"}function pv(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var s=r.indexOf("--")===0,i=fv(r,e[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,i):t[r]=i}}var iN=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ou(t,e){if(e){if(iN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Fu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uu=null;function im(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bu=null,ei=null,ti=null;function Kp(t){if(t=vo(t)){if(typeof Bu!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Uc(e),Bu(t.stateNode,t.type,e))}}function gv(t){ei?ti?ti.push(t):ti=[t]:ei=t}function xv(){if(ei){var t=ei,e=ti;if(ti=ei=null,Kp(t),e)for(t=0;t<e.length;t++)Kp(e[t])}}function yv(t,e){return t(e)}function vv(){}var zd=!1;function bv(t,e,r){if(zd)return t(e,r);zd=!0;try{return yv(t,e,r)}finally{zd=!1,(ei!==null||ti!==null)&&(vv(),xv())}}function Fa(t,e){var r=t.stateNode;if(r===null)return null;var s=Uc(r);if(s===null)return null;r=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(z(231,e,typeof r));return r}var zu=!1;if(Mr)try{var ea={};Object.defineProperty(ea,"passive",{get:function(){zu=!0}}),window.addEventListener("test",ea,ea),window.removeEventListener("test",ea,ea)}catch{zu=!1}function aN(t,e,r,s,i,a,o,c,d){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(m){this.onError(m)}}var wa=!1,zl=null,Wl=!1,Wu=null,oN={onError:function(t){wa=!0,zl=t}};function lN(t,e,r,s,i,a,o,c,d){wa=!1,zl=null,aN.apply(oN,arguments)}function cN(t,e,r,s,i,a,o,c,d){if(lN.apply(this,arguments),wa){if(wa){var u=zl;wa=!1,zl=null}else throw Error(z(198));Wl||(Wl=!0,Wu=u)}}function Ns(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function jv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qp(t){if(Ns(t)!==t)throw Error(z(188))}function dN(t){var e=t.alternate;if(!e){if(e=Ns(t),e===null)throw Error(z(188));return e!==t?null:t}for(var r=t,s=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){r=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Qp(i),t;if(a===s)return Qp(i),e;a=a.sibling}throw Error(z(188))}if(r.return!==s.return)r=i,s=a;else{for(var o=!1,c=i.child;c;){if(c===r){o=!0,r=i,s=a;break}if(c===s){o=!0,s=i,r=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===r){o=!0,r=a,s=i;break}if(c===s){o=!0,s=a,r=i;break}c=c.sibling}if(!o)throw Error(z(189))}}if(r.alternate!==s)throw Error(z(190))}if(r.tag!==3)throw Error(z(188));return r.stateNode.current===r?t:e}function wv(t){return t=dN(t),t!==null?Nv(t):null}function Nv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Nv(t);if(e!==null)return e;t=t.sibling}return null}var _v=Mt.unstable_scheduleCallback,Yp=Mt.unstable_cancelCallback,uN=Mt.unstable_shouldYield,hN=Mt.unstable_requestPaint,Oe=Mt.unstable_now,mN=Mt.unstable_getCurrentPriorityLevel,am=Mt.unstable_ImmediatePriority,kv=Mt.unstable_UserBlockingPriority,$l=Mt.unstable_NormalPriority,fN=Mt.unstable_LowPriority,Ev=Mt.unstable_IdlePriority,Lc=null,pr=null;function pN(t){if(pr&&typeof pr.onCommitFiberRoot=="function")try{pr.onCommitFiberRoot(Lc,t,void 0,(t.current.flags&128)===128)}catch{}}var sr=Math.clz32?Math.clz32:yN,gN=Math.log,xN=Math.LN2;function yN(t){return t>>>=0,t===0?32:31-(gN(t)/xN|0)|0}var Jo=64,Zo=4194304;function ha(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hl(t,e){var r=t.pendingLanes;if(r===0)return 0;var s=0,i=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var c=o&~i;c!==0?s=ha(c):(a&=o,a!==0&&(s=ha(a)))}else o=r&~i,o!==0?s=ha(o):a!==0&&(s=ha(a));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(s&4&&(s|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)r=31-sr(e),i=1<<r,s|=t[r],e&=~i;return s}function vN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bN(t,e){for(var r=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-sr(a),c=1<<o,d=i[o];d===-1?(!(c&r)||c&s)&&(i[o]=vN(c,e)):d<=e&&(t.expiredLanes|=c),a&=~c}}function $u(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Tv(){var t=Jo;return Jo<<=1,!(Jo&4194240)&&(Jo=64),t}function Wd(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function xo(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sr(e),t[e]=r}function jN(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-sr(r),a=1<<i;e[i]=0,s[i]=-1,t[i]=-1,r&=~a}}function om(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var s=31-sr(r),i=1<<s;i&e|t[s]&e&&(t[s]|=e),r&=~i}}var xe=0;function Sv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Iv,lm,Cv,Av,Pv,Hu=!1,el=[],gn=null,xn=null,yn=null,Ua=new Map,Ba=new Map,an=[],wN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xp(t,e){switch(t){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":yn=null;break;case"pointerover":case"pointerout":Ua.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ba.delete(e.pointerId)}}function ta(t,e,r,s,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},e!==null&&(e=vo(e),e!==null&&lm(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function NN(t,e,r,s,i){switch(e){case"focusin":return gn=ta(gn,t,e,r,s,i),!0;case"dragenter":return xn=ta(xn,t,e,r,s,i),!0;case"mouseover":return yn=ta(yn,t,e,r,s,i),!0;case"pointerover":var a=i.pointerId;return Ua.set(a,ta(Ua.get(a)||null,t,e,r,s,i)),!0;case"gotpointercapture":return a=i.pointerId,Ba.set(a,ta(Ba.get(a)||null,t,e,r,s,i)),!0}return!1}function Rv(t){var e=ss(t.target);if(e!==null){var r=Ns(e);if(r!==null){if(e=r.tag,e===13){if(e=jv(r),e!==null){t.blockedOn=e,Pv(t.priority,function(){Cv(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=qu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);Uu=s,r.target.dispatchEvent(s),Uu=null}else return e=vo(r),e!==null&&lm(e),t.blockedOn=r,!1;e.shift()}return!0}function Jp(t,e,r){vl(t)&&r.delete(e)}function _N(){Hu=!1,gn!==null&&vl(gn)&&(gn=null),xn!==null&&vl(xn)&&(xn=null),yn!==null&&vl(yn)&&(yn=null),Ua.forEach(Jp),Ba.forEach(Jp)}function ra(t,e){t.blockedOn===e&&(t.blockedOn=null,Hu||(Hu=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,_N)))}function za(t){function e(i){return ra(i,t)}if(0<el.length){ra(el[0],t);for(var r=1;r<el.length;r++){var s=el[r];s.blockedOn===t&&(s.blockedOn=null)}}for(gn!==null&&ra(gn,t),xn!==null&&ra(xn,t),yn!==null&&ra(yn,t),Ua.forEach(e),Ba.forEach(e),r=0;r<an.length;r++)s=an[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<an.length&&(r=an[0],r.blockedOn===null);)Rv(r),r.blockedOn===null&&an.shift()}var ri=$r.ReactCurrentBatchConfig,ql=!0;function kN(t,e,r,s){var i=xe,a=ri.transition;ri.transition=null;try{xe=1,cm(t,e,r,s)}finally{xe=i,ri.transition=a}}function EN(t,e,r,s){var i=xe,a=ri.transition;ri.transition=null;try{xe=4,cm(t,e,r,s)}finally{xe=i,ri.transition=a}}function cm(t,e,r,s){if(ql){var i=qu(t,e,r,s);if(i===null)Zd(t,e,s,Gl,r),Xp(t,s);else if(NN(i,t,e,r,s))s.stopPropagation();else if(Xp(t,s),e&4&&-1<wN.indexOf(t)){for(;i!==null;){var a=vo(i);if(a!==null&&Iv(a),a=qu(t,e,r,s),a===null&&Zd(t,e,s,Gl,r),a===i)break;i=a}i!==null&&s.stopPropagation()}else Zd(t,e,s,null,r)}}var Gl=null;function qu(t,e,r,s){if(Gl=null,t=im(s),t=ss(t),t!==null)if(e=Ns(t),e===null)t=null;else if(r=e.tag,r===13){if(t=jv(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gl=t,null}function Dv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mN()){case am:return 1;case kv:return 4;case $l:case fN:return 16;case Ev:return 536870912;default:return 16}default:return 16}}var hn=null,dm=null,bl=null;function Mv(){if(bl)return bl;var t,e=dm,r=e.length,s,i="value"in hn?hn.value:hn.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(s=1;s<=o&&e[r-s]===i[a-s];s++);return bl=i.slice(t,1<s?1-s:void 0)}function jl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tl(){return!0}function Zp(){return!1}function Ft(t){function e(r,s,i,a,o){this._reactName=r,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(r=t[c],this[c]=r?r(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?tl:Zp,this.isPropagationStopped=Zp,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=tl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=tl)},persist:function(){},isPersistent:tl}),e}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},um=Ft(_i),yo=Ce({},_i,{view:0,detail:0}),TN=Ft(yo),$d,Hd,na,Vc=Ce({},yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==na&&(na&&t.type==="mousemove"?($d=t.screenX-na.screenX,Hd=t.screenY-na.screenY):Hd=$d=0,na=t),$d)},movementY:function(t){return"movementY"in t?t.movementY:Hd}}),eg=Ft(Vc),SN=Ce({},Vc,{dataTransfer:0}),IN=Ft(SN),CN=Ce({},yo,{relatedTarget:0}),qd=Ft(CN),AN=Ce({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),PN=Ft(AN),RN=Ce({},_i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DN=Ft(RN),MN=Ce({},_i,{data:0}),tg=Ft(MN),LN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ON={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ON[t])?!!e[t]:!1}function hm(){return FN}var UN=Ce({},yo,{key:function(t){if(t.key){var e=LN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hm,charCode:function(t){return t.type==="keypress"?jl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),BN=Ft(UN),zN=Ce({},Vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rg=Ft(zN),WN=Ce({},yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hm}),$N=Ft(WN),HN=Ce({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),qN=Ft(HN),GN=Ce({},Vc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),KN=Ft(GN),QN=[9,13,27,32],mm=Mr&&"CompositionEvent"in window,Na=null;Mr&&"documentMode"in document&&(Na=document.documentMode);var YN=Mr&&"TextEvent"in window&&!Na,Lv=Mr&&(!mm||Na&&8<Na&&11>=Na),ng=" ",sg=!1;function Vv(t,e){switch(t){case"keyup":return QN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ov(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zs=!1;function XN(t,e){switch(t){case"compositionend":return Ov(e);case"keypress":return e.which!==32?null:(sg=!0,ng);case"textInput":return t=e.data,t===ng&&sg?null:t;default:return null}}function JN(t,e){if(zs)return t==="compositionend"||!mm&&Vv(t,e)?(t=Mv(),bl=dm=hn=null,zs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Lv&&e.locale!=="ko"?null:e.data;default:return null}}var ZN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ig(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ZN[t.type]:e==="textarea"}function Fv(t,e,r,s){gv(s),e=Kl(e,"onChange"),0<e.length&&(r=new um("onChange","change",null,r,s),t.push({event:r,listeners:e}))}var _a=null,Wa=null;function e1(t){Yv(t,0)}function Oc(t){var e=Hs(t);if(cv(e))return t}function t1(t,e){if(t==="change")return e}var Uv=!1;if(Mr){var Gd;if(Mr){var Kd="oninput"in document;if(!Kd){var ag=document.createElement("div");ag.setAttribute("oninput","return;"),Kd=typeof ag.oninput=="function"}Gd=Kd}else Gd=!1;Uv=Gd&&(!document.documentMode||9<document.documentMode)}function og(){_a&&(_a.detachEvent("onpropertychange",Bv),Wa=_a=null)}function Bv(t){if(t.propertyName==="value"&&Oc(Wa)){var e=[];Fv(e,Wa,t,im(t)),bv(e1,e)}}function r1(t,e,r){t==="focusin"?(og(),_a=e,Wa=r,_a.attachEvent("onpropertychange",Bv)):t==="focusout"&&og()}function n1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oc(Wa)}function s1(t,e){if(t==="click")return Oc(e)}function i1(t,e){if(t==="input"||t==="change")return Oc(e)}function a1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ar=typeof Object.is=="function"?Object.is:a1;function $a(t,e){if(ar(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var i=r[s];if(!Su.call(e,i)||!ar(t[i],e[i]))return!1}return!0}function lg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cg(t,e){var r=lg(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=e&&s>=e)return{node:r,offset:e-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lg(r)}}function zv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Wv(){for(var t=window,e=Bl();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Bl(t.document)}return e}function fm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function o1(t){var e=Wv(),r=t.focusedElem,s=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&zv(r.ownerDocument.documentElement,r)){if(s!==null&&fm(r)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!t.extend&&a>s&&(i=s,s=a,a=i),i=cg(r,a);var o=cg(r,s);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var l1=Mr&&"documentMode"in document&&11>=document.documentMode,Ws=null,Gu=null,ka=null,Ku=!1;function dg(t,e,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ku||Ws==null||Ws!==Bl(s)||(s=Ws,"selectionStart"in s&&fm(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ka&&$a(ka,s)||(ka=s,s=Kl(Gu,"onSelect"),0<s.length&&(e=new um("onSelect","select",null,e,r),t.push({event:e,listeners:s}),e.target=Ws)))}function rl(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var $s={animationend:rl("Animation","AnimationEnd"),animationiteration:rl("Animation","AnimationIteration"),animationstart:rl("Animation","AnimationStart"),transitionend:rl("Transition","TransitionEnd")},Qd={},$v={};Mr&&($v=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function Fc(t){if(Qd[t])return Qd[t];if(!$s[t])return t;var e=$s[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in $v)return Qd[t]=e[r];return t}var Hv=Fc("animationend"),qv=Fc("animationiteration"),Gv=Fc("animationstart"),Kv=Fc("transitionend"),Qv=new Map,ug="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Un(t,e){Qv.set(t,e),ws(e,[t])}for(var Yd=0;Yd<ug.length;Yd++){var Xd=ug[Yd],c1=Xd.toLowerCase(),d1=Xd[0].toUpperCase()+Xd.slice(1);Un(c1,"on"+d1)}Un(Hv,"onAnimationEnd");Un(qv,"onAnimationIteration");Un(Gv,"onAnimationStart");Un("dblclick","onDoubleClick");Un("focusin","onFocus");Un("focusout","onBlur");Un(Kv,"onTransitionEnd");ci("onMouseEnter",["mouseout","mouseover"]);ci("onMouseLeave",["mouseout","mouseover"]);ci("onPointerEnter",["pointerout","pointerover"]);ci("onPointerLeave",["pointerout","pointerover"]);ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u1=new Set("cancel close invalid load scroll toggle".split(" ").concat(ma));function hg(t,e,r){var s=t.type||"unknown-event";t.currentTarget=r,cN(s,e,void 0,t),t.currentTarget=null}function Yv(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],i=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var o=s.length-1;0<=o;o--){var c=s[o],d=c.instance,u=c.currentTarget;if(c=c.listener,d!==a&&i.isPropagationStopped())break e;hg(i,c,u),a=d}else for(o=0;o<s.length;o++){if(c=s[o],d=c.instance,u=c.currentTarget,c=c.listener,d!==a&&i.isPropagationStopped())break e;hg(i,c,u),a=d}}}if(Wl)throw t=Wu,Wl=!1,Wu=null,t}function we(t,e){var r=e[Zu];r===void 0&&(r=e[Zu]=new Set);var s=t+"__bubble";r.has(s)||(Xv(e,t,2,!1),r.add(s))}function Jd(t,e,r){var s=0;e&&(s|=4),Xv(r,t,s,e)}var nl="_reactListening"+Math.random().toString(36).slice(2);function Ha(t){if(!t[nl]){t[nl]=!0,sv.forEach(function(r){r!=="selectionchange"&&(u1.has(r)||Jd(r,!1,t),Jd(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nl]||(e[nl]=!0,Jd("selectionchange",!1,e))}}function Xv(t,e,r,s){switch(Dv(e)){case 1:var i=kN;break;case 4:i=EN;break;default:i=cm}r=i.bind(null,e,r,t),i=void 0,!zu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Zd(t,e,r,s,i){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var c=s.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;o=o.return}for(;c!==null;){if(o=ss(c),o===null)return;if(d=o.tag,d===5||d===6){s=a=o;continue e}c=c.parentNode}}s=s.return}bv(function(){var u=a,m=im(r),f=[];e:{var p=Qv.get(t);if(p!==void 0){var b=um,E=t;switch(t){case"keypress":if(jl(r)===0)break e;case"keydown":case"keyup":b=BN;break;case"focusin":E="focus",b=qd;break;case"focusout":E="blur",b=qd;break;case"beforeblur":case"afterblur":b=qd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=eg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=IN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=$N;break;case Hv:case qv:case Gv:b=PN;break;case Kv:b=qN;break;case"scroll":b=TN;break;case"wheel":b=KN;break;case"copy":case"cut":case"paste":b=DN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=rg}var k=(e&4)!==0,x=!k&&t==="scroll",y=k?p!==null?p+"Capture":null:p;k=[];for(var v=u,j;v!==null;){j=v;var I=j.stateNode;if(j.tag===5&&I!==null&&(j=I,y!==null&&(I=Fa(v,y),I!=null&&k.push(qa(v,I,j)))),x)break;v=v.return}0<k.length&&(p=new b(p,E,null,r,m),f.push({event:p,listeners:k}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",p&&r!==Uu&&(E=r.relatedTarget||r.fromElement)&&(ss(E)||E[Lr]))break e;if((b||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,b?(E=r.relatedTarget||r.toElement,b=u,E=E?ss(E):null,E!==null&&(x=Ns(E),E!==x||E.tag!==5&&E.tag!==6)&&(E=null)):(b=null,E=u),b!==E)){if(k=eg,I="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(k=rg,I="onPointerLeave",y="onPointerEnter",v="pointer"),x=b==null?p:Hs(b),j=E==null?p:Hs(E),p=new k(I,v+"leave",b,r,m),p.target=x,p.relatedTarget=j,I=null,ss(m)===u&&(k=new k(y,v+"enter",E,r,m),k.target=j,k.relatedTarget=x,I=k),x=I,b&&E)t:{for(k=b,y=E,v=0,j=k;j;j=Rs(j))v++;for(j=0,I=y;I;I=Rs(I))j++;for(;0<v-j;)k=Rs(k),v--;for(;0<j-v;)y=Rs(y),j--;for(;v--;){if(k===y||y!==null&&k===y.alternate)break t;k=Rs(k),y=Rs(y)}k=null}else k=null;b!==null&&mg(f,p,b,k,!1),E!==null&&x!==null&&mg(f,x,E,k,!0)}}e:{if(p=u?Hs(u):window,b=p.nodeName&&p.nodeName.toLowerCase(),b==="select"||b==="input"&&p.type==="file")var M=t1;else if(ig(p))if(Uv)M=i1;else{M=n1;var P=r1}else(b=p.nodeName)&&b.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=s1);if(M&&(M=M(t,u))){Fv(f,M,r,m);break e}P&&P(t,p,u),t==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&Mu(p,"number",p.value)}switch(P=u?Hs(u):window,t){case"focusin":(ig(P)||P.contentEditable==="true")&&(Ws=P,Gu=u,ka=null);break;case"focusout":ka=Gu=Ws=null;break;case"mousedown":Ku=!0;break;case"contextmenu":case"mouseup":case"dragend":Ku=!1,dg(f,r,m);break;case"selectionchange":if(l1)break;case"keydown":case"keyup":dg(f,r,m)}var N;if(mm)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zs?Vv(t,r)&&(w="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(w="onCompositionStart");w&&(Lv&&r.locale!=="ko"&&(zs||w!=="onCompositionStart"?w==="onCompositionEnd"&&zs&&(N=Mv()):(hn=m,dm="value"in hn?hn.value:hn.textContent,zs=!0)),P=Kl(u,w),0<P.length&&(w=new tg(w,t,null,r,m),f.push({event:w,listeners:P}),N?w.data=N:(N=Ov(r),N!==null&&(w.data=N)))),(N=YN?XN(t,r):JN(t,r))&&(u=Kl(u,"onBeforeInput"),0<u.length&&(m=new tg("onBeforeInput","beforeinput",null,r,m),f.push({event:m,listeners:u}),m.data=N))}Yv(f,e)})}function qa(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Kl(t,e){for(var r=e+"Capture",s=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Fa(t,r),a!=null&&s.unshift(qa(t,a,i)),a=Fa(t,e),a!=null&&s.push(qa(t,a,i))),t=t.return}return s}function Rs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mg(t,e,r,s,i){for(var a=e._reactName,o=[];r!==null&&r!==s;){var c=r,d=c.alternate,u=c.stateNode;if(d!==null&&d===s)break;c.tag===5&&u!==null&&(c=u,i?(d=Fa(r,a),d!=null&&o.unshift(qa(r,d,c))):i||(d=Fa(r,a),d!=null&&o.push(qa(r,d,c)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var h1=/\r\n?/g,m1=/\u0000|\uFFFD/g;function fg(t){return(typeof t=="string"?t:""+t).replace(h1,`
`).replace(m1,"")}function sl(t,e,r){if(e=fg(e),fg(t)!==e&&r)throw Error(z(425))}function Ql(){}var Qu=null,Yu=null;function Xu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ju=typeof setTimeout=="function"?setTimeout:void 0,f1=typeof clearTimeout=="function"?clearTimeout:void 0,pg=typeof Promise=="function"?Promise:void 0,p1=typeof queueMicrotask=="function"?queueMicrotask:typeof pg<"u"?function(t){return pg.resolve(null).then(t).catch(g1)}:Ju;function g1(t){setTimeout(function(){throw t})}function eu(t,e){var r=e,s=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(s===0){t.removeChild(i),za(e);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=i}while(r);za(e)}function vn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ki=Math.random().toString(36).slice(2),fr="__reactFiber$"+ki,Ga="__reactProps$"+ki,Lr="__reactContainer$"+ki,Zu="__reactEvents$"+ki,x1="__reactListeners$"+ki,y1="__reactHandles$"+ki;function ss(t){var e=t[fr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Lr]||r[fr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=gg(t);t!==null;){if(r=t[fr])return r;t=gg(t)}return e}t=r,r=t.parentNode}return null}function vo(t){return t=t[fr]||t[Lr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Uc(t){return t[Ga]||null}var eh=[],qs=-1;function Bn(t){return{current:t}}function _e(t){0>qs||(t.current=eh[qs],eh[qs]=null,qs--)}function be(t,e){qs++,eh[qs]=t.current,t.current=e}var An={},ft=Bn(An),Et=Bn(!1),us=An;function di(t,e){var r=t.type.contextTypes;if(!r)return An;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Tt(t){return t=t.childContextTypes,t!=null}function Yl(){_e(Et),_e(ft)}function xg(t,e,r){if(ft.current!==An)throw Error(z(168));be(ft,e),be(Et,r)}function Jv(t,e,r){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(z(108,rN(t)||"Unknown",i));return Ce({},r,s)}function Xl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||An,us=ft.current,be(ft,t),be(Et,Et.current),!0}function yg(t,e,r){var s=t.stateNode;if(!s)throw Error(z(169));r?(t=Jv(t,e,us),s.__reactInternalMemoizedMergedChildContext=t,_e(Et),_e(ft),be(ft,t)):_e(Et),be(Et,r)}var Tr=null,Bc=!1,tu=!1;function Zv(t){Tr===null?Tr=[t]:Tr.push(t)}function v1(t){Bc=!0,Zv(t)}function zn(){if(!tu&&Tr!==null){tu=!0;var t=0,e=xe;try{var r=Tr;for(xe=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}Tr=null,Bc=!1}catch(i){throw Tr!==null&&(Tr=Tr.slice(t+1)),_v(am,zn),i}finally{xe=e,tu=!1}}return null}var Gs=[],Ks=0,Jl=null,Zl=0,Bt=[],zt=0,hs=null,Sr=1,Ir="";function es(t,e){Gs[Ks++]=Zl,Gs[Ks++]=Jl,Jl=t,Zl=e}function e0(t,e,r){Bt[zt++]=Sr,Bt[zt++]=Ir,Bt[zt++]=hs,hs=t;var s=Sr;t=Ir;var i=32-sr(s)-1;s&=~(1<<i),r+=1;var a=32-sr(e)+i;if(30<a){var o=i-i%5;a=(s&(1<<o)-1).toString(32),s>>=o,i-=o,Sr=1<<32-sr(e)+i|r<<i|s,Ir=a+t}else Sr=1<<a|r<<i|s,Ir=t}function pm(t){t.return!==null&&(es(t,1),e0(t,1,0))}function gm(t){for(;t===Jl;)Jl=Gs[--Ks],Gs[Ks]=null,Zl=Gs[--Ks],Gs[Ks]=null;for(;t===hs;)hs=Bt[--zt],Bt[zt]=null,Ir=Bt[--zt],Bt[zt]=null,Sr=Bt[--zt],Bt[zt]=null}var Dt=null,Rt=null,Ee=!1,tr=null;function t0(t,e){var r=qt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function vg(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,Rt=vn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=hs!==null?{id:Sr,overflow:Ir}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=qt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Dt=t,Rt=null,!0):!1;default:return!1}}function th(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rh(t){if(Ee){var e=Rt;if(e){var r=e;if(!vg(t,e)){if(th(t))throw Error(z(418));e=vn(r.nextSibling);var s=Dt;e&&vg(t,e)?t0(s,r):(t.flags=t.flags&-4097|2,Ee=!1,Dt=t)}}else{if(th(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ee=!1,Dt=t}}}function bg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function il(t){if(t!==Dt)return!1;if(!Ee)return bg(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xu(t.type,t.memoizedProps)),e&&(e=Rt)){if(th(t))throw r0(),Error(z(418));for(;e;)t0(t,e),e=vn(e.nextSibling)}if(bg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Rt=vn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=Dt?vn(t.stateNode.nextSibling):null;return!0}function r0(){for(var t=Rt;t;)t=vn(t.nextSibling)}function ui(){Rt=Dt=null,Ee=!1}function xm(t){tr===null?tr=[t]:tr.push(t)}var b1=$r.ReactCurrentBatchConfig;function sa(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(z(309));var s=r.stateNode}if(!s)throw Error(z(147,t));var i=s,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var c=i.refs;o===null?delete c[a]:c[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(z(284));if(!r._owner)throw Error(z(290,t))}return t}function al(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jg(t){var e=t._init;return e(t._payload)}function n0(t){function e(y,v){if(t){var j=y.deletions;j===null?(y.deletions=[v],y.flags|=16):j.push(v)}}function r(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function s(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Nn(y,v),y.index=0,y.sibling=null,y}function a(y,v,j){return y.index=j,t?(j=y.alternate,j!==null?(j=j.index,j<v?(y.flags|=2,v):j):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function c(y,v,j,I){return v===null||v.tag!==6?(v=lu(j,y.mode,I),v.return=y,v):(v=i(v,j),v.return=y,v)}function d(y,v,j,I){var M=j.type;return M===Bs?m(y,v,j.props.children,I,j.key):v!==null&&(v.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===nn&&jg(M)===v.type)?(I=i(v,j.props),I.ref=sa(y,v,j),I.return=y,I):(I=Sl(j.type,j.key,j.props,null,y.mode,I),I.ref=sa(y,v,j),I.return=y,I)}function u(y,v,j,I){return v===null||v.tag!==4||v.stateNode.containerInfo!==j.containerInfo||v.stateNode.implementation!==j.implementation?(v=cu(j,y.mode,I),v.return=y,v):(v=i(v,j.children||[]),v.return=y,v)}function m(y,v,j,I,M){return v===null||v.tag!==7?(v=cs(j,y.mode,I,M),v.return=y,v):(v=i(v,j),v.return=y,v)}function f(y,v,j){if(typeof v=="string"&&v!==""||typeof v=="number")return v=lu(""+v,y.mode,j),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Qo:return j=Sl(v.type,v.key,v.props,null,y.mode,j),j.ref=sa(y,null,v),j.return=y,j;case Us:return v=cu(v,y.mode,j),v.return=y,v;case nn:var I=v._init;return f(y,I(v._payload),j)}if(ua(v)||Zi(v))return v=cs(v,y.mode,j,null),v.return=y,v;al(y,v)}return null}function p(y,v,j,I){var M=v!==null?v.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return M!==null?null:c(y,v,""+j,I);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Qo:return j.key===M?d(y,v,j,I):null;case Us:return j.key===M?u(y,v,j,I):null;case nn:return M=j._init,p(y,v,M(j._payload),I)}if(ua(j)||Zi(j))return M!==null?null:m(y,v,j,I,null);al(y,j)}return null}function b(y,v,j,I,M){if(typeof I=="string"&&I!==""||typeof I=="number")return y=y.get(j)||null,c(v,y,""+I,M);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Qo:return y=y.get(I.key===null?j:I.key)||null,d(v,y,I,M);case Us:return y=y.get(I.key===null?j:I.key)||null,u(v,y,I,M);case nn:var P=I._init;return b(y,v,j,P(I._payload),M)}if(ua(I)||Zi(I))return y=y.get(j)||null,m(v,y,I,M,null);al(v,I)}return null}function E(y,v,j,I){for(var M=null,P=null,N=v,w=v=0,T=null;N!==null&&w<j.length;w++){N.index>w?(T=N,N=null):T=N.sibling;var R=p(y,N,j[w],I);if(R===null){N===null&&(N=T);break}t&&N&&R.alternate===null&&e(y,N),v=a(R,v,w),P===null?M=R:P.sibling=R,P=R,N=T}if(w===j.length)return r(y,N),Ee&&es(y,w),M;if(N===null){for(;w<j.length;w++)N=f(y,j[w],I),N!==null&&(v=a(N,v,w),P===null?M=N:P.sibling=N,P=N);return Ee&&es(y,w),M}for(N=s(y,N);w<j.length;w++)T=b(N,y,w,j[w],I),T!==null&&(t&&T.alternate!==null&&N.delete(T.key===null?w:T.key),v=a(T,v,w),P===null?M=T:P.sibling=T,P=T);return t&&N.forEach(function(D){return e(y,D)}),Ee&&es(y,w),M}function k(y,v,j,I){var M=Zi(j);if(typeof M!="function")throw Error(z(150));if(j=M.call(j),j==null)throw Error(z(151));for(var P=M=null,N=v,w=v=0,T=null,R=j.next();N!==null&&!R.done;w++,R=j.next()){N.index>w?(T=N,N=null):T=N.sibling;var D=p(y,N,R.value,I);if(D===null){N===null&&(N=T);break}t&&N&&D.alternate===null&&e(y,N),v=a(D,v,w),P===null?M=D:P.sibling=D,P=D,N=T}if(R.done)return r(y,N),Ee&&es(y,w),M;if(N===null){for(;!R.done;w++,R=j.next())R=f(y,R.value,I),R!==null&&(v=a(R,v,w),P===null?M=R:P.sibling=R,P=R);return Ee&&es(y,w),M}for(N=s(y,N);!R.done;w++,R=j.next())R=b(N,y,w,R.value,I),R!==null&&(t&&R.alternate!==null&&N.delete(R.key===null?w:R.key),v=a(R,v,w),P===null?M=R:P.sibling=R,P=R);return t&&N.forEach(function(A){return e(y,A)}),Ee&&es(y,w),M}function x(y,v,j,I){if(typeof j=="object"&&j!==null&&j.type===Bs&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Qo:e:{for(var M=j.key,P=v;P!==null;){if(P.key===M){if(M=j.type,M===Bs){if(P.tag===7){r(y,P.sibling),v=i(P,j.props.children),v.return=y,y=v;break e}}else if(P.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===nn&&jg(M)===P.type){r(y,P.sibling),v=i(P,j.props),v.ref=sa(y,P,j),v.return=y,y=v;break e}r(y,P);break}else e(y,P);P=P.sibling}j.type===Bs?(v=cs(j.props.children,y.mode,I,j.key),v.return=y,y=v):(I=Sl(j.type,j.key,j.props,null,y.mode,I),I.ref=sa(y,v,j),I.return=y,y=I)}return o(y);case Us:e:{for(P=j.key;v!==null;){if(v.key===P)if(v.tag===4&&v.stateNode.containerInfo===j.containerInfo&&v.stateNode.implementation===j.implementation){r(y,v.sibling),v=i(v,j.children||[]),v.return=y,y=v;break e}else{r(y,v);break}else e(y,v);v=v.sibling}v=cu(j,y.mode,I),v.return=y,y=v}return o(y);case nn:return P=j._init,x(y,v,P(j._payload),I)}if(ua(j))return E(y,v,j,I);if(Zi(j))return k(y,v,j,I);al(y,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,v!==null&&v.tag===6?(r(y,v.sibling),v=i(v,j),v.return=y,y=v):(r(y,v),v=lu(j,y.mode,I),v.return=y,y=v),o(y)):r(y,v)}return x}var hi=n0(!0),s0=n0(!1),ec=Bn(null),tc=null,Qs=null,ym=null;function vm(){ym=Qs=tc=null}function bm(t){var e=ec.current;_e(ec),t._currentValue=e}function nh(t,e,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===r)break;t=t.return}}function ni(t,e){tc=t,ym=Qs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kt=!0),t.firstContext=null)}function Kt(t){var e=t._currentValue;if(ym!==t)if(t={context:t,memoizedValue:e,next:null},Qs===null){if(tc===null)throw Error(z(308));Qs=t,tc.dependencies={lanes:0,firstContext:t}}else Qs=Qs.next=t;return e}var is=null;function jm(t){is===null?is=[t]:is.push(t)}function i0(t,e,r,s){var i=e.interleaved;return i===null?(r.next=r,jm(e)):(r.next=i.next,i.next=r),e.interleaved=r,Vr(t,s)}function Vr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var sn=!1;function wm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function a0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function bn(t,e,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,fe&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,Vr(t,r)}return i=s.interleaved,i===null?(e.next=e,jm(s)):(e.next=i.next,i.next=e),s.interleaved=e,Vr(t,r)}function wl(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,om(t,r)}}function wg(t,e){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function rc(t,e,r,s){var i=t.updateQueue;sn=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,u=d.next;d.next=null,o===null?a=u:o.next=u,o=d;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=u:c.next=u,m.lastBaseUpdate=d))}if(a!==null){var f=i.baseState;o=0,m=u=d=null,c=a;do{var p=c.lane,b=c.eventTime;if((s&p)===p){m!==null&&(m=m.next={eventTime:b,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var E=t,k=c;switch(p=e,b=r,k.tag){case 1:if(E=k.payload,typeof E=="function"){f=E.call(b,f,p);break e}f=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=k.payload,p=typeof E=="function"?E.call(b,f,p):E,p==null)break e;f=Ce({},f,p);break e;case 2:sn=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[c]:p.push(c))}else b={eventTime:b,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(u=m=b,d=f):m=m.next=b,o|=p;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;p=c,c=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(m===null&&(d=f),i.baseState=d,i.firstBaseUpdate=u,i.lastBaseUpdate=m,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);fs|=o,t.lanes=o,t.memoizedState=f}}function Ng(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],i=s.callback;if(i!==null){if(s.callback=null,s=r,typeof i!="function")throw Error(z(191,i));i.call(s)}}}var bo={},gr=Bn(bo),Ka=Bn(bo),Qa=Bn(bo);function as(t){if(t===bo)throw Error(z(174));return t}function Nm(t,e){switch(be(Qa,e),be(Ka,t),be(gr,bo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vu(e,t)}_e(gr),be(gr,e)}function mi(){_e(gr),_e(Ka),_e(Qa)}function o0(t){as(Qa.current);var e=as(gr.current),r=Vu(e,t.type);e!==r&&(be(Ka,t),be(gr,r))}function _m(t){Ka.current===t&&(_e(gr),_e(Ka))}var Te=Bn(0);function nc(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ru=[];function km(){for(var t=0;t<ru.length;t++)ru[t]._workInProgressVersionPrimary=null;ru.length=0}var Nl=$r.ReactCurrentDispatcher,nu=$r.ReactCurrentBatchConfig,ms=0,Ie=null,$e=null,Ye=null,sc=!1,Ea=!1,Ya=0,j1=0;function ot(){throw Error(z(321))}function Em(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ar(t[r],e[r]))return!1;return!0}function Tm(t,e,r,s,i,a){if(ms=a,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nl.current=t===null||t.memoizedState===null?k1:E1,t=r(s,i),Ea){a=0;do{if(Ea=!1,Ya=0,25<=a)throw Error(z(301));a+=1,Ye=$e=null,e.updateQueue=null,Nl.current=T1,t=r(s,i)}while(Ea)}if(Nl.current=ic,e=$e!==null&&$e.next!==null,ms=0,Ye=$e=Ie=null,sc=!1,e)throw Error(z(300));return t}function Sm(){var t=Ya!==0;return Ya=0,t}function hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Ie.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function Qt(){if($e===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Ye===null?Ie.memoizedState:Ye.next;if(e!==null)Ye=e,$e=t;else{if(t===null)throw Error(z(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ye===null?Ie.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function Xa(t,e){return typeof e=="function"?e(t):e}function su(t){var e=Qt(),r=e.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=t;var s=$e,i=s.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}s.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,s=s.baseState;var c=o=null,d=null,u=a;do{var m=u.lane;if((ms&m)===m)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var f={lane:m,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(c=d=f,o=s):d=d.next=f,Ie.lanes|=m,fs|=m}u=u.next}while(u!==null&&u!==a);d===null?o=s:d.next=c,ar(s,e.memoizedState)||(kt=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=d,r.lastRenderedState=s}if(t=r.interleaved,t!==null){i=t;do a=i.lane,Ie.lanes|=a,fs|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function iu(t){var e=Qt(),r=e.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=t;var s=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);ar(a,e.memoizedState)||(kt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,s]}function l0(){}function c0(t,e){var r=Ie,s=Qt(),i=e(),a=!ar(s.memoizedState,i);if(a&&(s.memoizedState=i,kt=!0),s=s.queue,Im(h0.bind(null,r,s,t),[t]),s.getSnapshot!==e||a||Ye!==null&&Ye.memoizedState.tag&1){if(r.flags|=2048,Ja(9,u0.bind(null,r,s,i,e),void 0,null),Je===null)throw Error(z(349));ms&30||d0(r,e,i)}return i}function d0(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function u0(t,e,r,s){e.value=r,e.getSnapshot=s,m0(e)&&f0(t)}function h0(t,e,r){return r(function(){m0(e)&&f0(t)})}function m0(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ar(t,r)}catch{return!0}}function f0(t){var e=Vr(t,1);e!==null&&ir(e,t,1,-1)}function _g(t){var e=hr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:t},e.queue=t,t=t.dispatch=_1.bind(null,Ie,t),[e.memoizedState,t]}function Ja(t,e,r,s){return t={tag:t,create:e,destroy:r,deps:s,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,e.lastEffect=t)),t}function p0(){return Qt().memoizedState}function _l(t,e,r,s){var i=hr();Ie.flags|=t,i.memoizedState=Ja(1|e,r,void 0,s===void 0?null:s)}function zc(t,e,r,s){var i=Qt();s=s===void 0?null:s;var a=void 0;if($e!==null){var o=$e.memoizedState;if(a=o.destroy,s!==null&&Em(s,o.deps)){i.memoizedState=Ja(e,r,a,s);return}}Ie.flags|=t,i.memoizedState=Ja(1|e,r,a,s)}function kg(t,e){return _l(8390656,8,t,e)}function Im(t,e){return zc(2048,8,t,e)}function g0(t,e){return zc(4,2,t,e)}function x0(t,e){return zc(4,4,t,e)}function y0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function v0(t,e,r){return r=r!=null?r.concat([t]):null,zc(4,4,y0.bind(null,e,t),r)}function Cm(){}function b0(t,e){var r=Qt();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Em(e,s[1])?s[0]:(r.memoizedState=[t,e],t)}function j0(t,e){var r=Qt();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Em(e,s[1])?s[0]:(t=t(),r.memoizedState=[t,e],t)}function w0(t,e,r){return ms&21?(ar(r,e)||(r=Tv(),Ie.lanes|=r,fs|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kt=!0),t.memoizedState=r)}function w1(t,e){var r=xe;xe=r!==0&&4>r?r:4,t(!0);var s=nu.transition;nu.transition={};try{t(!1),e()}finally{xe=r,nu.transition=s}}function N0(){return Qt().memoizedState}function N1(t,e,r){var s=wn(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},_0(t))k0(e,r);else if(r=i0(t,e,r,s),r!==null){var i=vt();ir(r,t,s,i),E0(r,e,s)}}function _1(t,e,r){var s=wn(t),i={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(_0(t))k0(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,c=a(o,r);if(i.hasEagerState=!0,i.eagerState=c,ar(c,o)){var d=e.interleaved;d===null?(i.next=i,jm(e)):(i.next=d.next,d.next=i),e.interleaved=i;return}}catch{}finally{}r=i0(t,e,i,s),r!==null&&(i=vt(),ir(r,t,s,i),E0(r,e,s))}}function _0(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function k0(t,e){Ea=sc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function E0(t,e,r){if(r&4194240){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,om(t,r)}}var ic={readContext:Kt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},k1={readContext:Kt,useCallback:function(t,e){return hr().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:kg,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,_l(4194308,4,y0.bind(null,e,t),r)},useLayoutEffect:function(t,e){return _l(4194308,4,t,e)},useInsertionEffect:function(t,e){return _l(4,2,t,e)},useMemo:function(t,e){var r=hr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var s=hr();return e=r!==void 0?r(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=N1.bind(null,Ie,t),[s.memoizedState,t]},useRef:function(t){var e=hr();return t={current:t},e.memoizedState=t},useState:_g,useDebugValue:Cm,useDeferredValue:function(t){return hr().memoizedState=t},useTransition:function(){var t=_g(!1),e=t[0];return t=w1.bind(null,t[1]),hr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var s=Ie,i=hr();if(Ee){if(r===void 0)throw Error(z(407));r=r()}else{if(r=e(),Je===null)throw Error(z(349));ms&30||d0(s,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,kg(h0.bind(null,s,a,t),[t]),s.flags|=2048,Ja(9,u0.bind(null,s,a,r,e),void 0,null),r},useId:function(){var t=hr(),e=Je.identifierPrefix;if(Ee){var r=Ir,s=Sr;r=(s&~(1<<32-sr(s)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ya++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=j1++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},E1={readContext:Kt,useCallback:b0,useContext:Kt,useEffect:Im,useImperativeHandle:v0,useInsertionEffect:g0,useLayoutEffect:x0,useMemo:j0,useReducer:su,useRef:p0,useState:function(){return su(Xa)},useDebugValue:Cm,useDeferredValue:function(t){var e=Qt();return w0(e,$e.memoizedState,t)},useTransition:function(){var t=su(Xa)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:l0,useSyncExternalStore:c0,useId:N0,unstable_isNewReconciler:!1},T1={readContext:Kt,useCallback:b0,useContext:Kt,useEffect:Im,useImperativeHandle:v0,useInsertionEffect:g0,useLayoutEffect:x0,useMemo:j0,useReducer:iu,useRef:p0,useState:function(){return iu(Xa)},useDebugValue:Cm,useDeferredValue:function(t){var e=Qt();return $e===null?e.memoizedState=t:w0(e,$e.memoizedState,t)},useTransition:function(){var t=iu(Xa)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:l0,useSyncExternalStore:c0,useId:N0,unstable_isNewReconciler:!1};function Zt(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function sh(t,e,r,s){e=t.memoizedState,r=r(s,e),r=r==null?e:Ce({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Wc={isMounted:function(t){return(t=t._reactInternals)?Ns(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var s=vt(),i=wn(t),a=Pr(s,i);a.payload=e,r!=null&&(a.callback=r),e=bn(t,a,i),e!==null&&(ir(e,t,i,s),wl(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var s=vt(),i=wn(t),a=Pr(s,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=bn(t,a,i),e!==null&&(ir(e,t,i,s),wl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=vt(),s=wn(t),i=Pr(r,s);i.tag=2,e!=null&&(i.callback=e),e=bn(t,i,s),e!==null&&(ir(e,t,s,r),wl(e,t,s))}};function Eg(t,e,r,s,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,o):e.prototype&&e.prototype.isPureReactComponent?!$a(r,s)||!$a(i,a):!0}function T0(t,e,r){var s=!1,i=An,a=e.contextType;return typeof a=="object"&&a!==null?a=Kt(a):(i=Tt(e)?us:ft.current,s=e.contextTypes,a=(s=s!=null)?di(t,i):An),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wc,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Tg(t,e,r,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,s),e.state!==t&&Wc.enqueueReplaceState(e,e.state,null)}function ih(t,e,r,s){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},wm(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Kt(a):(a=Tt(e)?us:ft.current,i.context=di(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(sh(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Wc.enqueueReplaceState(i,i.state,null),rc(t,r,i,s),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function fi(t,e){try{var r="",s=e;do r+=tN(s),s=s.return;while(s);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function au(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function ah(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var S1=typeof WeakMap=="function"?WeakMap:Map;function S0(t,e,r){r=Pr(-1,r),r.tag=3,r.payload={element:null};var s=e.value;return r.callback=function(){oc||(oc=!0,gh=s),ah(t,e)},r}function I0(t,e,r){r=Pr(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;r.payload=function(){return s(i)},r.callback=function(){ah(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){ah(t,e),typeof s!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Sg(t,e,r){var s=t.pingCache;if(s===null){s=t.pingCache=new S1;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(r)||(i.add(r),t=z1.bind(null,t,e,r),e.then(t,t))}function Ig(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Cg(t,e,r,s,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Pr(-1,1),e.tag=2,bn(r,e,1))),r.lanes|=1),t)}var I1=$r.ReactCurrentOwner,kt=!1;function yt(t,e,r,s){e.child=t===null?s0(e,null,r,s):hi(e,t.child,r,s)}function Ag(t,e,r,s,i){r=r.render;var a=e.ref;return ni(e,i),s=Tm(t,e,r,s,a,i),r=Sm(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Or(t,e,i)):(Ee&&r&&pm(e),e.flags|=1,yt(t,e,s,i),e.child)}function Pg(t,e,r,s,i){if(t===null){var a=r.type;return typeof a=="function"&&!Om(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,C0(t,e,a,s,i)):(t=Sl(r.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:$a,r(o,s)&&t.ref===e.ref)return Or(t,e,i)}return e.flags|=1,t=Nn(a,s),t.ref=e.ref,t.return=e,e.child=t}function C0(t,e,r,s,i){if(t!==null){var a=t.memoizedProps;if($a(a,s)&&t.ref===e.ref)if(kt=!1,e.pendingProps=s=a,(t.lanes&i)!==0)t.flags&131072&&(kt=!0);else return e.lanes=t.lanes,Or(t,e,i)}return oh(t,e,r,s,i)}function A0(t,e,r){var s=e.pendingProps,i=s.children,a=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Xs,Pt),Pt|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(Xs,Pt),Pt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:r,be(Xs,Pt),Pt|=s}else a!==null?(s=a.baseLanes|r,e.memoizedState=null):s=r,be(Xs,Pt),Pt|=s;return yt(t,e,i,r),e.child}function P0(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function oh(t,e,r,s,i){var a=Tt(r)?us:ft.current;return a=di(e,a),ni(e,i),r=Tm(t,e,r,s,a,i),s=Sm(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Or(t,e,i)):(Ee&&s&&pm(e),e.flags|=1,yt(t,e,r,i),e.child)}function Rg(t,e,r,s,i){if(Tt(r)){var a=!0;Xl(e)}else a=!1;if(ni(e,i),e.stateNode===null)kl(t,e),T0(e,r,s),ih(e,r,s,i),s=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var d=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Kt(u):(u=Tt(r)?us:ft.current,u=di(e,u));var m=r.getDerivedStateFromProps,f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==s||d!==u)&&Tg(e,o,s,u),sn=!1;var p=e.memoizedState;o.state=p,rc(e,s,o,i),d=e.memoizedState,c!==s||p!==d||Et.current||sn?(typeof m=="function"&&(sh(e,r,m,s),d=e.memoizedState),(c=sn||Eg(e,r,c,s,p,d,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=d),o.props=s,o.state=d,o.context=u,s=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,a0(t,e),c=e.memoizedProps,u=e.type===e.elementType?c:Zt(e.type,c),o.props=u,f=e.pendingProps,p=o.context,d=r.contextType,typeof d=="object"&&d!==null?d=Kt(d):(d=Tt(r)?us:ft.current,d=di(e,d));var b=r.getDerivedStateFromProps;(m=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==f||p!==d)&&Tg(e,o,s,d),sn=!1,p=e.memoizedState,o.state=p,rc(e,s,o,i);var E=e.memoizedState;c!==f||p!==E||Et.current||sn?(typeof b=="function"&&(sh(e,r,b,s),E=e.memoizedState),(u=sn||Eg(e,r,u,s,p,E,d)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,E,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,E,d)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=E),o.props=s,o.state=E,o.context=d,s=u):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),s=!1)}return lh(t,e,r,s,a,i)}function lh(t,e,r,s,i,a){P0(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return i&&yg(e,r,!1),Or(t,e,a);s=e.stateNode,I1.current=e;var c=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=hi(e,t.child,null,a),e.child=hi(e,null,c,a)):yt(t,e,c,a),e.memoizedState=s.state,i&&yg(e,r,!0),e.child}function R0(t){var e=t.stateNode;e.pendingContext?xg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xg(t,e.context,!1),Nm(t,e.containerInfo)}function Dg(t,e,r,s,i){return ui(),xm(i),e.flags|=256,yt(t,e,r,s),e.child}var ch={dehydrated:null,treeContext:null,retryLane:0};function dh(t){return{baseLanes:t,cachePool:null,transitions:null}}function D0(t,e,r){var s=e.pendingProps,i=Te.current,a=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),be(Te,i&1),t===null)return rh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,a?(s=e.mode,a=e.child,o={mode:"hidden",children:o},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=qc(o,s,0,null),t=cs(t,s,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=dh(r),e.memoizedState=ch,t):Am(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return C1(t,e,o,s,c,i,r);if(a){a=s.fallback,o=e.mode,i=t.child,c=i.sibling;var d={mode:"hidden",children:s.children};return!(o&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=d,e.deletions=null):(s=Nn(i,d),s.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=Nn(c,a):(a=cs(a,o,r,null),a.flags|=2),a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,o=t.child.memoizedState,o=o===null?dh(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=ch,s}return a=t.child,t=a.sibling,s=Nn(a,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=r),s.return=e,s.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=s,e.memoizedState=null,s}function Am(t,e){return e=qc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ol(t,e,r,s){return s!==null&&xm(s),hi(e,t.child,null,r),t=Am(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function C1(t,e,r,s,i,a,o){if(r)return e.flags&256?(e.flags&=-257,s=au(Error(z(422))),ol(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=s.fallback,i=e.mode,s=qc({mode:"visible",children:s.children},i,0,null),a=cs(a,i,o,null),a.flags|=2,s.return=e,a.return=e,s.sibling=a,e.child=s,e.mode&1&&hi(e,t.child,null,o),e.child.memoizedState=dh(o),e.memoizedState=ch,a);if(!(e.mode&1))return ol(t,e,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var c=s.dgst;return s=c,a=Error(z(419)),s=au(a,s,void 0),ol(t,e,o,s)}if(c=(o&t.childLanes)!==0,kt||c){if(s=Je,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Vr(t,i),ir(s,t,i,-1))}return Vm(),s=au(Error(z(421))),ol(t,e,o,s)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=W1.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Rt=vn(i.nextSibling),Dt=e,Ee=!0,tr=null,t!==null&&(Bt[zt++]=Sr,Bt[zt++]=Ir,Bt[zt++]=hs,Sr=t.id,Ir=t.overflow,hs=e),e=Am(e,s.children),e.flags|=4096,e)}function Mg(t,e,r){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),nh(t.return,e,r)}function ou(t,e,r,s,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=i)}function M0(t,e,r){var s=e.pendingProps,i=s.revealOrder,a=s.tail;if(yt(t,e,s.children,r),s=Te.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Mg(t,r,e);else if(t.tag===19)Mg(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(be(Te,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&nc(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),ou(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&nc(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}ou(e,!0,r,null,a);break;case"together":ou(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Or(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),fs|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,r=Nn(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Nn(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function A1(t,e,r){switch(e.tag){case 3:R0(e),ui();break;case 5:o0(e);break;case 1:Tt(e.type)&&Xl(e);break;case 4:Nm(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;be(ec,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(be(Te,Te.current&1),e.flags|=128,null):r&e.child.childLanes?D0(t,e,r):(be(Te,Te.current&1),t=Or(t,e,r),t!==null?t.sibling:null);be(Te,Te.current&1);break;case 19:if(s=(r&e.childLanes)!==0,t.flags&128){if(s)return M0(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),be(Te,Te.current),s)break;return null;case 22:case 23:return e.lanes=0,A0(t,e,r)}return Or(t,e,r)}var L0,uh,V0,O0;L0=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};uh=function(){};V0=function(t,e,r,s){var i=t.memoizedProps;if(i!==s){t=e.stateNode,as(gr.current);var a=null;switch(r){case"input":i=Ru(t,i),s=Ru(t,s),a=[];break;case"select":i=Ce({},i,{value:void 0}),s=Ce({},s,{value:void 0}),a=[];break;case"textarea":i=Lu(t,i),s=Lu(t,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Ql)}Ou(r,s);var o;r=null;for(u in i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var c=i[u];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Va.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in s){var d=s[u];if(c=i!=null?i[u]:void 0,s.hasOwnProperty(u)&&d!==c&&(d!=null||c!=null))if(u==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(r||(r={}),r[o]=d[o])}else r||(a||(a=[]),a.push(u,r)),r=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(a=a||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Va.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&we("scroll",t),a||c===d||(a=[])):(a=a||[]).push(u,d))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};O0=function(t,e,r,s){r!==s&&(e.flags|=4)};function ia(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=r,e}function P1(t,e,r){var s=e.pendingProps;switch(gm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return Tt(e.type)&&Yl(),lt(e),null;case 3:return s=e.stateNode,mi(),_e(Et),_e(ft),km(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(il(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tr!==null&&(vh(tr),tr=null))),uh(t,e),lt(e),null;case 5:_m(e);var i=as(Qa.current);if(r=e.type,t!==null&&e.stateNode!=null)V0(t,e,r,s,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(z(166));return lt(e),null}if(t=as(gr.current),il(e)){s=e.stateNode,r=e.type;var a=e.memoizedProps;switch(s[fr]=e,s[Ga]=a,t=(e.mode&1)!==0,r){case"dialog":we("cancel",s),we("close",s);break;case"iframe":case"object":case"embed":we("load",s);break;case"video":case"audio":for(i=0;i<ma.length;i++)we(ma[i],s);break;case"source":we("error",s);break;case"img":case"image":case"link":we("error",s),we("load",s);break;case"details":we("toggle",s);break;case"input":$p(s,a),we("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},we("invalid",s);break;case"textarea":qp(s,a),we("invalid",s)}Ou(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?s.textContent!==c&&(a.suppressHydrationWarning!==!0&&sl(s.textContent,c,t),i=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&sl(s.textContent,c,t),i=["children",""+c]):Va.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&we("scroll",s)}switch(r){case"input":Yo(s),Hp(s,a,!0);break;case"textarea":Yo(s),Gp(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Ql)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hv(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(r,{is:s.is}):(t=o.createElement(r),r==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,r),t[fr]=e,t[Ga]=s,L0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fu(r,s),r){case"dialog":we("cancel",t),we("close",t),i=s;break;case"iframe":case"object":case"embed":we("load",t),i=s;break;case"video":case"audio":for(i=0;i<ma.length;i++)we(ma[i],t);i=s;break;case"source":we("error",t),i=s;break;case"img":case"image":case"link":we("error",t),we("load",t),i=s;break;case"details":we("toggle",t),i=s;break;case"input":$p(t,s),i=Ru(t,s),we("invalid",t);break;case"option":i=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},i=Ce({},s,{value:void 0}),we("invalid",t);break;case"textarea":qp(t,s),i=Lu(t,s),we("invalid",t);break;default:i=s}Ou(r,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var d=c[a];a==="style"?pv(t,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&mv(t,d)):a==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&Oa(t,d):typeof d=="number"&&Oa(t,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Va.hasOwnProperty(a)?d!=null&&a==="onScroll"&&we("scroll",t):d!=null&&tm(t,a,d,o))}switch(r){case"input":Yo(t),Hp(t,s,!1);break;case"textarea":Yo(t),Gp(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Cn(s.value));break;case"select":t.multiple=!!s.multiple,a=s.value,a!=null?Zs(t,!!s.multiple,a,!1):s.defaultValue!=null&&Zs(t,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ql)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)O0(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(z(166));if(r=as(Qa.current),as(gr.current),il(e)){if(s=e.stateNode,r=e.memoizedProps,s[fr]=e,(a=s.nodeValue!==r)&&(t=Dt,t!==null))switch(t.tag){case 3:sl(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sl(s.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[fr]=e,e.stateNode=s}return lt(e),null;case 13:if(_e(Te),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&Rt!==null&&e.mode&1&&!(e.flags&128))r0(),ui(),e.flags|=98560,a=!1;else if(a=il(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(z(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(z(317));a[fr]=e}else ui(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),a=!1}else tr!==null&&(vh(tr),tr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?qe===0&&(qe=3):Vm())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return mi(),uh(t,e),t===null&&Ha(e.stateNode.containerInfo),lt(e),null;case 10:return bm(e.type._context),lt(e),null;case 17:return Tt(e.type)&&Yl(),lt(e),null;case 19:if(_e(Te),a=e.memoizedState,a===null)return lt(e),null;if(s=(e.flags&128)!==0,o=a.rendering,o===null)if(s)ia(a,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=nc(t),o!==null){for(e.flags|=128,ia(a,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=r,r=e.child;r!==null;)a=r,t=s,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return be(Te,Te.current&1|2),e.child}t=t.sibling}a.tail!==null&&Oe()>pi&&(e.flags|=128,s=!0,ia(a,!1),e.lanes=4194304)}else{if(!s)if(t=nc(o),t!==null){if(e.flags|=128,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ia(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ee)return lt(e),null}else 2*Oe()-a.renderingStartTime>pi&&r!==1073741824&&(e.flags|=128,s=!0,ia(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Oe(),e.sibling=null,r=Te.current,be(Te,s?r&1|2:r&1),e):(lt(e),null);case 22:case 23:return Lm(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Pt&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function R1(t,e){switch(gm(e),e.tag){case 1:return Tt(e.type)&&Yl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mi(),_e(Et),_e(ft),km(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _m(e),null;case 13:if(_e(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));ui()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e(Te),null;case 4:return mi(),null;case 10:return bm(e.type._context),null;case 22:case 23:return Lm(),null;case 24:return null;default:return null}}var ll=!1,ut=!1,D1=typeof WeakSet=="function"?WeakSet:Set,q=null;function Ys(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){De(t,e,s)}else r.current=null}function hh(t,e,r){try{r()}catch(s){De(t,e,s)}}var Lg=!1;function M1(t,e){if(Qu=ql,t=Wv(),fm(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,c=-1,d=-1,u=0,m=0,f=t,p=null;t:for(;;){for(var b;f!==r||i!==0&&f.nodeType!==3||(c=o+i),f!==a||s!==0&&f.nodeType!==3||(d=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(b=f.firstChild)!==null;)p=f,f=b;for(;;){if(f===t)break t;if(p===r&&++u===i&&(c=o),p===a&&++m===s&&(d=o),(b=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=b}r=c===-1||d===-1?null:{start:c,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Yu={focusedElem:t,selectionRange:r},ql=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var k=E.memoizedProps,x=E.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?k:Zt(e.type,k),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(I){De(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return E=Lg,Lg=!1,E}function Ta(t,e,r){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&hh(e,r,a)}i=i.next}while(i!==s)}}function $c(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==e)}}function mh(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function F0(t){var e=t.alternate;e!==null&&(t.alternate=null,F0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fr],delete e[Ga],delete e[Zu],delete e[x1],delete e[y1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function U0(t){return t.tag===5||t.tag===3||t.tag===4}function Vg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||U0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fh(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ql));else if(s!==4&&(t=t.child,t!==null))for(fh(t,e,r),t=t.sibling;t!==null;)fh(t,e,r),t=t.sibling}function ph(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(ph(t,e,r),t=t.sibling;t!==null;)ph(t,e,r),t=t.sibling}var et=null,er=!1;function en(t,e,r){for(r=r.child;r!==null;)B0(t,e,r),r=r.sibling}function B0(t,e,r){if(pr&&typeof pr.onCommitFiberUnmount=="function")try{pr.onCommitFiberUnmount(Lc,r)}catch{}switch(r.tag){case 5:ut||Ys(r,e);case 6:var s=et,i=er;et=null,en(t,e,r),et=s,er=i,et!==null&&(er?(t=et,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):et.removeChild(r.stateNode));break;case 18:et!==null&&(er?(t=et,r=r.stateNode,t.nodeType===8?eu(t.parentNode,r):t.nodeType===1&&eu(t,r),za(t)):eu(et,r.stateNode));break;case 4:s=et,i=er,et=r.stateNode.containerInfo,er=!0,en(t,e,r),et=s,er=i;break;case 0:case 11:case 14:case 15:if(!ut&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&hh(r,e,o),i=i.next}while(i!==s)}en(t,e,r);break;case 1:if(!ut&&(Ys(r,e),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(c){De(r,e,c)}en(t,e,r);break;case 21:en(t,e,r);break;case 22:r.mode&1?(ut=(s=ut)||r.memoizedState!==null,en(t,e,r),ut=s):en(t,e,r);break;default:en(t,e,r)}}function Og(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new D1),e.forEach(function(s){var i=$1.bind(null,t,s);r.has(s)||(r.add(s),s.then(i,i))})}}function Jt(t,e){var r=e.deletions;if(r!==null)for(var s=0;s<r.length;s++){var i=r[s];try{var a=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:et=c.stateNode,er=!1;break e;case 3:et=c.stateNode.containerInfo,er=!0;break e;case 4:et=c.stateNode.containerInfo,er=!0;break e}c=c.return}if(et===null)throw Error(z(160));B0(a,o,i),et=null,er=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(u){De(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)z0(e,t),e=e.sibling}function z0(t,e){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),ur(t),s&4){try{Ta(3,t,t.return),$c(3,t)}catch(k){De(t,t.return,k)}try{Ta(5,t,t.return)}catch(k){De(t,t.return,k)}}break;case 1:Jt(e,t),ur(t),s&512&&r!==null&&Ys(r,r.return);break;case 5:if(Jt(e,t),ur(t),s&512&&r!==null&&Ys(r,r.return),t.flags&32){var i=t.stateNode;try{Oa(i,"")}catch(k){De(t,t.return,k)}}if(s&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,c=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&dv(i,a),Fu(c,o);var u=Fu(c,a);for(o=0;o<d.length;o+=2){var m=d[o],f=d[o+1];m==="style"?pv(i,f):m==="dangerouslySetInnerHTML"?mv(i,f):m==="children"?Oa(i,f):tm(i,m,f,u)}switch(c){case"input":Du(i,a);break;case"textarea":uv(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var b=a.value;b!=null?Zs(i,!!a.multiple,b,!1):p!==!!a.multiple&&(a.defaultValue!=null?Zs(i,!!a.multiple,a.defaultValue,!0):Zs(i,!!a.multiple,a.multiple?[]:"",!1))}i[Ga]=a}catch(k){De(t,t.return,k)}}break;case 6:if(Jt(e,t),ur(t),s&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(k){De(t,t.return,k)}}break;case 3:if(Jt(e,t),ur(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{za(e.containerInfo)}catch(k){De(t,t.return,k)}break;case 4:Jt(e,t),ur(t);break;case 13:Jt(e,t),ur(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Dm=Oe())),s&4&&Og(t);break;case 22:if(m=r!==null&&r.memoizedState!==null,t.mode&1?(ut=(u=ut)||m,Jt(e,t),ut=u):Jt(e,t),ur(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!m&&t.mode&1)for(q=t,m=t.child;m!==null;){for(f=q=m;q!==null;){switch(p=q,b=p.child,p.tag){case 0:case 11:case 14:case 15:Ta(4,p,p.return);break;case 1:Ys(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){s=p,r=p.return;try{e=s,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(k){De(s,r,k)}}break;case 5:Ys(p,p.return);break;case 22:if(p.memoizedState!==null){Ug(f);continue}}b!==null?(b.return=p,q=b):Ug(f)}m=m.sibling}e:for(m=null,f=t;;){if(f.tag===5){if(m===null){m=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=f.stateNode,d=f.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=fv("display",o))}catch(k){De(t,t.return,k)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(k){De(t,t.return,k)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Jt(e,t),ur(t),s&4&&Og(t);break;case 21:break;default:Jt(e,t),ur(t)}}function ur(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(U0(r)){var s=r;break e}r=r.return}throw Error(z(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(Oa(i,""),s.flags&=-33);var a=Vg(t);ph(t,a,i);break;case 3:case 4:var o=s.stateNode.containerInfo,c=Vg(t);fh(t,c,o);break;default:throw Error(z(161))}}catch(d){De(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function L1(t,e,r){q=t,W0(t)}function W0(t,e,r){for(var s=(t.mode&1)!==0;q!==null;){var i=q,a=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||ll;if(!o){var c=i.alternate,d=c!==null&&c.memoizedState!==null||ut;c=ll;var u=ut;if(ll=o,(ut=d)&&!u)for(q=i;q!==null;)o=q,d=o.child,o.tag===22&&o.memoizedState!==null?Bg(i):d!==null?(d.return=o,q=d):Bg(i);for(;a!==null;)q=a,W0(a),a=a.sibling;q=i,ll=c,ut=u}Fg(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,q=a):Fg(t)}}function Fg(t){for(;q!==null;){var e=q;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||$c(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!ut)if(r===null)s.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Zt(e.type,r.memoizedProps);s.componentDidUpdate(i,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Ng(e,a,s);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Ng(e,o,r)}break;case 5:var c=e.stateNode;if(r===null&&e.flags&4){r=c;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var m=u.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&za(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}ut||e.flags&512&&mh(e)}catch(p){De(e,e.return,p)}}if(e===t){q=null;break}if(r=e.sibling,r!==null){r.return=e.return,q=r;break}q=e.return}}function Ug(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var r=e.sibling;if(r!==null){r.return=e.return,q=r;break}q=e.return}}function Bg(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{$c(4,e)}catch(d){De(e,r,d)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(d){De(e,i,d)}}var a=e.return;try{mh(e)}catch(d){De(e,a,d)}break;case 5:var o=e.return;try{mh(e)}catch(d){De(e,o,d)}}}catch(d){De(e,e.return,d)}if(e===t){q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,q=c;break}q=e.return}}var V1=Math.ceil,ac=$r.ReactCurrentDispatcher,Pm=$r.ReactCurrentOwner,Gt=$r.ReactCurrentBatchConfig,fe=0,Je=null,Be=null,nt=0,Pt=0,Xs=Bn(0),qe=0,Za=null,fs=0,Hc=0,Rm=0,Sa=null,_t=null,Dm=0,pi=1/0,Er=null,oc=!1,gh=null,jn=null,cl=!1,mn=null,lc=0,Ia=0,xh=null,El=-1,Tl=0;function vt(){return fe&6?Oe():El!==-1?El:El=Oe()}function wn(t){return t.mode&1?fe&2&&nt!==0?nt&-nt:b1.transition!==null?(Tl===0&&(Tl=Tv()),Tl):(t=xe,t!==0||(t=window.event,t=t===void 0?16:Dv(t.type)),t):1}function ir(t,e,r,s){if(50<Ia)throw Ia=0,xh=null,Error(z(185));xo(t,r,s),(!(fe&2)||t!==Je)&&(t===Je&&(!(fe&2)&&(Hc|=r),qe===4&&on(t,nt)),St(t,s),r===1&&fe===0&&!(e.mode&1)&&(pi=Oe()+500,Bc&&zn()))}function St(t,e){var r=t.callbackNode;bN(t,e);var s=Hl(t,t===Je?nt:0);if(s===0)r!==null&&Yp(r),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(r!=null&&Yp(r),e===1)t.tag===0?v1(zg.bind(null,t)):Zv(zg.bind(null,t)),p1(function(){!(fe&6)&&zn()}),r=null;else{switch(Sv(s)){case 1:r=am;break;case 4:r=kv;break;case 16:r=$l;break;case 536870912:r=Ev;break;default:r=$l}r=X0(r,$0.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function $0(t,e){if(El=-1,Tl=0,fe&6)throw Error(z(327));var r=t.callbackNode;if(si()&&t.callbackNode!==r)return null;var s=Hl(t,t===Je?nt:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=cc(t,s);else{e=s;var i=fe;fe|=2;var a=q0();(Je!==t||nt!==e)&&(Er=null,pi=Oe()+500,ls(t,e));do try{U1();break}catch(c){H0(t,c)}while(!0);vm(),ac.current=a,fe=i,Be!==null?e=0:(Je=null,nt=0,e=qe)}if(e!==0){if(e===2&&(i=$u(t),i!==0&&(s=i,e=yh(t,i))),e===1)throw r=Za,ls(t,0),on(t,s),St(t,Oe()),r;if(e===6)on(t,s);else{if(i=t.current.alternate,!(s&30)&&!O1(i)&&(e=cc(t,s),e===2&&(a=$u(t),a!==0&&(s=a,e=yh(t,a))),e===1))throw r=Za,ls(t,0),on(t,s),St(t,Oe()),r;switch(t.finishedWork=i,t.finishedLanes=s,e){case 0:case 1:throw Error(z(345));case 2:ts(t,_t,Er);break;case 3:if(on(t,s),(s&130023424)===s&&(e=Dm+500-Oe(),10<e)){if(Hl(t,0)!==0)break;if(i=t.suspendedLanes,(i&s)!==s){vt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ju(ts.bind(null,t,_t,Er),e);break}ts(t,_t,Er);break;case 4:if(on(t,s),(s&4194240)===s)break;for(e=t.eventTimes,i=-1;0<s;){var o=31-sr(s);a=1<<o,o=e[o],o>i&&(i=o),s&=~a}if(s=i,s=Oe()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*V1(s/1960))-s,10<s){t.timeoutHandle=Ju(ts.bind(null,t,_t,Er),s);break}ts(t,_t,Er);break;case 5:ts(t,_t,Er);break;default:throw Error(z(329))}}}return St(t,Oe()),t.callbackNode===r?$0.bind(null,t):null}function yh(t,e){var r=Sa;return t.current.memoizedState.isDehydrated&&(ls(t,e).flags|=256),t=cc(t,e),t!==2&&(e=_t,_t=r,e!==null&&vh(e)),t}function vh(t){_t===null?_t=t:_t.push.apply(_t,t)}function O1(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var i=r[s],a=i.getSnapshot;i=i.value;try{if(!ar(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function on(t,e){for(e&=~Rm,e&=~Hc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-sr(e),s=1<<r;t[r]=-1,e&=~s}}function zg(t){if(fe&6)throw Error(z(327));si();var e=Hl(t,0);if(!(e&1))return St(t,Oe()),null;var r=cc(t,e);if(t.tag!==0&&r===2){var s=$u(t);s!==0&&(e=s,r=yh(t,s))}if(r===1)throw r=Za,ls(t,0),on(t,e),St(t,Oe()),r;if(r===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ts(t,_t,Er),St(t,Oe()),null}function Mm(t,e){var r=fe;fe|=1;try{return t(e)}finally{fe=r,fe===0&&(pi=Oe()+500,Bc&&zn())}}function ps(t){mn!==null&&mn.tag===0&&!(fe&6)&&si();var e=fe;fe|=1;var r=Gt.transition,s=xe;try{if(Gt.transition=null,xe=1,t)return t()}finally{xe=s,Gt.transition=r,fe=e,!(fe&6)&&zn()}}function Lm(){Pt=Xs.current,_e(Xs)}function ls(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,f1(r)),Be!==null)for(r=Be.return;r!==null;){var s=r;switch(gm(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Yl();break;case 3:mi(),_e(Et),_e(ft),km();break;case 5:_m(s);break;case 4:mi();break;case 13:_e(Te);break;case 19:_e(Te);break;case 10:bm(s.type._context);break;case 22:case 23:Lm()}r=r.return}if(Je=t,Be=t=Nn(t.current,null),nt=Pt=e,qe=0,Za=null,Rm=Hc=fs=0,_t=Sa=null,is!==null){for(e=0;e<is.length;e++)if(r=is[e],s=r.interleaved,s!==null){r.interleaved=null;var i=s.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,s.next=o}r.pending=s}is=null}return t}function H0(t,e){do{var r=Be;try{if(vm(),Nl.current=ic,sc){for(var s=Ie.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}sc=!1}if(ms=0,Ye=$e=Ie=null,Ea=!1,Ya=0,Pm.current=null,r===null||r.return===null){qe=1,Za=e,Be=null;break}e:{var a=t,o=r.return,c=r,d=e;if(e=nt,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,m=c,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var p=m.alternate;p?(m.updateQueue=p.updateQueue,m.memoizedState=p.memoizedState,m.lanes=p.lanes):(m.updateQueue=null,m.memoizedState=null)}var b=Ig(o);if(b!==null){b.flags&=-257,Cg(b,o,c,a,e),b.mode&1&&Sg(a,u,e),e=b,d=u;var E=e.updateQueue;if(E===null){var k=new Set;k.add(d),e.updateQueue=k}else E.add(d);break e}else{if(!(e&1)){Sg(a,u,e),Vm();break e}d=Error(z(426))}}else if(Ee&&c.mode&1){var x=Ig(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Cg(x,o,c,a,e),xm(fi(d,c));break e}}a=d=fi(d,c),qe!==4&&(qe=2),Sa===null?Sa=[a]:Sa.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var y=S0(a,d,e);wg(a,y);break e;case 1:c=d;var v=a.type,j=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(jn===null||!jn.has(j)))){a.flags|=65536,e&=-e,a.lanes|=e;var I=I0(a,c,e);wg(a,I);break e}}a=a.return}while(a!==null)}K0(r)}catch(M){e=M,Be===r&&r!==null&&(Be=r=r.return);continue}break}while(!0)}function q0(){var t=ac.current;return ac.current=ic,t===null?ic:t}function Vm(){(qe===0||qe===3||qe===2)&&(qe=4),Je===null||!(fs&268435455)&&!(Hc&268435455)||on(Je,nt)}function cc(t,e){var r=fe;fe|=2;var s=q0();(Je!==t||nt!==e)&&(Er=null,ls(t,e));do try{F1();break}catch(i){H0(t,i)}while(!0);if(vm(),fe=r,ac.current=s,Be!==null)throw Error(z(261));return Je=null,nt=0,qe}function F1(){for(;Be!==null;)G0(Be)}function U1(){for(;Be!==null&&!uN();)G0(Be)}function G0(t){var e=Y0(t.alternate,t,Pt);t.memoizedProps=t.pendingProps,e===null?K0(t):Be=e,Pm.current=null}function K0(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=R1(r,e),r!==null){r.flags&=32767,Be=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Be=null;return}}else if(r=P1(r,e,Pt),r!==null){Be=r;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);qe===0&&(qe=5)}function ts(t,e,r){var s=xe,i=Gt.transition;try{Gt.transition=null,xe=1,B1(t,e,r,s)}finally{Gt.transition=i,xe=s}return null}function B1(t,e,r,s){do si();while(mn!==null);if(fe&6)throw Error(z(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(jN(t,a),t===Je&&(Be=Je=null,nt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||cl||(cl=!0,X0($l,function(){return si(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Gt.transition,Gt.transition=null;var o=xe;xe=1;var c=fe;fe|=4,Pm.current=null,M1(t,r),z0(r,t),o1(Yu),ql=!!Qu,Yu=Qu=null,t.current=r,L1(r),hN(),fe=c,xe=o,Gt.transition=a}else t.current=r;if(cl&&(cl=!1,mn=t,lc=i),a=t.pendingLanes,a===0&&(jn=null),pN(r.stateNode),St(t,Oe()),e!==null)for(s=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],s(i.value,{componentStack:i.stack,digest:i.digest});if(oc)throw oc=!1,t=gh,gh=null,t;return lc&1&&t.tag!==0&&si(),a=t.pendingLanes,a&1?t===xh?Ia++:(Ia=0,xh=t):Ia=0,zn(),null}function si(){if(mn!==null){var t=Sv(lc),e=Gt.transition,r=xe;try{if(Gt.transition=null,xe=16>t?16:t,mn===null)var s=!1;else{if(t=mn,mn=null,lc=0,fe&6)throw Error(z(331));var i=fe;for(fe|=4,q=t.current;q!==null;){var a=q,o=a.child;if(q.flags&16){var c=a.deletions;if(c!==null){for(var d=0;d<c.length;d++){var u=c[d];for(q=u;q!==null;){var m=q;switch(m.tag){case 0:case 11:case 15:Ta(8,m,a)}var f=m.child;if(f!==null)f.return=m,q=f;else for(;q!==null;){m=q;var p=m.sibling,b=m.return;if(F0(m),m===u){q=null;break}if(p!==null){p.return=b,q=p;break}q=b}}}var E=a.alternate;if(E!==null){var k=E.child;if(k!==null){E.child=null;do{var x=k.sibling;k.sibling=null,k=x}while(k!==null)}}q=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,q=o;else e:for(;q!==null;){if(a=q,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ta(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,q=y;break e}q=a.return}}var v=t.current;for(q=v;q!==null;){o=q;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,q=j;else e:for(o=v;q!==null;){if(c=q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:$c(9,c)}}catch(M){De(c,c.return,M)}if(c===o){q=null;break e}var I=c.sibling;if(I!==null){I.return=c.return,q=I;break e}q=c.return}}if(fe=i,zn(),pr&&typeof pr.onPostCommitFiberRoot=="function")try{pr.onPostCommitFiberRoot(Lc,t)}catch{}s=!0}return s}finally{xe=r,Gt.transition=e}}return!1}function Wg(t,e,r){e=fi(r,e),e=S0(t,e,1),t=bn(t,e,1),e=vt(),t!==null&&(xo(t,1,e),St(t,e))}function De(t,e,r){if(t.tag===3)Wg(t,t,r);else for(;e!==null;){if(e.tag===3){Wg(e,t,r);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(jn===null||!jn.has(s))){t=fi(r,t),t=I0(e,t,1),e=bn(e,t,1),t=vt(),e!==null&&(xo(e,1,t),St(e,t));break}}e=e.return}}function z1(t,e,r){var s=t.pingCache;s!==null&&s.delete(e),e=vt(),t.pingedLanes|=t.suspendedLanes&r,Je===t&&(nt&r)===r&&(qe===4||qe===3&&(nt&130023424)===nt&&500>Oe()-Dm?ls(t,0):Rm|=r),St(t,e)}function Q0(t,e){e===0&&(t.mode&1?(e=Zo,Zo<<=1,!(Zo&130023424)&&(Zo=4194304)):e=1);var r=vt();t=Vr(t,e),t!==null&&(xo(t,e,r),St(t,r))}function W1(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Q0(t,r)}function $1(t,e){var r=0;switch(t.tag){case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(z(314))}s!==null&&s.delete(e),Q0(t,r)}var Y0;Y0=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Et.current)kt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return kt=!1,A1(t,e,r);kt=!!(t.flags&131072)}else kt=!1,Ee&&e.flags&1048576&&e0(e,Zl,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;kl(t,e),t=e.pendingProps;var i=di(e,ft.current);ni(e,r),i=Tm(null,e,s,t,i,r);var a=Sm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(s)?(a=!0,Xl(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wm(e),i.updater=Wc,e.stateNode=i,i._reactInternals=e,ih(e,s,t,r),e=lh(null,e,s,!0,a,r)):(e.tag=0,Ee&&a&&pm(e),yt(null,e,i,r),e=e.child),e;case 16:s=e.elementType;e:{switch(kl(t,e),t=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=q1(s),t=Zt(s,t),i){case 0:e=oh(null,e,s,t,r);break e;case 1:e=Rg(null,e,s,t,r);break e;case 11:e=Ag(null,e,s,t,r);break e;case 14:e=Pg(null,e,s,Zt(s.type,t),r);break e}throw Error(z(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Zt(s,i),oh(t,e,s,i,r);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Zt(s,i),Rg(t,e,s,i,r);case 3:e:{if(R0(e),t===null)throw Error(z(387));s=e.pendingProps,a=e.memoizedState,i=a.element,a0(t,e),rc(e,s,null,r);var o=e.memoizedState;if(s=o.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=fi(Error(z(423)),e),e=Dg(t,e,s,r,i);break e}else if(s!==i){i=fi(Error(z(424)),e),e=Dg(t,e,s,r,i);break e}else for(Rt=vn(e.stateNode.containerInfo.firstChild),Dt=e,Ee=!0,tr=null,r=s0(e,null,s,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ui(),s===i){e=Or(t,e,r);break e}yt(t,e,s,r)}e=e.child}return e;case 5:return o0(e),t===null&&rh(e),s=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Xu(s,i)?o=null:a!==null&&Xu(s,a)&&(e.flags|=32),P0(t,e),yt(t,e,o,r),e.child;case 6:return t===null&&rh(e),null;case 13:return D0(t,e,r);case 4:return Nm(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=hi(e,null,s,r):yt(t,e,s,r),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Zt(s,i),Ag(t,e,s,i,r);case 7:return yt(t,e,e.pendingProps,r),e.child;case 8:return yt(t,e,e.pendingProps.children,r),e.child;case 12:return yt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,be(ec,s._currentValue),s._currentValue=o,a!==null)if(ar(a.value,o)){if(a.children===i.children&&!Et.current){e=Or(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var d=c.firstContext;d!==null;){if(d.context===s){if(a.tag===1){d=Pr(-1,r&-r),d.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var m=u.pending;m===null?d.next=d:(d.next=m.next,m.next=d),u.pending=d}}a.lanes|=r,d=a.alternate,d!==null&&(d.lanes|=r),nh(a.return,r,e),c.lanes|=r;break}d=d.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(z(341));o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),nh(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}yt(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,ni(e,r),i=Kt(i),s=s(i),e.flags|=1,yt(t,e,s,r),e.child;case 14:return s=e.type,i=Zt(s,e.pendingProps),i=Zt(s.type,i),Pg(t,e,s,i,r);case 15:return C0(t,e,e.type,e.pendingProps,r);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Zt(s,i),kl(t,e),e.tag=1,Tt(s)?(t=!0,Xl(e)):t=!1,ni(e,r),T0(e,s,i),ih(e,s,i,r),lh(null,e,s,!0,t,r);case 19:return M0(t,e,r);case 22:return A0(t,e,r)}throw Error(z(156,e.tag))};function X0(t,e){return _v(t,e)}function H1(t,e,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(t,e,r,s){return new H1(t,e,r,s)}function Om(t){return t=t.prototype,!(!t||!t.isReactComponent)}function q1(t){if(typeof t=="function")return Om(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nm)return 11;if(t===sm)return 14}return 2}function Nn(t,e){var r=t.alternate;return r===null?(r=qt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Sl(t,e,r,s,i,a){var o=2;if(s=t,typeof t=="function")Om(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bs:return cs(r.children,i,a,e);case rm:o=8,i|=8;break;case Iu:return t=qt(12,r,e,i|2),t.elementType=Iu,t.lanes=a,t;case Cu:return t=qt(13,r,e,i),t.elementType=Cu,t.lanes=a,t;case Au:return t=qt(19,r,e,i),t.elementType=Au,t.lanes=a,t;case ov:return qc(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case iv:o=10;break e;case av:o=9;break e;case nm:o=11;break e;case sm:o=14;break e;case nn:o=16,s=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=qt(o,r,e,i),e.elementType=t,e.type=s,e.lanes=a,e}function cs(t,e,r,s){return t=qt(7,t,s,e),t.lanes=r,t}function qc(t,e,r,s){return t=qt(22,t,s,e),t.elementType=ov,t.lanes=r,t.stateNode={isHidden:!1},t}function lu(t,e,r){return t=qt(6,t,null,e),t.lanes=r,t}function cu(t,e,r){return e=qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function G1(t,e,r,s,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wd(0),this.expirationTimes=Wd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wd(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fm(t,e,r,s,i,a,o,c,d){return t=new G1(t,e,r,c,d),e===1?(e=1,a===!0&&(e|=8)):e=0,a=qt(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},wm(a),t}function K1(t,e,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Us,key:s==null?null:""+s,children:t,containerInfo:e,implementation:r}}function J0(t){if(!t)return An;t=t._reactInternals;e:{if(Ns(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var r=t.type;if(Tt(r))return Jv(t,r,e)}return e}function Z0(t,e,r,s,i,a,o,c,d){return t=Fm(r,s,!0,t,i,a,o,c,d),t.context=J0(null),r=t.current,s=vt(),i=wn(r),a=Pr(s,i),a.callback=e??null,bn(r,a,i),t.current.lanes=i,xo(t,i,s),St(t,s),t}function Gc(t,e,r,s){var i=e.current,a=vt(),o=wn(i);return r=J0(r),e.context===null?e.context=r:e.pendingContext=r,e=Pr(a,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=bn(i,e,o),t!==null&&(ir(t,i,o,a),wl(t,i,o)),o}function dc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $g(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Um(t,e){$g(t,e),(t=t.alternate)&&$g(t,e)}function Q1(){return null}var eb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bm(t){this._internalRoot=t}Kc.prototype.render=Bm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Gc(t,e,null,null)};Kc.prototype.unmount=Bm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ps(function(){Gc(null,t,null,null)}),e[Lr]=null}};function Kc(t){this._internalRoot=t}Kc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Av();t={blockedOn:null,target:t,priority:e};for(var r=0;r<an.length&&e!==0&&e<an[r].priority;r++);an.splice(r,0,t),r===0&&Rv(t)}};function zm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hg(){}function Y1(t,e,r,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var u=dc(o);a.call(u)}}var o=Z0(e,s,t,0,null,!1,!1,"",Hg);return t._reactRootContainer=o,t[Lr]=o.current,Ha(t.nodeType===8?t.parentNode:t),ps(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof s=="function"){var c=s;s=function(){var u=dc(d);c.call(u)}}var d=Fm(t,0,!1,null,null,!1,!1,"",Hg);return t._reactRootContainer=d,t[Lr]=d.current,Ha(t.nodeType===8?t.parentNode:t),ps(function(){Gc(e,d,r,s)}),d}function Yc(t,e,r,s,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var c=i;i=function(){var d=dc(o);c.call(d)}}Gc(e,o,t,i)}else o=Y1(r,e,t,i,s);return dc(o)}Iv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ha(e.pendingLanes);r!==0&&(om(e,r|1),St(e,Oe()),!(fe&6)&&(pi=Oe()+500,zn()))}break;case 13:ps(function(){var s=Vr(t,1);if(s!==null){var i=vt();ir(s,t,1,i)}}),Um(t,1)}};lm=function(t){if(t.tag===13){var e=Vr(t,134217728);if(e!==null){var r=vt();ir(e,t,134217728,r)}Um(t,134217728)}};Cv=function(t){if(t.tag===13){var e=wn(t),r=Vr(t,e);if(r!==null){var s=vt();ir(r,t,e,s)}Um(t,e)}};Av=function(){return xe};Pv=function(t,e){var r=xe;try{return xe=t,e()}finally{xe=r}};Bu=function(t,e,r){switch(e){case"input":if(Du(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var s=r[e];if(s!==t&&s.form===t.form){var i=Uc(s);if(!i)throw Error(z(90));cv(s),Du(s,i)}}}break;case"textarea":uv(t,r);break;case"select":e=r.value,e!=null&&Zs(t,!!r.multiple,e,!1)}};yv=Mm;vv=ps;var X1={usingClientEntryPoint:!1,Events:[vo,Hs,Uc,gv,xv,Mm]},aa={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},J1={bundleType:aa.bundleType,version:aa.version,rendererPackageName:aa.rendererPackageName,rendererConfig:aa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wv(t),t===null?null:t.stateNode},findFiberByHostInstance:aa.findFiberByHostInstance||Q1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dl.isDisabled&&dl.supportsFiber)try{Lc=dl.inject(J1),pr=dl}catch{}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X1;Ot.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zm(e))throw Error(z(200));return K1(t,e,null,r)};Ot.createRoot=function(t,e){if(!zm(t))throw Error(z(299));var r=!1,s="",i=eb;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Fm(t,1,!1,null,null,r,!1,s,i),t[Lr]=e.current,Ha(t.nodeType===8?t.parentNode:t),new Bm(e)};Ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=wv(e),t=t===null?null:t.stateNode,t};Ot.flushSync=function(t){return ps(t)};Ot.hydrate=function(t,e,r){if(!Qc(e))throw Error(z(200));return Yc(null,t,e,!0,r)};Ot.hydrateRoot=function(t,e,r){if(!zm(t))throw Error(z(405));var s=r!=null&&r.hydratedSources||null,i=!1,a="",o=eb;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Z0(e,null,t,1,r??null,i,!1,a,o),t[Lr]=e.current,Ha(t),s)for(t=0;t<s.length;t++)r=s[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Kc(e)};Ot.render=function(t,e,r){if(!Qc(e))throw Error(z(200));return Yc(null,t,e,!1,r)};Ot.unmountComponentAtNode=function(t){if(!Qc(t))throw Error(z(40));return t._reactRootContainer?(ps(function(){Yc(null,null,t,!1,function(){t._reactRootContainer=null,t[Lr]=null})}),!0):!1};Ot.unstable_batchedUpdates=Mm;Ot.unstable_renderSubtreeIntoContainer=function(t,e,r,s){if(!Qc(r))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Yc(t,e,r,!1,s)};Ot.version="18.3.1-next-f1338f8080-20240426";function tb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tb)}catch(t){console.error(t)}}tb(),tv.exports=Ot;var Z1=tv.exports,qg=Z1;Tu.createRoot=qg.createRoot,Tu.hydrateRoot=qg.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eo(){return eo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},eo.apply(this,arguments)}var fn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fn||(fn={}));const Gg="popstate";function e_(t){t===void 0&&(t={});function e(s,i){let{pathname:a,search:o,hash:c}=s.location;return bh("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){return typeof i=="string"?i:uc(i)}return r_(e,r,null,t)}function Fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function t_(){return Math.random().toString(36).substr(2,8)}function Kg(t,e){return{usr:t.state,key:t.key,idx:e}}function bh(t,e,r,s){return r===void 0&&(r=null),eo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ei(e):e,{state:r,key:e&&e.key||s||t_()})}function uc(t){let{pathname:e="/",search:r="",hash:s=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Ei(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function r_(t,e,r,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,c=fn.Pop,d=null,u=m();u==null&&(u=0,o.replaceState(eo({},o.state,{idx:u}),""));function m(){return(o.state||{idx:null}).idx}function f(){c=fn.Pop;let x=m(),y=x==null?null:x-u;u=x,d&&d({action:c,location:k.location,delta:y})}function p(x,y){c=fn.Push;let v=bh(k.location,x,y);u=m()+1;let j=Kg(v,u),I=k.createHref(v);try{o.pushState(j,"",I)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(I)}a&&d&&d({action:c,location:k.location,delta:1})}function b(x,y){c=fn.Replace;let v=bh(k.location,x,y);u=m();let j=Kg(v,u),I=k.createHref(v);o.replaceState(j,"",I),a&&d&&d({action:c,location:k.location,delta:0})}function E(x){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof x=="string"?x:uc(x);return v=v.replace(/ $/,"%20"),Fe(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let k={get action(){return c},get location(){return t(i,o)},listen(x){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Gg,f),d=x,()=>{i.removeEventListener(Gg,f),d=null}},createHref(x){return e(i,x)},createURL:E,encodeLocation(x){let y=E(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:b,go(x){return o.go(x)}};return k}var Qg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Qg||(Qg={}));function n_(t,e,r){return r===void 0&&(r="/"),s_(t,e,r)}function s_(t,e,r,s){let i=typeof e=="string"?Ei(e):e,a=$m(i.pathname||"/",r);if(a==null)return null;let o=rb(t);i_(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let u=x_(a);c=f_(o[d],u)}return c}function rb(t,e,r,s){e===void 0&&(e=[]),r===void 0&&(r=[]),s===void 0&&(s="");let i=(a,o,c)=>{let d={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};d.relativePath.startsWith("/")&&(Fe(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let u=_n([s,d.relativePath]),m=r.concat(d);a.children&&a.children.length>0&&(Fe(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),rb(a.children,e,m,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:h_(u,a.index),routesMeta:m})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,o);else for(let d of nb(a.path))i(a,o,d)}),e}function nb(t){let e=t.split("/");if(e.length===0)return[];let[r,...s]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let o=nb(s.join("/")),c=[];return c.push(...o.map(d=>d===""?a:[a,d].join("/"))),i&&c.push(...o),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function i_(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:m_(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const a_=/^:[\w-]+$/,o_=3,l_=2,c_=1,d_=10,u_=-2,Yg=t=>t==="*";function h_(t,e){let r=t.split("/"),s=r.length;return r.some(Yg)&&(s+=u_),e&&(s+=l_),r.filter(i=>!Yg(i)).reduce((i,a)=>i+(a_.test(a)?o_:a===""?c_:d_),s)}function m_(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function f_(t,e,r){let{routesMeta:s}=t,i={},a="/",o=[];for(let c=0;c<s.length;++c){let d=s[c],u=c===s.length-1,m=a==="/"?e:e.slice(a.length)||"/",f=p_({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},m),p=d.route;if(!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:_n([a,f.pathname]),pathnameBase:w_(_n([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=_n([a,f.pathnameBase]))}return o}function p_(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=g_(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:s.reduce((u,m,f)=>{let{paramName:p,isOptional:b}=m;if(p==="*"){let k=c[f]||"";o=a.slice(0,a.length-k.length).replace(/(.)\/+$/,"$1")}const E=c[f];return b&&!E?u[p]=void 0:u[p]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function g_(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Wm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(s.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function x_(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function $m(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}const y_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,v_=t=>y_.test(t);function b_(t,e){e===void 0&&(e="/");let{pathname:r,search:s="",hash:i=""}=typeof t=="string"?Ei(t):t,a;if(r)if(v_(r))a=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Wm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?a=Xg(r.substring(1),"/"):a=Xg(r,e)}else a=e;return{pathname:a,search:N_(s),hash:__(i)}}function Xg(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function du(t,e,r,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function j_(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Hm(t,e){let r=j_(t);return e?r.map((s,i)=>i===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function qm(t,e,r,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=Ei(t):(i=eo({},t),Fe(!i.pathname||!i.pathname.includes("?"),du("?","pathname","search",i)),Fe(!i.pathname||!i.pathname.includes("#"),du("#","pathname","hash",i)),Fe(!i.search||!i.search.includes("#"),du("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=r;else{let f=e.length-1;if(!s&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}c=f>=0?e[f]:"/"}let d=b_(i,c),u=o&&o!=="/"&&o.endsWith("/"),m=(a||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(u||m)&&(d.pathname+="/"),d}const _n=t=>t.join("/").replace(/\/\/+/g,"/"),w_=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),N_=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,__=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function k_(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const sb=["post","put","patch","delete"];new Set(sb);const E_=["get",...sb];new Set(E_);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function to(){return to=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},to.apply(this,arguments)}const Gm=S.createContext(null),T_=S.createContext(null),Wn=S.createContext(null),Xc=S.createContext(null),Hr=S.createContext({outlet:null,matches:[],isDataRoute:!1}),ib=S.createContext(null);function S_(t,e){let{relative:r}=e===void 0?{}:e;Ti()||Fe(!1);let{basename:s,navigator:i}=S.useContext(Wn),{hash:a,pathname:o,search:c}=ob(t,{relative:r}),d=o;return s!=="/"&&(d=o==="/"?s:_n([s,o])),i.createHref({pathname:d,search:c,hash:a})}function Ti(){return S.useContext(Xc)!=null}function $n(){return Ti()||Fe(!1),S.useContext(Xc).location}function ab(t){S.useContext(Wn).static||S.useLayoutEffect(t)}function ae(){let{isDataRoute:t}=S.useContext(Hr);return t?B_():I_()}function I_(){Ti()||Fe(!1);let t=S.useContext(Gm),{basename:e,future:r,navigator:s}=S.useContext(Wn),{matches:i}=S.useContext(Hr),{pathname:a}=$n(),o=JSON.stringify(Hm(i,r.v7_relativeSplatPath)),c=S.useRef(!1);return ab(()=>{c.current=!0}),S.useCallback(function(u,m){if(m===void 0&&(m={}),!c.current)return;if(typeof u=="number"){s.go(u);return}let f=qm(u,JSON.parse(o),a,m.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:_n([e,f.pathname])),(m.replace?s.replace:s.push)(f,m.state,m)},[e,s,o,a,t])}function jo(){let{matches:t}=S.useContext(Hr),e=t[t.length-1];return e?e.params:{}}function ob(t,e){let{relative:r}=e===void 0?{}:e,{future:s}=S.useContext(Wn),{matches:i}=S.useContext(Hr),{pathname:a}=$n(),o=JSON.stringify(Hm(i,s.v7_relativeSplatPath));return S.useMemo(()=>qm(t,JSON.parse(o),a,r==="path"),[t,o,a,r])}function C_(t,e){return A_(t,e)}function A_(t,e,r,s){Ti()||Fe(!1);let{navigator:i}=S.useContext(Wn),{matches:a}=S.useContext(Hr),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let u=$n(),m;if(e){var f;let x=typeof e=="string"?Ei(e):e;d==="/"||(f=x.pathname)!=null&&f.startsWith(d)||Fe(!1),m=x}else m=u;let p=m.pathname||"/",b=p;if(d!=="/"){let x=d.replace(/^\//,"").split("/");b="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let E=n_(t,{pathname:b}),k=L_(E&&E.map(x=>Object.assign({},x,{params:Object.assign({},c,x.params),pathname:_n([d,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?d:_n([d,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,r,s);return e&&k?S.createElement(Xc.Provider,{value:{location:to({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:fn.Pop}},k):k}function P_(){let t=U_(),e=k_(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),r?S.createElement("pre",{style:i},r):null,null)}const R_=S.createElement(P_,null);class D_ extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?S.createElement(Hr.Provider,{value:this.props.routeContext},S.createElement(ib.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function M_(t){let{routeContext:e,match:r,children:s}=t,i=S.useContext(Gm);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(Hr.Provider,{value:e},s)}function L_(t,e,r,s){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),s===void 0&&(s=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,c=(i=r)==null?void 0:i.errors;if(c!=null){let m=o.findIndex(f=>f.route.id&&(c==null?void 0:c[f.route.id])!==void 0);m>=0||Fe(!1),o=o.slice(0,Math.min(o.length,m+1))}let d=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let m=0;m<o.length;m++){let f=o[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=m),f.route.id){let{loaderData:p,errors:b}=r,E=f.route.loader&&p[f.route.id]===void 0&&(!b||b[f.route.id]===void 0);if(f.route.lazy||E){d=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((m,f,p)=>{let b,E=!1,k=null,x=null;r&&(b=c&&f.route.id?c[f.route.id]:void 0,k=f.route.errorElement||R_,d&&(u<0&&p===0?(z_("route-fallback"),E=!0,x=null):u===p&&(E=!0,x=f.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,p+1)),v=()=>{let j;return b?j=k:E?j=x:f.route.Component?j=S.createElement(f.route.Component,null):f.route.element?j=f.route.element:j=m,S.createElement(M_,{match:f,routeContext:{outlet:m,matches:y,isDataRoute:r!=null},children:j})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?S.createElement(D_,{location:r.location,revalidation:r.revalidation,component:k,error:b,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var lb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(lb||{}),cb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(cb||{});function V_(t){let e=S.useContext(Gm);return e||Fe(!1),e}function O_(t){let e=S.useContext(T_);return e||Fe(!1),e}function F_(t){let e=S.useContext(Hr);return e||Fe(!1),e}function db(t){let e=F_(),r=e.matches[e.matches.length-1];return r.route.id||Fe(!1),r.route.id}function U_(){var t;let e=S.useContext(ib),r=O_(),s=db();return e!==void 0?e:(t=r.errors)==null?void 0:t[s]}function B_(){let{router:t}=V_(lb.UseNavigateStable),e=db(cb.UseNavigateStable),r=S.useRef(!1);return ab(()=>{r.current=!0}),S.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,to({fromRouteId:e},a)))},[t,e])}const Jg={};function z_(t,e,r){Jg[t]||(Jg[t]=!0)}function W_(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function $_(t){let{to:e,replace:r,state:s,relative:i}=t;Ti()||Fe(!1);let{future:a,static:o}=S.useContext(Wn),{matches:c}=S.useContext(Hr),{pathname:d}=$n(),u=ae(),m=qm(e,Hm(c,a.v7_relativeSplatPath),d,i==="path"),f=JSON.stringify(m);return S.useEffect(()=>u(JSON.parse(f),{replace:r,state:s,relative:i}),[u,f,i,r,s]),null}function re(t){Fe(!1)}function H_(t){let{basename:e="/",children:r=null,location:s,navigationType:i=fn.Pop,navigator:a,static:o=!1,future:c}=t;Ti()&&Fe(!1);let d=e.replace(/^\/*/,"/"),u=S.useMemo(()=>({basename:d,navigator:a,static:o,future:to({v7_relativeSplatPath:!1},c)}),[d,c,a,o]);typeof s=="string"&&(s=Ei(s));let{pathname:m="/",search:f="",hash:p="",state:b=null,key:E="default"}=s,k=S.useMemo(()=>{let x=$m(m,d);return x==null?null:{location:{pathname:x,search:f,hash:p,state:b,key:E},navigationType:i}},[d,m,f,p,b,E,i]);return k==null?null:S.createElement(Wn.Provider,{value:u},S.createElement(Xc.Provider,{children:r,value:k}))}function q_(t){let{children:e,location:r}=t;return C_(jh(e),r)}new Promise(()=>{});function jh(t,e){e===void 0&&(e=[]);let r=[];return S.Children.forEach(t,(s,i)=>{if(!S.isValidElement(s))return;let a=[...e,i];if(s.type===S.Fragment){r.push.apply(r,jh(s.props.children,a));return}s.type!==re&&Fe(!1),!s.props.index||!s.props.children||Fe(!1);let o={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=jh(s.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wh(){return wh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},wh.apply(this,arguments)}function G_(t,e){if(t==null)return{};var r={},s=Object.keys(t),i,a;for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function K_(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Q_(t,e){return t.button===0&&(!e||e==="_self")&&!K_(t)}function Nh(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let s=t[r];return e.concat(Array.isArray(s)?s.map(i=>[r,i]):[[r,s]])},[]))}function Y_(t,e){let r=Nh(t);return e&&e.forEach((s,i)=>{r.has(i)||e.getAll(i).forEach(a=>{r.append(i,a)})}),r}const X_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],J_="6";try{window.__reactRouterVersion=J_}catch{}const Z_="startTransition",Zg=z2[Z_];function ek(t){let{basename:e,children:r,future:s,window:i}=t,a=S.useRef();a.current==null&&(a.current=e_({window:i,v5Compat:!0}));let o=a.current,[c,d]=S.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},m=S.useCallback(f=>{u&&Zg?Zg(()=>d(f)):d(f)},[d,u]);return S.useLayoutEffect(()=>o.listen(m),[o,m]),S.useEffect(()=>W_(s),[s]),S.createElement(H_,{basename:e,children:r,location:c.location,navigationType:c.action,navigator:o,future:s})}const tk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,F=S.forwardRef(function(e,r){let{onClick:s,relative:i,reloadDocument:a,replace:o,state:c,target:d,to:u,preventScrollReset:m,viewTransition:f}=e,p=G_(e,X_),{basename:b}=S.useContext(Wn),E,k=!1;if(typeof u=="string"&&rk.test(u)&&(E=u,tk))try{let j=new URL(window.location.href),I=u.startsWith("//")?new URL(j.protocol+u):new URL(u),M=$m(I.pathname,b);I.origin===j.origin&&M!=null?u=M+I.search+I.hash:k=!0}catch{}let x=S_(u,{relative:i}),y=nk(u,{replace:o,state:c,target:d,preventScrollReset:m,relative:i,viewTransition:f});function v(j){s&&s(j),j.defaultPrevented||y(j)}return S.createElement("a",wh({},p,{href:E||x,onClick:k||a?s:v,ref:r,target:d}))});var ex;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ex||(ex={}));var tx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tx||(tx={}));function nk(t,e){let{target:r,replace:s,state:i,preventScrollReset:a,relative:o,viewTransition:c}=e===void 0?{}:e,d=ae(),u=$n(),m=ob(t,{relative:o});return S.useCallback(f=>{if(Q_(f,r)){f.preventDefault();let p=s!==void 0?s:uc(u)===uc(m);d(t,{replace:p,state:i,preventScrollReset:a,relative:o,viewTransition:c})}},[u,d,m,s,i,r,t,a,o,c])}function sk(t){let e=S.useRef(Nh(t)),r=S.useRef(!1),s=$n(),i=S.useMemo(()=>Y_(s.search,r.current?null:e.current),[s.search]),a=ae(),o=S.useCallback((c,d)=>{const u=Nh(typeof c=="function"?c(i):c);r.current=!0,a("?"+u,d)},[a,i]);return[i,o]}const Ct={USERS:"marketing_management_website_users",PROJECTS:"marketing_management_website_projects",TICKETS:"marketing_management_website_tickets",MESSAGES:"marketing_management_website_messages",WEBSITE_ANALYTICS:"marketing_management_website_website_analytics",SOCIAL_ANALYTICS:"marketing_management_website_social_analytics"},Il=[{id:"user-1",email:"admin@system.com",password:"admin123",fullName:"Admin User",phone:"+27821234567",role:"admin",createdAt:new Date("2025-01-01"),updatedAt:new Date("2025-01-01"),isActive:!0},{id:"user-2",email:"dev@system.com",password:"dev123",fullName:"John Developer",phone:"+27821234568",role:"web_developer",createdAt:new Date("2025-01-02"),updatedAt:new Date("2025-01-02"),isActive:!0},{id:"user-3",email:"jane.dev@system.com",password:"dev123",fullName:"Jane Smith",phone:"+27821234569",role:"web_developer",createdAt:new Date("2025-01-02"),updatedAt:new Date("2025-01-02"),isActive:!0},{id:"user-4",email:"social@system.com",password:"social123",fullName:"Sarah Cohen",phone:"+27821234570",role:"social_media_coordinator",createdAt:new Date("2025-01-03"),updatedAt:new Date("2025-01-03"),isActive:!0},{id:"user-5",email:"client@system.com",password:"client123",fullName:"Michael Client",phone:"+27821234571",role:"client",createdAt:new Date("2025-01-04"),updatedAt:new Date("2025-01-04"),isActive:!0},{id:"user-6",email:"client2@company.com",password:"client123",fullName:"Emma Business",phone:"+27821234572",role:"client",createdAt:new Date("2025-01-05"),updatedAt:new Date("2025-01-05"),isActive:!0}],ik=[{id:"proj-1",name:"SpecCon",description:"Main SpecCon corporate website - showcasing our services and portfolio",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",socialMediaCoordinatorId:"user-4",currentStage:"maintenance",status:"active",websiteUrl:"https://speccon.co.za",googleAnalyticsPropertyId:"G-XXXXXXXXXX",googleAnalyticsViewId:"123456789",createdAt:new Date("2024-06-01"),launchDate:new Date("2024-08-15"),updatedAt:new Date("2025-02-08")},{id:"proj-2",name:"Andebe",description:"Andebe Skills Development & Training platform",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",socialMediaCoordinatorId:"user-4",currentStage:"development",status:"active",websiteUrl:"https://andebe.co.za",googleAnalyticsPropertyId:"G-YYYYYYYYYY",googleAnalyticsViewId:"987654321",createdAt:new Date("2024-09-15"),updatedAt:new Date("2025-02-09")},{id:"proj-3",name:"Megrolowveld",description:"Megrolowveld business and services website",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",socialMediaCoordinatorId:"user-4",currentStage:"testing",status:"active",websiteUrl:"https://megrolowveld.co.za",createdAt:new Date("2024-10-01"),updatedAt:new Date("2025-02-05")},{id:"proj-4",name:"Skills Development Facilitation",description:"Skills development facilitation and training coordination platform",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",currentStage:"design",status:"active",createdAt:new Date("2024-11-20"),updatedAt:new Date("2025-02-08")},{id:"proj-5",name:"InfinityNPO",description:"Infinity NPO - Non-profit organization website for community development",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",socialMediaCoordinatorId:"user-4",currentStage:"launch",status:"active",websiteUrl:"https://infinitynpo.co.za",createdAt:new Date("2024-08-10"),launchDate:new Date("2024-12-01"),updatedAt:new Date("2025-02-06")},{id:"proj-6",name:"InfinityLearn",description:"InfinityLearn e-learning platform for online education and training",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",socialMediaCoordinatorId:"user-4",currentStage:"development",status:"active",websiteUrl:"https://infinitylearn.co.za",createdAt:new Date("2024-09-01"),updatedAt:new Date("2025-02-09")},{id:"proj-7",name:"Elearning",description:"General e-learning platform with course management and student tracking",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",currentStage:"development",status:"active",createdAt:new Date("2024-10-15"),updatedAt:new Date("2025-02-08")},{id:"proj-8",name:"TAP",description:"Training and Assessment Platform for skills development",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",socialMediaCoordinatorId:"user-4",currentStage:"testing",status:"active",websiteUrl:"https://tap.co.za",createdAt:new Date("2024-07-20"),updatedAt:new Date("2025-02-07")},{id:"proj-9",name:"LMS",description:"Learning Management System for comprehensive training programs",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",socialMediaCoordinatorId:"user-4",currentStage:"launch",status:"active",websiteUrl:"https://lms.speccon.co.za",createdAt:new Date("2024-05-15"),launchDate:new Date("2024-11-01"),updatedAt:new Date("2025-02-05")},{id:"proj-10",name:"Venueideas",description:"Wedding and event venue booking and discovery platform",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",currentStage:"planning",status:"active",createdAt:new Date("2025-01-10"),updatedAt:new Date("2025-02-08")},{id:"proj-11",name:"Weddingideas",description:"Complete wedding planning resource and vendor directory",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",socialMediaCoordinatorId:"user-4",currentStage:"design",status:"active",createdAt:new Date("2024-12-05"),updatedAt:new Date("2025-02-06")},{id:"proj-12",name:"Workreadiness",description:"Work readiness training and assessment platform for job seekers",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",socialMediaCoordinatorId:"user-4",currentStage:"development",status:"active",websiteUrl:"https://workreadiness.co.za",createdAt:new Date("2024-08-25"),updatedAt:new Date("2025-02-09")},{id:"proj-13",name:"Specconacademy",description:"SpecCon Academy - comprehensive training academy platform",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",currentStage:"testing",status:"active",websiteUrl:"https://specconacademy.co.za",createdAt:new Date("2024-07-10"),updatedAt:new Date("2025-02-07")},{id:"proj-14",name:"Trouidees",description:"Wedding ideas and planning inspiration platform (Afrikaans)",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",socialMediaCoordinatorId:"user-4",currentStage:"design",status:"active",createdAt:new Date("2025-01-05"),updatedAt:new Date("2025-02-08")},{id:"proj-15",name:"Employment Equity Act",description:"Employment Equity Act compliance and reporting platform",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",currentStage:"planning",status:"active",createdAt:new Date("2025-01-20"),updatedAt:new Date("2025-02-05")},{id:"proj-16",name:"Leeromtelees",description:"Afrikaans educational platform for reading and learning",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",socialMediaCoordinatorId:"user-4",currentStage:"development",status:"active",createdAt:new Date("2024-11-01"),updatedAt:new Date("2025-02-09")},{id:"proj-17",name:"Grade.co.za",description:"Grade tracking and academic performance management system",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",socialMediaCoordinatorId:"user-4",currentStage:"testing",status:"active",websiteUrl:"https://grade.co.za",createdAt:new Date("2024-09-20"),updatedAt:new Date("2025-02-08")},{id:"proj-18",name:"SpecCon Buddies Primary Schools",description:"Primary school support and buddy system platform",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",currentStage:"launch",status:"active",websiteUrl:"https://buddies.speccon.co.za",createdAt:new Date("2024-06-15"),launchDate:new Date("2024-10-20"),updatedAt:new Date("2025-02-06")},{id:"proj-19",name:"Coloring",description:"Interactive coloring and creative activities platform for children",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",socialMediaCoordinatorId:"user-4",currentStage:"development",status:"active",createdAt:new Date("2024-12-10"),updatedAt:new Date("2025-02-09")},{id:"proj-20",name:"Classrooms",description:"Virtual classroom management and online teaching platform",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",socialMediaCoordinatorId:"user-4",currentStage:"testing",status:"active",websiteUrl:"https://classrooms.speccon.co.za",createdAt:new Date("2024-08-01"),updatedAt:new Date("2025-02-07")},{id:"proj-21",name:"SpecCon Social Media Campaign Q1 2025",description:"Comprehensive social media strategy for SpecCon brand awareness and lead generation",projectType:"social_media",clientId:"user-5",socialMediaCoordinatorId:"user-4",currentStage:"launch",status:"active",socialMediaPlatforms:["facebook","instagram","linkedin","twitter"],campaignGoals:"Increase brand awareness by 40%, generate 200+ qualified leads, boost engagement rate to 8%",targetAudience:"Business owners, HR managers, training coordinators in South Africa",createdAt:new Date("2024-12-15"),launchDate:new Date("2025-01-01"),updatedAt:new Date("2025-02-09"),notes:"Focus on skills development and training services"},{id:"proj-22",name:"InfinityNPO Community Outreach",description:"Social media campaign to raise awareness for community development initiatives",projectType:"social_media",clientId:"user-6",socialMediaCoordinatorId:"user-4",currentStage:"maintenance",status:"active",socialMediaPlatforms:["facebook","instagram","twitter"],campaignGoals:"Increase volunteer sign-ups by 50%, raise R100k in donations, reach 50k people monthly",targetAudience:"Community members, potential donors, volunteers aged 25-55",createdAt:new Date("2024-11-20"),launchDate:new Date("2024-12-01"),updatedAt:new Date("2025-02-08")},{id:"proj-23",name:"Wedding Ideas Influencer Campaign",description:"Influencer partnership campaign for wedding and venue booking platform",projectType:"social_media",clientId:"user-5",socialMediaCoordinatorId:"user-4",currentStage:"planning",status:"active",socialMediaPlatforms:["instagram","tiktok","facebook"],campaignGoals:"Partner with 20 wedding influencers, reach 500k engaged couples, drive 10k website visits",targetAudience:"Engaged couples aged 24-35, wedding planners, event coordinators",createdAt:new Date("2025-01-15"),updatedAt:new Date("2025-02-09")},{id:"proj-24",name:"Andebe Skills Development Launch",description:"Product launch campaign for new online training platform",projectType:"social_media",clientId:"user-5",socialMediaCoordinatorId:"user-4",currentStage:"development",status:"active",socialMediaPlatforms:["linkedin","facebook","youtube"],campaignGoals:"Generate 500 course enrollments, establish thought leadership, reach 100k professionals",targetAudience:"Working professionals, career changers, recent graduates seeking upskilling",createdAt:new Date("2025-01-20"),updatedAt:new Date("2025-02-08")},{id:"proj-25",name:"Educational Content Series - Grade.co.za",description:"Educational social media content to promote academic tracking platform",projectType:"social_media",clientId:"user-6",socialMediaCoordinatorId:"user-4",currentStage:"launch",status:"active",socialMediaPlatforms:["facebook","instagram","twitter"],campaignGoals:"Engage 5k parents, increase app downloads by 200%, position as education leader",targetAudience:"Parents of school-aged children, teachers, education administrators",createdAt:new Date("2024-12-01"),launchDate:new Date("2025-01-15"),updatedAt:new Date("2025-02-07")}],ak=[{id:"ticket-1",projectId:"proj-1",createdBy:"user-5",assignedTo:"user-2",title:"Update homepage hero image",description:"The current hero image needs to be replaced with the new brand imagery provided in the project assets folder.",type:"content_change",priority:"medium",status:"in_progress",createdAt:new Date("2025-02-01"),updatedAt:new Date("2025-02-08")},{id:"ticket-2",projectId:"proj-1",createdBy:"user-5",assignedTo:"user-2",title:"Fix mobile navigation menu",description:"The hamburger menu on mobile devices is not opening correctly. It seems to be a JavaScript issue.",type:"bug_report",priority:"high",status:"open",createdAt:new Date("2025-02-07"),updatedAt:new Date("2025-02-07")},{id:"ticket-3",projectId:"proj-2",createdBy:"user-6",assignedTo:"user-3",title:"Add product filtering functionality",description:"Users should be able to filter products by category, price range, and availability.",type:"feature_request",priority:"high",status:"in_progress",createdAt:new Date("2025-02-03"),updatedAt:new Date("2025-02-09")},{id:"ticket-4",projectId:"proj-2",createdBy:"user-6",assignedTo:"user-3",title:"Update product descriptions",description:"Need to update all product descriptions with the new copywriting provided by the marketing team.",type:"content_change",priority:"low",status:"resolved",createdAt:new Date("2025-01-28"),updatedAt:new Date("2025-02-05"),resolvedAt:new Date("2025-02-05")},{id:"ticket-5",projectId:"proj-3",createdBy:"user-5",assignedTo:"user-2",title:"Redesign contact form",description:"The contact form needs a visual redesign to match the new brand guidelines.",type:"design_update",priority:"medium",status:"resolved",createdAt:new Date("2025-01-25"),updatedAt:new Date("2025-02-02"),resolvedAt:new Date("2025-02-02")},{id:"ticket-6",projectId:"proj-1",createdBy:"user-2",assignedTo:"user-2",title:"Optimize page load speed",description:"Homepage is loading slowly. Need to optimize images and lazy load components.",type:"bug_report",priority:"high",status:"open",createdAt:new Date("2025-02-08"),updatedAt:new Date("2025-02-08")},{id:"ticket-7",projectId:"proj-4",createdBy:"user-6",title:"Add email notification system",description:"Customers should receive email confirmations when they make a reservation.",type:"feature_request",priority:"critical",status:"open",createdAt:new Date("2025-02-09"),updatedAt:new Date("2025-02-09")},{id:"ticket-8",projectId:"proj-2",createdBy:"user-6",assignedTo:"user-3",title:"Shopping cart calculation error",description:"The shopping cart is not calculating the total correctly when discount codes are applied.",type:"bug_report",priority:"critical",status:"in_progress",createdAt:new Date("2025-02-08"),updatedAt:new Date("2025-02-09")},{id:"ticket-9",projectId:"proj-3",createdBy:"user-5",assignedTo:"user-2",title:"Update team member bios",description:"Need to add two new team members to the About page and update existing bios.",type:"content_change",priority:"low",status:"closed",createdAt:new Date("2025-01-20"),updatedAt:new Date("2025-01-28"),resolvedAt:new Date("2025-01-28")},{id:"ticket-10",projectId:"proj-5",createdBy:"user-5",assignedTo:"user-2",title:"SEO meta tags optimization",description:"Update meta descriptions and keywords for better search engine visibility.",type:"content_change",priority:"medium",status:"resolved",createdAt:new Date("2025-01-30"),updatedAt:new Date("2025-02-04"),resolvedAt:new Date("2025-02-04")}],ok=[{id:"message-1",senderId:"user-1",recipientId:"user-2",subject:"Project Priority Update",content:"Hi John, I've updated the priority for the SpecCon project. Please focus on the mobile navigation fixes first as they're impacting user experience significantly.",isRead:!1,isBroadcast:!1,projectId:"proj-1",createdAt:new Date("2025-02-09T08:00:00"),updatedAt:new Date("2025-02-09T08:00:00")},{id:"message-2",senderId:"user-4",recipientId:"user-1",subject:"Social Media Campaign Performance",content:"The Q1 social media campaign is performing well. We've exceeded engagement targets by 25%. Should we allocate additional budget for boosted posts?",isRead:!0,isBroadcast:!1,projectId:"proj-21",createdAt:new Date("2025-02-08T14:30:00"),updatedAt:new Date("2025-02-08T14:30:00")},{id:"message-3",senderId:"user-5",recipientId:"user-3",subject:"Andebe Platform Requirements",content:"For the Andebe platform, we need to ensure all training modules include progress tracking and certificate generation. The client wants this to be mandatory for all courses.",isRead:!1,isBroadcast:!1,projectId:"proj-2",createdAt:new Date("2025-02-09T10:15:00"),updatedAt:new Date("2025-02-09T10:15:00")},{id:"message-4",senderId:"user-1",recipientId:void 0,subject:"System Maintenance Notice",content:"Heads up team! We'll be performing system maintenance this Friday from 10 PM to 12 AM SAST. All services will be temporarily unavailable. Please save your work before then.",isRead:!1,isBroadcast:!0,createdAt:new Date("2025-02-07T16:00:00"),updatedAt:new Date("2025-02-07T16:00:00")},{id:"message-5",senderId:"user-2",recipientId:"user-4",subject:"Website Launch Coordination",content:"Sarah, the InfinityNPO website is ready for launch. Can we coordinate the social media posts to go live simultaneously with the website deployment?",isRead:!0,isBroadcast:!1,projectId:"proj-5",createdAt:new Date("2025-02-08T11:45:00"),updatedAt:new Date("2025-02-08T11:45:00")},{id:"message-6",senderId:"user-6",recipientId:"user-1",subject:"New Project Timeline",content:"I've reviewed the proposed timeline for the Venueideas platform. The 3-month timeline seems aggressive. Can we extend it to 4 months to ensure quality?",isRead:!1,isBroadcast:!1,projectId:"proj-10",createdAt:new Date("2025-02-09T13:20:00"),updatedAt:new Date("2025-02-09T13:20:00")},{id:"message-7",senderId:"user-3",recipientId:"user-5",subject:"Design Feedback Request",content:"Michael, I've completed the initial design mockups for the Megrolowveld website. Could you please review them and let me know your thoughts on the color scheme and layout?",isRead:!0,isBroadcast:!1,projectId:"proj-3",createdAt:new Date("2025-02-08T09:30:00"),updatedAt:new Date("2025-02-08T09:30:00")}],lk=[{id:"analytics-1",projectId:"proj-1",date:new Date("2025-02-01"),pageViews:1250,uniqueVisitors:890,bounceRate:42.5,recordedBy:"user-2",createdAt:new Date("2025-02-02")},{id:"analytics-2",projectId:"proj-1",date:new Date("2025-02-08"),pageViews:1580,uniqueVisitors:1120,bounceRate:38.2,recordedBy:"user-2",createdAt:new Date("2025-02-09")},{id:"analytics-3",projectId:"proj-3",date:new Date("2025-02-01"),pageViews:2340,uniqueVisitors:1650,bounceRate:35.8,recordedBy:"user-2",createdAt:new Date("2025-02-02")},{id:"analytics-4",projectId:"proj-3",date:new Date("2025-02-08"),pageViews:2890,uniqueVisitors:2010,bounceRate:33.1,recordedBy:"user-2",createdAt:new Date("2025-02-09")}],ck=[{id:"social-1",projectId:"proj-1",platform:"facebook",date:new Date("2025-02-01"),posts:5,engagement:342,reach:4500,followers:2300,likes:280,comments:42,shares:20,recordedBy:"user-4",createdAt:new Date("2025-02-02")},{id:"social-2",projectId:"proj-1",platform:"instagram",date:new Date("2025-02-01"),posts:7,engagement:589,reach:6200,followers:3100,likes:520,comments:69,recordedBy:"user-4",createdAt:new Date("2025-02-02")},{id:"social-3",projectId:"proj-3",platform:"linkedin",date:new Date("2025-02-01"),posts:3,engagement:156,reach:2800,followers:980,likes:120,comments:36,recordedBy:"user-4",createdAt:new Date("2025-02-02")},{id:"social-4",projectId:"proj-2",platform:"twitter",date:new Date("2025-02-05"),posts:8,engagement:421,reach:5100,followers:1850,likes:340,comments:51,shares:30,recordedBy:"user-4",createdAt:new Date("2025-02-06")}];function Si(t,e){if(typeof window>"u")return e;try{const r=window.localStorage.getItem(t);return r?JSON.parse(r):e}catch(r){return console.error(`Error loading ${t} from localStorage:`,r),e}}function _s(t,e){if(!(typeof window>"u"))try{window.localStorage.setItem(t,JSON.stringify(e))}catch(r){console.error(`Error saving ${t} to localStorage:`,r)}}function ve(){return Si(Ct.USERS,Il)}function dk(t,e){const s=ve().map(i=>i.id===t?{...i,...e,updatedAt:new Date}:i);_s(Ct.USERS,s)}function uk(t){const r=ve().map(s=>s.id===t?{...s,isActive:!s.isActive,updatedAt:new Date}:s);_s(Ct.USERS,r)}function bt(){return Si(Ct.PROJECTS,ik)}function Lt(){return Si(Ct.TICKETS,ak)}function hk(t){const r=[...Lt(),t];_s(Ct.TICKETS,r)}function mk(t){const r=[...ve(),t];_s(Ct.USERS,r)}function Jc(){return Si(Ct.MESSAGES,ok)}function ub(){return Si(Ct.WEBSITE_ANALYTICS,lk)}function Km(){return Si(Ct.SOCIAL_ANALYTICS,ck)}function fk(t){return ve().find(e=>e.id===t)}function wo(t){return bt().find(e=>e.id===t)}function kr(t,e){const r=bt();return e==="admin"?r:e==="web_developer"?r.filter(s=>s.webDeveloperId===t):e==="social_media_coordinator"?r.filter(s=>s.socialMediaCoordinatorId===t):e==="client"?r.filter(s=>s.clientId===t):[]}function hb(t){return Lt().filter(e=>e.projectId===t)}function No(t,e){const r=Lt();if(e==="admin")return r;if(e==="web_developer")return r.filter(s=>s.assignedTo===t);if(e==="client")return r.filter(s=>s.createdBy===t);if(e==="social_media_coordinator"){const i=kr(t,e).map(a=>a.id);return r.filter(a=>i.includes(a.projectId))}return[]}function Pn(t){return Jc().filter(e=>e.senderId===t||e.recipientId===t||e.isBroadcast)}function pk(t){return Pn(t).filter(e=>!e.isRead&&(e.recipientId===t||e.isBroadcast))}function gk(t){const r=Jc().map(s=>s.id===t?{...s,isRead:!0,updatedAt:new Date}:s);_s(Ct.MESSAGES,r)}function xk(t){const e=Jc(),r=e.filter(s=>s.id!==t);return r.length<e.length?(_s(Ct.MESSAGES,r),!0):!1}function yk(t){const r=[...Jc(),t];_s(Ct.MESSAGES,r)}function vk(t){const e=ve(),r=e.filter(s=>s.id!==t);return r.length===e.length?!1:(localStorage.setItem(Ct.USERS,JSON.stringify(r)),!0)}const bk=()=>{};var rx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=function(t){const e=[];let r=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},jk=function(t){const e=[];let r=0,s=0;for(;r<t.length;){const i=t[r++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[s++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],o=t[r++],c=t[r++],d=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[s++]=String.fromCharCode(55296+(d>>10)),e[s++]=String.fromCharCode(56320+(d&1023))}else{const a=t[r++],o=t[r++];e[s++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},fb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,d=i+2<t.length,u=d?t[i+2]:0,m=a>>2,f=(a&3)<<4|c>>4;let p=(c&15)<<2|u>>6,b=u&63;d||(b=64,o||(p=64)),s.push(r[m],r[f],r[p],r[b])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],c=i<t.length?r[t.charAt(i)]:0;++i;const u=i<t.length?r[t.charAt(i)]:64;++i;const f=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||c==null||u==null||f==null)throw new wk;const p=a<<2|c>>4;if(s.push(p),u!==64){const b=c<<4&240|u>>2;if(s.push(b),f!==64){const E=u<<6&192|f;s.push(E)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Nk=function(t){const e=mb(t);return fb.encodeByteArray(e,!0)},hc=function(t){return Nk(t).replace(/\./g,"")},pb=function(t){try{return fb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=()=>_k().__FIREBASE_DEFAULTS__,Ek=()=>{if(typeof process>"u"||typeof rx>"u")return;const t=rx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Tk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pb(t[1]);return e&&JSON.parse(e)},Zc=()=>{try{return bk()||kk()||Ek()||Tk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gb=t=>{var e,r;return(r=(e=Zc())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},Sk=t=>{const e=gb(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),s]:[e.substring(0,r),s]},xb=()=>{var t;return(t=Zc())==null?void 0:t.config},yb=t=>{var e;return(e=Zc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,s)=>{r?this.reject(r):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vb(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[hc(JSON.stringify(r)),hc(JSON.stringify(o)),""].join(".")}const Ca={};function Ak(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ca))Ca[e]?t.emulator.push(e):t.prod.push(e);return t}function Pk(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let nx=!1;function bb(t,e){if(typeof window>"u"||typeof document>"u"||!Ii(window.location.host)||Ca[t]===e||Ca[t]||nx)return;Ca[t]=e;function r(p){return`__firebase__banner__${p}`}const s="__firebase__banner",a=Ak().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function c(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function d(p,b){p.setAttribute("width","24"),p.setAttribute("id",b),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{nx=!0,o()},p}function m(p,b){p.setAttribute("id",b),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=Pk(s),b=r("text"),E=document.getElementById(b)||document.createElement("span"),k=r("learnmore"),x=document.getElementById(k)||document.createElement("a"),y=r("preprendIcon"),v=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const j=p.element;c(j),m(x,k);const I=u();d(v,y),j.append(v,E,x,I),document.body.appendChild(j)}a?(E.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function Dk(){var e;const t=(e=Zc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Lk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Vk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ok(){const t=pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Fk(){return!Dk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Uk(){try{return typeof indexedDB=="object"}catch{return!1}}function Bk(){return new Promise((t,e)=>{try{let r=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="FirebaseError";class qr extends Error{constructor(e,r,s){super(r),this.code=e,this.customData=s,this.name=zk,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_o.prototype.create)}}class _o{constructor(e,r,s){this.service=e,this.serviceName=r,this.errors=s}create(e,...r){const s=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?Wk(a,s):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new qr(i,c,s)}}function Wk(t,e){return t.replace($k,(r,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const $k=/\{\$([^}]+)}/g;function Hk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gs(t,e){if(t===e)return!0;const r=Object.keys(t),s=Object.keys(e);for(const i of r){if(!s.includes(i))return!1;const a=t[i],o=e[i];if(sx(a)&&sx(o)){if(!gs(a,o))return!1}else if(a!==o)return!1}for(const i of s)if(!r.includes(i))return!1;return!0}function sx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(t){const e=[];for(const[r,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function fa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,a]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function pa(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function qk(t,e){const r=new Gk(t,e);return r.subscribe.bind(r)}class Gk{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,s){let i;if(e===void 0&&r===void 0&&s===void 0)throw new Error("Missing Observer.");Kk(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:s},i.next===void 0&&(i.next=uu),i.error===void 0&&(i.error=uu),i.complete===void 0&&(i.complete=uu);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kk(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function uu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class xs{constructor(e,r,s){this.name=e,this.instanceFactory=r,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const s=new Ik;if(this.instancesDeferred.set(r,s),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Xk(e))try{this.getOrInitializeService({instanceIdentifier:rs})}catch{}for(const[r,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});s.resolve(a)}catch{}}}}clearInstance(e=rs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rs){return this.instances.has(e)}getOptions(e=rs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:r});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);s===c&&o.resolve(i)}return i}onInit(e,r){const s=this.normalizeInstanceIdentifier(r),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const s=this.onInitCallbacks.get(r);if(s)for(const i of s)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Yk(e),options:r}),this.instances.set(e,s),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=rs){return this.component?this.component.multipleInstances?e:rs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Yk(t){return t===rs?void 0:t}function Xk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Qk(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const Zk={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},eE=le.INFO,tE={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},rE=(t,e,...r)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=tE[e];if(i)console[i](`[${s}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qm{constructor(e){this.name=e,this._logLevel=eE,this._logHandler=rE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const nE=(t,e)=>e.some(r=>t instanceof r);let ix,ax;function sE(){return ix||(ix=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iE(){return ax||(ax=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jb=new WeakMap,_h=new WeakMap,wb=new WeakMap,hu=new WeakMap,Ym=new WeakMap;function aE(t){const e=new Promise((r,s)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(kn(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&jb.set(r,t)}).catch(()=>{}),Ym.set(e,t),e}function oE(t){if(_h.has(t))return;const e=new Promise((r,s)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});_h.set(t,e)}let kh={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return _h.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wb.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return kn(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lE(t){kh=t(kh)}function cE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const s=t.call(mu(this),e,...r);return wb.set(s,e.sort?e.sort():[e]),kn(s)}:iE().includes(t)?function(...e){return t.apply(mu(this),e),kn(jb.get(this))}:function(...e){return kn(t.apply(mu(this),e))}}function dE(t){return typeof t=="function"?cE(t):(t instanceof IDBTransaction&&oE(t),nE(t,sE())?new Proxy(t,kh):t)}function kn(t){if(t instanceof IDBRequest)return aE(t);if(hu.has(t))return hu.get(t);const e=dE(t);return e!==t&&(hu.set(t,e),Ym.set(e,t)),e}const mu=t=>Ym.get(t);function uE(t,e,{blocked:r,upgrade:s,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=kn(o);return s&&o.addEventListener("upgradeneeded",d=>{s(kn(o.result),d.oldVersion,d.newVersion,kn(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),i&&d.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const hE=["get","getKey","getAll","getAllKeys","count"],mE=["put","add","delete","clear"],fu=new Map;function ox(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fu.get(e))return fu.get(e);const r=e.replace(/FromIndex$/,""),s=e!==r,i=mE.includes(r);if(!(r in(s?IDBIndex:IDBObjectStore).prototype)||!(i||hE.includes(r)))return;const a=async function(o,...c){const d=this.transaction(o,i?"readwrite":"readonly");let u=d.store;return s&&(u=u.index(c.shift())),(await Promise.all([u[r](...c),i&&d.done]))[0]};return fu.set(e,a),a}lE(t=>({...t,get:(e,r,s)=>ox(e,r)||t.get(e,r,s),has:(e,r)=>!!ox(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(pE(r)){const s=r.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(r=>r).join(" ")}}function pE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Eh="@firebase/app",lx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new Qm("@firebase/app"),gE="@firebase/app-compat",xE="@firebase/analytics-compat",yE="@firebase/analytics",vE="@firebase/app-check-compat",bE="@firebase/app-check",jE="@firebase/auth",wE="@firebase/auth-compat",NE="@firebase/database",_E="@firebase/data-connect",kE="@firebase/database-compat",EE="@firebase/functions",TE="@firebase/functions-compat",SE="@firebase/installations",IE="@firebase/installations-compat",CE="@firebase/messaging",AE="@firebase/messaging-compat",PE="@firebase/performance",RE="@firebase/performance-compat",DE="@firebase/remote-config",ME="@firebase/remote-config-compat",LE="@firebase/storage",VE="@firebase/storage-compat",OE="@firebase/firestore",FE="@firebase/ai",UE="@firebase/firestore-compat",BE="firebase",zE="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="[DEFAULT]",WE={[Eh]:"fire-core",[gE]:"fire-core-compat",[yE]:"fire-analytics",[xE]:"fire-analytics-compat",[bE]:"fire-app-check",[vE]:"fire-app-check-compat",[jE]:"fire-auth",[wE]:"fire-auth-compat",[NE]:"fire-rtdb",[_E]:"fire-data-connect",[kE]:"fire-rtdb-compat",[EE]:"fire-fn",[TE]:"fire-fn-compat",[SE]:"fire-iid",[IE]:"fire-iid-compat",[CE]:"fire-fcm",[AE]:"fire-fcm-compat",[PE]:"fire-perf",[RE]:"fire-perf-compat",[DE]:"fire-rc",[ME]:"fire-rc-compat",[LE]:"fire-gcs",[VE]:"fire-gcs-compat",[OE]:"fire-fst",[UE]:"fire-fst-compat",[FE]:"fire-vertex","fire-js":"fire-js",[BE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new Map,$E=new Map,Sh=new Map;function cx(t,e){try{t.container.addComponent(e)}catch(r){Fr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function gi(t){const e=t.name;if(Sh.has(e))return Fr.debug(`There were multiple attempts to register component ${e}.`),!1;Sh.set(e,t);for(const r of ro.values())cx(r,t);for(const r of $E.values())cx(r,t);return!0}function Xm(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Wt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},En=new _o("app","Firebase",HE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,r,s){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw En.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=zE;function Nb(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const s={name:Th,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw En.create("bad-app-name",{appName:String(i)});if(r||(r=xb()),!r)throw En.create("no-options");const a=ro.get(i);if(a){if(gs(r,a.options)&&gs(s,a.config))return a;throw En.create("duplicate-app",{appName:i})}const o=new Jk(i);for(const d of Sh.values())o.addComponent(d);const c=new qE(r,s,o);return ro.set(i,c),c}function _b(t=Th){const e=ro.get(t);if(!e&&t===Th&&xb())return Nb();if(!e)throw En.create("no-app",{appName:t});return e}function dx(){return Array.from(ro.values())}function Tn(t,e,r){let s=WE[t]??t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fr.warn(o.join(" "));return}gi(new xs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="firebase-heartbeat-database",KE=1,no="firebase-heartbeat-store";let pu=null;function kb(){return pu||(pu=uE(GE,KE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(no)}catch(r){console.warn(r)}}}}).catch(t=>{throw En.create("idb-open",{originalErrorMessage:t.message})})),pu}async function QE(t){try{const r=(await kb()).transaction(no),s=await r.objectStore(no).get(Eb(t));return await r.done,s}catch(e){if(e instanceof qr)Fr.warn(e.message);else{const r=En.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fr.warn(r.message)}}}async function ux(t,e){try{const s=(await kb()).transaction(no,"readwrite");await s.objectStore(no).put(e,Eb(t)),await s.done}catch(r){if(r instanceof qr)Fr.warn(r.message);else{const s=En.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Fr.warn(s.message)}}}function Eb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=1024,XE=30;class JE{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new eT(r),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=hx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>XE){const o=tT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Fr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=hx(),{heartbeatsToSend:s,unsentEntries:i}=ZE(this._heartbeatsCache.heartbeats),a=hc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return Fr.warn(r),""}}}function hx(){return new Date().toISOString().substring(0,10)}function ZE(t,e=YE){const r=[];let s=t.slice();for(const i of t){const a=r.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),mx(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),mx(r)>e){r.pop();break}s=s.slice(1)}return{heartbeatsToSend:r,unsentEntries:s}}class eT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Uk()?Bk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await QE(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ux(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ux(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function mx(t){return hc(JSON.stringify({version:2,heartbeats:t})).length}function tT(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let s=1;s<t.length;s++)t[s].date<r&&(r=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(t){gi(new xs("platform-logger",e=>new fE(e),"PRIVATE")),gi(new xs("heartbeat",e=>new JE(e),"PRIVATE")),Tn(Eh,lx,t),Tn(Eh,lx,"esm2020"),Tn("fire-js","")}rT("");var nT="firebase",sT="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn(nT,sT,"app");function Tb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iT=Tb,Sb=new _o("auth","Firebase",Tb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new Qm("@firebase/auth");function aT(t,...e){mc.logLevel<=le.WARN&&mc.warn(`Auth (${Ci}): ${t}`,...e)}function Cl(t,...e){mc.logLevel<=le.ERROR&&mc.error(`Auth (${Ci}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,...e){throw Jm(t,...e)}function xr(t,...e){return Jm(t,...e)}function Ib(t,e,r){const s={...iT(),[e]:r};return new _o("auth","Firebase",s).create(e,{appName:t.name})}function Rr(t){return Ib(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jm(t,...e){if(typeof t!="string"){const r=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(r,...s)}return Sb.create(t,...e)}function Y(t,e,...r){if(!t)throw Jm(e,...r)}function Cr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Cl(e),new Error(e)}function Ur(t,e){t||Cr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function oT(){return fx()==="http:"||fx()==="https:"}function fx(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oT()||Lk()||"connection"in navigator)?navigator.onLine:!0}function cT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,r){this.shortDelay=e,this.longDelay=r,Ur(r>e,"Short delay should be less than long delay!"),this.isMobile=Rk()||Vk()}get(){return lT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(t,e){Ur(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{static initialize(e,r,s){this.fetchImpl=e,r&&(this.headersImpl=r),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hT=new Eo(3e4,6e4);function Hn(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function qn(t,e,r,s,i={}){return Ab(t,i,async()=>{let a={},o={};s&&(e==="GET"?o=s:a={body:JSON.stringify(s)});const c=ko({key:t.config.apiKey,...o}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:d,...a};return Mk()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ii(t.emulatorConfig.host)&&(u.credentials="include"),Cb.fetch()(await Pb(t,t.config.apiHost,r,c),u)})}async function Ab(t,e,r){t._canInitEmulator=!1;const s={...dT,...e};try{const i=new fT(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw ul(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[d,u]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw ul(t,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw ul(t,"email-already-in-use",o);if(d==="USER_DISABLED")throw ul(t,"user-disabled",o);const m=s[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Ib(t,m,u);or(t,m)}}catch(i){if(i instanceof qr)throw i;or(t,"network-request-failed",{message:String(i)})}}async function To(t,e,r,s,i={}){const a=await qn(t,e,r,s,i);return"mfaPendingCredential"in a&&or(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function Pb(t,e,r,s){const i=`${e}${r}?${s}`,a=t,o=a.config.emulator?Zm(t.config,i):`${t.config.apiScheme}://${i}`;return uT.includes(r)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function mT(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,s)=>{this.timer=setTimeout(()=>s(xr(this.auth,"network-request-failed")),hT.get())})}}function ul(t,e,r){const s={appName:t.name};r.email&&(s.email=r.email),r.phoneNumber&&(s.phoneNumber=r.phoneNumber);const i=xr(t,e,s);return i.customData._tokenResponse=r,i}function px(t){return t!==void 0&&t.enterprise!==void 0}class pT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return mT(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gT(t,e){return qn(t,"GET","/v2/recaptchaConfig",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xT(t,e){return qn(t,"POST","/v1/accounts:delete",e)}async function fc(t,e){return qn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yT(t,e=!1){const r=Vt(t),s=await r.getIdToken(e),i=ef(s);Y(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:s,authTime:Aa(gu(i.auth_time)),issuedAtTime:Aa(gu(i.iat)),expirationTime:Aa(gu(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function gu(t){return Number(t)*1e3}function ef(t){const[e,r,s]=t.split(".");if(e===void 0||r===void 0||s===void 0)return Cl("JWT malformed, contained fewer than 3 sections"),null;try{const i=pb(r);return i?JSON.parse(i):(Cl("Failed to decode base64 JWT payload"),null)}catch(i){return Cl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function gx(t){const e=ef(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(t,e,r=!1){if(r)return e;try{return await e}catch(s){throw s instanceof qr&&vT(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function vT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Aa(this.lastLoginAt),this.creationTime=Aa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(t){var f;const e=t.auth,r=await t.getIdToken(),s=await so(t,fc(e,{idToken:r}));Y(s==null?void 0:s.users.length,e,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=(f=i.providerUserInfo)!=null&&f.length?Rb(i.providerUserInfo):[],o=wT(t.providerData,a),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=c?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ch(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,m)}async function jT(t){const e=Vt(t);await pc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wT(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function Rb(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NT(t,e){const r=await Ab(t,{},async()=>{const s=ko({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await Pb(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:s};return t.emulatorConfig&&Ii(t.emulatorConfig.host)&&(d.credentials="include"),Cb.fetch()(o,d)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function _T(t,e){return qn(t,"POST","/v2/accounts:revokeToken",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const r=gx(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:s,refreshToken:i,expiresIn:a}=await NT(e,r);this.updateTokensAndExpiration(s,i,Number(a))}updateTokensAndExpiration(e,r,s){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,r){const{refreshToken:s,accessToken:i,expirationTime:a}=r,o=new ii;return s&&(Y(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),i&&(Y(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Y(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ii,this.toJSON())}_performRefresh(){return Cr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class rr{constructor({uid:e,auth:r,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new bT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ch(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await so(this,this.stsTokenManager.getToken(this.auth,e));return Y(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return yT(this,e)}reload(){return jT(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new rr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),r&&await pc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wt(this.auth.app))return Promise.reject(Rr(this.auth));const e=await this.getIdToken();return await so(this,xT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const s=r.displayName??void 0,i=r.email??void 0,a=r.phoneNumber??void 0,o=r.photoURL??void 0,c=r.tenantId??void 0,d=r._redirectEventId??void 0,u=r.createdAt??void 0,m=r.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:b,providerData:E,stsTokenManager:k}=r;Y(f&&k,e,"internal-error");const x=ii.fromJSON(this.name,k);Y(typeof f=="string",e,"internal-error"),tn(s,e.name),tn(i,e.name),Y(typeof p=="boolean",e,"internal-error"),Y(typeof b=="boolean",e,"internal-error"),tn(a,e.name),tn(o,e.name),tn(c,e.name),tn(d,e.name),tn(u,e.name),tn(m,e.name);const y=new rr({uid:f,auth:e,email:i,emailVerified:p,displayName:s,isAnonymous:b,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:x,createdAt:u,lastLoginAt:m});return E&&Array.isArray(E)&&(y.providerData=E.map(v=>({...v}))),d&&(y._redirectEventId=d),y}static async _fromIdTokenResponse(e,r,s=!1){const i=new ii;i.updateFromServerResponse(r);const a=new rr({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await pc(a),a}static async _fromGetAccountInfoResponse(e,r,s){const i=r.users[0];Y(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Rb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new ii;c.updateFromIdToken(s);const d=new rr({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Ch(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,u),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=new Map;function Ar(t){Ur(t instanceof Function,"Expected a class definition");let e=xx.get(t);return e?(Ur(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Db.type="NONE";const yx=Db;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(t,e,r){return`firebase:${t}:${e}:${r}`}class ai{constructor(e,r,s){this.persistence=e,this.auth=r,this.userKey=s;const{config:i,name:a}=this.auth;this.fullUserKey=Al(this.userKey,i.apiKey,a),this.fullPersistenceKey=Al("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await fc(this.auth,{idToken:e}).catch(()=>{});return r?rr._fromGetAccountInfoResponse(this.auth,r,e):null}return rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,s="authUser"){if(!r.length)return new ai(Ar(yx),e,s);const i=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||Ar(yx);const o=Al(s,e.config.apiKey,e.name);let c=null;for(const u of r)try{const m=await u._get(o);if(m){let f;if(typeof m=="string"){const p=await fc(e,{idToken:m}).catch(()=>{});if(!p)break;f=await rr._fromGetAccountInfoResponse(e,p,m)}else f=rr._fromJSON(e,m);u!==a&&(c=f),a=u;break}}catch{}const d=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new ai(a,e,s):(a=d[0],c&&await a._set(o,c.toJSON()),await Promise.all(r.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new ai(a,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ob(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ub(e))return"Blackberry";if(Bb(e))return"Webos";if(Lb(e))return"Safari";if((e.includes("chrome/")||Vb(e))&&!e.includes("edge/"))return"Chrome";if(Fb(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(r);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Mb(t=pt()){return/firefox\//i.test(t)}function Lb(t=pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vb(t=pt()){return/crios\//i.test(t)}function Ob(t=pt()){return/iemobile/i.test(t)}function Fb(t=pt()){return/android/i.test(t)}function Ub(t=pt()){return/blackberry/i.test(t)}function Bb(t=pt()){return/webos/i.test(t)}function tf(t=pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kT(t=pt()){var e;return tf(t)&&!!((e=window.navigator)!=null&&e.standalone)}function ET(){return Ok()&&document.documentMode===10}function zb(t=pt()){return tf(t)||Fb(t)||Bb(t)||Ub(t)||/windows phone/i.test(t)||Ob(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t,e=[]){let r;switch(t){case"Browser":r=vx(pt());break;case"Worker":r=`${vx(pt())}-${t}`;break;default:r=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Ci}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const s=a=>new Promise((o,c)=>{try{const d=e(a);o(d)}catch(d){c(d)}});s.onAbort=r,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const s of this.queue)await s(e),s.onAbort&&r.push(s.onAbort)}catch(s){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ST(t,e={}){return qn(t,"GET","/v2/passwordPolicy",Hn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=6;class CT{constructor(e){var s;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??IT,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(r.meetsMinPasswordLength=e.length>=s),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,r,s,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,r,s,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bx(this),this.idTokenSubscription=new bx(this),this.beforeStateQueue=new TT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Ar(r)),this._initializationPromise=this.queue(async()=>{var s,i,a;if(!this._deleted&&(this.persistenceManager=await ai.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await fc(this,{idToken:e}),s=await rr._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(s)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Wt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,c=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&(d!=null&&d.user)&&(s=d.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await pc(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wt(this.app))return Promise.reject(Rr(this));const r=e?Vt(e):null;return r&&Y(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wt(this.app)?Promise.reject(Rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wt(this.app)?Promise.reject(Rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ST(this),r=new CT(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _o("auth","Firebase",e())}onAuthStateChanged(e,r,s){return this.registerStateListener(this.authStateSubscription,e,r,s)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,s){return this.registerStateListener(this.idTokenSubscription,e,r,s)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(s.tenantId=this.tenantId),await _T(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const s=await this.getOrInitRedirectPersistenceManager(r);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Ar(e)||this._popupRedirectResolver;Y(r,this,"argument-error"),this.redirectPersistenceManager=await ai.create(this,[Ar(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,s;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,s,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,s,i);return()=>{o=!0,d()}}else{const d=e.addObserver(r);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var r;if(Wt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&aT(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ks(t){return Vt(t)}class bx{constructor(e){this.auth=e,this.observer=null,this.addObserver=qk(r=>this.observer=r)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PT(t){ed=t}function $b(t){return ed.loadJS(t)}function RT(){return ed.recaptchaEnterpriseScript}function DT(){return ed.gapiScript}function MT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class LT{constructor(){this.enterprise=new VT}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class VT{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const OT="recaptcha-enterprise",Hb="NO_RECAPTCHA";class FT{constructor(e){this.type=OT,this.auth=ks(e)}async verify(e="verify",r=!1){async function s(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{gT(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const u=new pT(d);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(d=>{c(d)})})}function i(a,o,c){const d=window.grecaptcha;px(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(Hb)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new LT().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{s(this.auth).then(c=>{if(!r&&px(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let d=RT();d.length!==0&&(d+=c),$b(d).then(()=>{i(c,a,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})}}async function jx(t,e,r,s=!1,i=!1){const a=new FT(t);let o;if(i)o=Hb;else try{o=await a.verify(r)}catch{o=await a.verify(r,!0)}const c={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,u=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return s?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Ah(t,e,r,s,i){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await jx(t,e,r,r==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await jx(t,e,r,r==="getOobCode");return s(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t,e){const r=Xm(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(gs(a,e??{}))return i;or(i,"already-initialized")}return r.initialize({options:e})}function BT(t,e){const r=(e==null?void 0:e.persistence)||[],s=(Array.isArray(r)?r:[r]).map(Ar);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function zT(t,e,r){const s=ks(t);Y(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,a=qb(e),{host:o,port:c}=WT(e),d=c===null?"":`:${c}`,u={url:`${a}//${o}${d}/`},m=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){Y(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Y(gs(u,s.config.emulator)&&gs(m,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=m,s.settings.appVerificationDisabledForTesting=!0,Ii(o)?(vb(`${a}//${o}${d}`),bb("Auth",!0)):$T()}function qb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function WT(t){const e=qb(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const s=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const a=i[1];return{host:a,port:wx(s.substr(a.length+1))}}else{const[a,o]=s.split(":");return{host:a,port:wx(o)}}}function wx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $T(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Cr("not implemented")}_getIdTokenResponse(e){return Cr("not implemented")}_linkToIdToken(e,r){return Cr("not implemented")}_getReauthenticationResolver(e){return Cr("not implemented")}}async function HT(t,e){return qn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qT(t,e){return To(t,"POST","/v1/accounts:signInWithPassword",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GT(t,e){return To(t,"POST","/v1/accounts:signInWithEmailLink",Hn(t,e))}async function KT(t,e){return To(t,"POST","/v1/accounts:signInWithEmailLink",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends rf{constructor(e,r,s,i=null){super("password",s),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new io(e,r,"password")}static _fromEmailAndCode(e,r,s=null){return new io(e,r,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ah(e,r,"signInWithPassword",qT);case"emailLink":return GT(e,{email:this._email,oobCode:this._password});default:or(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const s={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ah(e,s,"signUpPassword",HT);case"emailLink":return KT(e,{idToken:r,email:this._email,oobCode:this._password});default:or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oi(t,e){return To(t,"POST","/v1/accounts:signInWithIdp",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="http://localhost";class ys extends rf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):or("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...a}=r;if(!s||!i)return null;const o=new ys(s,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return oi(e,r)}_linkToIdToken(e,r){const s=this.buildRequest();return s.idToken=r,oi(e,s)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,oi(e,r)}buildRequest(){const e={requestUri:QT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=ko(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XT(t){const e=fa(pa(t)).link,r=e?fa(pa(e)).deep_link_id:null,s=fa(pa(t)).deep_link_id;return(s?fa(pa(s)).link:null)||s||r||e||t}class nf{constructor(e){const r=fa(pa(e)),s=r.apiKey??null,i=r.oobCode??null,a=YT(r.mode??null);Y(s&&i&&a,"argument-error"),this.apiKey=s,this.operation=a,this.code=i,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=XT(e);try{return new nf(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.providerId=Ai.PROVIDER_ID}static credential(e,r){return io._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const s=nf.parseLink(r);return Y(s,"argument-error"),io._fromEmailAndCode(e,s.code,s.tenantId)}}Ai.PROVIDER_ID="password";Ai.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ai.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends Gb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln extends So{constructor(){super("facebook.com")}static credential(e){return ys._fromParams({providerId:ln.PROVIDER_ID,signInMethod:ln.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ln.credentialFromTaggedObject(e)}static credentialFromError(e){return ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ln.credential(e.oauthAccessToken)}catch{return null}}}ln.FACEBOOK_SIGN_IN_METHOD="facebook.com";ln.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn extends So{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return ys._fromParams({providerId:cn.PROVIDER_ID,signInMethod:cn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return cn.credentialFromTaggedObject(e)}static credentialFromError(e){return cn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:s}=e;if(!r&&!s)return null;try{return cn.credential(r,s)}catch{return null}}}cn.GOOGLE_SIGN_IN_METHOD="google.com";cn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn extends So{constructor(){super("github.com")}static credential(e){return ys._fromParams({providerId:dn.PROVIDER_ID,signInMethod:dn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dn.credentialFromTaggedObject(e)}static credentialFromError(e){return dn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dn.credential(e.oauthAccessToken)}catch{return null}}}dn.GITHUB_SIGN_IN_METHOD="github.com";dn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un extends So{constructor(){super("twitter.com")}static credential(e,r){return ys._fromParams({providerId:un.PROVIDER_ID,signInMethod:un.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return un.credentialFromTaggedObject(e)}static credentialFromError(e){return un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:s}=e;if(!r||!s)return null;try{return un.credential(r,s)}catch{return null}}}un.TWITTER_SIGN_IN_METHOD="twitter.com";un.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JT(t,e){return To(t,"POST","/v1/accounts:signUp",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,s,i=!1){const a=await rr._fromIdTokenResponse(e,s,i),o=Nx(s);return new vs({user:a,providerId:o,_tokenResponse:s,operationType:r})}static async _forOperation(e,r,s){await e._updateTokensIfNecessary(s,!0);const i=Nx(s);return new vs({user:e,providerId:i,_tokenResponse:s,operationType:r})}}function Nx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends qr{constructor(e,r,s,i){super(r.code,r.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,gc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,r,s,i){return new gc(e,r,s,i)}}function Kb(t,e,r,s){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?gc._fromErrorAndOperation(t,a,e,s):a})}async function ZT(t,e,r=!1){const s=await so(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return vs._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(t,e,r=!1){const{auth:s}=t;if(Wt(s.app))return Promise.reject(Rr(s));const i="reauthenticate";try{const a=await so(t,Kb(s,i,e,t),r);Y(a.idToken,s,"internal-error");const o=ef(a.idToken);Y(o,s,"internal-error");const{sub:c}=o;return Y(t.uid===c,s,"user-mismatch"),vs._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&or(s,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qb(t,e,r=!1){if(Wt(t.app))return Promise.reject(Rr(t));const s="signIn",i=await Kb(t,s,e),a=await vs._fromIdTokenResponse(t,s,i);return r||await t._updateCurrentUser(a.user),a}async function tS(t,e){return Qb(ks(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(t){const e=ks(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rS(t,e,r){if(Wt(t.app))return Promise.reject(Rr(t));const s=ks(t),o=await Ah(s,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JT).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&Yb(t),d}),c=await vs._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(c.user),c}function nS(t,e,r){return Wt(t.app)?Promise.reject(Rr(t)):tS(Vt(t),Ai.credential(e,r)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Yb(t),s})}function sS(t,e,r,s){return Vt(t).onIdTokenChanged(e,r,s)}function iS(t,e,r){return Vt(t).beforeAuthStateChanged(e,r)}function aS(t,e,r,s){return Vt(t).onAuthStateChanged(e,r,s)}function oS(t){return Vt(t).signOut()}const xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(xc,"1"),this.storage.removeItem(xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=1e3,cS=10;class Jb extends Xb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const s=this.storage.getItem(r),i=this.localCache[r];s!==i&&e(r,i,s)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const s=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!r&&this.localCache[s]===o||this.notifyListeners(s,o)},a=this.storage.getItem(s);ET()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,cS):i()}notifyListeners(e,r){this.localCache[e]=r;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:s}),!0)})},lS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}Jb.type="LOCAL";const dS=Jb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb extends Xb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Zb.type="SESSION";const ej=Zb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const s=new td(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:s,eventType:i,data:a}=r.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const c=Array.from(o).map(async u=>u(r.origin,a)),d=await uS(c);r.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}td.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(t="",e=10){let r="";for(let s=0;s<e;s++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,d)=>{const u=sf("",20);i.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(p.data.response);break;default:clearTimeout(m),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(){return window}function mS(t){yr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(){return typeof yr().WorkerGlobalScope<"u"&&typeof yr().importScripts=="function"}async function fS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function gS(){return tj()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj="firebaseLocalStorageDb",xS=1,yc="firebaseLocalStorage",nj="fbase_key";class Io{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function rd(t,e){return t.transaction([yc],e?"readwrite":"readonly").objectStore(yc)}function yS(){const t=indexedDB.deleteDatabase(rj);return new Io(t).toPromise()}function Ph(){const t=indexedDB.open(rj,xS);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(yc,{keyPath:nj})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(yc)?e(s):(s.close(),await yS(),e(await Ph()))})})}async function _x(t,e,r){const s=rd(t,!0).put({[nj]:e,value:r});return new Io(s).toPromise()}async function vS(t,e){const r=rd(t,!1).get(e),s=await new Io(r).toPromise();return s===void 0?null:s.value}function kx(t,e){const r=rd(t,!0).delete(e);return new Io(r).toPromise()}const bS=800,jS=3;class sj{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ph(),this.db)}async _withRetries(e){let r=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(r++>jS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tj()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=td._getInstance(gS()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,s;if(this.activeServiceWorker=await fS(),!this.activeServiceWorker)return;this.sender=new hS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ph();return await _x(e,xc,"1"),await kx(e,xc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(s=>_x(s,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(s=>vS(s,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>kx(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=rd(i,!1).getAll();return new Io(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sj.type="LOCAL";const wS=sj;new Eo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(t,e){return e?Ar(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends rf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oi(e,this._buildIdpRequest())}_linkToIdToken(e,r){return oi(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return oi(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function _S(t){return Qb(t.auth,new af(t),t.bypassAuthState)}function kS(t){const{auth:e,user:r}=t;return Y(r,e,"internal-error"),eS(r,new af(t),t.bypassAuthState)}async function ES(t){const{auth:e,user:r}=t;return Y(r,e,"internal-error"),ZT(r,new af(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,r,s,i,a=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:s,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:r,sessionId:s,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _S;case"linkViaPopup":case"linkViaRedirect":return ES;case"reauthViaPopup":case"reauthViaRedirect":return kS;default:or(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=new Eo(2e3,1e4);class Js extends ij{constructor(e,r,s,i,a){super(e,r,i,a),this.provider=s,this.authWindow=null,this.pollId=null,Js.currentPopupAction&&Js.currentPopupAction.cancel(),Js.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=sf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Js.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,s;if((s=(r=this.authWindow)==null?void 0:r.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TS.get())};e()}}Js.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="pendingRedirect",Pl=new Map;class IS extends ij{constructor(e,r,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,s),this.eventId=null}async execute(){let e=Pl.get(this.auth._key());if(!e){try{const s=await CS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(r){e=()=>Promise.reject(r)}Pl.set(this.auth._key(),e)}return this.bypassAuthState||Pl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CS(t,e){const r=RS(e),s=PS(t);if(!await s._isAvailable())return!1;const i=await s._get(r)==="true";return await s._remove(r),i}function AS(t,e){Pl.set(t._key(),e)}function PS(t){return Ar(t._redirectPersistence)}function RS(t){return Al(SS,t.config.apiKey,t.name)}async function DS(t,e,r=!1){if(Wt(t.app))return Promise.reject(Rr(t));const s=ks(t),i=NS(s,e),o=await new IS(s,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=10*60*1e3;class LS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(r=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VS(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var s;if(e.error&&!aj(e)){const i=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";r.onError(xr(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const s=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ex(e))}saveEventToCache(e){this.cachedEventUids.add(Ex(e)),this.lastProcessedEventTime=Date.now()}}function Ex(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function aj({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function VS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aj(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OS(t,e={}){return qn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,US=/^https?/;async function BS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await OS(t);for(const r of e)try{if(zS(r))return}catch{}or(t,"unauthorized-domain")}function zS(t){const e=Ih(),{protocol:r,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===s}if(!US.test(r))return!1;if(FS.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=new Eo(3e4,6e4);function Tx(){const t=yr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function $S(t){return new Promise((e,r)=>{var i,a,o;function s(){Tx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Tx(),r(xr(t,"network-request-failed"))},timeout:WS.get()})}if((a=(i=yr().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((o=yr().gapi)!=null&&o.load)s();else{const c=MT("iframefcb");return yr()[c]=()=>{gapi.load?s():r(xr(t,"network-request-failed"))},$b(`${DT()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw Rl=null,e})}let Rl=null;function HS(t){return Rl=Rl||$S(t),Rl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=new Eo(5e3,15e3),GS="__/auth/iframe",KS="emulator/auth/iframe",QS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XS(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Zm(e,KS):`https://${t.config.authDomain}/${GS}`,s={apiKey:e.apiKey,appName:t.name,v:Ci},i=YS.get(t.config.apiHost);i&&(s.eid=i);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${r}?${ko(s).slice(1)}`}async function JS(t){const e=await HS(t),r=yr().gapi;return Y(r,t,"internal-error"),e.open({where:document.body,url:XS(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QS,dontclear:!0},s=>new Promise(async(i,a)=>{await s.restyle({setHideOnLeave:!1});const o=xr(t,"network-request-failed"),c=yr().setTimeout(()=>{a(o)},qS.get());function d(){yr().clearTimeout(c),i(s)}s.ping(d).then(d,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eI=500,tI=600,rI="_blank",nI="http://localhost";class Sx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sI(t,e,r,s=eI,i=tI){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const d={...ZS,width:s.toString(),height:i.toString(),top:a,left:o},u=pt().toLowerCase();r&&(c=Vb(u)?rI:r),Mb(u)&&(e=e||nI,d.scrollbars="yes");const m=Object.entries(d).reduce((p,[b,E])=>`${p}${b}=${E},`,"");if(kT(u)&&c!=="_self")return iI(e||"",c),new Sx(null);const f=window.open(e||"",c,m);Y(f,t,"popup-blocked");try{f.focus()}catch{}return new Sx(f)}function iI(t,e){const r=document.createElement("a");r.href=t,r.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="__/auth/handler",oI="emulator/auth/handler",lI=encodeURIComponent("fac");async function Ix(t,e,r,s,i,a){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:s,v:Ci,eventId:i};if(e instanceof Gb){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Hk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,f]of Object.entries({}))o[m]=f}if(e instanceof So){const m=e.getScopes().filter(f=>f!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const d=await t._getAppCheckToken(),u=d?`#${lI}=${encodeURIComponent(d)}`:"";return`${cI(t)}?${ko(c).slice(1)}${u}`}function cI({config:t}){return t.emulator?Zm(t,oI):`https://${t.authDomain}/${aI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu="webStorageSupport";class dI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ej,this._completeRedirectFn=DS,this._overrideRedirectResult=AS}async _openPopup(e,r,s,i){var o;Ur((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await Ix(e,r,s,Ih(),i);return sI(e,a,sf())}async _openRedirect(e,r,s,i){await this._originValidation(e);const a=await Ix(e,r,s,Ih(),i);return mS(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(Ur(a,"If manager is not set, promise should be"),a)}const s=this.initAndGetManager(e);return this.eventManagers[r]={promise:s},s.catch(()=>{delete this.eventManagers[r]}),s}async initAndGetManager(e){const r=await JS(e),s=new LS(e);return r.register("authEvent",i=>(Y(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=r,s}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(xu,{type:xu},i=>{var o;const a=(o=i==null?void 0:i[0])==null?void 0:o[xu];a!==void 0&&r(!!a),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=BS(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return zb()||Lb()||tf()}}const uI=dI;var Cx="@firebase/auth",Ax="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fI(t){gi(new xs("auth",(e,{options:r})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=s.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const d={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wb(t)},u=new AT(s,i,a,d);return BT(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,s)=>{e.getProvider("auth-internal").initialize()})),gi(new xs("auth-internal",e=>{const r=ks(e.getProvider("auth").getImmediate());return(s=>new hI(s))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tn(Cx,Ax,mI(t)),Tn(Cx,Ax,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=5*60,gI=yb("authIdTokenMaxAge")||pI;let Px=null;const xI=t=>async e=>{const r=e&&await e.getIdTokenResult(),s=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(s&&s>gI)return;const i=r==null?void 0:r.token;Px!==i&&(Px=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function yI(t=_b()){const e=Xm(t,"auth");if(e.isInitialized())return e.getImmediate();const r=UT(t,{popupRedirectResolver:uI,persistence:[wS,dS,ej]}),s=yb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(s,location.origin);if(location.origin===a.origin){const o=xI(a.toString());iS(r,o,()=>o(r.currentUser)),sS(r,c=>o(c))}}const i=gb("auth");return i&&zT(r,`http://${i}`),r}function vI(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}PT({loadJS(t){return new Promise((e,r)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const a=xr("internal-error");a.customData=i,r(a)},s.type="text/javascript",s.charset="UTF-8",vI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fI("Browser");var Rx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sn,oj;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,w){function T(){}T.prototype=w.prototype,N.F=w.prototype,N.prototype=new T,N.prototype.constructor=N,N.D=function(R,D,A){for(var C=Array(arguments.length-2),se=2;se<arguments.length;se++)C[se-2]=arguments[se];return w.prototype[D].apply(R,C)}}function r(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,r),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,w,T){T||(T=0);const R=Array(16);if(typeof w=="string")for(var D=0;D<16;++D)R[D]=w.charCodeAt(T++)|w.charCodeAt(T++)<<8|w.charCodeAt(T++)<<16|w.charCodeAt(T++)<<24;else for(D=0;D<16;++D)R[D]=w[T++]|w[T++]<<8|w[T++]<<16|w[T++]<<24;w=N.g[0],T=N.g[1],D=N.g[2];let A=N.g[3],C;C=w+(A^T&(D^A))+R[0]+3614090360&4294967295,w=T+(C<<7&4294967295|C>>>25),C=A+(D^w&(T^D))+R[1]+3905402710&4294967295,A=w+(C<<12&4294967295|C>>>20),C=D+(T^A&(w^T))+R[2]+606105819&4294967295,D=A+(C<<17&4294967295|C>>>15),C=T+(w^D&(A^w))+R[3]+3250441966&4294967295,T=D+(C<<22&4294967295|C>>>10),C=w+(A^T&(D^A))+R[4]+4118548399&4294967295,w=T+(C<<7&4294967295|C>>>25),C=A+(D^w&(T^D))+R[5]+1200080426&4294967295,A=w+(C<<12&4294967295|C>>>20),C=D+(T^A&(w^T))+R[6]+2821735955&4294967295,D=A+(C<<17&4294967295|C>>>15),C=T+(w^D&(A^w))+R[7]+4249261313&4294967295,T=D+(C<<22&4294967295|C>>>10),C=w+(A^T&(D^A))+R[8]+1770035416&4294967295,w=T+(C<<7&4294967295|C>>>25),C=A+(D^w&(T^D))+R[9]+2336552879&4294967295,A=w+(C<<12&4294967295|C>>>20),C=D+(T^A&(w^T))+R[10]+4294925233&4294967295,D=A+(C<<17&4294967295|C>>>15),C=T+(w^D&(A^w))+R[11]+2304563134&4294967295,T=D+(C<<22&4294967295|C>>>10),C=w+(A^T&(D^A))+R[12]+1804603682&4294967295,w=T+(C<<7&4294967295|C>>>25),C=A+(D^w&(T^D))+R[13]+4254626195&4294967295,A=w+(C<<12&4294967295|C>>>20),C=D+(T^A&(w^T))+R[14]+2792965006&4294967295,D=A+(C<<17&4294967295|C>>>15),C=T+(w^D&(A^w))+R[15]+1236535329&4294967295,T=D+(C<<22&4294967295|C>>>10),C=w+(D^A&(T^D))+R[1]+4129170786&4294967295,w=T+(C<<5&4294967295|C>>>27),C=A+(T^D&(w^T))+R[6]+3225465664&4294967295,A=w+(C<<9&4294967295|C>>>23),C=D+(w^T&(A^w))+R[11]+643717713&4294967295,D=A+(C<<14&4294967295|C>>>18),C=T+(A^w&(D^A))+R[0]+3921069994&4294967295,T=D+(C<<20&4294967295|C>>>12),C=w+(D^A&(T^D))+R[5]+3593408605&4294967295,w=T+(C<<5&4294967295|C>>>27),C=A+(T^D&(w^T))+R[10]+38016083&4294967295,A=w+(C<<9&4294967295|C>>>23),C=D+(w^T&(A^w))+R[15]+3634488961&4294967295,D=A+(C<<14&4294967295|C>>>18),C=T+(A^w&(D^A))+R[4]+3889429448&4294967295,T=D+(C<<20&4294967295|C>>>12),C=w+(D^A&(T^D))+R[9]+568446438&4294967295,w=T+(C<<5&4294967295|C>>>27),C=A+(T^D&(w^T))+R[14]+3275163606&4294967295,A=w+(C<<9&4294967295|C>>>23),C=D+(w^T&(A^w))+R[3]+4107603335&4294967295,D=A+(C<<14&4294967295|C>>>18),C=T+(A^w&(D^A))+R[8]+1163531501&4294967295,T=D+(C<<20&4294967295|C>>>12),C=w+(D^A&(T^D))+R[13]+2850285829&4294967295,w=T+(C<<5&4294967295|C>>>27),C=A+(T^D&(w^T))+R[2]+4243563512&4294967295,A=w+(C<<9&4294967295|C>>>23),C=D+(w^T&(A^w))+R[7]+1735328473&4294967295,D=A+(C<<14&4294967295|C>>>18),C=T+(A^w&(D^A))+R[12]+2368359562&4294967295,T=D+(C<<20&4294967295|C>>>12),C=w+(T^D^A)+R[5]+4294588738&4294967295,w=T+(C<<4&4294967295|C>>>28),C=A+(w^T^D)+R[8]+2272392833&4294967295,A=w+(C<<11&4294967295|C>>>21),C=D+(A^w^T)+R[11]+1839030562&4294967295,D=A+(C<<16&4294967295|C>>>16),C=T+(D^A^w)+R[14]+4259657740&4294967295,T=D+(C<<23&4294967295|C>>>9),C=w+(T^D^A)+R[1]+2763975236&4294967295,w=T+(C<<4&4294967295|C>>>28),C=A+(w^T^D)+R[4]+1272893353&4294967295,A=w+(C<<11&4294967295|C>>>21),C=D+(A^w^T)+R[7]+4139469664&4294967295,D=A+(C<<16&4294967295|C>>>16),C=T+(D^A^w)+R[10]+3200236656&4294967295,T=D+(C<<23&4294967295|C>>>9),C=w+(T^D^A)+R[13]+681279174&4294967295,w=T+(C<<4&4294967295|C>>>28),C=A+(w^T^D)+R[0]+3936430074&4294967295,A=w+(C<<11&4294967295|C>>>21),C=D+(A^w^T)+R[3]+3572445317&4294967295,D=A+(C<<16&4294967295|C>>>16),C=T+(D^A^w)+R[6]+76029189&4294967295,T=D+(C<<23&4294967295|C>>>9),C=w+(T^D^A)+R[9]+3654602809&4294967295,w=T+(C<<4&4294967295|C>>>28),C=A+(w^T^D)+R[12]+3873151461&4294967295,A=w+(C<<11&4294967295|C>>>21),C=D+(A^w^T)+R[15]+530742520&4294967295,D=A+(C<<16&4294967295|C>>>16),C=T+(D^A^w)+R[2]+3299628645&4294967295,T=D+(C<<23&4294967295|C>>>9),C=w+(D^(T|~A))+R[0]+4096336452&4294967295,w=T+(C<<6&4294967295|C>>>26),C=A+(T^(w|~D))+R[7]+1126891415&4294967295,A=w+(C<<10&4294967295|C>>>22),C=D+(w^(A|~T))+R[14]+2878612391&4294967295,D=A+(C<<15&4294967295|C>>>17),C=T+(A^(D|~w))+R[5]+4237533241&4294967295,T=D+(C<<21&4294967295|C>>>11),C=w+(D^(T|~A))+R[12]+1700485571&4294967295,w=T+(C<<6&4294967295|C>>>26),C=A+(T^(w|~D))+R[3]+2399980690&4294967295,A=w+(C<<10&4294967295|C>>>22),C=D+(w^(A|~T))+R[10]+4293915773&4294967295,D=A+(C<<15&4294967295|C>>>17),C=T+(A^(D|~w))+R[1]+2240044497&4294967295,T=D+(C<<21&4294967295|C>>>11),C=w+(D^(T|~A))+R[8]+1873313359&4294967295,w=T+(C<<6&4294967295|C>>>26),C=A+(T^(w|~D))+R[15]+4264355552&4294967295,A=w+(C<<10&4294967295|C>>>22),C=D+(w^(A|~T))+R[6]+2734768916&4294967295,D=A+(C<<15&4294967295|C>>>17),C=T+(A^(D|~w))+R[13]+1309151649&4294967295,T=D+(C<<21&4294967295|C>>>11),C=w+(D^(T|~A))+R[4]+4149444226&4294967295,w=T+(C<<6&4294967295|C>>>26),C=A+(T^(w|~D))+R[11]+3174756917&4294967295,A=w+(C<<10&4294967295|C>>>22),C=D+(w^(A|~T))+R[2]+718787259&4294967295,D=A+(C<<15&4294967295|C>>>17),C=T+(A^(D|~w))+R[9]+3951481745&4294967295,N.g[0]=N.g[0]+w&4294967295,N.g[1]=N.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+A&4294967295}s.prototype.v=function(N,w){w===void 0&&(w=N.length);const T=w-this.blockSize,R=this.C;let D=this.h,A=0;for(;A<w;){if(D==0)for(;A<=T;)i(this,N,A),A+=this.blockSize;if(typeof N=="string"){for(;A<w;)if(R[D++]=N.charCodeAt(A++),D==this.blockSize){i(this,R),D=0;break}}else for(;A<w;)if(R[D++]=N[A++],D==this.blockSize){i(this,R),D=0;break}}this.h=D,this.o+=w},s.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var w=1;w<N.length-8;++w)N[w]=0;w=this.o*8;for(var T=N.length-8;T<N.length;++T)N[T]=w&255,w/=256;for(this.v(N),N=Array(16),w=0,T=0;T<4;++T)for(let R=0;R<32;R+=8)N[w++]=this.g[T]>>>R&255;return N};function a(N,w){var T=c;return Object.prototype.hasOwnProperty.call(T,N)?T[N]:T[N]=w(N)}function o(N,w){this.h=w;const T=[];let R=!0;for(let D=N.length-1;D>=0;D--){const A=N[D]|0;R&&A==w||(T[D]=A,R=!1)}this.g=T}var c={};function d(N){return-128<=N&&N<128?a(N,function(w){return new o([w|0],w<0?-1:0)}):new o([N|0],N<0?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return f;if(N<0)return x(u(-N));const w=[];let T=1;for(let R=0;N>=T;R++)w[R]=N/T|0,T*=4294967296;return new o(w,0)}function m(N,w){if(N.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(N.charAt(0)=="-")return x(m(N.substring(1),w));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=u(Math.pow(w,8));let R=f;for(let A=0;A<N.length;A+=8){var D=Math.min(8,N.length-A);const C=parseInt(N.substring(A,A+D),w);D<8?(D=u(Math.pow(w,D)),R=R.j(D).add(u(C))):(R=R.j(T),R=R.add(u(C)))}return R}var f=d(0),p=d(1),b=d(16777216);t=o.prototype,t.m=function(){if(k(this))return-x(this).m();let N=0,w=1;for(let T=0;T<this.g.length;T++){const R=this.i(T);N+=(R>=0?R:4294967296+R)*w,w*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(E(this))return"0";if(k(this))return"-"+x(this).toString(N);const w=u(Math.pow(N,6));var T=this;let R="";for(;;){const D=I(T,w).g;T=y(T,D.j(w));let A=((T.g.length>0?T.g[0]:T.h)>>>0).toString(N);if(T=D,E(T))return A+R;for(;A.length<6;)A="0"+A;R=A+R}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function E(N){if(N.h!=0)return!1;for(let w=0;w<N.g.length;w++)if(N.g[w]!=0)return!1;return!0}function k(N){return N.h==-1}t.l=function(N){return N=y(this,N),k(N)?-1:E(N)?0:1};function x(N){const w=N.g.length,T=[];for(let R=0;R<w;R++)T[R]=~N.g[R];return new o(T,~N.h).add(p)}t.abs=function(){return k(this)?x(this):this},t.add=function(N){const w=Math.max(this.g.length,N.g.length),T=[];let R=0;for(let D=0;D<=w;D++){let A=R+(this.i(D)&65535)+(N.i(D)&65535),C=(A>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);R=C>>>16,A&=65535,C&=65535,T[D]=C<<16|A}return new o(T,T[T.length-1]&-2147483648?-1:0)};function y(N,w){return N.add(x(w))}t.j=function(N){if(E(this)||E(N))return f;if(k(this))return k(N)?x(this).j(x(N)):x(x(this).j(N));if(k(N))return x(this.j(x(N)));if(this.l(b)<0&&N.l(b)<0)return u(this.m()*N.m());const w=this.g.length+N.g.length,T=[];for(var R=0;R<2*w;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(let D=0;D<N.g.length;D++){const A=this.i(R)>>>16,C=this.i(R)&65535,se=N.i(D)>>>16,B=N.i(D)&65535;T[2*R+2*D]+=C*B,v(T,2*R+2*D),T[2*R+2*D+1]+=A*B,v(T,2*R+2*D+1),T[2*R+2*D+1]+=C*se,v(T,2*R+2*D+1),T[2*R+2*D+2]+=A*se,v(T,2*R+2*D+2)}for(N=0;N<w;N++)T[N]=T[2*N+1]<<16|T[2*N];for(N=w;N<2*w;N++)T[N]=0;return new o(T,0)};function v(N,w){for(;(N[w]&65535)!=N[w];)N[w+1]+=N[w]>>>16,N[w]&=65535,w++}function j(N,w){this.g=N,this.h=w}function I(N,w){if(E(w))throw Error("division by zero");if(E(N))return new j(f,f);if(k(N))return w=I(x(N),w),new j(x(w.g),x(w.h));if(k(w))return w=I(N,x(w)),new j(x(w.g),w.h);if(N.g.length>30){if(k(N)||k(w))throw Error("slowDivide_ only works with positive integers.");for(var T=p,R=w;R.l(N)<=0;)T=M(T),R=M(R);var D=P(T,1),A=P(R,1);for(R=P(R,2),T=P(T,2);!E(R);){var C=A.add(R);C.l(N)<=0&&(D=D.add(T),A=C),R=P(R,1),T=P(T,1)}return w=y(N,D.j(w)),new j(D,w)}for(D=f;N.l(w)>=0;){for(T=Math.max(1,Math.floor(N.m()/w.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),A=u(T),C=A.j(w);k(C)||C.l(N)>0;)T-=R,A=u(T),C=A.j(w);E(A)&&(A=p),D=D.add(A),N=y(N,C)}return new j(D,N)}t.B=function(N){return I(this,N).h},t.and=function(N){const w=Math.max(this.g.length,N.g.length),T=[];for(let R=0;R<w;R++)T[R]=this.i(R)&N.i(R);return new o(T,this.h&N.h)},t.or=function(N){const w=Math.max(this.g.length,N.g.length),T=[];for(let R=0;R<w;R++)T[R]=this.i(R)|N.i(R);return new o(T,this.h|N.h)},t.xor=function(N){const w=Math.max(this.g.length,N.g.length),T=[];for(let R=0;R<w;R++)T[R]=this.i(R)^N.i(R);return new o(T,this.h^N.h)};function M(N){const w=N.g.length+1,T=[];for(let R=0;R<w;R++)T[R]=N.i(R)<<1|N.i(R-1)>>>31;return new o(T,N.h)}function P(N,w){const T=w>>5;w%=32;const R=N.g.length-T,D=[];for(let A=0;A<R;A++)D[A]=w>0?N.i(A+T)>>>w|N.i(A+T+1)<<32-w:N.i(A+T);return new o(D,N.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,oj=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=m,Sn=o}).apply(typeof Rx<"u"?Rx:typeof self<"u"?self:typeof window<"u"?window:{});var hl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lj,ga,cj,Dl,Rh,dj,uj,hj;(function(){var t,e=Object.defineProperty;function r(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof hl=="object"&&hl];for(var h=0;h<l.length;++h){var g=l[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=r(this);function i(l,h){if(h)e:{var g=s;l=l.split(".");for(var _=0;_<l.length-1;_++){var L=l[_];if(!(L in g))break e;g=g[L]}l=l[l.length-1],_=g[l],h=h(_),h!=_&&h!=null&&e(g,l,{configurable:!0,writable:!0,value:h})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(h){var g=[],_;for(_ in h)Object.prototype.hasOwnProperty.call(h,_)&&g.push([_,h[_]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,g){return l.call.apply(l.bind,arguments)}function u(l,h,g){return u=d,u.apply(null,arguments)}function m(l,h){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function f(l,h){function g(){}g.prototype=h.prototype,l.Z=h.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(_,L,V){for(var W=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)W[ie-2]=arguments[ie];return h.prototype[L].apply(_,W)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function b(l){const h=l.length;if(h>0){const g=Array(h);for(let _=0;_<h;_++)g[_]=l[_];return g}return[]}function E(l,h){for(let _=1;_<arguments.length;_++){const L=arguments[_];var g=typeof L;if(g=g!="object"?g:L?Array.isArray(L)?"array":g:"null",g=="array"||g=="object"&&typeof L.length=="number"){g=l.length||0;const V=L.length||0;l.length=g+V;for(let W=0;W<V;W++)l[g+W]=L[W]}else l.push(L)}}class k{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(l){o.setTimeout(()=>{throw l},0)}function y(){var l=N;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class v{constructor(){this.h=this.g=null}add(h,g){const _=j.get();_.set(h,g),this.h?this.h.next=_:this.g=_,this.h=_}}var j=new k(()=>new I,l=>l.reset());class I{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let M,P=!1,N=new v,w=()=>{const l=Promise.resolve(void 0);M=()=>{l.then(T)}};function T(){for(var l;l=y();){try{l.h.call(l.g)}catch(g){x(g)}var h=j;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}P=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};o.addEventListener("test",g,h),o.removeEventListener("test",g,h)}catch{}return l}();function C(l){return/^[\s\xa0]*$/.test(l)}function se(l,h){D.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}f(se,D),se.prototype.init=function(l,h){const g=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(g=="mouseover"?h=l.fromElement:g=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var B="closure_listenable_"+(Math.random()*1e6|0),J=0;function Pe(l,h,g,_,L){this.listener=l,this.proxy=null,this.src=h,this.type=g,this.capture=!!_,this.ha=L,this.key=++J,this.da=this.fa=!1}function $(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function G(l,h,g){for(const _ in l)h.call(g,l[_],_,l)}function Z(l,h){for(const g in l)h.call(void 0,l[g],g,l)}function ke(l){const h={};for(const g in l)h[g]=l[g];return h}const Me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gn(l,h){let g,_;for(let L=1;L<arguments.length;L++){_=arguments[L];for(g in _)l[g]=_[g];for(let V=0;V<Me.length;V++)g=Me[V],Object.prototype.hasOwnProperty.call(_,g)&&(l[g]=_[g])}}function Ut(l){this.src=l,this.g={},this.h=0}Ut.prototype.add=function(l,h,g,_,L){const V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);const W=Xt(l,h,_,L);return W>-1?(h=l[W],g||(h.fa=!1)):(h=new Pe(h,this.src,V,!!_,L),h.fa=g,l.push(h)),h};function Kn(l,h){const g=h.type;if(g in l.g){var _=l.g[g],L=Array.prototype.indexOf.call(_,h,void 0),V;(V=L>=0)&&Array.prototype.splice.call(_,L,1),V&&($(h),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Xt(l,h,g,_){for(let L=0;L<l.length;++L){const V=l[L];if(!V.da&&V.listener==h&&V.capture==!!g&&V.ha==_)return L}return-1}var Gr="closure_lm_"+(Math.random()*1e6|0),xd={};function Uf(l,h,g,_,L){if(Array.isArray(h)){for(let V=0;V<h.length;V++)Uf(l,h[V],g,_,L);return null}return g=Wf(g),l&&l[B]?l.J(h,g,c(_)?!!_.capture:!1,L):Yw(l,h,g,!1,_,L)}function Yw(l,h,g,_,L,V){if(!h)throw Error("Invalid event type");const W=c(L)?!!L.capture:!!L;let ie=vd(l);if(ie||(l[Gr]=ie=new Ut(l)),g=ie.add(h,g,_,W,V),g.proxy)return g;if(_=Xw(),g.proxy=_,_.src=l,_.listener=g,l.addEventListener)A||(L=W),L===void 0&&(L=!1),l.addEventListener(h.toString(),_,L);else if(l.attachEvent)l.attachEvent(zf(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Xw(){function l(g){return h.call(l.src,l.listener,g)}const h=Jw;return l}function Bf(l,h,g,_,L){if(Array.isArray(h))for(var V=0;V<h.length;V++)Bf(l,h[V],g,_,L);else _=c(_)?!!_.capture:!!_,g=Wf(g),l&&l[B]?(l=l.i,V=String(h).toString(),V in l.g&&(h=l.g[V],g=Xt(h,g,_,L),g>-1&&($(h[g]),Array.prototype.splice.call(h,g,1),h.length==0&&(delete l.g[V],l.h--)))):l&&(l=vd(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Xt(h,g,_,L)),(g=l>-1?h[l]:null)&&yd(g))}function yd(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[B])Kn(h.i,l);else{var g=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(g,_,l.capture):h.detachEvent?h.detachEvent(zf(g),_):h.addListener&&h.removeListener&&h.removeListener(_),(g=vd(h))?(Kn(g,l),g.h==0&&(g.src=null,h[Gr]=null)):$(l)}}}function zf(l){return l in xd?xd[l]:xd[l]="on"+l}function Jw(l,h){if(l.da)l=!0;else{h=new se(h,this);const g=l.listener,_=l.ha||l.src;l.fa&&yd(l),l=g.call(_,h)}return l}function vd(l){return l=l[Gr],l instanceof Ut?l:null}var bd="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wf(l){return typeof l=="function"?l:(l[bd]||(l[bd]=function(h){return l.handleEvent(h)}),l[bd])}function at(){R.call(this),this.i=new Ut(this),this.M=this,this.G=null}f(at,R),at.prototype[B]=!0,at.prototype.removeEventListener=function(l,h,g,_){Bf(this,l,h,g,_)};function gt(l,h){var g,_=l.G;if(_)for(g=[];_;_=_.G)g.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new D(h,l);else if(h instanceof D)h.target=h.target||l;else{var L=h;h=new D(_,l),Gn(h,L)}L=!0;let V,W;if(g)for(W=g.length-1;W>=0;W--)V=h.g=g[W],L=Lo(V,_,!0,h)&&L;if(V=h.g=l,L=Lo(V,_,!0,h)&&L,L=Lo(V,_,!1,h)&&L,g)for(W=0;W<g.length;W++)V=h.g=g[W],L=Lo(V,_,!1,h)&&L}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const g=l.g[h];for(let _=0;_<g.length;_++)$(g[_]);delete l.g[h],l.h--}}this.G=null},at.prototype.J=function(l,h,g,_){return this.i.add(String(l),h,!1,g,_)},at.prototype.K=function(l,h,g,_){return this.i.add(String(l),h,!0,g,_)};function Lo(l,h,g,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let L=!0;for(let V=0;V<h.length;++V){const W=h[V];if(W&&!W.da&&W.capture==g){const ie=W.listener,We=W.ha||W.src;W.fa&&Kn(l.i,W),L=ie.call(We,_)!==!1&&L}}return L&&!_.defaultPrevented}function Zw(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=u(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function $f(l){l.g=Zw(()=>{l.g=null,l.i&&(l.i=!1,$f(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class e2 extends R{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:$f(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vi(l){R.call(this),this.h=l,this.g={}}f(Vi,R);var Hf=[];function qf(l){G(l.g,function(h,g){this.g.hasOwnProperty(g)&&yd(h)},l),l.g={}}Vi.prototype.N=function(){Vi.Z.N.call(this),qf(this)},Vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jd=o.JSON.stringify,t2=o.JSON.parse,r2=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Gf(){}function Kf(){}var Oi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wd(){D.call(this,"d")}f(wd,D);function Nd(){D.call(this,"c")}f(Nd,D);var Qn={},Qf=null;function Vo(){return Qf=Qf||new at}Qn.Ia="serverreachability";function Yf(l){D.call(this,Qn.Ia,l)}f(Yf,D);function Fi(l){const h=Vo();gt(h,new Yf(h))}Qn.STAT_EVENT="statevent";function Xf(l,h){D.call(this,Qn.STAT_EVENT,l),this.stat=h}f(Xf,D);function xt(l){const h=Vo();gt(h,new Xf(h,l))}Qn.Ja="timingevent";function Jf(l,h){D.call(this,Qn.Ja,l),this.size=h}f(Jf,D);function Ui(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function Bi(){this.g=!0}Bi.prototype.ua=function(){this.g=!1};function n2(l,h,g,_,L,V){l.info(function(){if(l.g)if(V){var W="",ie=V.split("&");for(let ye=0;ye<ie.length;ye++){var We=ie[ye].split("=");if(We.length>1){const Ke=We[0];We=We[1];const dr=Ke.split("_");W=dr.length>=2&&dr[1]=="type"?W+(Ke+"="+We+"&"):W+(Ke+"=redacted&")}}}else W=null;else W=V;return"XMLHTTP REQ ("+_+") [attempt "+L+"]: "+h+`
`+g+`
`+W})}function s2(l,h,g,_,L,V,W){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+L+"]: "+h+`
`+g+`
`+V+" "+W})}function Cs(l,h,g,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+a2(l,g)+(_?" "+_:"")})}function i2(l,h){l.info(function(){return"TIMEOUT: "+h})}Bi.prototype.info=function(){};function a2(l,h){if(!l.g)return h;if(!h)return null;try{const V=JSON.parse(h);if(V){for(l=0;l<V.length;l++)if(Array.isArray(V[l])){var g=V[l];if(!(g.length<2)){var _=g[1];if(Array.isArray(_)&&!(_.length<1)){var L=_[0];if(L!="noop"&&L!="stop"&&L!="close")for(let W=1;W<_.length;W++)_[W]=""}}}}return jd(V)}catch{return h}}var Oo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ep;function _d(){}f(_d,Gf),_d.prototype.g=function(){return new XMLHttpRequest},ep=new _d;function zi(l){return encodeURIComponent(String(l))}function o2(l){var h=1;l=l.split(":");const g=[];for(;h>0&&l.length;)g.push(l.shift()),h--;return l.length&&g.push(l.join(":")),g}function Kr(l,h,g,_){this.j=l,this.i=h,this.l=g,this.S=_||1,this.V=new Vi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new tp}function tp(){this.i=null,this.g="",this.h=!1}var rp={},kd={};function Ed(l,h,g){l.M=1,l.A=Uo(cr(h)),l.u=g,l.R=!0,np(l,null)}function np(l,h){l.F=Date.now(),Fo(l),l.B=cr(l.A);var g=l.B,_=l.S;Array.isArray(_)||(_=[String(_)]),gp(g.i,"t",_),l.C=0,g=l.j.L,l.h=new tp,l.g=Dp(l.j,g?h:null,!l.u),l.P>0&&(l.O=new e2(u(l.Y,l,l.g),l.P)),h=l.V,g=l.g,_=l.ba;var L="readystatechange";Array.isArray(L)||(L&&(Hf[0]=L.toString()),L=Hf);for(let V=0;V<L.length;V++){const W=Uf(g,L[V],_||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=l.J?ke(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),Fi(),n2(l.i,l.v,l.B,l.l,l.S,l.u)}Kr.prototype.ba=function(l){l=l.target;const h=this.O;h&&Xr(l)==3?h.j():this.Y(l)},Kr.prototype.Y=function(l){try{if(l==this.g)e:{const ie=Xr(this.g),We=this.g.ya(),ye=this.g.ca();if(!(ie<3)&&(ie!=3||this.g&&(this.h.h||this.g.la()||Np(this.g)))){this.K||ie!=4||We==7||(We==8||ye<=0?Fi(3):Fi(2)),Td(this);var h=this.g.ca();this.X=h;var g=l2(this);if(this.o=h==200,s2(this.i,this.v,this.B,this.l,this.S,ie,h),this.o){if(this.U&&!this.L){t:{if(this.g){var _,L=this.g;if((_=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(_)){var V=_;break t}}V=null}if(l=V)Cs(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Sd(this,l);else{this.o=!1,this.m=3,xt(12),Yn(this),Wi(this);break e}}if(this.R){l=!0;let Ke;for(;!this.K&&this.C<g.length;)if(Ke=c2(this,g),Ke==kd){ie==4&&(this.m=4,xt(14),l=!1),Cs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ke==rp){this.m=4,xt(15),Cs(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else Cs(this.i,this.l,Ke,null),Sd(this,Ke);if(sp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ie!=4||g.length!=0||this.h.h||(this.m=1,xt(16),l=!1),this.o=this.o&&l,!l)Cs(this.i,this.l,g,"[Invalid Chunked Response]"),Yn(this),Wi(this);else if(g.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Ld(W),W.P=!0,xt(11))}}else Cs(this.i,this.l,g,null),Sd(this,g);ie==4&&Yn(this),this.o&&!this.K&&(ie==4?Cp(this.j,this):(this.o=!1,Fo(this)))}else N2(this.g),h==400&&g.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),Yn(this),Wi(this)}}}catch{}finally{}};function l2(l){if(!sp(l))return l.g.la();const h=Np(l.g);if(h==="")return"";let g="";const _=h.length,L=Xr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Yn(l),Wi(l),"";l.h.i=new o.TextDecoder}for(let V=0;V<_;V++)l.h.h=!0,g+=l.h.i.decode(h[V],{stream:!(L&&V==_-1)});return h.length=0,l.h.g+=g,l.C=0,l.h.g}function sp(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function c2(l,h){var g=l.C,_=h.indexOf(`
`,g);return _==-1?kd:(g=Number(h.substring(g,_)),isNaN(g)?rp:(_+=1,_+g>h.length?kd:(h=h.slice(_,_+g),l.C=_+g,h)))}Kr.prototype.cancel=function(){this.K=!0,Yn(this)};function Fo(l){l.T=Date.now()+l.H,ip(l,l.H)}function ip(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Ui(u(l.aa,l),h)}function Td(l){l.D&&(o.clearTimeout(l.D),l.D=null)}Kr.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(i2(this.i,this.B),this.M!=2&&(Fi(),xt(17)),Yn(this),this.m=2,Wi(this)):ip(this,this.T-l)};function Wi(l){l.j.I==0||l.K||Cp(l.j,l)}function Yn(l){Td(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,qf(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function Sd(l,h){try{var g=l.j;if(g.I!=0&&(g.g==l||Id(g.h,l))){if(!l.L&&Id(g.h,l)&&g.I==3){try{var _=g.Ba.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var L=_;if(L[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)Ho(g),Wo(g);else break e;Md(g),xt(18)}}else g.xa=L[1],0<g.xa-g.K&&L[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Ui(u(g.Va,g),6e3));lp(g.h)<=1&&g.ta&&(g.ta=void 0)}else Jn(g,11)}else if((l.L||g.g==l)&&Ho(g),!C(h))for(L=g.Ba.g.parse(h),h=0;h<L.length;h++){let ye=L[h];const Ke=ye[0];if(!(Ke<=g.K))if(g.K=Ke,ye=ye[1],g.I==2)if(ye[0]=="c"){g.M=ye[1],g.ba=ye[2];const dr=ye[3];dr!=null&&(g.ka=dr,g.j.info("VER="+g.ka));const Zn=ye[4];Zn!=null&&(g.za=Zn,g.j.info("SVER="+g.za));const Jr=ye[5];Jr!=null&&typeof Jr=="number"&&Jr>0&&(_=1.5*Jr,g.O=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Zr=l.g;if(Zr){const Go=Zr.g?Zr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Go){var V=_.h;V.g||Go.indexOf("spdy")==-1&&Go.indexOf("quic")==-1&&Go.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Cd(V,V.h),V.h=null))}if(_.G){const Vd=Zr.g?Zr.g.getResponseHeader("X-HTTP-Session-Id"):null;Vd&&(_.wa=Vd,je(_.J,_.G,Vd))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),_=g;var W=l;if(_.na=Rp(_,_.L?_.ba:null,_.W),W.L){cp(_.h,W);var ie=W,We=_.O;We&&(ie.H=We),ie.D&&(Td(ie),Fo(ie)),_.g=W}else Sp(_);g.i.length>0&&$o(g)}else ye[0]!="stop"&&ye[0]!="close"||Jn(g,7);else g.I==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Jn(g,7):Dd(g):ye[0]!="noop"&&g.l&&g.l.qa(ye),g.A=0)}}Fi(4)}catch{}}var d2=class{constructor(l,h){this.g=l,this.map=h}};function ap(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function op(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function lp(l){return l.h?1:l.g?l.g.size:0}function Id(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Cd(l,h){l.g?l.g.add(h):l.h=h}function cp(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}ap.prototype.cancel=function(){if(this.i=dp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function dp(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const g of l.g.values())h=h.concat(g.G);return h}return b(l.i)}var up=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function u2(l,h){if(l){l=l.split("&");for(let g=0;g<l.length;g++){const _=l[g].indexOf("=");let L,V=null;_>=0?(L=l[g].substring(0,_),V=l[g].substring(_+1)):L=l[g],h(L,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Qr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof Qr?(this.l=l.l,$i(this,l.j),this.o=l.o,this.g=l.g,Hi(this,l.u),this.h=l.h,Ad(this,xp(l.i)),this.m=l.m):l&&(h=String(l).match(up))?(this.l=!1,$i(this,h[1]||"",!0),this.o=qi(h[2]||""),this.g=qi(h[3]||"",!0),Hi(this,h[4]),this.h=qi(h[5]||"",!0),Ad(this,h[6]||"",!0),this.m=qi(h[7]||"")):(this.l=!1,this.i=new Ki(null,this.l))}Qr.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(Gi(h,hp,!0),":");var g=this.g;return(g||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Gi(h,hp,!0),"@"),l.push(zi(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Gi(g,g.charAt(0)=="/"?f2:m2,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Gi(g,g2)),l.join("")},Qr.prototype.resolve=function(l){const h=cr(this);let g=!!l.j;g?$i(h,l.j):g=!!l.o,g?h.o=l.o:g=!!l.g,g?h.g=l.g:g=l.u!=null;var _=l.h;if(g)Hi(h,l.u);else if(g=!!l.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var L=h.h.lastIndexOf("/");L!=-1&&(_=h.h.slice(0,L+1)+_)}if(L=_,L==".."||L==".")_="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){_=L.lastIndexOf("/",0)==0,L=L.split("/");const V=[];for(let W=0;W<L.length;){const ie=L[W++];ie=="."?_&&W==L.length&&V.push(""):ie==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),_&&W==L.length&&V.push("")):(V.push(ie),_=!0)}_=V.join("/")}else _=L}return g?h.h=_:g=l.i.toString()!=="",g?Ad(h,xp(l.i)):g=!!l.m,g&&(h.m=l.m),h};function cr(l){return new Qr(l)}function $i(l,h,g){l.j=g?qi(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Hi(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function Ad(l,h,g){h instanceof Ki?(l.i=h,x2(l.i,l.l)):(g||(h=Gi(h,p2)),l.i=new Ki(h,l.l))}function je(l,h,g){l.i.set(h,g)}function Uo(l){return je(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function qi(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Gi(l,h,g){return typeof l=="string"?(l=encodeURI(l).replace(h,h2),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function h2(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var hp=/[#\/\?@]/g,m2=/[#\?:]/g,f2=/[#\?]/g,p2=/[#\?@]/g,g2=/#/g;function Ki(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Xn(l){l.g||(l.g=new Map,l.h=0,l.i&&u2(l.i,function(h,g){l.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=Ki.prototype,t.add=function(l,h){Xn(this),this.i=null,l=As(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(h),this.h+=1,this};function mp(l,h){Xn(l),h=As(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function fp(l,h){return Xn(l),h=As(l,h),l.g.has(h)}t.forEach=function(l,h){Xn(this),this.g.forEach(function(g,_){g.forEach(function(L){l.call(h,L,_,this)},this)},this)};function pp(l,h){Xn(l);let g=[];if(typeof h=="string")fp(l,h)&&(g=g.concat(l.g.get(As(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)g=g.concat(l[h]);return g}t.set=function(l,h){return Xn(this),this.i=null,l=As(this,l),fp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=pp(this,l),l.length>0?String(l[0]):h):h};function gp(l,h,g){mp(l,h),g.length>0&&(l.i=null,l.g.set(As(l,h),b(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let _=0;_<h.length;_++){var g=h[_];const L=zi(g);g=pp(this,g);for(let V=0;V<g.length;V++){let W=L;g[V]!==""&&(W+="="+zi(g[V])),l.push(W)}}return this.i=l.join("&")};function xp(l){const h=new Ki;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function As(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function x2(l,h){h&&!l.j&&(Xn(l),l.i=null,l.g.forEach(function(g,_){const L=_.toLowerCase();_!=L&&(mp(this,_),gp(this,L,g))},l)),l.j=h}function y2(l,h){const g=new Bi;if(o.Image){const _=new Image;_.onload=m(Yr,g,"TestLoadImage: loaded",!0,h,_),_.onerror=m(Yr,g,"TestLoadImage: error",!1,h,_),_.onabort=m(Yr,g,"TestLoadImage: abort",!1,h,_),_.ontimeout=m(Yr,g,"TestLoadImage: timeout",!1,h,_),o.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function v2(l,h){const g=new Bi,_=new AbortController,L=setTimeout(()=>{_.abort(),Yr(g,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(V=>{clearTimeout(L),V.ok?Yr(g,"TestPingServer: ok",!0,h):Yr(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),Yr(g,"TestPingServer: error",!1,h)})}function Yr(l,h,g,_,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),_(g)}catch{}}function b2(){this.g=new r2}function Pd(l){this.i=l.Sb||null,this.h=l.ab||!1}f(Pd,Gf),Pd.prototype.g=function(){return new Bo(this.i,this.h)};function Bo(l,h){at.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Bo,at),t=Bo.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,Yi(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Qi(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yp(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function yp(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Qi(this):Yi(this),this.readyState==3&&yp(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Qi(this))},t.Na=function(l){this.g&&(this.response=l,Qi(this))},t.ga=function(){this.g&&Qi(this)};function Qi(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Yi(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=h.next();return l.join(`\r
`)};function Yi(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function vp(l){let h="";return G(l,function(g,_){h+=_,h+=":",h+=g,h+=`\r
`}),h}function Rd(l,h,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=vp(g),typeof l=="string"?g!=null&&zi(g):je(l,h,g))}function Re(l){at.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Re,at);var j2=/^https?$/i,w2=["POST","PUT"];t=Re.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ep.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){bp(this,V);return}if(l=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var L in _)g.set(L,_[L]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const V of _.keys())g.set(V,_.get(V));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),L=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(w2,h,void 0)>=0)||_||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of g)this.g.setRequestHeader(V,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(V){bp(this,V)}};function bp(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,jp(l),zo(l)}function jp(l){l.A||(l.A=!0,gt(l,"complete"),gt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,gt(this,"complete"),gt(this,"abort"),zo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zo(this,!0)),Re.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?wp(this):this.Xa())},t.Xa=function(){wp(this)};function wp(l){if(l.h&&typeof a<"u"){if(l.v&&Xr(l)==4)setTimeout(l.Ca.bind(l),0);else if(gt(l,"readystatechange"),Xr(l)==4){l.h=!1;try{const V=l.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var _;if(_=V===0){let W=String(l.D).match(up)[1]||null;!W&&o.self&&o.self.location&&(W=o.self.location.protocol.slice(0,-1)),_=!j2.test(W?W.toLowerCase():"")}g=_}if(g)gt(l,"complete"),gt(l,"success");else{l.o=6;try{var L=Xr(l)>2?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.ca()+"]",jp(l)}}finally{zo(l)}}}}function zo(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const g=l.g;l.g=null,h||gt(l,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Xr(l){return l.g?l.g.readyState:0}t.ca=function(){try{return Xr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),t2(h)}};function Np(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function N2(l){const h={};l=(l.g&&Xr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(C(l[_]))continue;var g=o2(l[_]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=h[L]||[];h[L]=V,V.push(g)}Z(h,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xi(l,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||h}function _p(l){this.za=0,this.i=[],this.j=new Bi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xi("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xi("baseRetryDelayMs",5e3,l),this.Za=Xi("retryDelaySeedMs",1e4,l),this.Ta=Xi("forwardChannelMaxRetries",2,l),this.va=Xi("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new ap(l&&l.concurrentRequestLimit),this.Ba=new b2,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=_p.prototype,t.ka=8,t.I=1,t.connect=function(l,h,g,_){xt(0),this.W=l,this.H=h||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.J=Rp(this,null,this.W),$o(this)};function Dd(l){if(kp(l),l.I==3){var h=l.V++,g=cr(l.J);if(je(g,"SID",l.M),je(g,"RID",h),je(g,"TYPE","terminate"),Ji(l,g),h=new Kr(l,l.j,h),h.M=2,h.A=Uo(cr(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=h.A,g=!0),g||(h.g=Dp(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Fo(h)}Pp(l)}function Wo(l){l.g&&(Ld(l),l.g.cancel(),l.g=null)}function kp(l){Wo(l),l.v&&(o.clearTimeout(l.v),l.v=null),Ho(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function $o(l){if(!op(l.h)&&!l.m){l.m=!0;var h=l.Ea;M||w(),P||(M(),P=!0),N.add(h,l),l.D=0}}function _2(l,h){return lp(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Ui(u(l.Ea,l,h),Ap(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const L=new Kr(this,this.j,l);let V=this.o;if(this.U&&(V?(V=ke(V),Gn(V,this.U)):V=this.U),this.u!==null||this.R||(L.J=V,V=null),this.S)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,h>4096){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=Tp(this,L,h),g=cr(this.J),je(g,"RID",l),je(g,"CVER",22),this.G&&je(g,"X-HTTP-Session-Id",this.G),Ji(this,g),V&&(this.R?h="headers="+zi(vp(V))+"&"+h:this.u&&Rd(g,this.u,V)),Cd(this.h,L),this.Ra&&je(g,"TYPE","init"),this.S?(je(g,"$req",h),je(g,"SID","null"),L.U=!0,Ed(L,g,null)):Ed(L,g,h),this.I=2}}else this.I==3&&(l?Ep(this,l):this.i.length==0||op(this.h)||Ep(this))};function Ep(l,h){var g;h?g=h.l:g=l.V++;const _=cr(l.J);je(_,"SID",l.M),je(_,"RID",g),je(_,"AID",l.K),Ji(l,_),l.u&&l.o&&Rd(_,l.u,l.o),g=new Kr(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),h&&(l.i=h.G.concat(l.i)),h=Tp(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Cd(l.h,g),Ed(g,_,h)}function Ji(l,h){l.H&&G(l.H,function(g,_){je(h,_,g)}),l.l&&G({},function(g,_){je(h,_,g)})}function Tp(l,h,g){g=Math.min(l.i.length,g);const _=l.l?u(l.l.Ka,l.l,l):null;e:{var L=l.i;let ie=-1;for(;;){const We=["count="+g];ie==-1?g>0?(ie=L[0].g,We.push("ofs="+ie)):ie=0:We.push("ofs="+ie);let ye=!0;for(let Ke=0;Ke<g;Ke++){var V=L[Ke].g;const dr=L[Ke].map;if(V-=ie,V<0)ie=Math.max(0,L[Ke].g-100),ye=!1;else try{V="req"+V+"_"||"";try{var W=dr instanceof Map?dr:Object.entries(dr);for(const[Zn,Jr]of W){let Zr=Jr;c(Jr)&&(Zr=jd(Jr)),We.push(V+Zn+"="+encodeURIComponent(Zr))}}catch(Zn){throw We.push(V+"type="+encodeURIComponent("_badmap")),Zn}}catch{_&&_(dr)}}if(ye){W=We.join("&");break e}}W=void 0}return l=l.i.splice(0,g),h.G=l,W}function Sp(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;M||w(),P||(M(),P=!0),N.add(h,l),l.A=0}}function Md(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Ui(u(l.Da,l),Ap(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,Ip(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Ui(u(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Wo(this),Ip(this))};function Ld(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Ip(l){l.g=new Kr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=cr(l.na);je(h,"RID","rpc"),je(h,"SID",l.M),je(h,"AID",l.K),je(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&je(h,"TO",l.ia),je(h,"TYPE","xmlhttp"),Ji(l,h),l.u&&l.o&&Rd(h,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=Uo(cr(h)),g.u=null,g.R=!0,np(g,l)}t.Va=function(){this.C!=null&&(this.C=null,Wo(this),Md(this),xt(19))};function Ho(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Cp(l,h){var g=null;if(l.g==h){Ho(l),Ld(l),l.g=null;var _=2}else if(Id(l.h,h))g=h.G,cp(l.h,h),_=1;else return;if(l.I!=0){if(h.o)if(_==1){g=h.u?h.u.length:0,h=Date.now()-h.F;var L=l.D;_=Vo(),gt(_,new Jf(_,g)),$o(l)}else Sp(l);else if(L=h.m,L==3||L==0&&h.X>0||!(_==1&&_2(l,h)||_==2&&Md(l)))switch(g&&g.length>0&&(h=l.h,h.i=h.i.concat(g)),L){case 1:Jn(l,5);break;case 4:Jn(l,10);break;case 3:Jn(l,6);break;default:Jn(l,2)}}}function Ap(l,h){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*h}function Jn(l,h){if(l.j.info("Error code "+h),h==2){var g=u(l.bb,l),_=l.Ua;const L=!_;_=new Qr(_||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||$i(_,"https"),Uo(_),L?y2(_.toString(),g):v2(_.toString(),g)}else xt(2);l.I=0,l.l&&l.l.pa(h),Pp(l),kp(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Pp(l){if(l.I=0,l.ja=[],l.l){const h=dp(l.h);(h.length!=0||l.i.length!=0)&&(E(l.ja,h),E(l.ja,l.i),l.h.i.length=0,b(l.i),l.i.length=0),l.l.oa()}}function Rp(l,h,g){var _=g instanceof Qr?cr(g):new Qr(g);if(_.g!="")h&&(_.g=h+"."+_.g),Hi(_,_.u);else{var L=o.location;_=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;const V=new Qr(null);_&&$i(V,_),h&&(V.g=h),L&&Hi(V,L),g&&(V.h=g),_=V}return g=l.G,h=l.wa,g&&h&&je(_,g,h),je(_,"VER",l.ka),Ji(l,_),_}function Dp(l,h,g){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Re(new Pd({ab:g})):new Re(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mp(){}t=Mp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function qo(){}qo.prototype.g=function(l,h){return new At(l,h)};function At(l,h){at.call(this),this.g=new _p(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!C(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!C(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ps(this)}f(At,at),At.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){Dd(this.g)},At.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=jd(l),l=g);h.i.push(new d2(h.Ya++,l)),h.I==3&&$o(h)},At.prototype.N=function(){this.g.l=null,delete this.j,Dd(this.g),delete this.g,At.Z.N.call(this)};function Lp(l){wd.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const g in h){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}f(Lp,wd);function Vp(){Nd.call(this),this.status=1}f(Vp,Nd);function Ps(l){this.g=l}f(Ps,Mp),Ps.prototype.ra=function(){gt(this.g,"a")},Ps.prototype.qa=function(l){gt(this.g,new Lp(l))},Ps.prototype.pa=function(l){gt(this.g,new Vp)},Ps.prototype.oa=function(){gt(this.g,"b")},qo.prototype.createWebChannel=qo.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,hj=function(){return new qo},uj=function(){return Vo()},dj=Qn,Rh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Oo.NO_ERROR=0,Oo.TIMEOUT=8,Oo.HTTP_ERROR=6,Dl=Oo,Zf.COMPLETE="complete",cj=Zf,Kf.EventType=Oi,Oi.OPEN="a",Oi.CLOSE="b",Oi.ERROR="c",Oi.MESSAGE="d",at.prototype.listen=at.prototype.J,ga=Kf,Re.prototype.listenOnce=Re.prototype.K,Re.prototype.getLastError=Re.prototype.Ha,Re.prototype.getLastErrorCode=Re.prototype.ya,Re.prototype.getStatus=Re.prototype.ca,Re.prototype.getResponseJson=Re.prototype.La,Re.prototype.getResponseText=Re.prototype.la,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Fa,lj=Re}).apply(typeof hl<"u"?hl:typeof self<"u"?self:typeof window<"u"?window:{});const Dx="@firebase/firestore",Mx="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pi="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new Qm("@firebase/firestore");function Ls(){return bs.logLevel}function H(t,...e){if(bs.logLevel<=le.DEBUG){const r=e.map(of);bs.debug(`Firestore (${Pi}): ${t}`,...r)}}function Br(t,...e){if(bs.logLevel<=le.ERROR){const r=e.map(of);bs.error(`Firestore (${Pi}): ${t}`,...r)}}function xi(t,...e){if(bs.logLevel<=le.WARN){const r=e.map(of);bs.warn(`Firestore (${Pi}): ${t}`,...r)}}function of(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,r){let s="Unexpected state";typeof e=="string"?s=e:r=e,mj(t,s,r)}function mj(t,e,r){let s=`FIRESTORE (${Pi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{s+=" CONTEXT: "+JSON.stringify(r)}catch{s+=" CONTEXT: "+r}throw Br(s),new Error(s)}function pe(t,e,r,s){let i="Unexpected state";typeof r=="string"?i=r:s=r,t||mj(e,i,s)}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends qr{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(dt.UNAUTHENTICATED))}shutdown(){}}class jI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class wI{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){pe(this.o===void 0,42304);let s=this.i;const i=d=>this.i!==s?(s=this.i,r(d)):Promise.resolve();let a=new In;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new In,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const d=a;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new In)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(pe(typeof s.accessToken=="string",31837,{l:s}),new fj(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string",2055,{h:e}),new dt(e)}}class NI{constructor(e,r,s){this.P=e,this.T=r,this.I=s,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _I{constructor(e,r,s){this.P=e,this.T=r,this.I=s}getToken(){return Promise.resolve(new NI(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Lx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kI{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){pe(this.o===void 0,3512);const s=a=>{a.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>s(a))};const i=a=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Lx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(pe(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new Lx(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let s=0;s<t;s++)r[s]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=EI(40);for(let a=0;a<i.length;++a)s.length<20&&i[a]<r&&(s+=e.charAt(i[a]%62))}return s}}function ce(t,e){return t<e?-1:t>e?1:0}function Dh(t,e){const r=Math.min(t.length,e.length);for(let s=0;s<r;s++){const i=t.charAt(s),a=e.charAt(s);if(i!==a)return yu(i)===yu(a)?ce(i,a):yu(i)?1:-1}return ce(t.length,e.length)}const TI=55296,SI=57343;function yu(t){const e=t.charCodeAt(0);return e>=TI&&e<=SI}function yi(t,e,r){return t.length===e.length&&t.every((s,i)=>r(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="__name__";class mr{constructor(e,r,s){r===void 0?r=0:r>e.length&&X(637,{offset:r,range:e.length}),s===void 0?s=e.length-r:s>e.length-r&&X(1746,{length:s,range:e.length-r}),this.segments=e,this.offset=r,this.len=s}get length(){return this.len}isEqual(e){return mr.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof mr?e.forEach(s=>{r.push(s)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,s=this.limit();r<s;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const s=Math.min(e.length,r.length);for(let i=0;i<s;i++){const a=mr.compareSegments(e.get(i),r.get(i));if(a!==0)return a}return ce(e.length,r.length)}static compareSegments(e,r){const s=mr.isNumericId(e),i=mr.isNumericId(r);return s&&!i?-1:!s&&i?1:s&&i?mr.extractNumericId(e).compare(mr.extractNumericId(r)):Dh(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sn.fromString(e.substring(4,e.length-2))}}class Se extends mr{construct(e,r,s){return new Se(e,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const s of e){if(s.indexOf("//")>=0)throw new K(U.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(i=>i.length>0))}return new Se(r)}static emptyPath(){return new Se([])}}const II=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends mr{construct(e,r,s){return new rt(e,r,s)}static isValidIdentifier(e){return II.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vx}static keyField(){return new rt([Vx])}static fromServerFormat(e){const r=[];let s="",i=0;const a=()=>{if(s.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new K(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new K(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=d,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(s+=c,i++):(a(),i++)}if(a(),o)throw new K(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(r)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Se.fromString(e))}static fromName(e){return new Q(Se.fromString(e).popFirst(5))}static empty(){return new Q(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Se.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Se(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t,e,r){if(!r)throw new K(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AI(t,e,r,s){if(e===!0&&s===!0)throw new K(U.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Ox(t){if(!Q.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pj(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function cf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function ao(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=cf(t);throw new K(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t,e){const r={typeString:t};return e&&(r.value=e),r}function Co(t,e){if(!pj(t))throw new K(U.INVALID_ARGUMENT,"JSON must be an object");let r;for(const s in e)if(e[s]){const i=e[s].typeString,a="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){r=`JSON missing required field: '${s}'`;break}const o=t[s];if(i&&typeof o!==i){r=`JSON field '${s}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){r=`Expected '${s}' field to equal '${a.value}'`;break}}if(r)throw new K(U.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=-62135596800,Ux=1e6;class Ne{static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),s=Math.floor((e-1e3*r)*Ux);return new Ne(r,s)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Fx)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ux}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Co(e,Ne._jsonSchema))return new Ne(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Fx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ne._jsonSchemaVersion="firestore/timestamp/1.0",Ne._jsonSchema={type:ze("string",Ne._jsonSchemaVersion),seconds:ze("number"),nanoseconds:ze("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Ne(0,0))}static max(){return new ee(new Ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=-1;function PI(t,e){const r=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(s===1e9?new Ne(r+1,0):new Ne(r,s));return new Rn(i,Q.empty(),e)}function RI(t){return new Rn(t.readTime,t.key,oo)}class Rn{constructor(e,r,s){this.readTime=e,this.documentKey=r,this.largestBatchId=s}static min(){return new Rn(ee.min(),Q.empty(),oo)}static max(){return new Rn(ee.max(),Q.empty(),oo)}}function DI(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Q.comparator(t.documentKey,e.documentKey),r!==0?r:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ri(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==MI)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new O((s,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(s,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(s,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof O?r:O.resolve(r)}catch(r){return O.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):O.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):O.reject(r)}static resolve(e){return new O((r,s)=>{r(e)})}static reject(e){return new O((r,s)=>{s(e)})}static waitFor(e){return new O((r,s)=>{let i=0,a=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++a,o&&a===i&&r()},d=>s(d))}),o=!0,a===i&&r()})}static or(e){let r=O.resolve(!1);for(const s of e)r=r.next(i=>i?O.resolve(i):s());return r}static forEach(e,r){const s=[];return e.forEach((i,a)=>{s.push(r.call(this,i,a))}),this.waitFor(s)}static mapArray(e,r){return new O((s,i)=>{const a=e.length,o=new Array(a);let c=0;for(let d=0;d<a;d++){const u=d;r(e[u]).next(m=>{o[u]=m,++c,c===a&&s(o)},m=>i(m))}})}static doWhile(e,r){return new O((s,i)=>{const a=()=>{e()===!0?r().next(()=>{a()},i):s()};a()})}}function VI(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Di(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>r.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}nd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=-1;function sd(t){return t==null}function vc(t){return t===0&&1/t==-1/0}function OI(t){return typeof t=="number"&&Number.isInteger(t)&&!vc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj="";function FI(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Bx(e)),e=UI(t.get(r),e);return Bx(e)}function UI(t,e){let r=e;const s=t.length;for(let i=0;i<s;i++){const a=t.charAt(i);switch(a){case"\0":r+="";break;case gj:r+="";break;default:r+=a}}return r}function Bx(t){return t+gj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Es(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function xj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,r){this.comparator=e,this.root=r||tt.EMPTY}insert(e,r){return new Ae(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(e){let r=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return r+s.left.size;i<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,s)=>(e(r,s),!1))}toString(){const e=[];return this.inorderTraversal((r,s)=>(e.push(`${r}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ml(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ml(this.root,e,this.comparator,!1)}getReverseIterator(){return new ml(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ml(this.root,e,this.comparator,!0)}}class ml{constructor(e,r,s,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?s(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tt{constructor(e,r,s,i,a){this.key=e,this.value=r,this.color=s??tt.RED,this.left=i??tt.EMPTY,this.right=a??tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,s,i,a){return new tt(e??this.key,r??this.value,s??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,s){let i=this;const a=s(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,s),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let s,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return tt.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,r,s,i,a){return this}insert(e,r,s){return new tt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,s)=>(e(r),!1))}forEachInRange(e,r){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let s;for(s=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Wx(this.data.getIterator())}getIteratorFrom(e){return new Wx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(s=>{r=r.add(s)}),r}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const r=this.data.getIterator(),s=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=s.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ge(this.comparator);return r.data=e,r}}class Wx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new nr([])}unionWith(e){let r=new Ge(rt.comparator);for(const s of this.fields)r=r.add(s);for(const s of e)r=r.add(s);return new nr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return yi(this.fields,e.fields,(r,s)=>r.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new yj("Invalid base64 string: "+a):a}}(e);return new it(r)}static fromUint8Array(e){const r=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new it(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const s=new Uint8Array(r.length);for(let i=0;i<r.length;i++)s[i]=r.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const BI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dn(t){if(pe(!!t,39018),typeof t=="string"){let e=0;const r=BI.exec(t);if(pe(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mn(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj="server_timestamp",bj="__type__",jj="__previous_value__",wj="__local_write_time__";function uf(t){var r,s;return((s=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[bj])==null?void 0:s.stringValue)===vj}function id(t){const e=t.mapValue.fields[jj];return uf(e)?id(e):e}function lo(t){const e=Dn(t.mapValue.fields[wj].timestampValue);return new Ne(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,r,s,i,a,o,c,d,u,m){this.databaseId=e,this.appId=r,this.persistenceKey=s,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=u,this.isUsingEmulator=m}}const bc="(default)";class co{constructor(e,r){this.projectId=e,this.database=r||bc}static empty(){return new co("","")}get isDefaultDatabase(){return this.database===bc}isEqual(e){return e instanceof co&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj="__type__",WI="__max__",fl={mapValue:{}},_j="__vector__",jc="value";function Ln(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?uf(t)?4:HI(t)?9007199254740991:$I(t)?10:11:X(28295,{value:t})}function Nr(t,e){if(t===e)return!0;const r=Ln(t);if(r!==Ln(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lo(t).isEqual(lo(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Dn(i.timestampValue),c=Dn(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Mn(i.bytesValue).isEqual(Mn(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return Ve(i.geoPointValue.latitude)===Ve(a.geoPointValue.latitude)&&Ve(i.geoPointValue.longitude)===Ve(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Ve(i.integerValue)===Ve(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=Ve(i.doubleValue),c=Ve(a.doubleValue);return o===c?vc(o)===vc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return yi(t.arrayValue.values||[],e.arrayValue.values||[],Nr);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(zx(o)!==zx(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!Nr(o[d],c[d])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function uo(t,e){return(t.values||[]).find(r=>Nr(r,e))!==void 0}function vi(t,e){if(t===e)return 0;const r=Ln(t),s=Ln(e);if(r!==s)return ce(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(a,o){const c=Ve(a.integerValue||a.doubleValue),d=Ve(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(t,e);case 3:return $x(t.timestampValue,e.timestampValue);case 4:return $x(lo(t),lo(e));case 5:return Dh(t.stringValue,e.stringValue);case 6:return function(a,o){const c=Mn(a),d=Mn(o);return c.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const c=a.split("/"),d=o.split("/");for(let u=0;u<c.length&&u<d.length;u++){const m=ce(c[u],d[u]);if(m!==0)return m}return ce(c.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const c=ce(Ve(a.latitude),Ve(o.latitude));return c!==0?c:ce(Ve(a.longitude),Ve(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Hx(t.arrayValue,e.arrayValue);case 10:return function(a,o){var p,b,E,k;const c=a.fields||{},d=o.fields||{},u=(p=c[jc])==null?void 0:p.arrayValue,m=(b=d[jc])==null?void 0:b.arrayValue,f=ce(((E=u==null?void 0:u.values)==null?void 0:E.length)||0,((k=m==null?void 0:m.values)==null?void 0:k.length)||0);return f!==0?f:Hx(u,m)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===fl.mapValue&&o===fl.mapValue)return 0;if(a===fl.mapValue)return 1;if(o===fl.mapValue)return-1;const c=a.fields||{},d=Object.keys(c),u=o.fields||{},m=Object.keys(u);d.sort(),m.sort();for(let f=0;f<d.length&&f<m.length;++f){const p=Dh(d[f],m[f]);if(p!==0)return p;const b=vi(c[d[f]],u[m[f]]);if(b!==0)return b}return ce(d.length,m.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:r})}}function $x(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const r=Dn(t),s=Dn(e),i=ce(r.seconds,s.seconds);return i!==0?i:ce(r.nanos,s.nanos)}function Hx(t,e){const r=t.values||[],s=e.values||[];for(let i=0;i<r.length&&i<s.length;++i){const a=vi(r[i],s[i]);if(a)return a}return ce(r.length,s.length)}function bi(t){return Mh(t)}function Mh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=Dn(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Mn(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Q.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let s="[",i=!0;for(const a of r.values||[])i?i=!1:s+=",",s+=Mh(a);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const o of s)a?a=!1:i+=",",i+=`${o}:${Mh(r.fields[o])}`;return i+"}"}(t.mapValue):X(61005,{value:t})}function Ml(t){switch(Ln(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=id(t);return e?16+Ml(e):16;case 5:return 2*t.stringValue.length;case 6:return Mn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,a)=>i+Ml(a),0)}(t.arrayValue);case 10:case 11:return function(s){let i=0;return Es(s.fields,(a,o)=>{i+=a.length+Ml(o)}),i}(t.mapValue);default:throw X(13486,{value:t})}}function Lh(t){return!!t&&"integerValue"in t}function hf(t){return!!t&&"arrayValue"in t}function qx(t){return!!t&&"nullValue"in t}function Gx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ll(t){return!!t&&"mapValue"in t}function $I(t){var r,s;return((s=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[Nj])==null?void 0:s.stringValue)===_j}function Pa(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Es(t.mapValue.fields,(r,s)=>e.mapValue.fields[r]=Pa(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Pa(t.arrayValue.values[r]);return e}return{...t}}function HI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===WI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.value=e}static empty(){return new $t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let s=0;s<e.length-1;++s)if(r=(r.mapValue.fields||{})[e.get(s)],!Ll(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pa(r)}setAll(e){let r=rt.emptyPath(),s={},i=[];e.forEach((o,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,s,i),s={},i=[],r=c.popLast()}o?s[c.lastSegment()]=Pa(o):i.push(c.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,s,i)}delete(e){const r=this.field(e.popLast());Ll(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Nr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=r.mapValue.fields[e.get(s)];Ll(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(s)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,s){Es(r,(i,a)=>e[i]=a);for(const i of s)delete e[i]}clone(){return new $t(Pa(this.value))}}function kj(t){const e=[];return Es(t.fields,(r,s)=>{const i=new rt([r]);if(Ll(s)){const a=kj(s.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new nr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,r,s,i,a,o,c){this.key=e,this.documentType=r,this.version=s,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new ht(e,0,ee.min(),ee.min(),ee.min(),$t.empty(),0)}static newFoundDocument(e,r,s,i){return new ht(e,1,r,ee.min(),s,i,0)}static newNoDocument(e,r){return new ht(e,2,r,ee.min(),ee.min(),$t.empty(),0)}static newUnknownDocument(e,r){return new ht(e,3,r,ee.min(),ee.min(),$t.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,r){this.position=e,this.inclusive=r}}function Kx(t,e,r){let s=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?s=Q.comparator(Q.fromName(o.referenceValue),r.key):s=vi(o,r.data.field(a.field)),a.dir==="desc"&&(s*=-1),s!==0)break}return s}function Qx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Nr(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,r="asc"){this.field=e,this.dir=r}}function qI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{}class He extends Ej{constructor(e,r,s){super(),this.field=e,this.op=r,this.value=s}static create(e,r,s){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,s):new KI(e,r,s):r==="array-contains"?new XI(e,s):r==="in"?new JI(e,s):r==="not-in"?new ZI(e,s):r==="array-contains-any"?new e4(e,s):new He(e,r,s)}static createKeyFieldInFilter(e,r,s){return r==="in"?new QI(e,s):new YI(e,s)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(vi(r,this.value)):r!==null&&Ln(this.value)===Ln(r)&&this.matchesComparison(vi(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _r extends Ej{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new _r(e,r)}matches(e){return Tj(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Tj(t){return t.op==="and"}function Sj(t){return GI(t)&&Tj(t)}function GI(t){for(const e of t.filters)if(e instanceof _r)return!1;return!0}function Vh(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+bi(t.value);if(Sj(t))return t.filters.map(e=>Vh(e)).join(",");{const e=t.filters.map(r=>Vh(r)).join(",");return`${t.op}(${e})`}}function Ij(t,e){return t instanceof He?function(s,i){return i instanceof He&&s.op===i.op&&s.field.isEqual(i.field)&&Nr(s.value,i.value)}(t,e):t instanceof _r?function(s,i){return i instanceof _r&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((a,o,c)=>a&&Ij(o,i.filters[c]),!0):!1}(t,e):void X(19439)}function Cj(t){return t instanceof He?function(r){return`${r.field.canonicalString()} ${r.op} ${bi(r.value)}`}(t):t instanceof _r?function(r){return r.op.toString()+" {"+r.getFilters().map(Cj).join(" ,")+"}"}(t):"Filter"}class KI extends He{constructor(e,r,s){super(e,r,s),this.key=Q.fromName(s.referenceValue)}matches(e){const r=Q.comparator(e.key,this.key);return this.matchesComparison(r)}}class QI extends He{constructor(e,r){super(e,"in",r),this.keys=Aj("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class YI extends He{constructor(e,r){super(e,"not-in",r),this.keys=Aj("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Aj(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(s=>Q.fromName(s.referenceValue))}class XI extends He{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return hf(r)&&uo(r.arrayValue,this.value)}}class JI extends He{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&uo(this.value.arrayValue,r)}}class ZI extends He{constructor(e,r){super(e,"not-in",r)}matches(e){if(uo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!uo(this.value.arrayValue,r)}}class e4 extends He{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!hf(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>uo(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,r=null,s=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=s,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function Yx(t,e=null,r=[],s=[],i=null,a=null,o=null){return new t4(t,e,r,s,i,a,o)}function mf(t){const e=te(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(s=>Vh(s)).join(","),r+="|ob:",r+=e.orderBy.map(s=>function(a){return a.field.canonicalString()+a.dir}(s)).join(","),sd(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(s=>bi(s)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(s=>bi(s)).join(",")),e.Te=r}return e.Te}function ff(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!qI(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!Ij(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qx(t.startAt,e.startAt)&&Qx(t.endAt,e.endAt)}function Oh(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,r=null,s=[],i=[],a=null,o="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function r4(t,e,r,s,i,a,o,c){return new ad(t,e,r,s,i,a,o,c)}function pf(t){return new ad(t)}function Xx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function n4(t){return t.collectionGroup!==null}function Ra(t){const e=te(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),r.add(a.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ge(rt.comparator);return o.filters.forEach(d=>{d.getFlattenedFilters().forEach(u=>{u.isInequality()&&(c=c.add(u.field))})}),c})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Nc(a,s))}),r.has(rt.keyField().canonicalString())||e.Ie.push(new Nc(rt.keyField(),s))}return e.Ie}function vr(t){const e=te(t);return e.Ee||(e.Ee=s4(e,Ra(t))),e.Ee}function s4(t,e){if(t.limitType==="F")return Yx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Nc(i.field,a)});const r=t.endAt?new wc(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new wc(t.startAt.position,t.startAt.inclusive):null;return Yx(t.path,t.collectionGroup,e,t.filters,t.limit,r,s)}}function Fh(t,e,r){return new ad(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function od(t,e){return ff(vr(t),vr(e))&&t.limitType===e.limitType}function Pj(t){return`${mf(vr(t))}|lt:${t.limitType}`}function Vs(t){return`Query(target=${function(r){let s=r.path.canonicalString();return r.collectionGroup!==null&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map(i=>Cj(i)).join(", ")}]`),sd(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map(i=>bi(i)).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map(i=>bi(i)).join(",")),`Target(${s})`}(vr(t))}; limitType=${t.limitType})`}function ld(t,e){return e.isFoundDocument()&&function(s,i){const a=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):Q.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)}(t,e)&&function(s,i){for(const a of Ra(s))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const a of s.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(o,c,d){const u=Kx(o,c,d);return o.inclusive?u<=0:u<0}(s.startAt,Ra(s),i)||s.endAt&&!function(o,c,d){const u=Kx(o,c,d);return o.inclusive?u>=0:u>0}(s.endAt,Ra(s),i))}(t,e)}function i4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Rj(t){return(e,r)=>{let s=!1;for(const i of Ra(t)){const a=a4(i,e,r);if(a!==0)return a;s=s||i.field.isKeyField()}return 0}}function a4(t,e,r){const s=t.field.isKeyField()?Q.comparator(e.key,r.key):function(a,o,c){const d=o.data.field(a),u=c.data.field(a);return d!==null&&u!==null?vi(d,u):X(42886)}(t.field,e,r);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),s=this.inner[r];if(s!==void 0){for(const[i,a]of s)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[r]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,(r,s)=>{for(const[i,a]of s)e(i,a)})}isEmpty(){return xj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=new Ae(Q.comparator);function zr(){return o4}const Dj=new Ae(Q.comparator);function xa(...t){let e=Dj;for(const r of t)e=e.insert(r.key,r);return e}function Mj(t){let e=Dj;return t.forEach((r,s)=>e=e.insert(r,s.overlayedDocument)),e}function os(){return Da()}function Lj(){return Da()}function Da(){return new Ts(t=>t.toString(),(t,e)=>t.isEqual(e))}const l4=new Ae(Q.comparator),c4=new Ge(Q.comparator);function de(...t){let e=c4;for(const r of t)e=e.add(r);return e}const d4=new Ge(ce);function u4(){return d4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vc(e)?"-0":e}}function Vj(t){return{integerValue:""+t}}function h4(t,e){return OI(e)?Vj(e):gf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(){this._=void 0}}function m4(t,e,r){return t instanceof ho?function(i,a){const o={fields:{[bj]:{stringValue:vj},[wj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&uf(a)&&(a=id(a)),a&&(o.fields[jj]=a),{mapValue:o}}(r,e):t instanceof mo?Fj(t,e):t instanceof fo?Uj(t,e):function(i,a){const o=Oj(i,a),c=Jx(o)+Jx(i.Ae);return Lh(o)&&Lh(i.Ae)?Vj(c):gf(i.serializer,c)}(t,e)}function f4(t,e,r){return t instanceof mo?Fj(t,e):t instanceof fo?Uj(t,e):r}function Oj(t,e){return t instanceof _c?function(s){return Lh(s)||function(a){return!!a&&"doubleValue"in a}(s)}(e)?e:{integerValue:0}:null}class ho extends cd{}class mo extends cd{constructor(e){super(),this.elements=e}}function Fj(t,e){const r=Bj(e);for(const s of t.elements)r.some(i=>Nr(i,s))||r.push(s);return{arrayValue:{values:r}}}class fo extends cd{constructor(e){super(),this.elements=e}}function Uj(t,e){let r=Bj(e);for(const s of t.elements)r=r.filter(i=>!Nr(i,s));return{arrayValue:{values:r}}}class _c extends cd{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function Jx(t){return Ve(t.integerValue||t.doubleValue)}function Bj(t){return hf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,r){this.field=e,this.transform=r}}function g4(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof mo&&i instanceof mo||s instanceof fo&&i instanceof fo?yi(s.elements,i.elements,Nr):s instanceof _c&&i instanceof _c?Nr(s.Ae,i.Ae):s instanceof ho&&i instanceof ho}(t.transform,e.transform)}class x4{constructor(e,r){this.version=e,this.transformResults=r}}class Dr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Dr}static exists(e){return new Dr(void 0,e)}static updateTime(e){return new Dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dd{}function zj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $j(t.key,Dr.none()):new Ao(t.key,t.data,Dr.none());{const r=t.data,s=$t.empty();let i=new Ge(rt.comparator);for(let a of e.fields)if(!i.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?s.delete(a):s.set(a,o),i=i.add(a)}return new Ss(t.key,s,new nr(i.toArray()),Dr.none())}}function y4(t,e,r){t instanceof Ao?function(i,a,o){const c=i.value.clone(),d=ey(i.fieldTransforms,a,o.transformResults);c.setAll(d),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):t instanceof Ss?function(i,a,o){if(!Vl(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=ey(i.fieldTransforms,a,o.transformResults),d=a.data;d.setAll(Wj(i)),d.setAll(c),a.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(t,e,r):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function Ma(t,e,r,s){return t instanceof Ao?function(a,o,c,d){if(!Vl(a.precondition,o))return c;const u=a.value.clone(),m=ty(a.fieldTransforms,d,o);return u.setAll(m),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,s):t instanceof Ss?function(a,o,c,d){if(!Vl(a.precondition,o))return c;const u=ty(a.fieldTransforms,d,o),m=o.data;return m.setAll(Wj(a)),m.setAll(u),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,r,s):function(a,o,c){return Vl(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,r)}function v4(t,e){let r=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),a=Oj(s.transform,i||null);a!=null&&(r===null&&(r=$t.empty()),r.set(s.field,a))}return r||null}function Zx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&yi(s,i,(a,o)=>g4(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ao extends dd{constructor(e,r,s,i=[]){super(),this.key=e,this.value=r,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ss extends dd{constructor(e,r,s,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=s,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Wj(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=t.data.field(r);e.set(r,s)}}),e}function ey(t,e,r){const s=new Map;pe(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let i=0;i<r.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);s.set(a.field,f4(o,c,r[i]))}return s}function ty(t,e,r){const s=new Map;for(const i of t){const a=i.transform,o=r.data.field(i.field);s.set(i.field,m4(a,o,e))}return s}class $j extends dd{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b4 extends dd{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,r,s,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,r){const s=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&y4(a,e,s[i])}}applyToLocalView(e,r){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(r=Ma(s,e,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(r=Ma(s,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const s=Lj();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=r.has(i.key)?null:c;const d=zj(o,c);d!==null&&s.set(i.key,d),o.isValidDocument()||o.convertToNoDocument(ee.min())}),s}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),de())}isEqual(e){return this.batchId===e.batchId&&yi(this.mutations,e.mutations,(r,s)=>Zx(r,s))&&yi(this.baseMutations,e.baseMutations,(r,s)=>Zx(r,s))}}class xf{constructor(e,r,s,i){this.batch=e,this.commitVersion=r,this.mutationResults=s,this.docVersions=i}static from(e,r,s){pe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=function(){return l4}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,s[o].version);return new xf(e,r,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,me;function _4(t){switch(t){case U.OK:return X(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function Hj(t){if(t===void 0)return Br("GRPC error has no .code"),U.UNKNOWN;switch(t){case Ue.OK:return U.OK;case Ue.CANCELLED:return U.CANCELLED;case Ue.UNKNOWN:return U.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return U.INTERNAL;case Ue.UNAVAILABLE:return U.UNAVAILABLE;case Ue.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ue.NOT_FOUND:return U.NOT_FOUND;case Ue.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ue.ABORTED:return U.ABORTED;case Ue.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ue.DATA_LOSS:return U.DATA_LOSS;default:return X(39323,{code:t})}}(me=Ue||(Ue={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=new Sn([4294967295,4294967295],0);function ry(t){const e=k4().encode(t),r=new oj;return r.update(e),new Uint8Array(r.digest())}function ny(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Sn([r,s],0),new Sn([i,a],0)]}class yf{constructor(e,r,s){if(this.bitmap=e,this.padding=r,this.hashCount=s,r<0||r>=8)throw new ya(`Invalid padding: ${r}`);if(s<0)throw new ya(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ya(`Invalid hash count: ${s}`);if(e.length===0&&r!==0)throw new ya(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Sn.fromNumber(this.ge)}ye(e,r,s){let i=e.add(r.multiply(Sn.fromNumber(s)));return i.compare(E4)===1&&(i=new Sn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=ry(e),[s,i]=ny(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(s,i,a);if(!this.we(o))return!1}return!0}static create(e,r,s){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new yf(a,i,r);return s.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const r=ry(e),[s,i]=ny(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(s,i,a);this.Se(o)}}Se(e){const r=Math.floor(e/8),s=e%8;this.bitmap[r]|=1<<s}}class ya extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,r,s,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,s){const i=new Map;return i.set(e,Po.createSynthesizedTargetChangeForCurrentChange(e,r,s)),new ud(ee.min(),i,new Ae(ce),zr(),de())}}class Po{constructor(e,r,s,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,s){return new Po(s,r,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,r,s,i){this.be=e,this.removedTargetIds=r,this.key=s,this.De=i}}class qj{constructor(e,r){this.targetId=e,this.Ce=r}}class Gj{constructor(e,r,s=it.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=s,this.cause=i}}class sy{constructor(){this.ve=0,this.Fe=iy(),this.Me=it.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=de(),r=de(),s=de();return this.Fe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:s=s.add(i);break;default:X(38017,{changeType:a})}}),new Po(this.Me,this.xe,e,r,s)}qe(){this.Oe=!1,this.Fe=iy()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class T4{constructor(e){this.Ge=e,this.ze=new Map,this.je=zr(),this.Je=pl(),this.He=pl(),this.Ye=new Ae(ce)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const s=this.nt(r);switch(e.state){case 0:this.rt(r)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),s.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((s,i)=>{this.rt(i)&&r(i)})}st(e){const r=e.targetId,s=e.Ce.count,i=this.ot(r);if(i){const a=i.target;if(Oh(a))if(s===0){const o=new Q(a.path);this.et(r,o,ht.newNoDocument(o,ee.min()))}else pe(s===1,20013,{expectedCount:s});else{const o=this._t(r);if(o!==s){const c=this.ut(e),d=c?this.ct(c,e,o):1;if(d!==0){this.it(r);const u=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:a=0}=r;let o,c;try{o=Mn(s).toUint8Array()}catch(d){if(d instanceof yj)return xi("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new yf(o,i,a)}catch(d){return xi(d instanceof ya?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.ge===0?null:c}ct(e,r,s){return r.Ce.count===s-this.Pt(e,r.targetId)?0:2}Pt(e,r){const s=this.Ge.getRemoteKeysForTarget(r);let i=0;return s.forEach(a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(r,a,null),i++)}),i}Tt(e){const r=new Map;this.ze.forEach((a,o)=>{const c=this.ot(o);if(c){if(a.current&&Oh(c.target)){const d=new Q(c.target.path);this.It(d).has(o)||this.Et(o,d)||this.et(o,d,ht.newNoDocument(d,e))}a.Be&&(r.set(o,a.ke()),a.qe())}});let s=de();this.He.forEach((a,o)=>{let c=!0;o.forEachWhile(d=>{const u=this.ot(d);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(s=s.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const i=new ud(e,r,this.Ye,this.je,s);return this.je=zr(),this.Je=pl(),this.He=pl(),this.Ye=new Ae(ce),i}Xe(e,r){if(!this.rt(e))return;const s=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,s),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,r)?i.Qe(r,1):i.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),s&&(this.je=this.je.insert(r,s))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new sy,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Ge(ce),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Ge(ce),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||H("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sy),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function pl(){return new Ae(Q.comparator)}function iy(){return new Ae(Q.comparator)}const S4={asc:"ASCENDING",desc:"DESCENDING"},I4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C4={and:"AND",or:"OR"};class A4{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Uh(t,e){return t.useProto3Json||sd(e)?e:{value:e}}function kc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Kj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function P4(t,e){return kc(t,e.toTimestamp())}function br(t){return pe(!!t,49232),ee.fromTimestamp(function(r){const s=Dn(r);return new Ne(s.seconds,s.nanos)}(t))}function vf(t,e){return Bh(t,e).canonicalString()}function Bh(t,e){const r=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function Qj(t){const e=Se.fromString(t);return pe(ew(e),10190,{key:e.toString()}),e}function zh(t,e){return vf(t.databaseId,e.path)}function vu(t,e){const r=Qj(e);if(r.get(1)!==t.databaseId.projectId)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Q(Xj(r))}function Yj(t,e){return vf(t.databaseId,e)}function R4(t){const e=Qj(t);return e.length===4?Se.emptyPath():Xj(e)}function Wh(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Xj(t){return pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ay(t,e,r){return{name:zh(t,e),fields:r.value.mapValue.fields}}function D4(t,e){let r;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:X(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(u,m){return u.useProto3Json?(pe(m===void 0||typeof m=="string",58123),it.fromBase64String(m||"")):(pe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),it.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(u){const m=u.code===void 0?U.UNKNOWN:Hj(u.code);return new K(m,u.message||"")}(o);r=new Gj(s,i,a,c||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=vu(t,s.document.name),a=br(s.document.updateTime),o=s.document.createTime?br(s.document.createTime):ee.min(),c=new $t({mapValue:{fields:s.document.fields}}),d=ht.newFoundDocument(i,a,o,c),u=s.targetIds||[],m=s.removedTargetIds||[];r=new Ol(u,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=vu(t,s.document),a=s.readTime?br(s.readTime):ee.min(),o=ht.newNoDocument(i,a),c=s.removedTargetIds||[];r=new Ol([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=vu(t,s.document),a=s.removedTargetIds||[];r=new Ol([],a,i,null)}else{if(!("filter"in e))return X(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:a}=s,o=new N4(i,a),c=s.targetId;r=new qj(c,o)}}return r}function M4(t,e){let r;if(e instanceof Ao)r={update:ay(t,e.key,e.value)};else if(e instanceof $j)r={delete:zh(t,e.key)};else if(e instanceof Ss)r={update:ay(t,e.key,e.data),updateMask:$4(e.fieldMask)};else{if(!(e instanceof b4))return X(16599,{Vt:e.type});r={verify:zh(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(s=>function(a,o){const c=o.transform;if(c instanceof ho)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof mo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof fo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof _c)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw X(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(r.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:P4(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:X(27497)}(t,e.precondition)),r}function L4(t,e){return t&&t.length>0?(pe(e!==void 0,14353),t.map(r=>function(i,a){let o=i.updateTime?br(i.updateTime):br(a);return o.isEqual(ee.min())&&(o=br(a)),new x4(o,i.transformResults||[])}(r,e))):[]}function V4(t,e){return{documents:[Yj(t,e.path)]}}function O4(t,e){const r={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=Yj(t,i);const a=function(u){if(u.length!==0)return Zj(_r.create(u,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(m=>function(p){return{field:Os(p.field),direction:B4(p.dir)}}(m))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const c=Uh(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:r,parent:i}}function F4(t){let e=R4(t.parent);const r=t.structuredQuery,s=r.from?r.from.length:0;let i=null;if(s>0){pe(s===1,65062);const m=r.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let a=[];r.where&&(a=function(f){const p=Jj(f);return p instanceof _r&&Sj(p)?p.getFilters():[p]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(p=>function(E){return new Nc(Fs(E.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(r.orderBy));let c=null;r.limit&&(c=function(f){let p;return p=typeof f=="object"?f.value:f,sd(p)?null:p}(r.limit));let d=null;r.startAt&&(d=function(f){const p=!!f.before,b=f.values||[];return new wc(b,p)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const p=!f.before,b=f.values||[];return new wc(b,p)}(r.endAt)),r4(e,i,o,a,c,"F",d,u)}function U4(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:i})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Jj(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=Fs(r.unaryFilter.field);return He.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Fs(r.unaryFilter.field);return He.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Fs(r.unaryFilter.field);return He.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Fs(r.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(r){return He.create(Fs(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return _r.create(r.compositeFilter.filters.map(s=>Jj(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(r.compositeFilter.op))}(t):X(30097,{filter:t})}function B4(t){return S4[t]}function z4(t){return I4[t]}function W4(t){return C4[t]}function Os(t){return{fieldPath:t.canonicalString()}}function Fs(t){return rt.fromServerFormat(t.fieldPath)}function Zj(t){return t instanceof He?function(r){if(r.op==="=="){if(Gx(r.value))return{unaryFilter:{field:Os(r.field),op:"IS_NAN"}};if(qx(r.value))return{unaryFilter:{field:Os(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Gx(r.value))return{unaryFilter:{field:Os(r.field),op:"IS_NOT_NAN"}};if(qx(r.value))return{unaryFilter:{field:Os(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Os(r.field),op:z4(r.op),value:r.value}}}(t):t instanceof _r?function(r){const s=r.getFilters().map(i=>Zj(i));return s.length===1?s[0]:{compositeFilter:{op:W4(r.op),filters:s}}}(t):X(54877,{filter:t})}function $4(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function ew(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,r,s,i,a=ee.min(),o=ee.min(),c=it.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new pn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.yt=e}}function q4(t){const e=F4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(){this.Cn=new K4}addToCollectionParentIndex(e,r){return this.Cn.add(r),O.resolve()}getCollectionParents(e,r){return O.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return O.resolve()}deleteFieldIndex(e,r){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,r){return O.resolve()}getDocumentsMatchingTarget(e,r){return O.resolve(null)}getIndexType(e,r){return O.resolve(0)}getFieldIndexes(e,r){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,r){return O.resolve(Rn.min())}getMinOffsetFromCollectionGroup(e,r){return O.resolve(Rn.min())}updateCollectionGroup(e,r,s){return O.resolve()}updateIndexEntries(e,r){return O.resolve()}}class K4{constructor(){this.index={}}add(e){const r=e.lastSegment(),s=e.popLast(),i=this.index[r]||new Ge(Se.comparator),a=!i.has(s);return this.index[r]=i.add(s),a}has(e){const r=e.lastSegment(),s=e.popLast(),i=this.index[r];return i&&i.has(s)}getEntries(e){return(this.index[e]||new Ge(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tw=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(tw,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ji(0)}static cr(){return new ji(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly="LruGarbageCollector",Q4=1048576;function cy([t,e],[r,s]){const i=ce(t,r);return i===0?ce(e,s):i}class Y4{constructor(e){this.Ir=e,this.buffer=new Ge(cy),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();cy(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class X4{constructor(e,r,s){this.garbageCollector=e,this.asyncQueue=r,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(ly,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Di(r)?H(ly,"Ignoring IndexedDB error during garbage collection: ",r):await Ri(r)}await this.Vr(3e5)})}}class J4{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(s=>Math.floor(r/100*s))}nthSequenceNumber(e,r){if(r===0)return O.resolve(nd.ce);const s=new Y4(r);return this.mr.forEachTarget(e,i=>s.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>s.Ar(i))).next(()=>s.maxValue)}removeTargets(e,r,s){return this.mr.removeTargets(e,r,s)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(oy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oy):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let s,i,a,o,c,d,u;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(s=f,c=Date.now(),this.removeTargets(e,s,r))).next(f=>(a=f,d=Date.now(),this.removeOrphanedDocuments(e,s))).next(f=>(u=Date.now(),Ls()<=le.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(d-c)+`ms
	Removed ${f} documents in `+(u-d)+`ms
Total Duration: ${u-m}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:f})))}}function Z4(t,e){return new J4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.changes=new Ts(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const s=this.changes.get(r);return s!==void 0?O.resolve(s):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,r,s,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,r){let s=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(s!==null&&Ma(s.mutation,i,nr.empty(),Ne.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.getLocalViewOfDocuments(e,s,de()).next(()=>s))}getLocalViewOfDocuments(e,r,s=de()){const i=os();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,s).next(a=>{let o=xa();return a.forEach((c,d)=>{o=o.insert(c,d.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const s=os();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,de()))}populateOverlays(e,r,s){const i=[];return s.forEach(a=>{r.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,c)=>{r.set(o,c)})})}computeViews(e,r,s,i){let a=zr();const o=Da(),c=function(){return Da()}();return r.forEach((d,u)=>{const m=s.get(u.key);i.has(u.key)&&(m===void 0||m.mutation instanceof Ss)?a=a.insert(u.key,u):m!==void 0?(o.set(u.key,m.mutation.getFieldMask()),Ma(m.mutation,u,m.mutation.getFieldMask(),Ne.now())):o.set(u.key,nr.empty())}),this.recalculateAndSaveOverlays(e,a).next(d=>(d.forEach((u,m)=>o.set(u,m)),r.forEach((u,m)=>c.set(u,new tC(m,o.get(u)??null))),c))}recalculateAndSaveOverlays(e,r){const s=Da();let i=new Ae((o,c)=>o-c),a=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const c of o)c.keys().forEach(d=>{const u=r.get(d);if(u===null)return;let m=s.get(d)||nr.empty();m=c.applyToLocalView(u,m),s.set(d,m);const f=(i.get(c.batchId)||de()).add(d);i=i.insert(c.batchId,f)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),u=d.key,m=d.value,f=Lj();m.forEach(p=>{if(!a.has(p)){const b=zj(r.get(p),s.get(p));b!==null&&f.set(p,b),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return O.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,r,s,i){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):n4(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,s,i):this.getDocumentsMatchingCollectionQuery(e,r,s,i)}getNextDocuments(e,r,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,s,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,s.largestBatchId,i-a.size):O.resolve(os());let c=oo,d=a;return o.next(u=>O.forEach(u,(m,f)=>(c<f.largestBatchId&&(c=f.largestBatchId),a.get(m)?O.resolve():this.remoteDocumentCache.getEntry(e,m).next(p=>{d=d.insert(m,p)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,d,u,de())).next(m=>({batchId:c,changes:Mj(m)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Q(r)).next(s=>{let i=xa();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,s,i){const a=r.collectionGroup;let o=xa();return this.indexManager.getCollectionParents(e,a).next(c=>O.forEach(c,d=>{const u=function(f,p){return new ad(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,s,i).next(m=>{m.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,s,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,s.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,s,a,i))).next(o=>{a.forEach((d,u)=>{const m=u.getKey();o.get(m)===null&&(o=o.insert(m,ht.newInvalidDocument(m)))});let c=xa();return o.forEach((d,u)=>{const m=a.get(d);m!==void 0&&Ma(m.mutation,u,nr.empty(),Ne.now()),ld(r,u)&&(c=c.insert(d,u))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return O.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:br(i.createTime)}}(r)),O.resolve()}getNamedQuery(e,r){return O.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(i){return{name:i.name,query:q4(i.bundledQuery),readTime:br(i.readTime)}}(r)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.overlays=new Ae(Q.comparator),this.qr=new Map}getOverlay(e,r){return O.resolve(this.overlays.get(r))}getOverlays(e,r){const s=os();return O.forEach(r,i=>this.getOverlay(e,i).next(a=>{a!==null&&s.set(i,a)})).next(()=>s)}saveOverlays(e,r,s){return s.forEach((i,a)=>{this.St(e,r,a)}),O.resolve()}removeOverlaysForBatchId(e,r,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(s)),O.resolve()}getOverlaysForCollection(e,r,s){const i=os(),a=r.length+1,o=new Q(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,u=d.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===a&&d.largestBatchId>s&&i.set(d.getKey(),d)}return O.resolve(i)}getOverlaysForCollectionGroup(e,r,s,i){let a=new Ae((u,m)=>u-m);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>s){let m=a.get(u.largestBatchId);m===null&&(m=os(),a=a.insert(u.largestBatchId,m)),m.set(u.getKey(),u)}}const c=os(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((u,m)=>c.set(u,m)),!(c.size()>=i)););return O.resolve(c)}St(e,r,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new w4(r,s));let a=this.qr.get(r);a===void 0&&(a=de(),this.qr.set(r,a)),this.qr.set(r,a.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(){this.Qr=new Ge(Qe.$r),this.Ur=new Ge(Qe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const s=new Qe(e,r);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,r){e.forEach(s=>this.addReference(s,r))}removeReference(e,r){this.Gr(new Qe(e,r))}zr(e,r){e.forEach(s=>this.removeReference(s,r))}jr(e){const r=new Q(new Se([])),s=new Qe(r,e),i=new Qe(r,e+1),a=[];return this.Ur.forEachInRange([s,i],o=>{this.Gr(o),a.push(o.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new Q(new Se([])),s=new Qe(r,e),i=new Qe(r,e+1);let a=de();return this.Ur.forEachInRange([s,i],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new Qe(e,0),s=this.Qr.firstAfterOrEqual(r);return s!==null&&e.isEqual(s.key)}}class Qe{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return Q.comparator(e.key,r.key)||ce(e.Yr,r.Yr)}static Kr(e,r){return ce(e.Yr,r.Yr)||Q.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ge(Qe.$r)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,s,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new j4(a,r,s,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new Qe(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,r){return O.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const s=r+1,i=this.ei(s),a=i<0?0:i;return O.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?df:this.tr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const s=new Qe(r,0),i=new Qe(r,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([s,i],o=>{const c=this.Xr(o.Yr);a.push(c)}),O.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new Ge(ce);return r.forEach(i=>{const a=new Qe(i,0),o=new Qe(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],c=>{s=s.add(c.Yr)})}),O.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,i=s.length+1;let a=s;Q.isDocumentKey(a)||(a=a.child(""));const o=new Qe(new Q(a),0);let c=new Ge(ce);return this.Zr.forEachWhile(d=>{const u=d.key.path;return!!s.isPrefixOf(u)&&(u.length===i&&(c=c.add(d.Yr)),!0)},o),O.resolve(this.ti(c))}ti(e){const r=[];return e.forEach(s=>{const i=this.Xr(s);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){pe(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return O.forEach(r.mutations,i=>{const a=new Qe(i.key,r.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,r){const s=new Qe(r,0),i=this.Zr.firstAfterOrEqual(s);return O.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.ri=e,this.docs=function(){return new Ae(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const s=r.key,i=this.docs.get(s),a=i?i.size:0,o=this.ri(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const s=this.docs.get(r);return O.resolve(s?s.document.mutableCopy():ht.newInvalidDocument(r))}getEntries(e,r){let s=zr();return r.forEach(i=>{const a=this.docs.get(i);s=s.insert(i,a?a.document.mutableCopy():ht.newInvalidDocument(i))}),O.resolve(s)}getDocumentsMatchingQuery(e,r,s,i){let a=zr();const o=r.path,c=new Q(o.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:u,value:{document:m}}=d.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||DI(RI(m),s)<=0||(i.has(m.key)||ld(r,m))&&(a=a.insert(m.key,m.mutableCopy()))}return O.resolve(a)}getAllFromCollectionGroup(e,r,s,i){X(9500)}ii(e,r){return O.forEach(this.docs,s=>r(s))}newChangeBuffer(e){return new lC(this)}getSize(e){return O.resolve(this.size)}}class lC extends eC{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?r.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(s)}),O.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.persistence=e,this.si=new Ts(r=>mf(r),ff),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.oi=0,this._i=new bf,this.targetCount=0,this.ai=ji.ur()}forEachTarget(e,r){return this.si.forEach((s,i)=>r(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.oi&&(this.oi=r),O.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new ji(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,O.resolve()}updateTargetData(e,r){return this.Pr(r),O.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,r,s){let i=0;const a=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=r&&s.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),O.waitFor(a).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,r){const s=this.si.get(r)||null;return O.resolve(s)}addMatchingKeys(e,r,s){return this._i.Wr(r,s),O.resolve()}removeMatchingKeys(e,r,s){this._i.zr(r,s);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),O.resolve()}getMatchingKeysForTargetId(e,r){const s=this._i.Hr(r);return O.resolve(s)}containsKey(e,r){return O.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,r){this.ui={},this.overlays={},this.ci=new nd(0),this.li=!1,this.li=!0,this.hi=new iC,this.referenceDelegate=e(this),this.Pi=new cC(this),this.indexManager=new G4,this.remoteDocumentCache=function(i){return new oC(i)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new H4(r),this.Ii=new nC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new sC,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let s=this.ui[e.toKey()];return s||(s=new aC(r,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,s){H("MemoryPersistence","Starting transaction:",e);const i=new dC(this.ci.next());return this.referenceDelegate.Ei(),s(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,r){return O.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,r)))}}class dC extends LI{constructor(e){super(),this.currentSequenceNumber=e}}class jf{constructor(e){this.persistence=e,this.Ri=new bf,this.Vi=null}static mi(e){return new jf(e)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(e,r,s){return this.Ri.addReference(s,r),this.fi.delete(s.toString()),O.resolve()}removeReference(e,r,s){return this.Ri.removeReference(s,r),this.fi.add(s.toString()),O.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),O.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(i=>this.fi.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(a=>this.fi.add(a.toString()))}).next(()=>s.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.fi,s=>{const i=Q.fromPath(s);return this.gi(e,i).next(a=>{a||r.removeEntry(i,ee.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(s=>{s?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return O.or([()=>O.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class Ec{constructor(e,r){this.persistence=e,this.pi=new Ts(s=>FI(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=Z4(this,r)}static mi(e,r){return new Ec(e,r)}Ei(){}di(e){return O.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>r.next(i=>s+i))}wr(e){let r=0;return this.pr(e,s=>{r++}).next(()=>r)}pr(e,r){return O.forEach(this.pi,(s,i)=>this.br(e,s,i).next(a=>a?O.resolve():r(i)))}removeTargets(e,r,s){return this.persistence.getTargetCache().removeTargets(e,r,s)}removeOrphanedDocuments(e,r){let s=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,r).next(c=>{c||(s++,a.removeEntry(o,ee.min()))})).next(()=>a.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}removeTarget(e,r){const s=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,r,s){return this.pi.set(s,e.currentSequenceNumber),O.resolve()}removeReference(e,r,s){return this.pi.set(s,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Ml(e.data.value)),r}br(e,r,s){return O.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.pi.get(r);return O.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,r,s,i){this.targetId=e,this.fromCache=r,this.Es=s,this.ds=i}static As(e,r){let s=de(),i=de();for(const a of r.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new wf(e,r.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Fk()?8:VI(pt())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,s,i){const a={result:null};return this.ys(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ws(e,r,i,s).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new uC;return this.Ss(e,r,o).next(c=>{if(a.result=c,this.Vs)return this.bs(e,r,o,c.size)})}).next(()=>a.result)}bs(e,r,s,i){return s.documentReadCount<this.fs?(Ls()<=le.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Vs(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),O.resolve()):(Ls()<=le.DEBUG&&H("QueryEngine","Query:",Vs(r),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(Ls()<=le.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Vs(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vr(r))):O.resolve())}ys(e,r){if(Xx(r))return O.resolve(null);let s=vr(r);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=Fh(r,null,"F"),s=vr(r)),this.indexManager.getDocumentsMatchingTarget(e,s).next(a=>{const o=de(...a);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,s).next(d=>{const u=this.Ds(r,c);return this.Cs(r,u,o,d.readTime)?this.ys(e,Fh(r,null,"F")):this.vs(e,u,r,d)}))})))}ws(e,r,s,i){return Xx(r)||i.isEqual(ee.min())?O.resolve(null):this.ps.getDocuments(e,s).next(a=>{const o=this.Ds(r,a);return this.Cs(r,o,s,i)?O.resolve(null):(Ls()<=le.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vs(r)),this.vs(e,o,r,PI(i,oo)).next(c=>c))})}Ds(e,r){let s=new Ge(Rj(e));return r.forEach((i,a)=>{ld(e,a)&&(s=s.add(a))}),s}Cs(e,r,s,i){if(e.limit===null)return!1;if(s.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,r,s){return Ls()<=le.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Vs(r)),this.ps.getDocumentsMatchingQuery(e,r,Rn.min(),s)}vs(e,r,s,i){return this.ps.getDocumentsMatchingQuery(e,s,i).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="LocalStore",mC=3e8;class fC{constructor(e,r,s,i){this.persistence=e,this.Fs=r,this.serializer=i,this.Ms=new Ae(ce),this.xs=new Ts(a=>mf(a),ff),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function pC(t,e,r,s){return new fC(t,e,r,s)}async function nw(t,e){const r=te(t);return await r.persistence.runTransaction("Handle user change","readonly",s=>{let i;return r.mutationQueue.getAllMutationBatches(s).next(a=>(i=a,r.Bs(e),r.mutationQueue.getAllMutationBatches(s))).next(a=>{const o=[],c=[];let d=de();for(const u of i){o.push(u.batchId);for(const m of u.mutations)d=d.add(m.key)}for(const u of a){c.push(u.batchId);for(const m of u.mutations)d=d.add(m.key)}return r.localDocuments.getDocuments(s,d).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:c}))})})}function gC(t,e){const r=te(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),a=r.Ns.newChangeBuffer({trackRemovals:!0});return function(c,d,u,m){const f=u.batch,p=f.keys();let b=O.resolve();return p.forEach(E=>{b=b.next(()=>m.getEntry(d,E)).next(k=>{const x=u.docVersions.get(E);pe(x!==null,48541),k.version.compareTo(x)<0&&(f.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),m.addEntry(k)))})}),b.next(()=>c.mutationQueue.removeMutationBatch(d,f))}(r,s,e,a).next(()=>a.apply(s)).next(()=>r.mutationQueue.performConsistencyCheck(s)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(c){let d=de();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(d=d.add(c.batch.mutations[u].key));return d}(e))).next(()=>r.localDocuments.getDocuments(s,i))})}function sw(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function xC(t,e){const r=te(t),s=e.snapshotVersion;let i=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});i=r.Ms;const c=[];e.targetChanges.forEach((m,f)=>{const p=i.get(f);if(!p)return;c.push(r.Pi.removeMatchingKeys(a,m.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(a,m.addedDocuments,f)));let b=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?b=b.withResumeToken(it.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,s)),i=i.insert(f,b),function(k,x,y){return k.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=mC?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(p,b,m)&&c.push(r.Pi.updateTargetData(a,b))});let d=zr(),u=de();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(a,m))}),c.push(yC(a,o,e.documentUpdates).next(m=>{d=m.ks,u=m.qs})),!s.isEqual(ee.min())){const m=r.Pi.getLastRemoteSnapshotVersion(a).next(f=>r.Pi.setTargetsMetadata(a,a.currentSequenceNumber,s));c.push(m)}return O.waitFor(c).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,d,u)).next(()=>d)}).then(a=>(r.Ms=i,a))}function yC(t,e,r){let s=de(),i=de();return r.forEach(a=>s=s.add(a)),e.getEntries(t,s).next(a=>{let o=zr();return r.forEach((c,d)=>{const u=a.get(c);d.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(ee.min())?(e.removeEntry(c,d.readTime),o=o.insert(c,d)):!u.isValidDocument()||d.version.compareTo(u.version)>0||d.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(d),o=o.insert(c,d)):H(Nf,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",d.version)}),{ks:o,qs:i}})}function vC(t,e){const r=te(t);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=df),r.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function bC(t,e){const r=te(t);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return r.Pi.getTargetData(s,e).next(a=>a?(i=a,O.resolve(i)):r.Pi.allocateTargetId(s).next(o=>(i=new pn(e,o,"TargetPurposeListen",s.currentSequenceNumber),r.Pi.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=r.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(s.targetId,s),r.xs.set(e,s.targetId)),s})}async function $h(t,e,r){const s=te(t),i=s.Ms.get(e),a=r?"readwrite":"readwrite-primary";try{r||await s.persistence.runTransaction("Release target",a,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Di(o))throw o;H(Nf,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(i.target)}function dy(t,e,r){const s=te(t);let i=ee.min(),a=de();return s.persistence.runTransaction("Execute query","readwrite",o=>function(d,u,m){const f=te(d),p=f.xs.get(m);return p!==void 0?O.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,m)}(s,o,vr(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,c.targetId).next(d=>{a=d})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,r?i:ee.min(),r?a:de())).next(c=>(jC(s,i4(e),c),{documents:c,Qs:a})))}function jC(t,e,r){let s=t.Os.get(e)||ee.min();r.forEach((i,a)=>{a.readTime.compareTo(s)>0&&(s=a.readTime)}),t.Os.set(e,s)}class uy{constructor(){this.activeTargetIds=u4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wC{constructor(){this.Mo=new uy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,s){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,s){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new uy,Promise.resolve()}handleUserChange(e,r,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="ConnectivityMonitor";class my{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(hy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(hy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gl=null;function Hh(){return gl===null?gl=function(){return 268435456+Math.round(2147483648*Math.random())}():gl++,"0x"+gl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu="RestConnection",_C={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===bc?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(e,r,s,i,a){const o=Hh(),c=this.zo(e,r.toUriEncodedString());H(bu,`Sending RPC '${e}' ${o}:`,c,s);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,i,a);const{host:u}=new URL(c),m=Ii(u);return this.Jo(e,c,d,s,m).then(f=>(H(bu,`Received RPC '${e}' ${o}: `,f),f),f=>{throw xi(bu,`RPC '${e}' ${o} failed with error: `,f,"url: ",c,"request:",s),f})}Ho(e,r,s,i,a,o){return this.Go(e,r,s,i,a)}jo(e,r,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>e[a]=i),s&&s.headers.forEach((i,a)=>e[a]=i)}zo(e,r){const s=_C[e];return`${this.Uo}/v1/${r}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="WebChannelConnection";class TC extends kC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,s,i,a){const o=Hh();return new Promise((c,d)=>{const u=new lj;u.setWithCredentials(!0),u.listenOnce(cj.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Dl.NO_ERROR:const f=u.getResponseJson();H(ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),c(f);break;case Dl.TIMEOUT:H(ct,`RPC '${e}' ${o} timed out`),d(new K(U.DEADLINE_EXCEEDED,"Request time out"));break;case Dl.HTTP_ERROR:const p=u.getStatus();if(H(ct,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let b=u.getResponseJson();Array.isArray(b)&&(b=b[0]);const E=b==null?void 0:b.error;if(E&&E.status&&E.message){const k=function(y){const v=y.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(v)>=0?v:U.UNKNOWN}(E.status);d(new K(k,E.message))}else d(new K(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else d(new K(U.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{H(ct,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(i);H(ct,`RPC '${e}' ${o} sending request:`,i),u.send(r,"POST",m,s,15)})}T_(e,r,s){const i=Hh(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hj(),c=uj(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(d.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,r,s),d.encodeInitMessageHeaders=!0;const m=a.join("");H(ct,`Creating RPC '${e}' stream ${i}: ${m}`,d);const f=o.createWebChannel(m,d);this.I_(f);let p=!1,b=!1;const E=new EC({Yo:x=>{b?H(ct,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(p||(H(ct,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),H(ct,`RPC '${e}' stream ${i} sending:`,x),f.send(x))},Zo:()=>f.close()}),k=(x,y,v)=>{x.listen(y,j=>{try{v(j)}catch(I){setTimeout(()=>{throw I},0)}})};return k(f,ga.EventType.OPEN,()=>{b||(H(ct,`RPC '${e}' stream ${i} transport opened.`),E.o_())}),k(f,ga.EventType.CLOSE,()=>{b||(b=!0,H(ct,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(f))}),k(f,ga.EventType.ERROR,x=>{b||(b=!0,xi(ct,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),E.a_(new K(U.UNAVAILABLE,"The operation could not be completed")))}),k(f,ga.EventType.MESSAGE,x=>{var y;if(!b){const v=x.data[0];pe(!!v,16349);const j=v,I=(j==null?void 0:j.error)||((y=j[0])==null?void 0:y.error);if(I){H(ct,`RPC '${e}' stream ${i} received error:`,I);const M=I.status;let P=function(T){const R=Ue[T];if(R!==void 0)return Hj(R)}(M),N=I.message;P===void 0&&(P=U.INTERNAL,N="Unknown error status: "+M+" with message "+I.message),b=!0,E.a_(new K(P,N)),f.close()}else H(ct,`RPC '${e}' stream ${i} received:`,v),E.u_(v)}}),k(c,dj.STAT_EVENT,x=>{x.stat===Rh.PROXY?H(ct,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Rh.NOPROXY&&H(ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.__()},0),E}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function ju(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(t){return new A4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,r,s=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=r,this.d_=s,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,r-s);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="PersistentStream";class aw{constructor(e,r,s,i,a,o,c,d){this.Mi=e,this.S_=s,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iw(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===U.RESOURCE_EXHAUSTED?(Br(r.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.D_===r&&this.G_(s,i)},s=>{e(()=>{const i=new K(U.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)})})}G_(e,r){const s=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{s(()=>this.z_(i))}),this.stream.onMessage(i=>{s(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(fy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(H(fy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SC extends aw{constructor(e,r,s,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,i,o),this.serializer=a}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=D4(this.serializer,e),s=function(a){if(!("targetChange"in a))return ee.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?br(o.readTime):ee.min()}(e);return this.listener.H_(r,s)}Y_(e){const r={};r.database=Wh(this.serializer),r.addTarget=function(a,o){let c;const d=o.target;if(c=Oh(d)?{documents:V4(a,d)}:{query:O4(a,d).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Kj(a,o.resumeToken);const u=Uh(a,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(ee.min())>0){c.readTime=kc(a,o.snapshotVersion.toTimestamp());const u=Uh(a,o.expectedCount);u!==null&&(c.expectedCount=u)}return c}(this.serializer,e);const s=U4(this.serializer,e);s&&(r.labels=s),this.q_(r)}Z_(e){const r={};r.database=Wh(this.serializer),r.removeTarget=e,this.q_(r)}}class IC extends aw{constructor(e,r,s,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=L4(e.writeResults,e.commitTime),s=br(e.commitTime);return this.listener.na(s,r)}ra(){const e={};e.database=Wh(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(s=>M4(this.serializer,s))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{}class AC extends CC{constructor(e,r,s,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Go(e,Bh(r,s),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(U.UNKNOWN,a.toString())})}Ho(e,r,s,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,Bh(r,s),i,o,c,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(U.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class PC{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Br(r),this.aa=!1):H("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="RemoteStore";class RC{constructor(e,r,s,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{Is(this)&&(H(js,"Restarting streams for network reachability change."),await async function(d){const u=te(d);u.Ea.add(4),await Ro(u),u.Ra.set("Unknown"),u.Ea.delete(4),await md(u)}(this))})}),this.Ra=new PC(s,i)}}async function md(t){if(Is(t))for(const e of t.da)await e(!0)}async function Ro(t){for(const e of t.da)await e(!1)}function ow(t,e){const r=te(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),Tf(r)?Ef(r):Mi(r).O_()&&kf(r,e))}function _f(t,e){const r=te(t),s=Mi(r);r.Ia.delete(e),s.O_()&&lw(r,e),r.Ia.size===0&&(s.O_()?s.L_():Is(r)&&r.Ra.set("Unknown"))}function kf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Mi(t).Y_(e)}function lw(t,e){t.Va.Ue(e),Mi(t).Z_(e)}function Ef(t){t.Va=new T4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Mi(t).start(),t.Ra.ua()}function Tf(t){return Is(t)&&!Mi(t).x_()&&t.Ia.size>0}function Is(t){return te(t).Ea.size===0}function cw(t){t.Va=void 0}async function DC(t){t.Ra.set("Online")}async function MC(t){t.Ia.forEach((e,r)=>{kf(t,e)})}async function LC(t,e){cw(t),Tf(t)?(t.Ra.ha(e),Ef(t)):t.Ra.set("Unknown")}async function VC(t,e,r){if(t.Ra.set("Online"),e instanceof Gj&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))}(t,e)}catch(s){H(js,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Tc(t,s)}else if(e instanceof Ol?t.Va.Ze(e):e instanceof qj?t.Va.st(e):t.Va.tt(e),!r.isEqual(ee.min()))try{const s=await sw(t.localStore);r.compareTo(s)>=0&&await function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach((d,u)=>{if(d.resumeToken.approximateByteSize()>0){const m=a.Ia.get(u);m&&a.Ia.set(u,m.withResumeToken(d.resumeToken,o))}}),c.targetMismatches.forEach((d,u)=>{const m=a.Ia.get(d);if(!m)return;a.Ia.set(d,m.withResumeToken(it.EMPTY_BYTE_STRING,m.snapshotVersion)),lw(a,d);const f=new pn(m.target,d,u,m.sequenceNumber);kf(a,f)}),a.remoteSyncer.applyRemoteEvent(c)}(t,r)}catch(s){H(js,"Failed to raise snapshot:",s),await Tc(t,s)}}async function Tc(t,e,r){if(!Di(e))throw e;t.Ea.add(1),await Ro(t),t.Ra.set("Offline"),r||(r=()=>sw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(js,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await md(t)})}function dw(t,e){return e().catch(r=>Tc(t,r,e))}async function fd(t){const e=te(t),r=Vn(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:df;for(;OC(e);)try{const i=await vC(e.localStore,s);if(i===null){e.Ta.length===0&&r.L_();break}s=i.batchId,FC(e,i)}catch(i){await Tc(e,i)}uw(e)&&hw(e)}function OC(t){return Is(t)&&t.Ta.length<10}function FC(t,e){t.Ta.push(e);const r=Vn(t);r.O_()&&r.X_&&r.ea(e.mutations)}function uw(t){return Is(t)&&!Vn(t).x_()&&t.Ta.length>0}function hw(t){Vn(t).start()}async function UC(t){Vn(t).ra()}async function BC(t){const e=Vn(t);for(const r of t.Ta)e.ea(r.mutations)}async function zC(t,e,r){const s=t.Ta.shift(),i=xf.from(s,e,r);await dw(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await fd(t)}async function WC(t,e){e&&Vn(t).X_&&await async function(s,i){if(function(o){return _4(o)&&o!==U.ABORTED}(i.code)){const a=s.Ta.shift();Vn(s).B_(),await dw(s,()=>s.remoteSyncer.rejectFailedWrite(a.batchId,i)),await fd(s)}}(t,e),uw(t)&&hw(t)}async function py(t,e){const r=te(t);r.asyncQueue.verifyOperationInProgress(),H(js,"RemoteStore received new credentials");const s=Is(r);r.Ea.add(3),await Ro(r),s&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await md(r)}async function $C(t,e){const r=te(t);e?(r.Ea.delete(2),await md(r)):e||(r.Ea.add(2),await Ro(r),r.Ra.set("Unknown"))}function Mi(t){return t.ma||(t.ma=function(r,s,i){const a=te(r);return a.sa(),new SC(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:DC.bind(null,t),t_:MC.bind(null,t),r_:LC.bind(null,t),H_:VC.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Tf(t)?Ef(t):t.Ra.set("Unknown")):(await t.ma.stop(),cw(t))})),t.ma}function Vn(t){return t.fa||(t.fa=function(r,s,i){const a=te(r);return a.sa(),new IC(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:UC.bind(null,t),r_:WC.bind(null,t),ta:BC.bind(null,t),na:zC.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await fd(t)):(await t.fa.stop(),t.Ta.length>0&&(H(js,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,r,s,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=s,this.op=i,this.removalCallback=a,this.deferred=new In,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,s,i,a){const o=Date.now()+s,c=new Sf(e,r,o,i,a);return c.start(s),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function If(t,e){if(Br("AsyncQueue",`${e}: ${t}`),Di(t))return new K(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{static emptySet(e){return new li(e.comparator)}constructor(e){this.comparator=e?(r,s)=>e(r,s)||Q.comparator(r.key,s.key):(r,s)=>Q.comparator(r.key,s.key),this.keyedMap=xa(),this.sortedSet=new Ae(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,s)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof li)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=s.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const s=new li;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=r,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(){this.ga=new Ae(Q.comparator)}track(e){const r=e.doc.key,s=this.ga.get(r);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(r,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(r,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(r):e.type===1&&s.type===2?this.ga=this.ga.insert(r,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):X(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,s)=>{e.push(s)}),e}}class wi{constructor(e,r,s,i,a,o,c,d,u){this.query=e,this.docs=r,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=u}static fromInitialDocuments(e,r,s,i,a){const o=[];return r.forEach(c=>{o.push({type:0,doc:c})}),new wi(e,r,li.emptySet(r),o,s,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,s=e.docChanges;if(r.length!==s.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==s[i].type||!r[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class qC{constructor(){this.queries=xy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,s){const i=te(r),a=i.queries;i.queries=xy(),a.forEach((o,c)=>{for(const d of c.Sa)d.onError(s)})})(this,new K(U.ABORTED,"Firestore shutting down"))}}function xy(){return new Ts(t=>Pj(t),od)}async function GC(t,e){const r=te(t);let s=3;const i=e.query;let a=r.queries.get(i);a?!a.ba()&&e.Da()&&(s=2):(a=new HC,s=e.Da()?0:1);try{switch(s){case 0:a.wa=await r.onListen(i,!0);break;case 1:a.wa=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const c=If(o,`Initialization of query '${Vs(e.query)}' failed`);return void e.onError(c)}r.queries.set(i,a),a.Sa.push(e),e.va(r.onlineState),a.wa&&e.Fa(a.wa)&&Cf(r)}async function KC(t,e){const r=te(t),s=e.query;let i=3;const a=r.queries.get(s);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}}function QC(t,e){const r=te(t);let s=!1;for(const i of e){const a=i.query,o=r.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(s=!0);o.wa=i}}s&&Cf(r)}function YC(t,e,r){const s=te(t),i=s.queries.get(e);if(i)for(const a of i.Sa)a.onError(r);s.queries.delete(e)}function Cf(t){t.Ca.forEach(e=>{e.next()})}var qh,yy;(yy=qh||(qh={})).Ma="default",yy.Cache="cache";class XC{constructor(e,r,s){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new wi(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const s=r!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=wi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==qh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.key=e}}class fw{constructor(e){this.key=e}}class JC{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=de(),this.mutatedKeys=de(),this.eu=Rj(e),this.tu=new li(this.eu)}get nu(){return this.Ya}ru(e,r){const s=r?r.iu:new gy,i=r?r.tu:this.tu;let a=r?r.mutatedKeys:this.mutatedKeys,o=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,f)=>{const p=i.get(m),b=ld(this.query,f)?f:null,E=!!p&&this.mutatedKeys.has(p.key),k=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let x=!1;p&&b?p.data.isEqual(b.data)?E!==k&&(s.track({type:3,doc:b}),x=!0):this.su(p,b)||(s.track({type:2,doc:b}),x=!0,(d&&this.eu(b,d)>0||u&&this.eu(b,u)<0)&&(c=!0)):!p&&b?(s.track({type:0,doc:b}),x=!0):p&&!b&&(s.track({type:1,doc:p}),x=!0,(d||u)&&(c=!0)),x&&(b?(o=o.add(b),a=k?a.add(m):a.delete(m)):(o=o.delete(m),a=a.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),a=a.delete(m.key),s.track({type:1,doc:m})}return{tu:o,iu:s,Cs:c,mutatedKeys:a}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,s,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,f)=>function(b,E){const k=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:x})}};return k(b)-k(E)}(m.type,f.type)||this.eu(m.doc,f.doc)),this.ou(s),i=i??!1;const c=r&&!i?this._u():[],d=this.Xa.size===0&&this.current&&!i?1:0,u=d!==this.Za;return this.Za=d,o.length!==0||u?{snapshot:new wi(this.query,e.tu,a,o,e.mutatedKeys,d===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=de(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const r=[];return e.forEach(s=>{this.Xa.has(s)||r.push(new fw(s))}),this.Xa.forEach(s=>{e.has(s)||r.push(new mw(s))}),r}cu(e){this.Ya=e.Qs,this.Xa=de();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return wi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Af="SyncEngine";class ZC{constructor(e,r,s){this.query=e,this.targetId=r,this.view=s}}class eA{constructor(e){this.key=e,this.hu=!1}}class tA{constructor(e,r,s,i,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=s,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ts(c=>Pj(c),od),this.Iu=new Map,this.Eu=new Set,this.du=new Ae(Q.comparator),this.Au=new Map,this.Ru=new bf,this.Vu={},this.mu=new Map,this.fu=ji.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rA(t,e,r=!0){const s=bw(t);let i;const a=s.Tu.get(e);return a?(s.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await pw(s,e,r,!0),i}async function nA(t,e){const r=bw(t);await pw(r,e,!0,!1)}async function pw(t,e,r,s){const i=await bC(t.localStore,vr(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let c;return s&&(c=await sA(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&r&&ow(t.remoteStore,i),c}async function sA(t,e,r,s,i){t.pu=(f,p,b)=>async function(k,x,y,v){let j=x.view.ru(y);j.Cs&&(j=await dy(k.localStore,x.query,!1).then(({documents:N})=>x.view.ru(N,j)));const I=v&&v.targetChanges.get(x.targetId),M=v&&v.targetMismatches.get(x.targetId)!=null,P=x.view.applyChanges(j,k.isPrimaryClient,I,M);return by(k,x.targetId,P.au),P.snapshot}(t,f,p,b);const a=await dy(t.localStore,e,!0),o=new JC(e,a.Qs),c=o.ru(a.documents),d=Po.createSynthesizedTargetChangeForCurrentChange(r,s&&t.onlineState!=="Offline",i),u=o.applyChanges(c,t.isPrimaryClient,d);by(t,r,u.au);const m=new ZC(e,r,o);return t.Tu.set(e,m),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),u.snapshot}async function iA(t,e,r){const s=te(t),i=s.Tu.get(e),a=s.Iu.get(i.targetId);if(a.length>1)return s.Iu.set(i.targetId,a.filter(o=>!od(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await $h(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),r&&_f(s.remoteStore,i.targetId),Gh(s,i.targetId)}).catch(Ri)):(Gh(s,i.targetId),await $h(s.localStore,i.targetId,!0))}async function aA(t,e){const r=te(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),_f(r.remoteStore,s.targetId))}async function oA(t,e,r){const s=fA(t);try{const i=await function(o,c){const d=te(o),u=Ne.now(),m=c.reduce((b,E)=>b.add(E.key),de());let f,p;return d.persistence.runTransaction("Locally write mutations","readwrite",b=>{let E=zr(),k=de();return d.Ns.getEntries(b,m).next(x=>{E=x,E.forEach((y,v)=>{v.isValidDocument()||(k=k.add(y))})}).next(()=>d.localDocuments.getOverlayedDocuments(b,E)).next(x=>{f=x;const y=[];for(const v of c){const j=v4(v,f.get(v.key).overlayedDocument);j!=null&&y.push(new Ss(v.key,j,kj(j.value.mapValue),Dr.exists(!0)))}return d.mutationQueue.addMutationBatch(b,u,y,c)}).next(x=>{p=x;const y=x.applyToLocalDocumentSet(f,k);return d.documentOverlayCache.saveOverlays(b,x.batchId,y)})}).then(()=>({batchId:p.batchId,changes:Mj(f)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(o,c,d){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ae(ce)),u=u.insert(c,d),o.Vu[o.currentUser.toKey()]=u}(s,i.batchId,r),await Do(s,i.changes),await fd(s.remoteStore)}catch(i){const a=If(i,"Failed to persist write");r.reject(a)}}async function gw(t,e){const r=te(t);try{const s=await xC(r.localStore,e);e.targetChanges.forEach((i,a)=>{const o=r.Au.get(a);o&&(pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?pe(o.hu,14607):i.removedDocuments.size>0&&(pe(o.hu,42227),o.hu=!1))}),await Do(r,s,e)}catch(s){await Ri(s)}}function vy(t,e,r){const s=te(t);if(s.isPrimaryClient&&r===0||!s.isPrimaryClient&&r===1){const i=[];s.Tu.forEach((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const d=te(o);d.onlineState=c;let u=!1;d.queries.forEach((m,f)=>{for(const p of f.Sa)p.va(c)&&(u=!0)}),u&&Cf(d)}(s.eventManager,e),i.length&&s.Pu.H_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function lA(t,e,r){const s=te(t);s.sharedClientState.updateQueryState(e,"rejected",r);const i=s.Au.get(e),a=i&&i.key;if(a){let o=new Ae(Q.comparator);o=o.insert(a,ht.newNoDocument(a,ee.min()));const c=de().add(a),d=new ud(ee.min(),new Map,new Ae(ce),o,c);await gw(s,d),s.du=s.du.remove(a),s.Au.delete(e),Pf(s)}else await $h(s.localStore,e,!1).then(()=>Gh(s,e,r)).catch(Ri)}async function cA(t,e){const r=te(t),s=e.batch.batchId;try{const i=await gC(r.localStore,e);yw(r,s,null),xw(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),await Do(r,i)}catch(i){await Ri(i)}}async function dA(t,e,r){const s=te(t);try{const i=await function(o,c){const d=te(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let m;return d.mutationQueue.lookupMutationBatch(u,c).next(f=>(pe(f!==null,37113),m=f.keys(),d.mutationQueue.removeMutationBatch(u,f))).next(()=>d.mutationQueue.performConsistencyCheck(u)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(u,m,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,m)).next(()=>d.localDocuments.getDocuments(u,m))})}(s.localStore,e);yw(s,e,r),xw(s,e),s.sharedClientState.updateMutationState(e,"rejected",r),await Do(s,i)}catch(i){await Ri(i)}}function xw(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function yw(t,e,r){const s=te(t);let i=s.Vu[s.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),s.Vu[s.currentUser.toKey()]=i}}function Gh(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),r&&t.Pu.yu(s,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||vw(t,s)})}function vw(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(_f(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),Pf(t))}function by(t,e,r){for(const s of r)s instanceof mw?(t.Ru.addReference(s.key,e),uA(t,s)):s instanceof fw?(H(Af,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||vw(t,s.key)):X(19791,{wu:s})}function uA(t,e){const r=e.key,s=r.path.canonicalString();t.du.get(r)||t.Eu.has(s)||(H(Af,"New document in limbo: "+r),t.Eu.add(s),Pf(t))}function Pf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new Q(Se.fromString(e)),s=t.fu.next();t.Au.set(s,new eA(r)),t.du=t.du.insert(r,s),ow(t.remoteStore,new pn(vr(pf(r.path)),s,"TargetPurposeLimboResolution",nd.ce))}}async function Do(t,e,r){const s=te(t),i=[],a=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((c,d)=>{o.push(s.pu(d,e,r).then(u=>{var m;if((u||r)&&s.isPrimaryClient){const f=u?!u.fromCache:(m=r==null?void 0:r.targetChanges.get(d.targetId))==null?void 0:m.current;s.sharedClientState.updateQueryState(d.targetId,f?"current":"not-current")}if(u){i.push(u);const f=wf.As(d.targetId,u);a.push(f)}}))}),await Promise.all(o),s.Pu.H_(i),await async function(d,u){const m=te(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>O.forEach(u,p=>O.forEach(p.Es,b=>m.persistence.referenceDelegate.addReference(f,p.targetId,b)).next(()=>O.forEach(p.ds,b=>m.persistence.referenceDelegate.removeReference(f,p.targetId,b)))))}catch(f){if(!Di(f))throw f;H(Nf,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const b=m.Ms.get(p),E=b.snapshotVersion,k=b.withLastLimboFreeSnapshotVersion(E);m.Ms=m.Ms.insert(p,k)}}}(s.localStore,a))}async function hA(t,e){const r=te(t);if(!r.currentUser.isEqual(e)){H(Af,"User change. New user:",e.toKey());const s=await nw(r.localStore,e);r.currentUser=e,function(a,o){a.mu.forEach(c=>{c.forEach(d=>{d.reject(new K(U.CANCELLED,o))})}),a.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Do(r,s.Ls)}}function mA(t,e){const r=te(t),s=r.Au.get(e);if(s&&s.hu)return de().add(s.key);{let i=de();const a=r.Iu.get(e);if(!a)return i;for(const o of a){const c=r.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function bw(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lA.bind(null,e),e.Pu.H_=QC.bind(null,e.eventManager),e.Pu.yu=YC.bind(null,e.eventManager),e}function fA(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dA.bind(null,e),e}class Sc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return pC(this.persistence,new hC,e.initialUser,this.serializer)}Cu(e){return new rw(jf.mi,this.serializer)}Du(e){return new wC}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sc.provider={build:()=>new Sc};class pA extends Sc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){pe(this.persistence.referenceDelegate instanceof Ec,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new X4(s,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new rw(s=>Ec.mi(s,r),this.serializer)}}class Kh{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>vy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=hA.bind(null,this.syncEngine),await $C(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qC}()}createDatastore(e){const r=hd(e.databaseInfo.databaseId),s=function(a){return new TC(a)}(e.databaseInfo);return function(a,o,c,d){return new AC(a,o,c,d)}(e.authCredentials,e.appCheckCredentials,s,r)}createRemoteStore(e){return function(s,i,a,o,c){return new RC(s,i,a,o,c)}(this.localStore,this.datastore,e.asyncQueue,r=>vy(this.syncEngine,r,0),function(){return my.v()?new my:new NC}())}createSyncEngine(e,r){return function(i,a,o,c,d,u,m){const f=new tA(i,a,o,c,d,u);return m&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const a=te(i);H(js,"RemoteStore shutting down."),a.Ea.add(5),await Ro(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}Kh.provider={build:()=>new Kh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="FirestoreClient";class xA{constructor(e,r,s,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=lf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(s,async o=>{H(On,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(H(On,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new In;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const s=If(r,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function wu(t,e){t.asyncQueue.verifyOperationInProgress(),H(On,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let s=r.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await nw(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jy(t,e){t.asyncQueue.verifyOperationInProgress();const r=await yA(t);H(On,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(s=>py(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>py(e.remoteStore,i)),t._onlineComponents=e}async function yA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(On,"Using user provided OfflineComponentProvider");try{await wu(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;xi("Error using user provided cache. Falling back to memory cache: "+r),await wu(t,new Sc)}}else H(On,"Using default OfflineComponentProvider"),await wu(t,new pA(void 0));return t._offlineComponents}async function jw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(On,"Using user provided OnlineComponentProvider"),await jy(t,t._uninitializedComponentsProvider._online)):(H(On,"Using default OnlineComponentProvider"),await jy(t,new Kh))),t._onlineComponents}function vA(t){return jw(t).then(e=>e.syncEngine)}async function bA(t){const e=await jw(t),r=e.eventManager;return r.onListen=rA.bind(null,e.syncEngine),r.onUnlisten=iA.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=nA.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=aA.bind(null,e.syncEngine),r}function jA(t,e,r={}){const s=new In;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,d,u){const m=new gA({next:p=>{m.Nu(),o.enqueueAndForget(()=>KC(a,f));const b=p.docs.has(c);!b&&p.fromCache?u.reject(new K(U.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&p.fromCache&&d&&d.source==="server"?u.reject(new K(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new XC(pf(c.path),m,{includeMetadataChanges:!0,qa:!0});return GC(a,f)}(await bA(t),t.asyncQueue,e,r,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="firestore.googleapis.com",Ny=!0;class _y{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Nw,this.ssl=Ny}else this.host=e.host,this.ssl=e.ssl??Ny;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Q4)throw new K(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ww(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rf{constructor(e,r,s,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _y({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _y(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new bI;switch(s.type){case"firstParty":return new _I(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new K(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const s=wy.get(r);s&&(H("ComponentProvider","Removing Datastore"),wy.delete(r),s.terminate())}(this),Promise.resolve()}}function wA(t,e,r,s={}){var u;t=ao(t,Rf);const i=Ii(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${r}`;i&&(vb(`https://${c}`),bb("Firestore",!0)),a.host!==Nw&&a.host!==c&&xi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...a,host:c,ssl:i,emulatorOptions:s};if(!gs(d,o)&&(t._setSettings(d),s.mockUserToken)){let m,f;if(typeof s.mockUserToken=="string")m=s.mockUserToken,f=dt.MOCK_USER;else{m=Ck(s.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new K(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new dt(p)}t._authCredentials=new jI(new fj(m,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Df(this.firestore,e,this._query)}}class Xe{constructor(e,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new po(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xe(this.firestore,e,this._key)}toJSON(){return{type:Xe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,s){if(Co(r,Xe._jsonSchema))return new Xe(e,s||null,new Q(Se.fromString(r.referencePath)))}}Xe._jsonSchemaVersion="firestore/documentReference/1.0",Xe._jsonSchema={type:ze("string",Xe._jsonSchemaVersion),referencePath:ze("string")};class po extends Df{constructor(e,r,s){super(e,r,pf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xe(this.firestore,null,new Q(e))}withConverter(e){return new po(this.firestore,e,this._path)}}function ky(t,e,...r){if(t=Vt(t),arguments.length===1&&(e=lf.newId()),CI("doc","path",e),t instanceof Rf){const s=Se.fromString(e,...r);return Ox(s),new Xe(t,null,new Q(s))}{if(!(t instanceof Xe||t instanceof po))throw new K(U.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Se.fromString(e,...r));return Ox(s),new Xe(t.firestore,t instanceof po?t.converter:null,new Q(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="AsyncQueue";class Ty{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iw(this,"async_queue_retry"),this._c=()=>{const s=ju();s&&H(Ey,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const r=ju();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=ju();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new In;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Di(e))throw e;H(Ey,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Br("INTERNAL UNHANDLED ERROR: ",Sy(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=r,r}enqueueAfterDelay(e,r,s){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const i=Sf.createAndSchedule(this,e,r,s,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&X(47125,{Pc:Sy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function Sy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Mf extends Rf{constructor(e,r,s,i){super(e,r,s,i),this.type="firestore",this._queue=new Ty,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ty(e),this._firestoreClient=void 0,await e}}}function NA(t,e){const r=typeof t=="object"?t:_b(),s=typeof t=="string"?t:bc,i=Xm(r,"firestore").getImmediate({identifier:s});if(!i._initialized){const a=Sk("firestore");a&&wA(i,...a)}return i}function _w(t){if(t._terminated)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_A(t),t._firestoreClient}function _A(t){var s,i,a;const e=t._freezeSettings(),r=function(c,d,u,m){return new zI(c,d,u,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,ww(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new xA(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ht(it.fromBase64String(e))}catch(r){throw new K(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ht(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ht._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Co(e,Ht._jsonSchema))return Ht.fromBase64String(e.bytes)}}Ht._jsonSchemaVersion="firestore/bytes/1.0",Ht._jsonSchema={type:ze("string",Ht._jsonSchemaVersion),bytes:ze("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new K(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new K(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new K(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:jr._jsonSchemaVersion}}static fromJSON(e){if(Co(e,jr._jsonSchema))return new jr(e.latitude,e.longitude)}}jr._jsonSchemaVersion="firestore/geoPoint/1.0",jr._jsonSchema={type:ze("string",jr._jsonSchemaVersion),latitude:ze("number"),longitude:ze("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:wr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Co(e,wr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new wr(e.vectorValues);throw new K(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wr._jsonSchemaVersion="firestore/vectorValue/1.0",wr._jsonSchema={type:ze("string",wr._jsonSchemaVersion),vectorValues:ze("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=/^__.*__$/;class EA{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ao(e,this.data,r,this.fieldTransforms)}}function kw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:t})}}class Of{constructor(e,r,s,i,a,o){this.settings=e,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Of({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:r,fc:!1});return s.gc(e),s}yc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:r,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ic(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(kw(this.Ac)&&kA.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class TA{constructor(e,r,s){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=s||hd(e)}Cc(e,r,s,i=!1){return new Of({Ac:e,methodName:r,Dc:s,path:rt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function SA(t){const e=t._freezeSettings(),r=hd(t._databaseId);return new TA(t._databaseId,!!e.ignoreUndefinedProperties,r)}function IA(t,e,r,s,i,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,r,i);Iw("Data must be an object, but it was:",o,s);const c=Tw(s,o);let d,u;if(a.merge)d=new nr(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const m=[];for(const f of a.mergeFields){const p=CA(e,f,r);if(!o.contains(p))throw new K(U.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);PA(m,p)||m.push(p)}d=new nr(m),u=o.fieldTransforms.filter(f=>d.covers(f.field))}else d=null,u=o.fieldTransforms;return new EA(new $t(c),d,u)}class Ff extends Vf{_toFieldTransform(e){return new p4(e.path,new ho)}isEqual(e){return e instanceof Ff}}function Ew(t,e){if(Sw(t=Vt(t)))return Iw("Unsupported field value:",e,t),Tw(t,e);if(t instanceof Vf)return function(s,i){if(!kw(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,i){const a=[];let o=0;for(const c of s){let d=Ew(c,i.wc(o));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),o++}return{arrayValue:{values:a}}}(t,e)}return function(s,i){if((s=Vt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return h4(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const a=Ne.fromDate(s);return{timestampValue:kc(i.serializer,a)}}if(s instanceof Ne){const a=new Ne(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:kc(i.serializer,a)}}if(s instanceof jr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ht)return{bytesValue:Kj(i.serializer,s._byteString)};if(s instanceof Xe){const a=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:vf(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof wr)return function(o,c){return{mapValue:{fields:{[Nj]:{stringValue:_j},[jc]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Sc("VectorValues must only contain numeric values.");return gf(c.serializer,u)})}}}}}}(s,i);throw i.Sc(`Unsupported field value: ${cf(s)}`)}(t,e)}function Tw(t,e){const r={};return xj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(t,(s,i)=>{const a=Ew(i,e.mc(s));a!=null&&(r[s]=a)}),{mapValue:{fields:r}}}function Sw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof jr||t instanceof Ht||t instanceof Xe||t instanceof Vf||t instanceof wr)}function Iw(t,e,r){if(!Sw(r)||!pj(r)){const s=cf(r);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function CA(t,e,r){if((e=Vt(e))instanceof Lf)return e._internalPath;if(typeof e=="string")return Cw(t,e);throw Ic("Field path arguments must be of type string or ",t,!1,void 0,r)}const AA=new RegExp("[~\\*/\\[\\]]");function Cw(t,e,r){if(e.search(AA)>=0)throw Ic(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Lf(...e.split("."))._internalPath}catch{throw Ic(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Ic(t,e,r,s,i){const a=s&&!s.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(a||o)&&(d+=" (found",a&&(d+=` in field ${s}`),o&&(d+=` in document ${i}`),d+=")"),new K(U.INVALID_ARGUMENT,c+t+d)}function PA(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,r,s,i,a){this._firestore=e,this._userDataWriter=r,this._key=s,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Pw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class RA extends Aw{data(){return super.data()}}function Pw(t,e){return typeof e=="string"?Cw(t,e):e instanceof Lf?e._internalPath:e._delegate._internalPath}class DA{convertValue(e,r="none"){switch(Ln(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Mn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const s={};return Es(e,(i,a)=>{s[i]=this.convertValue(a,r)}),s}convertVectorValue(e){var s,i,a;const r=(a=(i=(s=e.fields)==null?void 0:s[jc].arrayValue)==null?void 0:i.values)==null?void 0:a.map(o=>Ve(o.doubleValue));return new wr(r)}convertGeoPoint(e){return new jr(Ve(e.latitude),Ve(e.longitude))}convertArray(e,r){return(e.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(e,r){switch(r){case"previous":const s=id(e);return s==null?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(lo(e));default:return null}}convertTimestamp(e){const r=Dn(e);return new Ne(r.seconds,r.nanos)}convertDocumentKey(e,r){const s=Se.fromString(e);pe(ew(s),9688,{name:e});const i=new co(s.get(1),s.get(3)),a=new Q(s.popFirst(5));return i.isEqual(r)||Br(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(t,e,r){let s;return s=t?t.toFirestore(e):e,s}class va{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ds extends Aw{constructor(e,r,s,i,a,o){super(e,r,s,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Fl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const s=this._document.data.field(Pw("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=ds._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}ds._jsonSchemaVersion="firestore/documentSnapshot/1.0",ds._jsonSchema={type:ze("string",ds._jsonSchemaVersion),bundleSource:ze("string","DocumentSnapshot"),bundleName:ze("string"),bundle:ze("string")};class Fl extends ds{data(e={}){return super.data(e)}}class La{constructor(e,r,s,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new va(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(s=>{e.call(r,new Fl(this._firestore,this._userDataWriter,s.key,s,new va(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new K(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const d=new Fl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new va(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const d=new Fl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new va(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,m=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:LA(c.type),doc:d,oldIndex:u,newIndex:m}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=La._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],s=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(r.push(a._document),s.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function LA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t){t=ao(t,Xe);const e=ao(t.firestore,Mf);return jA(_w(e),t._key).then(r=>BA(e,t,r))}La._jsonSchemaVersion="firestore/querySnapshot/1.0",La._jsonSchema={type:ze("string",La._jsonSchemaVersion),bundleSource:ze("string","QuerySnapshot"),bundleName:ze("string"),bundle:ze("string")};class OA extends DA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ht(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,r)}}function FA(t,e,r){t=ao(t,Xe);const s=ao(t.firestore,Mf),i=MA(t.converter,e);return UA(s,[IA(SA(s),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Dr.none())])}function UA(t,e){return function(s,i){const a=new In;return s.asyncQueue.enqueueAndForget(async()=>oA(await vA(s),i,a)),a.promise}(_w(t),e)}function BA(t,e,r){const s=r.docs.get(e._key),i=new OA(t);return new ds(t,i,e._key,s,new va(r.hasPendingWrites,r.fromCache),e.converter)}function Iy(){return new Ff("serverTimestamp")}(function(e,r=!0){(function(i){Pi=i})(Ci),gi(new xs("firestore",(s,{instanceIdentifier:i,options:a})=>{const o=s.getProvider("app").getImmediate(),c=new Mf(new wI(s.getProvider("auth-internal")),new kI(o,s.getProvider("app-check-internal")),function(u,m){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new co(u.options.projectId,m)}(o,i),o);return a={useFetchStreams:r,...a},c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),Tn(Dx,Mx,e),Tn(Dx,Mx,"esm2020")})();const Ul={apiKey:"AIzaSyC4M-yydpp7rWqnLeEPigJXcbfDLlao8zQ",authDomain:"marketing-website-management.firebaseapp.com",projectId:"marketing-website-management",storageBucket:"marketing-website-management.firebasestorage.app",messagingSenderId:"106106592866410",appId:"1:106106592866410:web:19aef77097224acbd54cad"};(!Ul.apiKey||!Ul.authDomain||!Ul.projectId)&&(console.error(" Firebase configuration is missing!"),console.error("Please create a .env file with the following variables:"),console.error("  VITE_FIREBASE_API_KEY"),console.error("  VITE_FIREBASE_AUTH_DOMAIN"),console.error("  VITE_FIREBASE_PROJECT_ID"),console.error("  VITE_FIREBASE_STORAGE_BUCKET"),console.error("  VITE_FIREBASE_MESSAGING_SENDER_ID"),console.error("  VITE_FIREBASE_APP_ID"),console.error(`
Get these from: Firebase Console > Project Settings > Your apps > Web app`));let Cc;if(dx().length===0)try{Cc=Nb(Ul)}catch(t){throw console.error(" Firebase initialization failed:",t),t}else Cc=dx()[0];const Ds=yI(Cc),Cy=NA(Cc),Ay="marketing_management_website_messages",oa=localStorage.getItem("useMockAuth")!=="false",Rw=S.createContext(void 0);function zA({children:t}){const[e,r]=S.useState(!1),[s,i]=S.useState(null),[a,o]=S.useState(!0),c=async(v,j)=>{const I=Il.find(P=>P.email===v&&P.password===j);if(!I)throw new Error("Invalid email or password");if(!I.isActive)throw new Error("Account is inactive");const M={id:I.id,email:I.email,fullName:I.fullName,role:I.role,phone:I.phone};i(M),r(!0),localStorage.setItem("mockAuthUser",JSON.stringify(M))},d=async v=>{const j=`user-${Date.now()}`,I={id:j,email:v.email,fullName:v.fullName,role:v.role,phone:v.phone,password:v.password,isActive:!0,createdAt:new Date,updatedAt:new Date};Il.push(I);const M=JSON.parse(localStorage.getItem("marketing_management_website_users")||"[]");M.push(I),localStorage.setItem("marketing_management_website_users",JSON.stringify(M));const P=Il.filter(R=>R.role==="admin"),N={id:`message-${Date.now()}`,senderId:j,recipientId:void 0,subject:"New User Registration",content:`A new user has registered: ${I.fullName} (${I.email}) as ${I.role}. Please review and approve if necessary.`,isRead:!1,isBroadcast:!0,createdAt:new Date,updatedAt:new Date},w=JSON.parse(localStorage.getItem(Ay)||"[]");P.forEach(R=>{w.push({...N,recipientId:R.id,id:`message-${Date.now()}-${R.id}`})}),localStorage.setItem(Ay,JSON.stringify(w));const T={id:j,email:I.email,fullName:I.fullName,role:I.role,phone:I.phone};i(T),r(!0),localStorage.setItem("mockAuthUser",JSON.stringify(T))},u=async()=>{i(null),r(!1),localStorage.removeItem("mockAuthUser")},m=async v=>{try{const j=await VA(ky(Cy,"users",v.uid));if(!j.exists())return console.error("User document not found in Firestore"),null;const I=j.data();return I.isActive?{id:v.uid,email:I.email||v.email||"",fullName:I.fullName||"",role:I.role,phone:I.phone||""}:(console.error("User account is inactive"),null)}catch(j){return console.error("Error fetching user data:",j),null}};S.useEffect(()=>{if(oa){o(!0);const v=localStorage.getItem("mockAuthUser");if(v)try{const j=JSON.parse(v);i(j),r(!0)}catch(j){console.error("Error parsing stored user:",j),localStorage.removeItem("mockAuthUser")}o(!1)}else{const v=aS(Ds,async j=>{if(o(!0),j){const I=await m(j);I?(i(I),r(!0)):(i(null),r(!1))}else i(null),r(!1);o(!1)});return()=>v()}},[]);const f=async(v,j)=>{if(oa)return c(v,j);try{if(!Ds)throw console.error("Firebase Auth not initialized. Check your Firebase configuration."),new Error("Firebase Auth not initialized. Please check your configuration.");await nS(Ds,v,j)}catch(I){throw console.error("Sign in error:",I),console.error("Error code:",I.code),console.error("Error message:",I.message),I.code==="auth/user-not-found"?new Error("auth/user-not-found - No user found with this email. Please create an account first."):I.code==="auth/wrong-password"?new Error("auth/wrong-password - Incorrect password."):I.code==="auth/invalid-email"?new Error("auth/invalid-email - Invalid email address format."):I.code==="auth/user-disabled"?new Error("auth/user-disabled - This account has been disabled."):I.code==="auth/too-many-requests"?new Error("auth/too-many-requests - Too many failed login attempts. Please try again later."):I.code==="auth/network-request-failed"?new Error("auth/network-request-failed - Network error. Please check your internet connection."):I.code==="auth/invalid-api-key"?new Error("auth/invalid-api-key - Firebase API key is invalid. Check your .env file."):I.code==="auth/configuration-not-found"?new Error("auth/configuration-not-found - Firebase configuration not found. Check your .env file."):new Error(I.message||I.code||"Failed to sign in")}},p=async v=>{if(oa)return d(v);try{if(!Ds)throw new Error("Firebase Auth not initialized. Please check your configuration.");const I=(await rS(Ds,v.email,v.password)).user;await FA(ky(Cy,"users",I.uid),{email:v.email,fullName:v.fullName,phone:v.phone,role:v.role,isActive:!0,createdAt:Iy(),updatedAt:Iy()})}catch(j){throw console.error("Sign up error:",j),console.error("Error code:",j.code),console.error("Error message:",j.message),j.code==="auth/email-already-in-use"?new Error("An account with this email already exists."):j.code==="auth/invalid-email"?new Error("Invalid email address format."):j.code==="auth/weak-password"?new Error("Password is too weak. Please use at least 6 characters."):j.code==="auth/operation-not-allowed"?new Error("Email/password accounts are not enabled. Please contact support."):new Error(j.message||"Failed to create account")}},b=async()=>{if(oa)return u();try{await oS(Ds)}catch(v){throw console.error("Sign out error:",v),new Error(v.message||"Failed to sign out")}},E=v=>{if(!s)return;const j={...s,role:v};i(j),oa&&localStorage.setItem("mockAuthUser",JSON.stringify(j))},k=v=>s?v.includes(s.role):!1,x=v=>s?s.role==="admin"?!0:kr(s.id,s.role).some(I=>I.id===v):!1,y=v=>s?s.role==="admin"||s.role==="web_developer"&&v.assignedTo===s.id||s.role==="client"&&v.createdBy===s.id:!1;return n.jsx(Rw.Provider,{value:{isSignedIn:e,user:s,loading:a,signIn:f,signUp:p,signOut:b,switchRole:E,hasRole:k,canAccessProject:x,canManageTicket:y},children:t})}function ne(){const t=S.useContext(Rw);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}const WA={theme:"system",setTheme:()=>null},$A=S.createContext(WA);function HA({children:t,defaultTheme:e="system",storageKey:r="vite-ui-theme",...s}){const[i,a]=S.useState(()=>localStorage.getItem(r)||e);S.useEffect(()=>{const c=window.document.documentElement;if(c.classList.remove("light","dark"),i==="system"){const d=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";c.classList.add(d);return}c.classList.add(i)},[i]);const o={theme:i,setTheme:c=>{localStorage.setItem(r,c),a(c)}};return n.jsx($A.Provider,{...s,value:o,children:t})}function Dw(t){return(typeof t=="string"?new Date(t):t).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})}function lr(t){const e=typeof t=="string"?new Date(t):t,s=new Date().getTime()-e.getTime(),i=Math.floor(s/6e4),a=Math.floor(s/36e5),o=Math.floor(s/864e5);return i<1?"just now":i<60?`${i} minute${i>1?"s":""} ago`:a<24?`${a} hour${a>1?"s":""} ago`:o<30?`${o} day${o>1?"s":""} ago`:Dw(e)}function Mw(t){return t.charAt(0).toUpperCase()+t.slice(1)}function qA(t){return{admin:"Administrator",web_developer:"Web Developer",social_media_coordinator:"Social Media Coordinator",client:"Client"}[t]}function GA(t){return{admin:"bg-purple-100 text-purple-700 border-purple-200",web_developer:"bg-primary/10 text-primary border-primary/20",social_media_coordinator:"bg-accent/10 text-accent border-accent/20",client:"bg-success/10 text-success border-success/20"}[t]}function Fn(t){return{planning:"Planning",design:"Design",development:"Development",testing:"Testing",launch:"Launch",maintenance:"Maintenance"}[t]}function Lw(t){return{planning:16.67,design:33.33,development:50,testing:66.67,launch:83.33,maintenance:100}[t]}function Vw(t){return{open:"bg-blue-100 text-blue-700 border-blue-200",in_progress:"bg-yellow-100 text-yellow-700 border-yellow-200",resolved:"bg-green-100 text-green-700 border-green-200",closed:"bg-gray-100 text-gray-700 border-gray-200",active:"bg-green-100 text-green-700 border-green-200",paused:"bg-gray-100 text-gray-700 border-gray-200",completed:"bg-green-100 text-green-700 border-green-200"}[t]||"bg-gray-100 text-gray-700 border-gray-200"}function KA(t){return{open:"Open",in_progress:"In Progress",resolved:"Resolved",closed:"Closed",active:"Active",paused:"Paused",completed:"Completed"}[t]||Mw(t)}function QA(t){return{low:"bg-gray-100 text-gray-700 border-gray-200",medium:"bg-blue-100 text-blue-700 border-blue-200",high:"bg-orange-100 text-orange-700 border-orange-200",critical:"bg-red-100 text-red-700 border-red-200"}[t]}function YA(t){return Mw(t)}function XA(t){return{bug_report:"Bug Report",content_change:"Content Change",design_update:"Design Update",feature_request:"Feature Request"}[t]}function ba(t){return new Intl.NumberFormat("en-ZA").format(t)}function JA(t){const e=t.trim().split(" ");return e.length===1?e[0].charAt(0).toUpperCase():(e[0].charAt(0)+e[e.length-1].charAt(0)).toUpperCase()}function Ow({role:t,className:e=""}){const r=t==="admin";return n.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border-2 shadow-sm ${r?"bg-gradient-to-r from-primary to-primary-dark text-white border-primary/80 shadow-primary/20":GA(t)} ${e}`,children:[r&&n.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),qA(t),r&&n.jsx("svg",{className:"w-3 h-3 ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}const ZA=t=>2;function ue(){const{isSignedIn:t,user:e,signOut:r}=ne(),s=ae(),a=$n().pathname,[o,c]=S.useState(0),[d,u]=S.useState(0);S.useEffect(()=>{if(e){const f=pk(e.id).length,p=ZA(e.id);c(f),u(p)}},[e]);const m=async()=>{try{await r(),s("/login")}catch(f){console.error("Error signing out:",f),s("/login")}};return n.jsx("nav",{className:"sticky top-0 z-50 border-b border-border bg-background/95 backdrop-blur",children:n.jsxs("div",{className:"container flex items-center justify-between py-4",children:[a==="/admin/dashboard"?n.jsxs("div",{className:"flex items-center gap-2 text-2xl font-bold text-primary",children:[n.jsx("img",{src:"/Logo.png",alt:"Marketing Website Logo",className:"h-10 w-auto"}),n.jsx("span",{children:"Marketing Website"})]}):n.jsxs(F,{to:"/",className:"flex items-center gap-2 text-2xl font-bold text-primary hover:opacity-80 transition-opacity",children:[n.jsx("img",{src:"/Logo.png",alt:"Marketing Website Logo",className:"h-10 w-auto"}),n.jsx("span",{children:"Marketing Website"})]}),n.jsx("div",{className:"hidden md:flex items-center gap-6",children:t&&e&&n.jsxs(n.Fragment,{children:[e.role==="web_developer"&&n.jsxs(n.Fragment,{children:[n.jsx(F,{to:"/calendar",className:"text-foreground hover:text-primary transition text-sm font-medium",children:"Calendar"}),n.jsx(F,{to:"/time-tracking",className:"text-foreground hover:text-primary transition text-sm font-medium",children:"Time"}),n.jsx(F,{to:"/developer/tickets",className:"text-foreground hover:text-primary transition text-sm font-medium",children:"Tickets"})]}),e.role==="social_media_coordinator"&&n.jsxs(n.Fragment,{children:[n.jsx(F,{to:"/calendar",className:"text-foreground hover:text-primary transition text-sm font-medium",children:"Calendar"}),n.jsx(F,{to:"/analytics",className:"text-foreground hover:text-primary transition text-sm font-medium",children:"Analytics"}),n.jsx(F,{to:"/coordinator/projects",className:"text-foreground hover:text-primary transition text-sm font-medium",children:"Projects"})]}),e.role==="client"&&n.jsxs(n.Fragment,{children:[n.jsx(F,{to:"/client-portal/dashboard",className:"text-foreground hover:text-primary transition text-sm font-medium",children:"Dashboard"}),n.jsx(F,{to:"/client/projects",className:"text-foreground hover:text-primary transition text-sm font-medium",children:"Projects"}),n.jsx(F,{to:"/client/tickets",className:"text-foreground hover:text-primary transition text-sm font-medium",children:"Tickets"}),n.jsx(F,{to:"/client-portal/files",className:"text-foreground hover:text-primary transition text-sm font-medium",children:"Files"})]})]})}),n.jsx("div",{className:"flex items-center gap-4",children:t&&e?n.jsxs("div",{className:"flex items-center gap-4",children:[e.role==="admin"&&n.jsxs("div",{className:"relative group",children:[n.jsx("button",{className:"p-2 rounded-lg hover:bg-muted transition-colors",title:"Management Tools",children:n.jsxs("svg",{className:"w-5 h-5 text-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),n.jsx("div",{className:"absolute top-full right-0 mt-2 w-56 bg-background border border-border rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:n.jsxs("div",{className:"py-2",children:[n.jsx(F,{to:"/search",className:"block px-4 py-2 text-sm text-foreground hover:bg-muted hover:text-primary transition",children:" Search"}),n.jsx(F,{to:"/calendar",className:"block px-4 py-2 text-sm text-foreground hover:bg-muted hover:text-primary transition",children:" Calendar"}),n.jsx(F,{to:"/time-tracking",className:"block px-4 py-2 text-sm text-foreground hover:bg-muted hover:text-primary transition",children:" Time Tracking"}),n.jsx(F,{to:"/reports",className:"block px-4 py-2 text-sm text-foreground hover:bg-muted hover:text-primary transition",children:" Reports"}),n.jsx("div",{className:"border-t border-border my-2"}),n.jsx(F,{to:"/ai-insights",className:"block px-4 py-2 text-sm text-foreground hover:bg-muted hover:text-primary transition",children:" AI Insights"}),n.jsx(F,{to:"/integrations",className:"block px-4 py-2 text-sm text-foreground hover:bg-muted hover:text-primary transition",children:" Integrations"}),n.jsx(F,{to:"/automation",className:"block px-4 py-2 text-sm text-foreground hover:bg-muted hover:text-primary transition",children:" Automation"}),n.jsx(F,{to:"/templates",className:"block px-4 py-2 text-sm text-foreground hover:bg-muted hover:text-primary transition",children:" Templates"})]})})]}),n.jsxs(F,{to:"/messages",className:"p-2 rounded-lg hover:bg-muted transition-colors relative",title:`Messages${o>0?` (${o} unread)`:""}`,children:[n.jsx("svg",{className:"w-5 h-5 text-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),o>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold min-w-[20px]",children:o>99?"99+":o})]}),n.jsxs("div",{className:"text-sm text-right",children:[n.jsx("p",{className:"font-semibold text-foreground",children:e.fullName}),n.jsx(Ow,{role:e.role,className:"mt-1"})]}),n.jsx("button",{onClick:m,className:"btn-secondary text-sm",children:"Sign Out"})]}):n.jsxs(n.Fragment,{children:[n.jsx(F,{to:"/login",className:"btn-secondary text-sm",children:"Sign In"}),n.jsx(F,{to:"/register",className:"btn-primary text-sm",children:"Sign Up"})]})})]})})}function he(){const[t,e]=S.useState(!1),[r,s]=S.useState(!1),[i,a]=S.useState(!1);return n.jsxs(n.Fragment,{children:[n.jsx("footer",{className:"border-t border-border bg-muted py-12",children:n.jsxs("div",{className:"container",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-foreground mb-4",children:"SpecCon Marketing Management Website"}),n.jsx("p",{className:"text-muted-foreground text-sm",children:"Comprehensive project management platform for website development and social media coordination."})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-bold text-foreground mb-3",children:"Platform"}),n.jsx("ul",{className:"space-y-2 text-sm text-muted-foreground",children:n.jsx("li",{children:n.jsx("a",{href:"/dashboard",className:"hover:text-primary",children:"Dashboard"})})})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-bold text-foreground mb-3",children:"Features"}),n.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[n.jsx("li",{children:n.jsx("a",{href:"#",className:"hover:text-primary",children:"Project Management"})}),n.jsx("li",{children:n.jsx("a",{href:"#",className:"hover:text-primary",children:"Ticketing System"})}),n.jsx("li",{children:n.jsx("a",{href:"#",className:"hover:text-primary",children:"Analytics Tracking"})})]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-bold text-foreground mb-3",children:"Support"}),n.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[n.jsx("li",{children:n.jsx("button",{onClick:()=>e(!0),className:"hover:text-primary",children:"Help Center"})}),n.jsx("li",{children:n.jsx("button",{onClick:()=>s(!0),className:"hover:text-primary",children:"Privacy"})}),n.jsx("li",{children:n.jsx("button",{onClick:()=>a(!0),className:"hover:text-primary",children:"Terms"})})]})]})]}),n.jsx("div",{className:"border-t border-border pt-8",children:n.jsx("p",{className:"text-center text-sm text-muted-foreground",children:" 2025 SpecCon Marketing Management Website. All rights reserved."})})]})}),t&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-background rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-background border-b border-border p-6 flex justify-between items-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Help Center"}),n.jsx("button",{onClick:()=>e(!1),className:"text-muted-foreground hover:text-foreground text-2xl",children:""})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"Getting Started"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"Welcome to SpecCon Marketing Management Website! Here's how to get started:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"Create an account with your assigned role"}),n.jsx("li",{children:"Access your role-specific dashboard"}),n.jsx("li",{children:"View assigned projects and tasks"}),n.jsx("li",{children:"Collaborate with your team members"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"For Clients"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"How to manage your website projects:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"View progress of your website through different stages"}),n.jsx("li",{children:"Create tickets for bug reports or content changes"}),n.jsx("li",{children:"Track analytics and social media performance"}),n.jsx("li",{children:"Communicate with your development team"}),n.jsx("li",{children:"Monitor project milestones and deadlines"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"For Developers"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"Managing your assigned projects:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"Access all your assigned website projects"}),n.jsx("li",{children:"Update project stages as work progresses"}),n.jsx("li",{children:"Manage and resolve client tickets"}),n.jsx("li",{children:"Track time and deliverables"}),n.jsx("li",{children:"Collaborate with social media coordinators"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"For Social Media Coordinators"}),n.jsx("p",{className:"text-muted-foreground",children:"Track and manage social media analytics for your assigned projects. Add analytics entries for reach, engagement, and posts across different platforms. Generate reports and monitor performance trends."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"Ticketing System"}),n.jsx("p",{className:"text-muted-foreground",children:"Create tickets for bug reports, content changes, design updates, or feature requests. All tickets are tracked and assigned to the appropriate team member. Monitor ticket status from creation to resolution."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"Account Security"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"Keep your account secure:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"Use a strong, unique password"}),n.jsx("li",{children:"Never share your login credentials"}),n.jsx("li",{children:"Enable two-factor authentication when available"}),n.jsx("li",{children:"Log out from shared devices"}),n.jsx("li",{children:"Report suspicious activity immediately"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"Contact Support"}),n.jsx("p",{className:"text-muted-foreground",children:"Need more help? Contact our support team:"}),n.jsxs("p",{className:"text-muted-foreground mt-2",children:["Email: support@speccon.co.za",n.jsx("br",{}),"Phone: +27 21 123 4567",n.jsx("br",{}),"Hours: Monday - Friday, 9:00 AM - 5:00 PM SAST"]})]})]}),n.jsx("div",{className:"sticky bottom-0 bg-background border-t border-border p-6",children:n.jsx("button",{onClick:()=>e(!1),className:"w-full btn-primary",children:"Close"})})]})}),r&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-background rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-background border-b border-border p-6 flex justify-between items-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Privacy Policy"}),n.jsx("button",{onClick:()=>s(!1),className:"text-muted-foreground hover:text-foreground text-2xl",children:""})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"1. Information We Collect"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"When you use SpecCon Marketing Management Website, we collect the following information:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"Personal information (name, email address, phone number)"}),n.jsx("li",{children:"Project files, documents, and assets"}),n.jsx("li",{children:"Website analytics and social media metrics"}),n.jsx("li",{children:"Ticket history and communications"}),n.jsx("li",{children:"Device information and IP address for security purposes"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"2. How We Use Your Information"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"We use your information to:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"Manage and track website development projects"}),n.jsx("li",{children:"Facilitate team collaboration and communication"}),n.jsx("li",{children:"Store and track analytics data"}),n.jsx("li",{children:"Communicate with you about your projects and tickets"}),n.jsx("li",{children:"Prevent unauthorized access and ensure platform security"}),n.jsx("li",{children:"Improve our services and user experience"}),n.jsx("li",{children:"Comply with legal obligations"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"3. Information Sharing"}),n.jsx("p",{className:"text-muted-foreground",children:"We do not sell your personal information. We may share your information with:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4 mt-2",children:[n.jsx("li",{children:"Team members assigned to the same projects"}),n.jsx("li",{children:"Service providers who assist in operating our platform"}),n.jsx("li",{children:"Law enforcement when required by law"}),n.jsx("li",{children:"Other users (limited information) necessary for project collaboration"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"4. Data Security"}),n.jsx("p",{className:"text-muted-foreground",children:"We implement industry-standard security measures to protect your personal information, including encryption, secure servers, and regular security audits. However, no method of transmission over the internet is 100% secure, and we cannot guarantee absolute security."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"5. Data Retention"}),n.jsx("p",{className:"text-muted-foreground",children:"We retain your personal information for as long as your account is active or as needed to provide services. Project records and analytics data are kept for 7 years to comply with South African business regulations."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"6. Your Rights"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"Under the Protection of Personal Information Act (POPIA), you have the right to:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"Access your personal information"}),n.jsx("li",{children:"Correct inaccurate information"}),n.jsx("li",{children:"Request deletion of your information (subject to legal requirements)"}),n.jsx("li",{children:"Object to processing of your information"}),n.jsx("li",{children:"Withdraw consent at any time"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"7. Cookies"}),n.jsx("p",{className:"text-muted-foreground",children:"We use cookies and similar technologies to improve your experience, analyze site usage, and assist in our marketing efforts. You can control cookie preferences through your browser settings."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"8. Third-Party Links"}),n.jsx("p",{className:"text-muted-foreground",children:"Our platform may contain links to third-party websites. We are not responsible for the privacy practices of these websites. We encourage you to review their privacy policies."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"9. Children's Privacy"}),n.jsx("p",{className:"text-muted-foreground",children:"SpecCon Marketing Management Website is a business platform not intended for users under the age of 18. We do not knowingly collect personal information from children."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"10. Changes to This Policy"}),n.jsx("p",{className:"text-muted-foreground",children:"We may update this privacy policy from time to time. We will notify you of any significant changes by email or through a notice on our platform."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"11. Contact Us"}),n.jsx("p",{className:"text-muted-foreground",children:"If you have questions about this privacy policy or how we handle your personal information, please contact us at:"}),n.jsxs("p",{className:"text-muted-foreground mt-2",children:["Email: privacy@speccon.co.za",n.jsx("br",{}),"Address: Cape Town, South Africa"]})]}),n.jsx("div",{className:"bg-muted p-4 rounded-lg",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("strong",{children:"Last Updated:"})," January 2025",n.jsx("br",{}),n.jsx("strong",{children:"Effective Date:"})," January 2025"]})})]}),n.jsx("div",{className:"sticky bottom-0 bg-background border-t border-border p-6",children:n.jsx("button",{onClick:()=>s(!1),className:"w-full btn-primary",children:"Close"})})]})}),i&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-background rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-background border-b border-border p-6 flex justify-between items-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Terms & Conditions"}),n.jsx("button",{onClick:()=>a(!1),className:"text-muted-foreground hover:text-foreground text-2xl",children:""})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"1. Acceptance of Terms"}),n.jsx("p",{className:"text-muted-foreground",children:"By accessing and using SpecCon Marketing Management Website, you accept and agree to be bound by these Terms and Conditions. If you do not agree to these terms, please do not use our platform."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"2. Eligibility"}),n.jsx("p",{className:"text-muted-foreground",children:"You must be at least 18 years old and authorized to use SpecCon Marketing Management Website. By using our platform, you represent and warrant that you meet this age requirement and have the legal capacity to enter into binding contracts."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"3. User Accounts"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"When creating an account, you agree to:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"Provide accurate and complete information"}),n.jsx("li",{children:"Maintain the security of your account credentials"}),n.jsx("li",{children:"Accept responsibility for all activities under your account"}),n.jsx("li",{children:"Notify us immediately of any unauthorized use"}),n.jsx("li",{children:"Not create multiple accounts or share accounts"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"4. User Responsibilities"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"All users agree to:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"Perform assigned tasks professionally and on time"}),n.jsx("li",{children:"Maintain confidentiality of client information"}),n.jsx("li",{children:"Communicate effectively with team members"}),n.jsx("li",{children:"Provide accurate project updates and analytics"}),n.jsx("li",{children:"Not engage in unauthorized access or data manipulation"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"5. Project Management"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"Users agree to:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"Update project stages accurately as work progresses"}),n.jsx("li",{children:"Respond to tickets within agreed timeframes"}),n.jsx("li",{children:"Submit accurate analytics data"}),n.jsx("li",{children:"Respect intellectual property rights"}),n.jsx("li",{children:"Maintain professional communication standards"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"6. Service Terms"}),n.jsx("p",{className:"text-muted-foreground",children:"SpecCon Marketing Management Website provides project management and collaboration tools. Service levels and pricing are determined by your organization's agreement. All project data remains the property of the client organization."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"7. Prohibited Activities"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"Users are prohibited from:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"Unauthorized access to other users' projects or data"}),n.jsx("li",{children:"Sharing confidential client information"}),n.jsx("li",{children:"Submitting false or misleading analytics data"}),n.jsx("li",{children:"Harassing other users or team members"}),n.jsx("li",{children:"Attempting to circumvent security measures"}),n.jsx("li",{children:"Reverse engineering or scraping the platform"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"8. Dispute Resolution"}),n.jsx("p",{className:"text-muted-foreground",children:"In case of disputes between team members or regarding project deliverables, administrators will act as mediators. We reserve the right to suspend accounts or take legal action if terms are violated."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"9. Limitation of Liability"}),n.jsx("p",{className:"text-muted-foreground",children:"SpecCon Marketing Management Website provides project management tools as-is. We are not responsible for project outcomes, the actions of users, or disputes arising from collaborations. Our liability is limited to the service fees paid."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"10. Intellectual Property"}),n.jsx("p",{className:"text-muted-foreground",children:"All platform content, trademarks, and intellectual property belong to SpecCon or our licensors. Project content belongs to the respective client organizations. You may not use, copy, or distribute our platform content without written permission."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"11. Account Termination"}),n.jsx("p",{className:"text-muted-foreground",children:"We reserve the right to suspend or terminate accounts that violate these terms, engage in fraudulent activity, or pose a risk to the platform or other users. Termination may result in forfeiture of pending transactions."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"12. Changes to Terms"}),n.jsx("p",{className:"text-muted-foreground",children:"We may modify these terms at any time. Continued use of the platform after changes constitutes acceptance of the new terms. We will notify users of significant changes via email."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"13. Governing Law"}),n.jsx("p",{className:"text-muted-foreground",children:"These terms are governed by the laws of South Africa. Any disputes will be resolved in the courts of South Africa."})]}),n.jsx("div",{className:"bg-muted p-4 rounded-lg",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("strong",{children:"Last Updated:"})," January 2025",n.jsx("br",{}),n.jsx("strong",{children:"Effective Date:"})," January 2025"]})})]}),n.jsx("div",{className:"sticky bottom-0 bg-background border-t border-border p-6",children:n.jsx("button",{onClick:()=>a(!1),className:"w-full btn-primary",children:"Close"})})]})})]})}function eP(){const{isSignedIn:t}=ne();return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsxs("main",{className:"flex flex-col",children:[n.jsxs("section",{className:"relative min-h-screen flex items-center overflow-hidden bg-gradient-to-br from-primary/5 via-background to-secondary/10",children:[n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-accent/10 rounded-full blur-3xl animate-pulse"}),n.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-primary/5 rounded-full blur-3xl animate-pulse delay-1000"}),n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-secondary/5 rounded-full blur-3xl animate-pulse delay-500"})]}),n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute top-20 left-20 w-3 h-3 bg-accent rounded-full animate-bounce delay-100"}),n.jsx("div",{className:"absolute top-40 right-32 w-2 h-2 bg-primary rounded-full animate-bounce delay-300"}),n.jsx("div",{className:"absolute bottom-32 left-32 w-4 h-4 bg-secondary rounded-full animate-bounce delay-500"}),n.jsx("div",{className:"absolute bottom-40 right-20 w-2 h-2 bg-accent rounded-full animate-bounce delay-700"})]}),n.jsx("div",{className:"container text-center relative z-10 px-4 py-20",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-primary/10 border border-primary/20 text-primary text-sm font-medium mb-8",children:[n.jsx("span",{className:"w-2 h-2 bg-accent rounded-full mr-2 animate-pulse"}),"Welcome to the Future of Marketing Management"]}),n.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 text-balance bg-gradient-to-r from-primary via-primary to-accent bg-clip-text text-transparent leading-tight",children:["Manage Websites.",n.jsx("br",{}),n.jsx("span",{className:"text-foreground",children:"Track Social Media."}),n.jsx("br",{}),n.jsx("span",{className:"text-primary",children:"Collaborate Better."})]}),n.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground mb-12 max-w-3xl mx-auto leading-relaxed",children:"Your complete project management platform for website development and social media coordination with team collaboration, real-time analytics, and intelligent ticketing."}),n.jsxs("div",{className:"flex gap-8 justify-center items-center flex-wrap mb-16",children:[n.jsxs(F,{to:t?"/dashboard":"/register",className:"group relative bg-gradient-to-r from-primary to-primary-dark text-white px-8 py-4 rounded-xl font-bold text-lg hover:shadow-2xl hover:shadow-primary/25 transition-all duration-300 transform hover:-translate-y-1 overflow-hidden w-[220px] text-center whitespace-nowrap",children:[n.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-3",children:[n.jsx("span",{className:"w-5 h-5 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0",children:n.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})}),n.jsx("span",{className:"truncate",children:t?"Go to Dashboard":"Get Started"})]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent/20 to-primary/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),n.jsx(F,{to:"/login",className:"group border-2 border-primary/30 text-primary px-8 py-4 rounded-xl font-bold text-lg hover:bg-primary hover:text-white hover:border-primary transition-all duration-300 transform hover:-translate-y-1 w-[220px] text-center whitespace-nowrap",children:n.jsxs("span",{className:"flex items-center justify-center gap-3",children:[n.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),n.jsx("span",{className:"truncate",children:"Sign In"})]})})]})]})}),n.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce",children:n.jsx("div",{className:"w-6 h-10 border-2 border-primary/30 rounded-full flex justify-center",children:n.jsx("div",{className:"w-1 h-3 bg-primary rounded-full mt-2 animate-pulse"})})})]}),n.jsxs("section",{className:"py-24 bg-gradient-to-b from-background to-muted/30 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 opacity-5",children:n.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2312265E' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),n.jsxs("div",{className:"container relative z-10",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsxs("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-accent/10 border border-accent/20 text-accent text-sm font-medium mb-6",children:[n.jsx("span",{className:"w-2 h-2 bg-accent rounded-full mr-2"}),"Powerful Features"]}),n.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-foreground to-primary bg-clip-text text-transparent",children:"How Marketing Management Website Works"}),n.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Streamline your marketing operations with our comprehensive suite of tools designed for modern teams."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"group relative",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 to-accent/10 rounded-2xl transform rotate-1 group-hover:rotate-2 transition-transform duration-300"}),n.jsxs("div",{className:"relative bg-card border border-border/50 rounded-2xl p-8 text-center hover:shadow-2xl hover:shadow-primary/10 transition-all duration-300 transform group-hover:-translate-y-2",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-primary to-primary-dark rounded-2xl flex items-center justify-center transform group-hover:scale-110 transition-transform duration-300 shadow-lg",children:n.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),n.jsx("h3",{className:"text-2xl font-bold mb-4 text-foreground group-hover:text-primary transition-colors",children:"Team Collaboration"}),n.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Assign developers and coordinators to projects. Track progress and manage team workload efficiently with real-time updates and notifications."}),n.jsx("div",{className:"mt-6 flex justify-center",children:n.jsx("div",{className:"w-12 h-1 bg-gradient-to-r from-primary to-accent rounded-full"})})]})]}),n.jsxs("div",{className:"group relative",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-accent/10 to-primary/10 rounded-2xl transform -rotate-1 group-hover:-rotate-2 transition-transform duration-300"}),n.jsxs("div",{className:"relative bg-card border border-border/50 rounded-2xl p-8 text-center hover:shadow-2xl hover:shadow-accent/10 transition-all duration-300 transform group-hover:-translate-y-2",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-accent to-accent-dark rounded-2xl flex items-center justify-center transform group-hover:scale-110 transition-transform duration-300 shadow-lg",children:n.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),n.jsx("h3",{className:"text-2xl font-bold mb-4 text-foreground group-hover:text-accent transition-colors",children:"Project Tracking"}),n.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Monitor website building stages from planning to launch. View progress and milestones in real-time with detailed analytics and status updates."}),n.jsx("div",{className:"mt-6 flex justify-center",children:n.jsx("div",{className:"w-12 h-1 bg-gradient-to-r from-accent to-primary rounded-full"})})]})]}),n.jsxs("div",{className:"group relative",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary/10 to-primary/10 rounded-2xl transform rotate-1 group-hover:rotate-2 transition-transform duration-300"}),n.jsxs("div",{className:"relative bg-card border border-border/50 rounded-2xl p-8 text-center hover:shadow-2xl hover:shadow-secondary/10 transition-all duration-300 transform group-hover:-translate-y-2",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-secondary to-primary rounded-2xl flex items-center justify-center transform group-hover:scale-110 transition-transform duration-300 shadow-lg",children:n.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),n.jsx("h3",{className:"text-2xl font-bold mb-4 text-foreground group-hover:text-secondary transition-colors",children:"Analytics Dashboard"}),n.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Track website traffic and social media engagement. Get comprehensive insights into performance metrics with beautiful visualizations."}),n.jsx("div",{className:"mt-6 flex justify-center",children:n.jsx("div",{className:"w-12 h-1 bg-gradient-to-r from-secondary to-accent rounded-full"})})]})]})]}),n.jsx("div",{className:"mt-20 grid grid-cols-2 md:grid-cols-4 gap-6",children:[{icon:"",title:"Smart Ticketing",desc:"AI-powered ticket management"},{icon:"",title:"Mobile Ready",desc:"Access anywhere, anytime"},{icon:"",title:"Secure",desc:"Enterprise-grade security"},{icon:"",title:"Fast",desc:"Lightning-quick performance"}].map((e,r)=>n.jsxs("div",{className:"text-center p-6 rounded-xl bg-card/50 border border-border/50 hover:bg-card hover:shadow-lg transition-all duration-300",children:[n.jsx("div",{className:"text-3xl mb-3",children:e.icon}),n.jsx("h4",{className:"font-semibold text-foreground mb-1",children:e.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.desc})]},r))})]})]}),n.jsxs("section",{className:"py-24 bg-gradient-to-br from-background via-primary/5 to-secondary/10 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0",children:n.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-transparent via-primary/5 to-accent/5"})}),n.jsxs("div",{className:"container relative z-10",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsxs("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-primary/10 border border-primary/20 text-primary text-sm font-medium mb-6",children:[n.jsx("span",{className:"w-2 h-2 bg-accent rounded-full mr-2"}),"Role-Based Experience"]}),n.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-foreground via-primary to-accent bg-clip-text text-transparent",children:"Built for Every Role"}),n.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Tailored experiences designed specifically for each team member's workflow and responsibilities."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[n.jsxs("div",{className:"group relative",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-indigo-500/10 rounded-3xl transform rotate-2 group-hover:rotate-3 transition-transform duration-500"}),n.jsxs("div",{className:"relative bg-card border border-border/50 rounded-3xl p-8 hover:shadow-2xl hover:shadow-purple-500/10 transition-all duration-500 transform group-hover:-translate-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg",children:n.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Role"}),n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-gradient-to-r from-purple-500 to-indigo-600 text-white shadow-lg",children:"Administrator"})]})]}),n.jsx("h3",{className:"text-xl font-bold mb-3 text-foreground",children:"System Administrator"}),n.jsx("p",{className:"text-muted-foreground mb-6 leading-relaxed",children:"Full system control with user management, project oversight, analytics access, and system configuration."}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center text-sm text-foreground",children:[n.jsx("svg",{className:"w-4 h-4 text-purple-500 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"User Management"]}),n.jsxs("div",{className:"flex items-center text-sm text-foreground",children:[n.jsx("svg",{className:"w-4 h-4 text-purple-500 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"System Analytics"]}),n.jsxs("div",{className:"flex items-center text-sm text-foreground",children:[n.jsx("svg",{className:"w-4 h-4 text-purple-500 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Full Access"]})]})]})]}),n.jsxs("div",{className:"group relative",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 to-primary-dark/10 rounded-3xl transform -rotate-1 group-hover:-rotate-2 transition-transform duration-500"}),n.jsxs("div",{className:"relative bg-card border border-border/50 rounded-3xl p-8 hover:shadow-2xl hover:shadow-primary/10 transition-all duration-500 transform group-hover:-translate-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-primary to-primary-dark rounded-2xl flex items-center justify-center shadow-lg",children:n.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})})}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Role"}),n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-primary/10 text-primary border border-primary/20",children:"Web Developer"})]})]}),n.jsx("h3",{className:"text-xl font-bold mb-3 text-foreground",children:"Web Developer"}),n.jsx("p",{className:"text-muted-foreground mb-6 leading-relaxed",children:"Code, build, and deploy websites with ticket management, project tracking, and development tools."}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center text-sm text-foreground",children:[n.jsx("svg",{className:"w-4 h-4 text-primary mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Ticket Management"]}),n.jsxs("div",{className:"flex items-center text-sm text-foreground",children:[n.jsx("svg",{className:"w-4 h-4 text-primary mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Code Repository"]}),n.jsxs("div",{className:"flex items-center text-sm text-foreground",children:[n.jsx("svg",{className:"w-4 h-4 text-primary mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Deploy Tools"]})]})]})]}),n.jsxs("div",{className:"group relative",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-accent/10 to-accent-dark/10 rounded-3xl transform rotate-1 group-hover:rotate-2 transition-transform duration-500"}),n.jsxs("div",{className:"relative bg-card border border-border/50 rounded-3xl p-8 hover:shadow-2xl hover:shadow-accent/10 transition-all duration-500 transform group-hover:-translate-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-accent to-accent-dark rounded-2xl flex items-center justify-center shadow-lg",children:n.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4V2a1 1 0 011-1h4a1 1 0 011 1v2m4 0H8l.5 16h7L16 4z"})})}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Role"}),n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-accent/10 text-accent border border-accent/20",children:"Coordinator"})]})]}),n.jsx("h3",{className:"text-xl font-bold mb-3 text-foreground",children:"Social Media Coordinator"}),n.jsx("p",{className:"text-muted-foreground mb-6 leading-relaxed",children:"Manage social media campaigns, track engagement metrics, and coordinate content across platforms."}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center text-sm text-foreground",children:[n.jsx("svg",{className:"w-4 h-4 text-accent mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Campaign Management"]}),n.jsxs("div",{className:"flex items-center text-sm text-foreground",children:[n.jsx("svg",{className:"w-4 h-4 text-accent mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Analytics Dashboard"]}),n.jsxs("div",{className:"flex items-center text-sm text-foreground",children:[n.jsx("svg",{className:"w-4 h-4 text-accent mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Content Calendar"]})]})]})]}),n.jsxs("div",{className:"group relative",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-success/10 to-success-dark/10 rounded-3xl transform -rotate-1 group-hover:-rotate-2 transition-transform duration-500"}),n.jsxs("div",{className:"relative bg-card border border-border/50 rounded-3xl p-8 hover:shadow-2xl hover:shadow-success/10 transition-all duration-500 transform group-hover:-translate-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-success to-success-dark rounded-2xl flex items-center justify-center shadow-lg",children:n.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Role"}),n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-success/10 text-success border border-success/20",children:"Client"})]})]}),n.jsx("h3",{className:"text-xl font-bold mb-3 text-foreground",children:"Client Portal"}),n.jsx("p",{className:"text-muted-foreground mb-6 leading-relaxed",children:"View project progress, submit feedback, create support tickets, and communicate directly with your team."}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center text-sm text-foreground",children:[n.jsx("svg",{className:"w-4 h-4 text-success mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Project Dashboard"]}),n.jsxs("div",{className:"flex items-center text-sm text-foreground",children:[n.jsx("svg",{className:"w-4 h-4 text-success mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Support Tickets"]}),n.jsxs("div",{className:"flex items-center text-sm text-foreground",children:[n.jsx("svg",{className:"w-4 h-4 text-success mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"File Sharing"]})]})]})]})]})]})]}),n.jsxs("section",{className:"py-24 bg-gradient-to-br from-primary via-primary-dark to-primary relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-5",children:n.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("defs",{children:n.jsx("pattern",{id:"pattern",x:"0",y:"0",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:n.jsx("circle",{cx:"5",cy:"5",r:"1",fill:"white",opacity:"0.1"})})}),n.jsx("rect",{width:"100%",height:"100%",fill:"url(#pattern)"})]})}),n.jsx("div",{className:"absolute top-20 left-10 w-96 h-96 bg-accent/10 rounded-full blur-3xl animate-pulse"}),n.jsx("div",{className:"absolute bottom-20 right-10 w-72 h-72 bg-white/5 rounded-full blur-3xl animate-pulse delay-1000"})]}),n.jsx("div",{className:"container text-center relative z-10",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-white/10 border border-white/20 text-white text-sm font-medium mb-8 backdrop-blur-sm",children:[n.jsx("span",{className:"w-2 h-2 bg-accent rounded-full mr-2 animate-pulse"}),"Start Your Journey Today"]}),n.jsxs("h2",{className:"text-4xl md:text-6xl font-bold mb-6 text-white leading-tight",children:["Ready to Transform Your",n.jsx("br",{}),n.jsx("span",{className:"text-accent",children:"Marketing Workflow?"})]}),n.jsx("p",{className:"text-xl md:text-2xl mb-12 text-white/90 max-w-3xl mx-auto leading-relaxed",children:"Join thousands of teams already managing their websites and social media campaigns more efficiently with our comprehensive marketing management platform."}),n.jsxs("div",{className:"flex gap-8 justify-center items-center flex-wrap mb-16",children:[n.jsxs(F,{to:t?"/dashboard":"/register",className:"group relative bg-white text-primary px-8 py-4 rounded-2xl font-bold text-lg hover:shadow-2xl hover:shadow-white/25 transition-all duration-300 transform hover:-translate-y-1 overflow-hidden w-[240px] text-center whitespace-nowrap",children:[n.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-3",children:[n.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),n.jsx("span",{className:"truncate",children:t?"Go to Dashboard":"Get Started"})]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent/20 to-primary/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),n.jsx(F,{to:"/login",className:"group border-2 border-white/30 text-white px-8 py-4 rounded-2xl font-bold text-lg hover:bg-white/10 hover:border-white transition-all duration-300 transform hover:-translate-y-1 backdrop-blur-sm w-[240px] text-center whitespace-nowrap",children:n.jsxs("span",{className:"flex items-center justify-center gap-3",children:[n.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),n.jsx("span",{className:"truncate",children:"Sign In"})]})})]})]})})]})]}),n.jsx(he,{})]})}let tP=0;const Fw=()=>{const[t,e]=S.useState([]);return{toasts:t,showToast:(s,i="info")=>{const a=String(tP++),o={id:a,message:s,type:i};e(c=>[...c,o]),setTimeout(()=>{e(c=>c.filter(d=>d.id!==a))},3e3)}}};function Uw({toasts:t}){return n.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:t.map(e=>n.jsx("div",{className:`rounded-lg px-4 py-3 text-white text-sm font-medium shadow-lg transition-all ${e.type==="success"?"bg-success":e.type==="error"?"bg-danger":"bg-primary"}`,children:e.message},e.id))})}function rP(){const t=ae(),e=$n(),{toasts:r,showToast:s}=Fw(),{signIn:i,loading:a,isSignedIn:o}=ne(),[c,d]=S.useState(""),[u,m]=S.useState(""),[f,p]=S.useState(!1),b=new URLSearchParams(e.search).get("portal")==="client";S.useEffect(()=>{o&&!a&&t("/dashboard")},[o,a,t]);const E=async k=>{if(k.preventDefault(),!c||!u){s("Please fill in all fields","error");return}p(!0);try{await i(c,u),s("Signing in...","success")}catch(x){let y="Failed to sign in. Please try again.";x.message&&(x.message.includes("auth/user-not-found")||x.message.includes("auth/wrong-password")?y="Invalid email or password":x.message.includes("auth/invalid-email")?y="Invalid email address":x.message.includes("auth/too-many-requests")?y="Too many failed attempts. Please try again later.":x.message.includes("auth/user-disabled")?y="This account has been disabled":y=x.message),s(y,"error")}finally{p(!1)}};return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted flex items-center justify-center py-12",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:b?"Client Portal":"Sign In"}),n.jsx("p",{className:"text-muted-foreground",children:b?"Welcome Back - Access your project updates and files":"Access your Marketing Management Website account"})]}),n.jsxs("div",{className:"card",children:[!b&&n.jsxs("div",{className:"mb-6 p-4 bg-secondary/10 border border-secondary/20 rounded-lg",children:[n.jsx("p",{className:"text-sm font-semibold text-primary mb-2",children:"Test Accounts:"}),n.jsxs("ul",{className:"text-xs text-primary/80 space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Administrator:"})," admin@system.com / admin123"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Web Developer:"})," dev@system.com / dev123"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Web Developer:"})," jane.dev@system.com / dev123"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Social Media Coordinator:"})," social@system.com / social123"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Client:"})," client@system.com / client123"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Client:"})," client2@company.com / client123"]})]})]}),b&&n.jsxs("div",{className:"mb-6 p-4 bg-accent/10 border border-accent/20 rounded-lg",children:[n.jsx("p",{className:"text-sm font-semibold text-accent mb-2",children:"Client Portal Test Accounts:"}),n.jsxs("ul",{className:"text-xs text-accent/80 space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Client:"})," client@system.com / client123"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Client:"})," client2@company.com / client123"]})]}),n.jsx("p",{className:"text-xs text-accent/60 mt-2",children:"Don't have access? Contact support"})]}),n.jsxs("form",{onSubmit:E,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Email Address"}),n.jsx("input",{type:"email",value:c,onChange:k=>d(k.target.value),placeholder:"you@example.com",className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Password"}),n.jsx("input",{type:"password",value:u,onChange:k=>m(k.target.value),placeholder:"",className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",className:"rounded"}),n.jsx("span",{className:"text-sm text-foreground",children:"Remember me"})]}),n.jsx(F,{to:"#",className:"text-sm text-primary hover:underline",children:"Forgot password?"})]}),n.jsx("button",{type:"submit",disabled:f||a,className:"w-full btn-primary py-3 font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:f||a?"Signing in...":"Sign In"})]}),n.jsxs("div",{className:"relative my-6",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-border"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-2 bg-background text-muted-foreground",children:"Or"})})]}),n.jsx("div",{className:"space-y-3",children:n.jsxs("button",{className:"w-full flex items-center justify-center gap-2 border border-border rounded-lg py-3 font-semibold text-foreground hover:bg-muted transition",children:[n.jsx("span",{children:""})," Continue with Google"]})}),n.jsxs("p",{className:"text-center mt-6 text-sm text-muted-foreground",children:["Don't have an account?"," ",n.jsx(F,{to:"/register",className:"text-primary font-semibold hover:underline",children:"Sign up here"})]}),b&&n.jsx("p",{className:"text-center mt-4 text-sm text-muted-foreground",children:n.jsx(F,{to:"/",className:"text-primary font-semibold hover:underline",children:" Back to Main Site"})})]}),n.jsxs("div",{className:"mt-8 text-center",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Professional Project Management"}),n.jsxs("div",{className:"flex items-center justify-center gap-4",children:[n.jsx("span",{className:"text-lg",children:" Secure"}),n.jsx("span",{className:"text-lg",children:" Collaborative"}),n.jsx("span",{className:"text-lg",children:" Efficient"})]})]})]})}),n.jsx(Uw,{toasts:r}),n.jsx(he,{})]})}function nP(){const t=ae(),{toasts:e,showToast:r}=Fw(),{signUp:s,isSignedIn:i,loading:a}=ne(),[o,c]=S.useState("client"),[d,u]=S.useState(""),[m,f]=S.useState(""),[p,b]=S.useState(""),[E,k]=S.useState(""),[x,y]=S.useState(""),[v,j]=S.useState(!1),[I,M]=S.useState(!1),[P,N]=S.useState(!1),[w,T]=S.useState(!1);S.useEffect(()=>{i&&!a&&t("/dashboard")},[i,a,t]);const R=async D=>{if(D.preventDefault(),!d||!m||!p||!E||!x){r("Please fill in all fields","error");return}if(E!==x){r("Passwords do not match","error");return}if(E.length<6){r("Password must be at least 6 characters","error");return}if(!v){r("Please agree to terms and conditions","error");return}T(!0);try{await s({email:m,password:E,fullName:d,phone:p,role:o}),r("Account created successfully!","success")}catch(A){r(A.message||"Failed to create account","error")}finally{T(!1)}};return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted py-12",children:n.jsxs("div",{className:"container max-w-2xl",children:[n.jsxs("div",{className:"text-center mb-12",children:[n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Create Your Account"}),n.jsx("p",{className:"text-muted-foreground",children:"Join SpecCon Marketing Management Website platform"}),n.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4 mt-6 max-w-xl mx-auto",children:n.jsxs("p",{className:"text-sm text-foreground",children:[n.jsx("span",{className:"font-semibold",children:" Note:"})," Select your role carefully. Admin approval may be required for certain roles."]})})]}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("label",{className:"block text-sm font-semibold text-foreground mb-4",children:"Select Your Role"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:()=>c("client"),className:`p-6 rounded-lg border-2 transition text-center ${o==="client"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[n.jsx("div",{className:"text-4xl mb-2",children:""}),n.jsx("h3",{className:"font-bold text-foreground mb-1",children:"Client"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"View project progress, create tickets, communicate with team"})]}),n.jsxs("button",{onClick:()=>c("web_developer"),className:`p-6 rounded-lg border-2 transition text-center ${o==="web_developer"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[n.jsx("div",{className:"text-4xl mb-2",children:""}),n.jsx("h3",{className:"font-bold text-foreground mb-1",children:"Web Developer"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Work on assigned projects, manage tickets, track development stages"})]}),n.jsxs("button",{onClick:()=>c("social_media_coordinator"),className:`p-6 rounded-lg border-2 transition text-center ${o==="social_media_coordinator"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[n.jsx("div",{className:"text-4xl mb-2",children:""}),n.jsx("h3",{className:"font-bold text-foreground mb-1",children:"Social Media Coordinator"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Track social media metrics, manage analytics for assigned projects"})]})]})]}),n.jsxs("form",{onSubmit:R,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Full Name"}),n.jsx("input",{type:"text",value:d,onChange:D=>u(D.target.value),placeholder:"John Doe",className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Email Address"}),n.jsx("input",{type:"email",value:m,onChange:D=>f(D.target.value),placeholder:"you@example.com",className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Phone Number"}),n.jsx("input",{type:"tel",value:p,onChange:D=>b(D.target.value),placeholder:"+27 123 456 7890",className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Password"}),n.jsx("input",{type:"password",value:E,onChange:D=>k(D.target.value),placeholder:"",className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Confirm Password"}),n.jsx("input",{type:"password",value:x,onChange:D=>y(D.target.value),placeholder:"",className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20"})]}),n.jsx("div",{className:"bg-muted rounded-lg p-4 space-y-2",children:n.jsxs("label",{className:"flex items-start gap-3",children:[n.jsx("input",{type:"checkbox",checked:v,onChange:D=>j(D.target.checked),className:"mt-1"}),n.jsxs("span",{className:"text-sm text-foreground",children:["I agree to SpecCon Marketing Management Website's"," ",n.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-primary hover:underline",children:"Terms of Service"})," ","and"," ",n.jsx("button",{type:"button",onClick:()=>N(!0),className:"text-primary hover:underline",children:"Privacy Policy"})]})]})}),n.jsx("button",{type:"submit",disabled:w||a,className:"w-full btn-primary py-3 font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Creating Account...":"Create Account"})]}),n.jsxs("p",{className:"text-center mt-6 text-sm text-muted-foreground",children:["Already have an account?"," ",n.jsx(F,{to:"/login",className:"text-primary font-semibold hover:underline",children:"Sign in here"})]})]})]})}),n.jsx(Uw,{toasts:e}),I&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-background rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-background border-b border-border p-6 flex justify-between items-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Terms of Service"}),n.jsx("button",{onClick:()=>M(!1),className:"text-muted-foreground hover:text-foreground text-2xl",children:""})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"1. Acceptance of Terms"}),n.jsx("p",{className:"text-muted-foreground",children:"By accessing and using SpecCon Marketing Management Website, you accept and agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our platform."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"2. Eligibility"}),n.jsx("p",{className:"text-muted-foreground",children:"You must be at least 18 years old to use SpecCon Marketing Management Website. By using our platform, you represent and warrant that you meet this age requirement and have the legal capacity to enter into binding contracts."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"3. User Accounts"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"When creating an account, you agree to:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"Provide accurate and complete information"}),n.jsx("li",{children:"Maintain the security of your account credentials"}),n.jsx("li",{children:"Accept responsibility for all activities under your account"}),n.jsx("li",{children:"Notify us immediately of any unauthorized use"}),n.jsx("li",{children:"Not create multiple accounts or share accounts"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"4. User Responsibilities"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"All users agree to:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"Perform assigned tasks professionally and on time"}),n.jsx("li",{children:"Maintain confidentiality of client information"}),n.jsx("li",{children:"Communicate effectively with team members"}),n.jsx("li",{children:"Provide accurate project updates and analytics"}),n.jsx("li",{children:"Not engage in unauthorized access or data manipulation"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"5. Service Terms"}),n.jsx("p",{className:"text-muted-foreground",children:"SpecCon Marketing Management Website provides project management and collaboration tools. All project data remains the property of the client organization."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"6. Prohibited Activities"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"Users are prohibited from:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"Unauthorized access to other users' projects or data"}),n.jsx("li",{children:"Sharing confidential client information"}),n.jsx("li",{children:"Submitting false or misleading analytics data"}),n.jsx("li",{children:"Harassing other users or team members"}),n.jsx("li",{children:"Attempting to circumvent security measures"}),n.jsx("li",{children:"Reverse engineering or scraping the platform"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"7. Account Termination"}),n.jsx("p",{className:"text-muted-foreground",children:"We reserve the right to suspend or terminate accounts that violate these terms or engage in unauthorized activity."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"8. Governing Law"}),n.jsx("p",{className:"text-muted-foreground",children:"These terms are governed by the laws of South Africa. Any disputes will be resolved in the courts of South Africa."})]}),n.jsx("div",{className:"bg-muted p-4 rounded-lg",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("strong",{children:"Last Updated:"})," January 2025",n.jsx("br",{}),n.jsx("strong",{children:"Effective Date:"})," January 2025"]})})]}),n.jsx("div",{className:"sticky bottom-0 bg-background border-t border-border p-6",children:n.jsx("button",{onClick:()=>M(!1),className:"w-full btn-primary",children:"Close"})})]})}),P&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-background rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-background border-b border-border p-6 flex justify-between items-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Privacy Policy"}),n.jsx("button",{onClick:()=>N(!1),className:"text-muted-foreground hover:text-foreground text-2xl",children:""})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"1. Information We Collect"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"When you use SpecCon Marketing Management Website, we collect the following information:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"Personal information (name, email address, phone number)"}),n.jsx("li",{children:"Project files, documents, and assets"}),n.jsx("li",{children:"Website analytics and social media metrics"}),n.jsx("li",{children:"Ticket history and communications"}),n.jsx("li",{children:"Device information and IP address for security purposes"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"2. How We Use Your Information"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"We use your information to:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"Manage and track website development projects"}),n.jsx("li",{children:"Facilitate team collaboration and communication"}),n.jsx("li",{children:"Store and track analytics data"}),n.jsx("li",{children:"Communicate with you about your projects and tickets"}),n.jsx("li",{children:"Prevent unauthorized access and ensure platform security"}),n.jsx("li",{children:"Improve our services and user experience"}),n.jsx("li",{children:"Comply with legal obligations"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"3. Information Sharing"}),n.jsx("p",{className:"text-muted-foreground",children:"We do not sell your personal information. We may share your information with:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4 mt-2",children:[n.jsx("li",{children:"Payment processors to complete transactions"}),n.jsx("li",{children:"Service providers who assist in operating our platform"}),n.jsx("li",{children:"Law enforcement when required by law"}),n.jsx("li",{children:"Other users (limited information) necessary to complete transactions"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"4. Data Security"}),n.jsx("p",{className:"text-muted-foreground",children:"We implement industry-standard security measures to protect your personal information, including encryption, secure servers, and regular security audits. However, no method of transmission over the internet is 100% secure, and we cannot guarantee absolute security."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"5. Data Retention"}),n.jsx("p",{className:"text-muted-foreground",children:"We retain your personal information for as long as your account is active or as needed to provide services. Transaction records are kept for 7 years to comply with South African tax and financial regulations."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"6. Your Rights"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"Under the Protection of Personal Information Act (POPIA), you have the right to:"}),n.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[n.jsx("li",{children:"Access your personal information"}),n.jsx("li",{children:"Correct inaccurate information"}),n.jsx("li",{children:"Request deletion of your information (subject to legal requirements)"}),n.jsx("li",{children:"Object to processing of your information"}),n.jsx("li",{children:"Withdraw consent at any time"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"7. Cookies"}),n.jsx("p",{className:"text-muted-foreground",children:"We use cookies and similar technologies to improve your experience, analyze site usage, and assist in our marketing efforts. You can control cookie preferences through your browser settings."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"8. Third-Party Links"}),n.jsx("p",{className:"text-muted-foreground",children:"Our platform may contain links to third-party websites. We are not responsible for the privacy practices of these websites. We encourage you to review their privacy policies."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"5. Children's Privacy"}),n.jsx("p",{className:"text-muted-foreground",children:"SpecCon Marketing Management Website is a business platform not intended for users under the age of 18. We do not knowingly collect personal information from children."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-foreground mb-2",children:"6. Contact Us"}),n.jsx("p",{className:"text-muted-foreground",children:"If you have questions about this privacy policy, please contact us at:"}),n.jsxs("p",{className:"text-muted-foreground mt-2",children:["Email: privacy@speccon.co.za",n.jsx("br",{}),"Address: Cape Town, South Africa"]})]}),n.jsx("div",{className:"bg-muted p-4 rounded-lg",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("strong",{children:"Last Updated:"})," January 2025",n.jsx("br",{}),n.jsx("strong",{children:"Effective Date:"})," January 2025"]})})]}),n.jsx("div",{className:"sticky bottom-0 bg-background border-t border-border p-6",children:n.jsx("button",{onClick:()=>N(!1),className:"w-full btn-primary",children:"Close"})})]})}),n.jsx(he,{})]})}function sP(){const{isSignedIn:t,user:e,loading:r}=ne(),s=ae();return S.useEffect(()=>{if(!r){if(!t){s("/login");return}if(e)switch(e.role){case"admin":s("/admin/dashboard");break;case"web_developer":s("/developer/dashboard");break;case"social_media_coordinator":s("/coordinator/dashboard");break;case"client":s("/client-portal/dashboard");break;default:s("/")}}},[t,e,r,s]),n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading your dashboard..."})]})})}function mt({title:t,value:e,icon:r,trend:s,className:i=""}){return n.jsx("div",{className:`bg-gradient-to-br from-background to-muted/30 border border-border/50 rounded-xl p-8 shadow-sm hover:shadow-md transition-all duration-200 ${i}`,children:n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide mb-2",children:t}),n.jsx("p",{className:"text-3xl lg:text-4xl font-bold text-foreground leading-none",children:typeof e=="number"?ba(e):e}),s&&n.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[n.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${s.isPositive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:[s.isPositive?"":""," ",Math.abs(s.value),"%"]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last period"})]})]}),r&&n.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:n.jsx("div",{className:"text-primary w-6 h-6",children:r})})]})})}function It({status:t,className:e=""}){return n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${Vw(t)} ${e}`,children:KA(t)})}function Li({priority:t,className:e=""}){const r={low:"",medium:"",high:"",critical:""}[t];return n.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium border ${QA(t)} ${e}`,children:[n.jsx("span",{children:r}),YA(t)]})}function iP(){const{isSignedIn:t,user:e}=ne(),r=ae(),[s,i]=S.useState(10),[a,o]=S.useState(""),[c,d]=S.useState(1);if(S.useEffect(()=>{if(!t){r("/login");return}if(e&&e.role!=="admin"){r("/dashboard");return}},[t,e,r]),!t||!e||e.role!=="admin")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const u=bt(),m=Lt(),f=ve(),p={totalProjects:u.length,activeProjects:u.filter(P=>P.status==="active").length,totalUsers:f.length,openTickets:m.filter(P=>P.status==="open"||P.status==="in_progress").length},b=u.slice(0,5),E=m.slice(0,5),k=S.useMemo(()=>u.filter(P=>P.name.toLowerCase().includes(a.toLowerCase())||P.description.toLowerCase().includes(a.toLowerCase())||P.projectType.toLowerCase().includes(a.toLowerCase())),[u,a]),x=Math.ceil(k.length/s),y=(c-1)*s,v=y+s,j=k.slice(y,v);S.useEffect(()=>{d(1)},[a]),S.useEffect(()=>{c>x&&x>0&&d(x)},[s,x,c]);const I=P=>m.filter(N=>N.projectId===P).length,M=P=>{if(window.confirm("Are you sure you want to delete this project? This action cannot be undone.")){const w=JSON.parse(localStorage.getItem("marketing_management_website_projects")||"[]").filter(T=>T.id!==P);localStorage.setItem("marketing_management_website_projects",JSON.stringify(w)),window.location.reload()}};return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Admin Dashboard"}),n.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",e.fullName,"! Here's your system overview."]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx(mt,{title:"Total Projects",value:p.totalProjects,icon:n.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),n.jsx(mt,{title:"Active Projects",value:p.activeProjects,icon:n.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),n.jsx(mt,{title:"Total Users",value:p.totalUsers,icon:n.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),n.jsx(mt,{title:"Open Tickets",value:p.openTickets,icon:n.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})})]}),n.jsxs("div",{className:"card mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"flex gap-4 flex-wrap",children:[n.jsx(F,{to:"/admin/projects/new",className:"btn-primary",children:"+ New Project"}),n.jsx(F,{to:"/admin/projects",className:"btn-outline",children:"Manage Projects"}),n.jsx(F,{to:"/admin/users",className:"btn-outline",children:"Manage Users"})]})]}),n.jsxs("div",{className:"card mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-foreground",children:["All Projects (",k.length,")"]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Show"}),n.jsxs("select",{value:s,onChange:P=>i(Number(P.target.value)),className:"border border-border rounded px-2 py-1 bg-background text-foreground hover:border-primary focus:outline-none focus:ring-2 focus:ring-primary",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:25,children:"25"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"entries"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Search:"}),n.jsx("input",{type:"text",value:a,onChange:P=>o(P.target.value),className:"border border-border rounded px-3 py-1 bg-background text-foreground hover:border-primary focus:outline-none focus:ring-2 focus:ring-primary min-w-[200px]",placeholder:"Search projects..."})]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-primary text-primary-foreground",children:[n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"#"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Project Name"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Current Stage"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Client"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Developer"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Tickets"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Analytics"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:j.map((P,N)=>{const w=f.find(D=>D.id===P.clientId),T=f.find(D=>D.id===P.webDeveloperId);f.find(D=>D.id===P.socialMediaCoordinatorId);const R=I(P.id);return n.jsxs("tr",{className:`${N%2===0?"bg-background":"bg-muted/30"} hover:bg-secondary/10 transition border-b border-border`,children:[n.jsx("td",{className:"px-4 py-3 text-sm",children:y+N+1}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-foreground",children:P.name}),n.jsx("div",{className:"text-xs text-muted-foreground",children:P.description})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx(It,{status:P.status})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-primary/10 text-primary",children:Fn(P.currentStage)})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{className:"text-sm",children:w?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"font-medium text-foreground",children:w.fullName}),n.jsx("div",{className:"text-xs text-muted-foreground",children:w.email})]}):n.jsx("span",{className:"text-xs text-muted-foreground italic",children:"Not assigned"})})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{className:"text-sm",children:T?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"font-medium text-foreground",children:T.fullName}),n.jsx("div",{className:"text-xs text-muted-foreground",children:T.email})]}):n.jsx("span",{className:"text-xs text-muted-foreground italic",children:"Not assigned"})})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-semibold text-sm",children:R}),n.jsx(F,{to:`/admin/tickets?project=${P.id}`,className:"text-xs text-primary hover:underline",children:"View"})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs(F,{to:`/admin/analytics/${P.id}`,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-primary text-primary-foreground rounded text-xs font-medium hover:bg-primary/80 transition",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Analytics"]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(F,{to:`/admin/projects/${P.id}/edit`,className:"text-xs text-primary hover:underline",children:"Edit"}),n.jsx("button",{onClick:()=>M(P.id),className:"text-xs text-red-600 hover:underline",children:"Delete"})]})})]},P.id)})},`${s}-${c}`)]},`${s}-${c}`)}),x>1&&n.jsxs("div",{className:"flex items-center justify-between mt-6",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",y+1,"-",Math.min(v,k.length)," of ",k.length," projects"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>d(P=>Math.max(1,P-1)),disabled:c===1,className:"px-3 py-1 text-sm border border-border rounded hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,x)},(P,N)=>{const w=Math.max(1,Math.min(x-4,c-2))+N;return w>x?null:n.jsx("button",{onClick:()=>d(w),className:`px-3 py-1 text-sm border rounded ${w===c?"bg-primary text-primary-foreground border-primary":"border-border hover:bg-muted"}`,children:w},w)})}),n.jsx("button",{onClick:()=>d(P=>Math.min(x,P+1)),disabled:c===x,className:"px-3 py-1 text-sm border border-border rounded hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Recent Projects"}),n.jsx(F,{to:"/admin/projects",className:"text-primary hover:underline text-sm",children:"View All"})]}),n.jsx("div",{className:"space-y-4",children:b.map(P=>{const N=f.find(w=>w.id===P.clientId);return n.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:P.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:N==null?void 0:N.fullName})]}),n.jsx(It,{status:P.status})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Stage: ",n.jsx("span",{className:"text-foreground",children:Fn(P.currentStage)})]}),n.jsx("span",{className:"text-muted-foreground",children:lr(P.updatedAt)})]})]},P.id)})})]}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Recent Tickets"}),n.jsx(F,{to:"/tickets",className:"text-primary hover:underline text-sm",children:"View All"})]}),n.jsx("div",{className:"space-y-4",children:E.map(P=>{const N=u.find(w=>w.id===P.projectId);return n.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:P.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:N==null?void 0:N.name})]}),n.jsx(Li,{priority:P.priority})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx(It,{status:P.status}),n.jsx("span",{className:"text-xs text-muted-foreground",children:lr(P.createdAt)})]})]},P.id)})})]})]})]})}),n.jsx(he,{})]})}/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bw=(...t)=>t.filter((e,r,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:o,...c},d)=>S.createElement("svg",{ref:d,...oP,width:e,height:e,stroke:t,strokeWidth:s?Number(r)*24/Number(e):r,className:Bw("lucide",i),...c},[...o.map(([u,m])=>S.createElement(u,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=(t,e)=>{const r=S.forwardRef(({className:s,...i},a)=>S.createElement(lP,{ref:a,iconNode:e,className:Bw(`lucide-${aP(t)}`,s),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=pd("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=pd("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=pd("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=pd("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);function mP(){const{isSignedIn:t,user:e}=ne(),r=ae(),[s,i]=S.useState([]);S.useEffect(()=>{t?(e==null?void 0:e.role)!=="admin"&&r("/dashboard"):r("/login")},[t,e,r]),S.useEffect(()=>{i(ve())},[]);const a=d=>{r("/admin/users/"+d+"/edit")},o=d=>{uk(d),i(ve())},c=d=>{if(e){if(d===e.id){alert("You cannot delete your own account.");return}window.confirm("Are you sure you want to delete this user? This action cannot be undone.")&&(vk(d)?i(ve()):alert("Failed to delete user."))}};return!e||e.role!=="admin"?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Manage Users"}),n.jsx("p",{className:"text-muted-foreground",children:"View and manage all system users and their roles."})]}),n.jsx(F,{to:"/admin/dashboard",className:"btn-outline",children:" Back to Dashboard"})]})}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-foreground",children:["All Users (",s.length,")"]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("label",{className:"text-sm text-muted-foreground",children:["Show"," ",n.jsxs("select",{className:"border border-border rounded px-2 py-1 bg-background text-foreground",defaultValue:"50",children:[n.jsx("option",{value:"10",children:"10"}),n.jsx("option",{value:"25",children:"25"}),n.jsx("option",{value:"50",children:"50"}),n.jsx("option",{value:"100",children:"100"})]})," ","entries"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Search:"}),n.jsx("input",{type:"text",className:"border border-border rounded px-3 py-1 bg-background text-foreground",placeholder:"Search users..."})]}),n.jsx(F,{to:"/admin/users/new",className:"btn-primary",children:"+ New User"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-primary text-primary-foreground",children:[n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"#"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Name"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Email"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Role"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Phone"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Joined"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:s.map((d,u)=>n.jsxs("tr",{className:`${u%2===0?"bg-background":"bg-muted/30"} hover:bg-secondary/10 transition border-b border-border`,children:[n.jsx("td",{className:"px-4 py-3 text-sm",children:u+1}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{children:n.jsx("div",{className:"font-semibold text-foreground",children:d.fullName})})}),n.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:d.email}),n.jsx("td",{className:"px-4 py-3",children:n.jsx(Ow,{role:d.role})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${d.isActive?"bg-green-100 text-green-700 border-green-200":"bg-gray-100 text-gray-700 border-gray-200"}`,children:d.isActive?"Active":"Inactive"})}),n.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:d.phone}),n.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:lr(d.createdAt)}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"text-xs text-primary hover:underline",onClick:()=>a(d.id),title:"Edit",children:n.jsx(cP,{className:"h-4 w-4"})}),n.jsx("button",{className:"text-xs text-red-600 hover:underline",onClick:()=>o(d.id),title:d.isActive?"Deactivate":"Activate",children:d.isActive?n.jsx(hP,{className:"h-4 w-4"}):n.jsx(uP,{className:"h-4 w-4"})}),d.role!=="admin"&&n.jsx("button",{className:"text-xs text-red-600 hover:underline",onClick:()=>c(d.id),title:"Delete",children:n.jsx(dP,{className:"h-4 w-4"})})]})})]},d.id))})]})})]})]})}),n.jsx(he,{})]})}function fP(){const{isSignedIn:t,user:e}=ne(),r=ae(),i=jo().id,[a,o]=S.useState(!1),[c,d]=S.useState(!0),[u,m]=S.useState(""),[f,p]=S.useState(null),[b,E]=S.useState({fullName:"",email:"",phone:"",role:"client",isActive:!0,changePassword:!1,newPassword:"",confirmPassword:""});if(S.useEffect(()=>{t?(e==null?void 0:e.role)!=="admin"&&r("/dashboard"):r("/login")},[t,e,r]),S.useEffect(()=>{if(i){const x=fk(i);x?(p(x),E({fullName:x.fullName,email:x.email,phone:x.phone,role:x.role,isActive:x.isActive,changePassword:!1,newPassword:"",confirmPassword:""}),d(!1)):r("/admin/users")}},[i,r]),!e||e.role!=="admin")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});if(c||!f)return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}),n.jsx(he,{})]});const k=async x=>{if(x.preventDefault(),m(""),!b.fullName||!b.email||!b.phone){m("Please fill in all required fields");return}if(b.changePassword){if(!b.newPassword||!b.confirmPassword){m("Please enter and confirm the new password");return}if(b.newPassword!==b.confirmPassword){m("Passwords do not match");return}if(b.newPassword.length<6){m("Password must be at least 6 characters long");return}}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b.email)){m("Please enter a valid email address");return}o(!0);try{dk(i,{email:b.email,fullName:b.fullName,phone:b.phone,role:b.role,isActive:b.isActive,...b.changePassword&&{password:b.newPassword}}),r("/admin/users")}catch{m("Failed to update user. Please try again."),o(!1)}};return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx(F,{to:"/admin/users",className:"text-primary hover:text-primary/80 transition",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),n.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Edit User"})]}),n.jsx("p",{className:"text-muted-foreground",children:"Update user information and role assignment"})]}),n.jsx("div",{className:"max-w-2xl mx-auto",children:n.jsxs("form",{onSubmit:k,className:"card",children:[u&&n.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",children:u}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"fullName",className:"block text-sm font-medium text-foreground mb-2",children:["Full Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",id:"fullName",value:b.fullName,onChange:x=>E({...b,fullName:x.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground",placeholder:"Enter full name",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-2",children:["Email Address ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",id:"email",value:b.email,onChange:x=>E({...b,email:x.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground",placeholder:"user@example.com",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-foreground mb-2",children:["Phone Number ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"tel",id:"phone",value:b.phone,onChange:x=>E({...b,phone:x.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground",placeholder:"+27821234567",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"role",className:"block text-sm font-medium text-foreground mb-2",children:["User Role ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{id:"role",value:b.role,onChange:x=>E({...b,role:x.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground",required:!0,disabled:f.id===e.id,children:[n.jsx("option",{value:"client",children:"Client - Can view projects and create tickets"}),n.jsx("option",{value:"web_developer",children:"Web Developer - Can manage projects and tickets"}),n.jsx("option",{value:"social_media_coordinator",children:"Social Media Coordinator - Can manage social media and analytics"}),n.jsx("option",{value:"admin",children:"Admin - Full system access"})]}),f.id===e.id&&n.jsx("p",{className:"mt-2 text-sm text-amber-600",children:"You cannot change your own role"}),f.id!==e.id&&n.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Select the appropriate role based on user responsibilities"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",checked:b.isActive,onChange:x=>E({...b,isActive:x.target.checked}),className:"w-5 h-5 border border-border rounded",disabled:f.id===e.id}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:"Active User (can sign in to the system)"})]}),f.id===e.id&&n.jsx("p",{className:"mt-2 text-sm text-amber-600",children:"You cannot deactivate your own account"})]}),n.jsxs("div",{className:"pt-6 border-t border-border",children:[n.jsxs("label",{className:"flex items-center gap-3 mb-4",children:[n.jsx("input",{type:"checkbox",checked:b.changePassword,onChange:x=>E({...b,changePassword:x.target.checked}),className:"w-5 h-5 border border-border rounded"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:"Change Password"})]}),b.changePassword&&n.jsxs("div",{className:"space-y-4 ml-8",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-foreground mb-2",children:["New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"password",id:"newPassword",value:b.newPassword,onChange:x=>E({...b,newPassword:x.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground",placeholder:"Enter new password (min. 6 characters)",minLength:6})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-foreground mb-2",children:["Confirm New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"password",id:"confirmPassword",value:b.confirmPassword,onChange:x=>E({...b,confirmPassword:x.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground",placeholder:"Re-enter new password",minLength:6})]})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t border-border",children:[n.jsx(F,{to:"/admin/users",className:"btn-outline",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:a,className:"btn-primary",children:a?"Updating User...":"Update User"})]})]})})]})}),n.jsx(he,{})]})}function pP(){const{isSignedIn:t,user:e}=ne(),r=ae(),[s,i]=S.useState(10),[a,o]=S.useState(""),[c,d]=S.useState(1);if(S.useEffect(()=>{t?(e==null?void 0:e.role)!=="admin"&&r("/dashboard"):r("/login")},[t,e,r]),!e||e.role!=="admin")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const u=bt(),m=ve(),f=Lt(),p=S.useMemo(()=>u.filter(j=>j.name.toLowerCase().includes(a.toLowerCase())||j.description.toLowerCase().includes(a.toLowerCase())||j.projectType.toLowerCase().includes(a.toLowerCase())),[u,a]),b=Math.ceil(p.length/s),E=(c-1)*s,k=E+s,x=p.slice(E,k);S.useEffect(()=>{d(1)},[a]);const y=j=>f.filter(I=>I.projectId===j).length,v=j=>{if(window.confirm("Are you sure you want to delete this project? This action cannot be undone.")){const M=JSON.parse(localStorage.getItem("marketing_management_website_projects")||"[]").filter(P=>P.id!==j);localStorage.setItem("marketing_management_website_projects",JSON.stringify(M)),window.location.reload()}};return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Manage Projects"}),n.jsx("p",{className:"text-muted-foreground",children:"View and manage all projects in the system."})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx(F,{to:"/admin/dashboard",className:"btn-outline",children:" Back to Dashboard"}),n.jsx(F,{to:"/admin/projects/new",className:"btn-primary",children:"+ New Project"})]})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsxs("h2",{className:"text-2xl font-bold text-foreground",children:["All Projects (",p.length,")"]})}),n.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Show"}),n.jsxs("select",{value:s,onChange:j=>i(Number(j.target.value)),className:"border border-border rounded px-2 py-1 bg-background text-foreground hover:border-primary focus:outline-none focus:ring-2 focus:ring-primary cursor-pointer",style:{cursor:"pointer",pointerEvents:"auto"},children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:25,children:"25"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"entries"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Search:"}),n.jsx("input",{type:"text",value:a,onChange:j=>o(j.target.value),className:"border border-border rounded px-3 py-1 bg-background text-foreground hover:border-primary focus:outline-none focus:ring-2 focus:ring-primary min-w-[200px]",placeholder:"Search projects..."})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-primary text-primary-foreground",children:[n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"#"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Project Name"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Current Stage"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Client"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Developer"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Tickets"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Analytics"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:x.map((j,I)=>{const M=m.find(w=>w.id===j.clientId),P=m.find(w=>w.id===j.webDeveloperId);m.find(w=>w.id===j.socialMediaCoordinatorId);const N=y(j.id);return n.jsxs("tr",{className:`${I%2===0?"bg-background":"bg-muted/30"} hover:bg-secondary/10 transition border-b border-border`,children:[n.jsx("td",{className:"px-4 py-3 text-sm",children:E+I+1}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-foreground",children:j.name}),n.jsx("div",{className:"text-xs text-muted-foreground",children:j.description})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx(It,{status:j.status})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-primary/10 text-primary",children:Fn(j.currentStage)})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{className:"text-sm",children:M?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"font-medium text-foreground",children:M.fullName}),n.jsx("div",{className:"text-xs text-muted-foreground",children:M.email})]}):n.jsx("span",{className:"text-xs text-muted-foreground italic",children:"Not assigned"})})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{className:"text-sm",children:P?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"font-medium text-foreground",children:P.fullName}),n.jsx("div",{className:"text-xs text-muted-foreground",children:P.email})]}):n.jsx("span",{className:"text-xs text-muted-foreground italic",children:"Not assigned"})})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-semibold text-sm",children:N}),n.jsx(F,{to:`/admin/tickets?project=${j.id}`,className:"text-xs text-primary hover:underline",children:"View"})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs(F,{to:`/admin/analytics/${j.id}`,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-primary text-primary-foreground rounded text-xs font-medium hover:bg-primary/80 transition",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Analytics"]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(F,{to:`/admin/projects/${j.id}/edit`,className:"text-xs text-primary hover:underline",children:"Edit"}),n.jsx("button",{onClick:()=>v(j.id),className:"text-xs text-red-600 hover:underline",children:"Delete"})]})})]},j.id)})})]})}),b>1&&n.jsxs("div",{className:"flex items-center justify-between mt-6",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",E+1,"-",Math.min(k,p.length)," of ",p.length," projects"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>d(j=>Math.max(1,j-1)),disabled:c===1,className:"px-3 py-1 text-sm border border-border rounded hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,b)},(j,I)=>{const M=Math.max(1,Math.min(b-4,c-2))+I;return M>b?null:n.jsx("button",{onClick:()=>d(M),className:`px-3 py-1 text-sm border rounded ${M===c?"bg-primary text-primary-foreground border-primary":"border-border hover:bg-muted"}`,children:M},M)})}),n.jsx("button",{onClick:()=>d(j=>Math.min(b,j+1)),disabled:c===b,className:"px-3 py-1 text-sm border border-border rounded hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})}),n.jsx(he,{})]})}function gP(){var v;const{isSignedIn:t,user:e}=ne(),r=ae(),[s]=sk(),[i,a]=S.useState(10),[o,c]=S.useState(""),[d,u]=S.useState(1);if(S.useEffect(()=>{t?(e==null?void 0:e.role)!=="admin"&&r("/dashboard"):r("/login")},[t,e,r]),!e||e.role!=="admin")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const m=Lt(),f=bt();ve();const p=s.get("project");let b=m;p&&(b=m.filter(j=>j.projectId===p)),b=b.filter(j=>j.title.toLowerCase().includes(o.toLowerCase())||j.description.toLowerCase().includes(o.toLowerCase()));const E=Math.ceil(b.length/i),k=(d-1)*i,x=k+i,y=b.slice(k,x);return S.useEffect(()=>{u(1)},[o]),n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:p?`Tickets for ${((v=f.find(j=>j.id===p))==null?void 0:v.name)||"Project"}`:"All Tickets"}),n.jsx("p",{className:"text-muted-foreground",children:p?"View all tickets for this project":"View and manage all tickets in the system"})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx(F,{to:"/admin/dashboard",className:"btn-outline",children:" Back to Dashboard"}),p&&n.jsx(F,{to:`/admin/projects/${p}`,className:"btn-outline",children:"View Project"})]})]})}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsxs("h2",{className:"text-2xl font-bold text-foreground",children:["Tickets (",b.length,")"]})}),n.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Show"}),n.jsxs("select",{value:i,onChange:j=>a(Number(j.target.value)),className:"border border-border rounded px-2 py-1 bg-background text-foreground hover:border-primary focus:outline-none focus:ring-2 focus:ring-primary",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:25,children:"25"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"entries"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Search:"}),n.jsx("input",{type:"text",value:o,onChange:j=>c(j.target.value),className:"border border-border rounded px-3 py-1 bg-background text-foreground hover:border-primary focus:outline-none focus:ring-2 focus:ring-primary min-w-[200px]",placeholder:"Search tickets..."})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-primary text-primary-foreground",children:[n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"#"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Title"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Project"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Priority"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Type"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Created"})]})}),n.jsx("tbody",{children:y.map((j,I)=>{const M=f.find(P=>P.id===j.projectId);return n.jsxs("tr",{className:`${I%2===0?"bg-background":"bg-muted/30"} hover:bg-secondary/10 transition border-b border-border`,children:[n.jsx("td",{className:"px-4 py-3 text-sm",children:k+I+1}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-foreground",children:j.title}),n.jsx("div",{className:"text-xs text-muted-foreground",children:j.description})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{className:"text-sm",children:M?n.jsx("div",{className:"font-medium text-foreground",children:M.name}):n.jsx("span",{className:"text-xs text-muted-foreground italic",children:"Unknown Project"})})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx(Li,{priority:j.priority})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx(It,{status:j.status})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 capitalize",children:j.type.replace("_"," ")})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"text-sm text-muted-foreground",children:lr(j.createdAt)})})]},j.id)})})]})}),E>1&&n.jsxs("div",{className:"flex items-center justify-between mt-6",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",k+1,"-",Math.min(x,b.length)," of ",b.length," tickets"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>u(j=>Math.max(1,j-1)),disabled:d===1,className:"px-3 py-1 text-sm border border-border rounded hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,E)},(j,I)=>{const M=Math.max(1,Math.min(E-4,d-2))+I;return M>E?null:n.jsx("button",{onClick:()=>u(M),className:`px-3 py-1 text-sm border rounded ${M===d?"bg-primary text-primary-foreground border-primary":"border-border hover:bg-muted"}`,children:M},M)})}),n.jsx("button",{onClick:()=>u(j=>Math.min(E,j+1)),disabled:d===E,className:"px-3 py-1 text-sm border border-border rounded hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})}),n.jsx(he,{})]})}function xP(){const{isSignedIn:t,user:e}=ne(),r=ae(),i=jo().id,[a,o]=S.useState(null),[c,d]=S.useState([]),[u,m]=S.useState({name:"",description:"",websiteUrl:"",googleAnalyticsPropertyId:"",googleAnalyticsViewId:"",clientId:"",webDeveloperId:"",socialMediaCoordinatorId:"",currentStage:"planning",status:"active",notes:""});S.useEffect(()=>{if(!t){r("/login");return}if((e==null?void 0:e.role)!=="admin"){r("/dashboard");return}const x=wo(i);if(!x){r("/admin/dashboard");return}o(x),m({name:x.name,description:x.description,websiteUrl:x.websiteUrl||"",googleAnalyticsPropertyId:x.googleAnalyticsPropertyId||"",googleAnalyticsViewId:x.googleAnalyticsViewId||"",clientId:x.clientId,webDeveloperId:x.webDeveloperId||"",socialMediaCoordinatorId:x.socialMediaCoordinatorId||"",currentStage:x.currentStage,status:x.status,notes:x.notes||""});const y=ve();d(y)},[t,e,i,r]);const f=x=>{x.preventDefault();const y=JSON.parse(localStorage.getItem("marketing_management_website_projects")||"[]"),v=y.findIndex(j=>j.id===i);v!==-1&&(y[v]={...y[v],...u,webDeveloperId:u.webDeveloperId||void 0,socialMediaCoordinatorId:u.socialMediaCoordinatorId||void 0,updatedAt:new Date},localStorage.setItem("marketing_management_website_projects",JSON.stringify(y)),alert("Project updated successfully!"),r("/admin/dashboard"))},p=x=>{const{name:y,value:v}=x.target;m(j=>({...j,[y]:v}))};if(!a)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const b=c.filter(x=>x.role==="client"),E=c.filter(x=>x.role==="web_developer"),k=c.filter(x=>x.role==="social_media_coordinator");return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsx("div",{className:"container py-12",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("button",{onClick:()=>r(-1),className:"flex items-center gap-2 text-primary hover:underline mb-4",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Dashboard"]}),n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Edit Project"}),n.jsx("p",{className:"text-muted-foreground",children:"Update project details and assignments"})]}),n.jsx("form",{onSubmit:f,className:"card",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Basic Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Project Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"name",value:u.name,onChange:p,required:!0,className:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"description",value:u.description,onChange:p,required:!0,rows:3,className:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Website URL"}),n.jsx("input",{type:"url",name:"websiteUrl",value:u.websiteUrl,onChange:p,placeholder:"https://example.com",className:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground"})]})]})]}),n.jsxs("div",{className:"pt-6 border-t border-border",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Team Assignment"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Client ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"clientId",value:u.clientId,onChange:p,required:!0,className:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground",children:[n.jsx("option",{value:"",children:"Select a client"}),b.map(x=>n.jsxs("option",{value:x.id,children:[x.fullName," (",x.email,")"]},x.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Web Developer"}),n.jsxs("select",{name:"webDeveloperId",value:u.webDeveloperId,onChange:p,className:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground",children:[n.jsx("option",{value:"",children:"Not assigned"}),E.map(x=>n.jsxs("option",{value:x.id,children:[x.fullName," (",x.email,")"]},x.id))]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Developer will see this project in their dashboard and can work on tickets"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Social Media Coordinator"}),n.jsxs("select",{name:"socialMediaCoordinatorId",value:u.socialMediaCoordinatorId,onChange:p,className:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground",children:[n.jsx("option",{value:"",children:"Not assigned"}),k.map(x=>n.jsxs("option",{value:x.id,children:[x.fullName," (",x.email,")"]},x.id))]})]})]})]}),n.jsxs("div",{className:"pt-6 border-t border-border",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Project Status"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Current Stage ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"currentStage",value:u.currentStage,onChange:p,required:!0,className:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground",children:[n.jsx("option",{value:"planning",children:"Planning"}),n.jsx("option",{value:"design",children:"Design"}),n.jsx("option",{value:"development",children:"Development"}),n.jsx("option",{value:"testing",children:"Testing"}),n.jsx("option",{value:"launch",children:"Launch"}),n.jsx("option",{value:"maintenance",children:"Maintenance"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Status ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"status",value:u.status,onChange:p,required:!0,className:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"paused",children:"Paused"}),n.jsx("option",{value:"completed",children:"Completed"})]})]})]})]}),n.jsxs("div",{className:"pt-6 border-t border-border",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Google Analytics"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"GA4 Property ID"}),n.jsx("input",{type:"text",name:"googleAnalyticsPropertyId",value:u.googleAnalyticsPropertyId,onChange:p,placeholder:"G-XXXXXXXXXX",className:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"View ID (Legacy)"}),n.jsx("input",{type:"text",name:"googleAnalyticsViewId",value:u.googleAnalyticsViewId,onChange:p,placeholder:"123456789",className:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground"})]})]})]}),n.jsxs("div",{className:"pt-6 border-t border-border",children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Notes"}),n.jsx("textarea",{name:"notes",value:u.notes,onChange:p,rows:4,placeholder:"Add any additional notes about this project...",className:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground"})]}),n.jsxs("div",{className:"flex items-center gap-4 pt-6 border-t border-border",children:[n.jsx("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-[#1e2875] to-[#2a3488] text-white rounded-lg font-semibold hover:from-[#2a3488] hover:to-[#1e2875] transition",children:"Save Changes"}),n.jsx("button",{type:"button",onClick:()=>r(-1),className:"px-6 py-3 border border-border rounded-lg font-semibold hover:bg-muted transition",children:"Cancel"})]})]})})]})})}),n.jsx(he,{})]})}function yP(){const{isSignedIn:t,user:e}=ne(),r=ae(),i=jo().id,[a,o]=S.useState(null);if(S.useEffect(()=>{if(!t){r("/login");return}if((e==null?void 0:e.role)!=="admin"){r("/dashboard");return}const d=wo(i);if(!d){r("/admin/dashboard");return}o(d)},[t,e,i,r]),!a)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const c={pageViews:12543,uniqueVisitors:8921,bounceRate:42.3,avgSessionDuration:"3:24",topPages:[{page:"/",views:4521},{page:"/about",views:3214},{page:"/services",views:2890},{page:"/contact",views:1988}],trafficSources:[{source:"Organic Search",sessions:5234,percentage:45.2},{source:"Direct",sessions:3121,percentage:27},{source:"Social Media",sessions:1890,percentage:16.3},{source:"Referral",sessions:1456,percentage:12.6}]};return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>r(-1),className:"flex items-center gap-2 text-primary hover:underline mb-4",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back"]}),n.jsxs("h1",{className:"text-4xl font-bold text-foreground mb-2",children:["Analytics for ",a.name]}),n.jsx("p",{className:"text-muted-foreground",children:"Google Analytics data and insights"})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx(F,{to:`/admin/projects/${i}`,className:"btn-outline",children:"View Project"}),n.jsx(F,{to:`/admin/projects/${i}/edit`,className:"btn-primary",children:"Edit Project"})]})]})}),n.jsxs("div",{className:"card mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Google Analytics Configuration"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"GA4 Property ID"}),n.jsx("div",{className:"font-mono text-foreground",children:a.googleAnalyticsPropertyId||"Not configured"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Analytics View ID (Legacy)"}),n.jsx("div",{className:"font-mono text-foreground",children:a.googleAnalyticsViewId||"Not configured"})]})]}),a.websiteUrl&&n.jsxs("div",{className:"mt-4",children:[n.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Website URL"}),n.jsx("a",{href:a.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:a.websiteUrl})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsxs("div",{className:"card text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:c.pageViews.toLocaleString()}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Page Views"})]}),n.jsxs("div",{className:"card text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:c.uniqueVisitors.toLocaleString()}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Unique Visitors"})]}),n.jsxs("div",{className:"card text-center",children:[n.jsxs("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:[c.bounceRate,"%"]}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Bounce Rate"})]}),n.jsxs("div",{className:"card text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:c.avgSessionDuration}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg. Session Duration"})]})]}),n.jsxs("div",{className:"card mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Top Pages"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-primary text-primary-foreground",children:[n.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-primary/50",children:"Page"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Page Views"})]})}),n.jsx("tbody",{children:c.topPages.map((d,u)=>n.jsxs("tr",{className:u%2===0?"bg-white":"bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 font-mono text-sm",children:d.page}),n.jsx("td",{className:"px-4 py-3",children:d.views.toLocaleString()})]},u))})]})})]}),n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Traffic Sources"}),n.jsx("div",{className:"space-y-4",children:c.trafficSources.map((d,u)=>n.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-foreground",children:d.source}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.sessions.toLocaleString()," sessions"]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:"text-lg font-bold text-primary",children:[d.percentage,"%"]})})]},u))})]})]})}),n.jsx(he,{})]})}function vP(){const{user:t}=ne(),[e,r]=S.useState(()=>localStorage.getItem("useMockAuth")!=="false"),s=()=>{const i=!e;r(i),localStorage.setItem("useMockAuth",i.toString()),alert(`Authentication mode changed to ${i?"Mock":"Firebase"}. Please refresh the page for changes to take effect.`)};return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12 max-w-4xl",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"System Notifications"}),n.jsx("p",{className:"text-muted-foreground",children:"Important system information and connection guides"})]}),n.jsx(F,{to:"/admin/dashboard",className:"btn-outline",children:" Back to Dashboard"})]})}),n.jsxs("div",{className:"card mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:" Authentication System Connection Guide"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"p-4 bg-secondary/10 border border-secondary/20 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-semibold text-primary mb-2",children:"Current Authentication Status"}),n.jsxs("p",{className:"text-primary/80 mb-4",children:[n.jsx("strong",{children:"Status:"})," ",e?"Mock Authentication Active (localStorage-based)":"Firebase Authentication Active",n.jsx("br",{}),n.jsx("strong",{children:"Note:"})," ",e?"Currently using demo authentication for testing.":"Using production Firebase authentication."]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("button",{onClick:s,className:"btn-primary",children:["Switch to ",e?"Firebase":"Mock"," Auth"]}),n.jsx("span",{className:"text-sm text-primary",children:" Requires page refresh to take effect"})]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:" Mock Authentication (Current)"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-muted-foreground",children:"Uses localStorage for authentication state and data persistence. Perfect for development and testing."}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold mb-2",children:"How to Use:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[n.jsx("li",{children:"Use test credentials (admin@system.com, dev@system.com, etc.)"}),n.jsx("li",{children:"Data persists in browser localStorage"}),n.jsx("li",{children:"No Firebase setup required"}),n.jsx("li",{children:"Clear localStorage to reset all data"})]})]}),n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:" Advantages:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-green-700",children:[n.jsx("li",{children:"Works offline"}),n.jsx("li",{children:"Fast development setup"}),n.jsx("li",{children:"No external dependencies"}),n.jsx("li",{children:"Data persists across sessions"})]})]})]})]}),n.jsxs("div",{className:"border border-orange-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:" Firebase Authentication"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-muted-foreground",children:"Production-ready authentication with Firebase Auth and Firestore database."}),n.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Setup Steps:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm",children:[n.jsxs("li",{children:["Create a Firebase project at ",n.jsx("a",{href:"https://console.firebase.google.com",className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Firebase Console"})]}),n.jsx("li",{children:"Enable Authentication and Firestore Database"}),n.jsxs("li",{children:["Copy your Firebase config to ",n.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"src/lib/firebase.ts"})]}),n.jsxs("li",{children:["In ",n.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"context/auth-context.tsx"}),", change ",n.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"USE_MOCK_AUTH = false"})]}),n.jsx("li",{children:"Create user accounts in Firebase Auth for testing"}),n.jsx("li",{children:"Set up Firestore security rules for data access"})]})]}),n.jsxs("div",{className:"bg-secondary/10 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-primary mb-2",children:" Switching to Firebase:"}),n.jsxs("div",{className:"bg-gray-100 p-3 rounded text-sm font-mono mb-2",children:["// In context/auth-context.tsx",n.jsx("br",{}),"const USE_MOCK_AUTH = false"]}),n.jsx("p",{className:"text-sm text-primary/80",children:"After changing this setting, restart the development server and use Firebase accounts."})]}),n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:" Production Benefits:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-green-700",children:[n.jsx("li",{children:"Secure user authentication"}),n.jsx("li",{children:"Real-time data synchronization"}),n.jsx("li",{children:"Scalable database solution"}),n.jsx("li",{children:"User management dashboard"})]})]})]})]}),n.jsxs("div",{className:"border border-purple-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:" Connection Status"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:`p-4 border rounded-lg ${e?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[n.jsx("h4",{className:"font-semibold text-green-800",children:"Mock Auth"}),n.jsx("p",{className:"text-sm text-green-700",children:e?" Connected (Active)":" Not Connected (Inactive)"})]}),n.jsxs("div",{className:`p-4 border rounded-lg ${e?"bg-gray-50 border-gray-200":"bg-green-50 border-green-200"}`,children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:"Firebase"}),n.jsx("p",{className:"text-sm text-gray-700",children:e?" Not Connected (Inactive)":" Connected (Active)"})]})]})]})]})]}),n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:" Quick Actions"}),n.jsxs("div",{className:"flex gap-4 flex-wrap",children:[n.jsx(F,{to:"/admin/dashboard",className:"btn-primary",children:"Admin Dashboard"}),n.jsx(F,{to:"/login",className:"btn-outline",children:"Test Login"}),n.jsx("button",{onClick:()=>{confirm("Clear all localStorage data? This will reset mock authentication.")&&(localStorage.clear(),window.location.reload())},className:"btn-outline border-red-200 text-red-600 hover:bg-red-50",children:"Reset Mock Data"})]})]})]})}),n.jsx(he,{})]})}function bP(){const{isSignedIn:t,user:e}=ne(),r=ae(),[s,i]=S.useState({fullName:"",email:"",phone:"",role:"client",password:"",isActive:!0}),[a,o]=S.useState(!1);if(S.useEffect(()=>{t?(e==null?void 0:e.role)!=="admin"&&r("/dashboard"):r("/login")},[t,e,r]),!e||e.role!=="admin")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const c=async d=>{d.preventDefault(),o(!0);try{const u={id:`user-${Date.now()}`,...s,createdAt:new Date,updatedAt:new Date};mk(u),alert(`User "${s.fullName}" created successfully!`),r("/admin/users")}catch(u){console.error("Error creating user:",u),alert("Failed to create user. Please try again.")}finally{o(!1)}};return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12 max-w-2xl",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Create New User"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Add a new user to the system"}),n.jsxs(F,{to:"/admin/users",className:"btn-outline inline-flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Users"]})]}),n.jsxs("form",{onSubmit:c,className:"card space-y-6",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"User Details"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-foreground mb-2",children:"Full Name *"}),n.jsx("input",{type:"text",id:"fullName",required:!0,value:s.fullName,onChange:d=>i({...s,fullName:d.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter full name"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-2",children:"Email Address *"}),n.jsx("input",{type:"email",id:"email",required:!0,value:s.email,onChange:d=>i({...s,email:d.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter email address"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-foreground mb-2",children:"Phone Number *"}),n.jsx("input",{type:"tel",id:"phone",required:!0,value:s.phone,onChange:d=>i({...s,phone:d.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter phone number"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-foreground mb-2",children:"Role *"}),n.jsxs("select",{id:"role",required:!0,value:s.role,onChange:d=>i({...s,role:d.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[n.jsx("option",{value:"client",children:"Client"}),n.jsx("option",{value:"web_developer",children:"Web Developer"}),n.jsx("option",{value:"social_media_coordinator",children:"Social Media Coordinator"}),n.jsx("option",{value:"admin",children:"Admin"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground mb-2",children:"Password *"}),n.jsx("input",{type:"password",id:"password",required:!0,value:s.password,onChange:d=>i({...s,password:d.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter password",minLength:6})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",id:"isActive",checked:s.isActive,onChange:d=>i({...s,isActive:d.target.checked}),className:"w-4 h-4 text-primary focus:ring-primary rounded"}),n.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-foreground",children:"Active User"})]})]}),n.jsxs("div",{className:"flex gap-4 pt-4",children:[n.jsx("button",{type:"submit",disabled:a,className:"btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Creating...":"Create User"}),n.jsx("button",{type:"button",onClick:()=>r("/admin/users"),className:"btn-outline flex-1",disabled:a,children:"Cancel"})]})]})]})}),n.jsx(he,{})]})}function jP(){const{isSignedIn:t,user:e}=ne(),r=ae();if(S.useEffect(()=>{t?(e==null?void 0:e.role)!=="web_developer"&&r("/dashboard"):r("/login")},[t,e,r]),!e||e.role!=="web_developer")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const s=kr(e.id,e.role),i=No(e.id,e.role),a={assignedProjects:s.length,openTickets:i.filter(d=>d.status==="open").length,inProgressTickets:i.filter(d=>d.status==="in_progress").length,resolvedTickets:i.filter(d=>d.status==="resolved").length},o=s.slice(0,3),c=i.slice(0,5);return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Developer Dashboard"}),n.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",e.fullName,"! Here's your project overview."]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx(mt,{title:"Assigned Projects",value:a.assignedProjects,icon:n.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),n.jsx(mt,{title:"Open Tickets",value:a.openTickets,icon:n.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx(mt,{title:"In Progress",value:a.inProgressTickets,icon:n.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx(mt,{title:"Resolved",value:a.resolvedTickets,icon:n.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),n.jsxs("div",{className:"card mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"flex gap-4 flex-wrap",children:[n.jsx(F,{to:"/developer/projects",className:"btn-primary",children:"View All Projects"}),n.jsx(F,{to:"/developer/tickets",className:"btn-outline",children:"View All Tickets"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"My Projects"}),n.jsx(F,{to:"/developer/projects",className:"text-primary hover:underline text-sm",children:"View All"})]}),o.length>0?n.jsx("div",{className:"space-y-4",children:o.map(d=>n.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:d.name}),n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:d.description})]}),n.jsx(It,{status:d.status})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm mt-3",children:[n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md bg-secondary/10 text-primary text-xs font-medium",children:Fn(d.currentStage)}),n.jsxs("span",{className:"text-muted-foreground text-xs",children:["Updated ",lr(d.updatedAt)]})]})]},d.id))}):n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:n.jsx("p",{children:"No projects assigned yet."})})]}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"My Tickets"}),n.jsx(F,{to:"/developer/tickets",className:"text-primary hover:underline text-sm",children:"View All"})]}),c.length>0?n.jsx("div",{className:"space-y-4",children:c.map(d=>n.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:d.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:XA(d.type)})]}),n.jsx(Li,{priority:d.priority})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-3",children:[n.jsx(It,{status:d.status}),n.jsx("span",{className:"text-xs text-muted-foreground",children:lr(d.createdAt)})]})]},d.id))}):n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:n.jsx("p",{children:"No tickets assigned yet."})})]})]})]})}),n.jsx(he,{})]})}function wP(){const{isSignedIn:t,user:e}=ne(),r=ae(),[s,i]=S.useState("all");if(S.useEffect(()=>{t?(e==null?void 0:e.role)!=="web_developer"&&r("/dashboard"):r("/login")},[t,e,r]),!e||e.role!=="web_developer")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const a=No(e.id,e.role),o=s==="all"?a:a.filter(u=>u.status===s),c={totalAssigned:a.length,critical:a.filter(u=>u.priority==="critical"&&u.status!=="resolved"&&u.status!=="closed").length,overSevenDays:a.filter(u=>Math.floor((new Date().getTime()-new Date(u.createdAt).getTime())/864e5)>7&&u.status!=="resolved"&&u.status!=="closed").length},d=u=>Math.floor((new Date().getTime()-new Date(u).getTime())/(1e3*60*60*24));return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"My Tickets"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage and track your assigned tickets"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-lg border-2 border-amber-400 p-6",children:[n.jsx("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"TOTAL ASSIGNED"}),n.jsx("div",{className:"text-4xl font-bold text-gray-900",children:c.totalAssigned})]}),n.jsxs("div",{className:"bg-red-50 rounded-lg border-2 border-red-400 p-6",children:[n.jsx("div",{className:"text-sm font-medium text-red-800 mb-2",children:"CRITICAL"}),n.jsx("div",{className:"text-4xl font-bold text-red-600",children:c.critical})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsx("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"> 7 DAYS"}),n.jsx("div",{className:"text-4xl font-bold text-primary",children:c.overSevenDays})]})]}),n.jsx("div",{className:"card mb-6",children:n.jsxs("div",{className:"flex gap-4 flex-wrap",children:[n.jsx("button",{onClick:()=>i("all"),className:`px-4 py-2 rounded-md font-medium transition ${s==="all"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/70"}`,children:"All Tickets"}),n.jsx("button",{onClick:()=>i("open"),className:`px-4 py-2 rounded-md font-medium transition ${s==="open"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/70"}`,children:"Open"}),n.jsx("button",{onClick:()=>i("in_progress"),className:`px-4 py-2 rounded-md font-medium transition ${s==="in_progress"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/70"}`,children:"In Progress"}),n.jsx("button",{onClick:()=>i("resolved"),className:`px-4 py-2 rounded-md font-medium transition ${s==="resolved"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/70"}`,children:"Resolved"})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-navy-900",children:n.jsxs("tr",{className:"border-b border-gray-200",children:[n.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-primary-foreground uppercase tracking-wider bg-primary",children:"PROJECT"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-primary-foreground uppercase tracking-wider bg-primary",children:"TITLE"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-primary-foreground uppercase tracking-wider bg-primary",children:"STATUS"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-primary-foreground uppercase tracking-wider bg-primary",children:"SEVERITY"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-primary-foreground uppercase tracking-wider bg-primary",children:"DAYS OPEN"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length>0?o.map(u=>{const m=wo(u.projectId),f=d(u.createdAt);return n.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx(F,{to:`/projects/${u.projectId}`,className:"text-primary hover:text-primary-dark hover:underline",children:(m==null?void 0:m.name)||"Unknown Project"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.title})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[u.status==="in_progress"&&n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary/10 text-primary",children:"Dev started working on ticket"}),u.status==="resolved"&&n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"Resolved"}),u.status==="open"&&n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800",children:"Open"}),u.status==="closed"&&n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-400 text-white",children:"Closed"})]}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[u.priority==="critical"&&n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-red-500 text-white uppercase",children:"CRITICAL"}),u.priority==="high"&&n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-orange-400 text-white uppercase",children:"HIGH"}),u.priority==="medium"&&n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-amber-400 text-gray-900 uppercase",children:"MEDIUM"}),u.priority==="low"&&n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-green-400 text-gray-900 uppercase",children:"LOW"})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"text-sm text-gray-900 font-medium",children:f})})]},u.id)}):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:"No tickets found matching the selected filter."})})})]})})})]})}),n.jsx(he,{})]})}function NP(){const{isSignedIn:t,user:e}=ne(),r=ae();if(S.useEffect(()=>{t?(e==null?void 0:e.role)!=="social_media_coordinator"&&r("/dashboard"):r("/login")},[t,e,r]),!e||e.role!=="social_media_coordinator")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const s=kr(e.id,e.role),i=Km(),a=s.map(b=>b.id),o=i.filter(b=>a.includes(b.projectId)),c=o.reduce((b,E)=>b+E.reach,0),d=o.reduce((b,E)=>b+E.engagement,0),u=o.reduce((b,E)=>b+E.posts,0),m={assignedProjects:s.length,totalReach:c,totalEngagement:d,totalPosts:u},f=s.slice(0,3),p=o.slice(0,5);return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Social Media Coordinator Dashboard"}),n.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",e.fullName,"! Here's your analytics overview."]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx(mt,{title:"Assigned Projects",value:m.assignedProjects,icon:n.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),n.jsx(mt,{title:"Total Reach",value:ba(m.totalReach),icon:n.jsxs("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),n.jsx(mt,{title:"Total Engagement",value:ba(m.totalEngagement),icon:n.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),n.jsx(mt,{title:"Total Posts",value:m.totalPosts,icon:n.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})})]}),n.jsxs("div",{className:"card mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"flex gap-4 flex-wrap",children:[n.jsx(F,{to:"/coordinator/projects",className:"btn-primary",children:"View All Projects"}),n.jsx(F,{to:"/coordinator/analytics/new",className:"btn-outline",children:"+ Add Analytics Entry"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"My Projects"}),n.jsx(F,{to:"/coordinator/projects",className:"text-primary hover:underline text-sm",children:"View All"})]}),f.length>0?n.jsx("div",{className:"space-y-4",children:f.map(b=>n.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:b.name}),b.projectType==="social_media"&&n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800",children:"Social Media"}),b.projectType==="website"&&n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-primary/10 text-primary",children:"Website"})]}),n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:b.description})]}),n.jsx(It,{status:b.status})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm mt-3 flex-wrap",children:[n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md bg-pink-50 text-pink-700 text-xs font-medium",children:Fn(b.currentStage)}),b.projectType==="social_media"&&b.socialMediaPlatforms&&n.jsxs("div",{className:"flex gap-1",children:[b.socialMediaPlatforms.slice(0,3).map(E=>n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-700 capitalize",children:E},E)),b.socialMediaPlatforms.length>3&&n.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-700",children:["+",b.socialMediaPlatforms.length-3]})]})]})]},b.id))}):n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:n.jsx("p",{children:"No projects assigned yet."})})]}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Recent Analytics Entries"}),n.jsx(F,{to:"/coordinator/analytics/new",className:"text-primary hover:underline text-sm",children:"+ Add Entry"})]}),p.length>0?n.jsx("div",{className:"space-y-4",children:p.map(b=>{const E=s.find(k=>k.id===b.projectId);return n.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-foreground capitalize",children:b.platform}),n.jsx("p",{className:"text-sm text-muted-foreground",children:E==null?void 0:E.name})]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:Dw(b.date)})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[n.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Reach"}),n.jsx("p",{className:"font-semibold text-foreground",children:ba(b.reach)})]}),n.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Engagement"}),n.jsx("p",{className:"font-semibold text-foreground",children:ba(b.engagement)})]}),n.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Posts"}),n.jsx("p",{className:"font-semibold text-foreground",children:b.posts})]})]})]},b.id)})}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx("p",{children:"No analytics entries yet."}),n.jsx(F,{to:"/coordinator/analytics/new",className:"text-primary hover:underline text-sm mt-2 inline-block",children:"Add your first entry"})]})]})]})]})}),n.jsx(he,{})]})}function Ac({fullName:t,profileImage:e,size:r="md",className:s=""}){const i={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-16 h-16 text-lg"};return n.jsx("div",{className:`${i[r]} rounded-full bg-primary text-white flex items-center justify-center font-semibold ${s}`,title:t,children:e?n.jsx("img",{src:e,alt:t,className:"w-full h-full rounded-full object-cover"}):JA(t)})}function _P(){const{isSignedIn:t,user:e}=ne(),r=ae();if(S.useEffect(()=>{t?(e==null?void 0:e.role)!=="client"&&r("/dashboard"):r("/login")},[t,e,r]),!e||e.role!=="client")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const s=kr(e.id,e.role),i=No(e.id,e.role),a=ve(),o={myProjects:s.length,activeTickets:i.filter(u=>u.status==="open"||u.status==="in_progress").length,resolvedTickets:i.filter(u=>u.status==="resolved").length,inProgressProjects:s.filter(u=>u.status==="active").length},c=s.slice(0,3),d=i.slice(0,5);return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Client Dashboard"}),n.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",e.fullName,"! Here's your project status."]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx(mt,{title:"My Projects",value:o.myProjects,icon:n.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),n.jsx(mt,{title:"In Progress",value:o.inProgressProjects,icon:n.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx(mt,{title:"Active Tickets",value:o.activeTickets,icon:n.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}),n.jsx(mt,{title:"Resolved",value:o.resolvedTickets,icon:n.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),n.jsxs("div",{className:"card mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"flex gap-4 flex-wrap",children:[n.jsx(F,{to:"/client/tickets/new",className:"btn-primary",children:"+ Create New Ticket"}),n.jsx(F,{to:"/client/projects",className:"btn-outline",children:"View All Projects"}),n.jsx(F,{to:"/client/tickets",className:"btn-outline",children:"View All Tickets"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"My Projects"}),n.jsx(F,{to:"/client/projects",className:"text-primary hover:underline text-sm",children:"View All"})]}),c.length>0?n.jsx("div",{className:"space-y-4",children:c.map(u=>{const m=a.find(b=>b.id===u.webDeveloperId),f=a.find(b=>b.id===u.socialMediaCoordinatorId),p=Lw(u.currentStage);return n.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:u.name}),n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:u.description})]}),n.jsx(It,{status:u.status})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[n.jsx("span",{className:"text-muted-foreground",children:"Progress"}),n.jsxs("span",{className:"font-medium text-foreground",children:[p.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary rounded-full h-2 transition-all",style:{width:`${p}%`}})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md bg-green-50 text-green-700 text-xs font-medium",children:Fn(u.currentStage)}),n.jsxs("div",{className:"flex items-center gap-1",children:[m&&n.jsx(Ac,{fullName:m.fullName,size:"sm"}),f&&n.jsx(Ac,{fullName:f.fullName,size:"sm"})]})]})]},u.id)})}):n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:n.jsx("p",{children:"No projects yet."})})]}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"My Tickets"}),n.jsx(F,{to:"/client/tickets/new",className:"text-primary hover:underline text-sm",children:"+ Create Ticket"})]}),d.length>0?n.jsx("div",{className:"space-y-4",children:d.map(u=>{const m=a.find(f=>f.id===u.assignedTo);return n.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:u.title}),m&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Assigned to ",m.fullName]})]}),n.jsx(Li,{priority:u.priority})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-3",children:[n.jsx(It,{status:u.status}),n.jsx("span",{className:"text-xs text-muted-foreground",children:lr(u.createdAt)})]})]},u.id)})}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx("p",{children:"No tickets yet."}),n.jsx(F,{to:"/client/tickets/new",className:"text-primary hover:underline text-sm mt-2 inline-block",children:"Create your first ticket"})]})]})]})]})}),n.jsx(he,{})]})}function kP(){const{isSignedIn:t,user:e}=ne(),r=ae();if(S.useEffect(()=>{t?(e==null?void 0:e.role)!=="client"&&r("/dashboard"):r("/login")},[t,e,r]),!e||e.role!=="client")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const s=kr(e.id,e.role),i=ve();return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"My Projects"}),n.jsx("p",{className:"text-muted-foreground",children:"View all your projects and their progress"})]}),n.jsx(F,{to:"/client/dashboard",className:"btn-outline",children:" Back to Dashboard"})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.length>0?s.map(a=>{const o=i.find(u=>u.id===a.webDeveloperId),c=i.find(u=>u.id===a.socialMediaCoordinatorId),d=Lw(a.currentStage);return n.jsxs("div",{className:"card hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground mb-2",children:a.name}),n.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-3",children:a.description})]}),n.jsx(It,{status:a.status})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Progress"}),n.jsxs("span",{className:"font-medium text-foreground",children:[d.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary rounded-full h-2 transition-all",style:{width:`${d}%`}})})]}),n.jsx("div",{className:"mb-4",children:n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary/10 text-primary",children:Fn(a.currentStage)})}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"text-sm font-semibold text-foreground mb-2",children:"Team"}),n.jsxs("div",{className:"flex items-center gap-2",children:[o&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ac,{fullName:o.fullName,size:"sm"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Developer"})]}),c&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ac,{fullName:c.fullName,size:"sm"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Coordinator"})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(F,{to:`/client/tickets/new?project=${a.id}`,className:"btn-primary flex-1 text-center",children:"Create Ticket"}),n.jsx("button",{className:"btn-outline flex-1",children:"View Details"})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Updated ",lr(a.updatedAt)]})})]},a.id)}):n.jsx("div",{className:"col-span-full text-center py-12",children:n.jsxs("div",{className:"text-muted-foreground",children:[n.jsx("p",{className:"text-lg mb-4",children:"No projects yet"}),n.jsx("p",{className:"text-sm",children:"Contact your administrator to get started with a new project."})]})})})]})}),n.jsx(he,{})]})}function EP(){const{isSignedIn:t,user:e}=ne(),r=ae();if(S.useEffect(()=>{t?(e==null?void 0:e.role)!=="client"&&r("/dashboard"):r("/login")},[t,e,r]),!e||e.role!=="client")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const s=No(e.id,e.role),i=bt(),a=ve();return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"My Tickets"}),n.jsx("p",{className:"text-muted-foreground",children:"View and manage all your project tickets"})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx(F,{to:"/client/dashboard",className:"btn-outline",children:" Back to Dashboard"}),n.jsx(F,{to:"/client/tickets/new",className:"btn-primary",children:"+ Create New Ticket"})]})]})}),n.jsx("div",{className:"space-y-4",children:s.length>0?s.map(o=>{const c=i.find(u=>u.id===o.projectId),d=a.find(u=>u.id===o.assignedTo);return n.jsxs("div",{className:"card hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground mb-2",children:o.title}),n.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-3",children:o.description}),c&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Project: ",n.jsx("span",{className:"font-medium",children:c.name})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(It,{status:o.status}),n.jsx(Li,{priority:o.priority})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Type: ",o.type.replace("_"," ")]}),d&&n.jsxs("span",{children:["Assigned to: ",d.fullName]}),n.jsx("span",{children:lr(o.createdAt)})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"btn-outline text-sm",children:"View Details"}),n.jsx("button",{className:"btn-primary text-sm",children:"Update"})]})]})]},o.id)}):n.jsx("div",{className:"text-center py-12",children:n.jsxs("div",{className:"text-muted-foreground",children:[n.jsx("p",{className:"text-lg mb-4",children:"No tickets yet"}),n.jsx("p",{className:"text-sm mb-6",children:"Create your first ticket to get started with your projects."}),n.jsx(F,{to:"/client/tickets/new",className:"btn-primary",children:"Create New Ticket"})]})})})]})}),n.jsx(he,{})]})}function TP(){const{isSignedIn:t,user:e}=ne(),r=ae(),[s,i]=S.useState(""),[a,o]=S.useState(""),[c,d]=S.useState("medium"),[u,m]=S.useState("feature_request"),[f,p]=S.useState(""),[b,E]=S.useState(!1);if(S.useEffect(()=>{t?(e==null?void 0:e.role)!=="client"&&r("/dashboard"):r("/login");const v=new URLSearchParams(window.location.search).get("project");v&&p(v)},[t,e,r]),!e||e.role!=="client")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const k=kr(e.id,e.role);ve();const x=async y=>{y.preventDefault(),E(!0);const v={id:`ticket-${Date.now()}`,projectId:f,createdBy:e.id,title:s,description:a,type:u,priority:c,status:"open",createdAt:new Date,updatedAt:new Date};hk(v),console.log("Creating new ticket:",v),i(""),o(""),d("medium"),m("feature_request"),p(""),E(!1),r("/client/dashboard")};return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12 max-w-2xl",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Create New Ticket"}),n.jsx("p",{className:"text-muted-foreground",children:"Submit a request for your project team"})]}),n.jsx(F,{to:"/client/dashboard",className:"btn-outline",children:" Back to Dashboard"})]})}),n.jsx("div",{className:"card",children:n.jsxs("form",{onSubmit:x,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Select Project *"}),n.jsxs("select",{value:f,onChange:y=>p(y.target.value),className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20",required:!0,children:[n.jsx("option",{value:"",children:"Choose a project..."}),k.map(y=>n.jsx("option",{value:y.id,children:y.name},y.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Ticket Type *"}),n.jsxs("select",{value:u,onChange:y=>m(y.target.value),className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20",children:[n.jsx("option",{value:"feature_request",children:"Feature Request"}),n.jsx("option",{value:"bug_report",children:"Bug Report"}),n.jsx("option",{value:"content_change",children:"Content Change"}),n.jsx("option",{value:"design_update",children:"Design Update"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Priority *"}),n.jsxs("select",{value:c,onChange:y=>d(y.target.value),className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20",children:[n.jsx("option",{value:"low",children:"Low"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"high",children:"High"}),n.jsx("option",{value:"critical",children:"Critical"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Title *"}),n.jsx("input",{type:"text",value:s,onChange:y=>i(y.target.value),placeholder:"Brief description of the request",className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Description *"}),n.jsx("textarea",{value:a,onChange:y=>o(y.target.value),placeholder:"Detailed description of what you need...",rows:6,className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 resize-vertical",required:!0})]}),n.jsxs("div",{className:"flex gap-4 pt-4",children:[n.jsx("button",{type:"submit",disabled:b||!f,className:"btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Creating...":"Create Ticket"}),n.jsx(F,{to:"/client/dashboard",className:"btn-outline",children:"Cancel"})]})]})}),n.jsxs("div",{className:"mt-8 p-4 bg-secondary/10 border border-secondary/20 rounded-lg",children:[n.jsx("h3",{className:"text-sm font-semibold text-primary mb-2",children:" Ticket Guidelines"}),n.jsxs("ul",{className:"text-xs text-primary/80 space-y-1",children:[n.jsx("li",{children:" Be specific about what you need"}),n.jsx("li",{children:" Include any relevant details or examples"}),n.jsx("li",{children:" Choose the appropriate priority level"}),n.jsx("li",{children:" Your assigned developer will respond within 24 hours"})]})]})]})}),n.jsx(he,{})]})}const SP=[{value:"admin",label:"ADMIN",description:"Full system access - Manage all projects, users, and system settings"},{value:"web_developer",label:"WEB DEVELOPER",description:"Manage assigned projects, handle tickets, and update project status"},{value:"social_media_coordinator",label:"SOCIAL MEDIA COORDINATOR",description:"Manage social media analytics, campaigns, and content for assigned projects"},{value:"client",label:"CLIENT",description:"View your projects, create tickets, and track progress"}];function IP(){const{isSignedIn:t,user:e,switchRole:r}=ne(),s=ae();if(S.useEffect(()=>{t||s("/login")},[t,s]),!e)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const i=a=>{r(a),setTimeout(()=>{s(a==="admin"?"/admin/dashboard":"/dashboard")},300)};return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:n.jsx("div",{className:"container py-20",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-12",children:[n.jsx("h1",{className:"text-5xl font-bold text-[#1e2875] mb-4",children:"Switch Role"}),n.jsxs("p",{className:"text-lg text-muted-foreground",children:["Currently signed in as ",n.jsx("span",{className:"font-semibold text-foreground",children:e.fullName})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Current Role:"," ",n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-primary text-primary-foreground",children:e.role.replace("_"," ").toUpperCase()})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:SP.map(a=>{const o=e.role===a.value;return n.jsxs("button",{onClick:()=>!o&&i(a.value),disabled:o,className:`relative p-8 rounded-xl shadow-lg transition-all duration-300 text-left ${o?"bg-gradient-to-br from-[#1e2875] to-[#2a3488] text-white cursor-default ring-4 ring-blue-300":"bg-white hover:shadow-2xl hover:-translate-y-1 hover:ring-2 hover:ring-[#1e2875]"}`,children:[o&&n.jsx("div",{className:"absolute top-4 right-4",children:n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-bold bg-white/20 backdrop-blur",children:[n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"ACTIVE"]})}),n.jsxs("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-4 ${o?"bg-white/20":"bg-primary/10"}`,children:[a.value==="admin"&&n.jsx("svg",{className:`w-8 h-8 ${o?"text-white":"text-primary"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),a.value==="web_developer"&&n.jsx("svg",{className:`w-8 h-8 ${o?"text-white":"text-[#1e2875]"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),a.value==="social_media_coordinator"&&n.jsx("svg",{className:`w-8 h-8 ${o?"text-white":"text-[#1e2875]"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),a.value==="client"&&n.jsx("svg",{className:`w-8 h-8 ${o?"text-white":"text-[#1e2875]"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})]}),n.jsx("h2",{className:`text-2xl font-bold mb-3 ${o?"text-white":"text-[#1e2875]"}`,children:a.label}),n.jsx("p",{className:`text-sm leading-relaxed ${o?"text-white/90":"text-muted-foreground"}`,children:a.description}),!o&&n.jsxs("div",{className:"mt-6 flex items-center gap-2 text-[#1e2875] font-semibold text-sm",children:[n.jsx("span",{children:"Click to switch"}),n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},a.value)})}),n.jsx("div",{className:"text-center",children:n.jsxs("button",{onClick:()=>s(-1),className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg bg-white shadow-md hover:shadow-lg transition text-[#1e2875] font-semibold",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Dashboard"]})})]})})}),n.jsx(he,{})]})}function CP(){const{isSignedIn:t,user:e}=ne(),r=ae(),[s,i]=S.useState("website"),[a,o]=S.useState({name:"",description:"",clientId:"",webDeveloperId:"",socialMediaCoordinatorId:"",currentStage:"planning",status:"active",websiteUrl:"",googleAnalyticsPropertyId:"",googleAnalyticsViewId:"",notes:"",campaignGoals:"",targetAudience:""}),[c,d]=S.useState([]);if(S.useEffect(()=>{t?(e==null?void 0:e.role)!=="admin"&&r("/dashboard"):r("/login")},[t,e,r]),!e||e.role!=="admin")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const u=ve(),m=u.filter(x=>x.role==="client"),f=u.filter(x=>x.role==="web_developer"),p=u.filter(x=>x.role==="social_media_coordinator"),b=["facebook","instagram","twitter","linkedin","tiktok","youtube"],E=x=>{d(y=>y.includes(x)?y.filter(v=>v!==x):[...y,x])},k=x=>{x.preventDefault();const y={id:`proj-${Date.now()}`,...a,projectType:s,socialMediaPlatforms:s==="social_media"?c:void 0,createdAt:new Date,updatedAt:new Date};console.log("Creating new project:",y),alert(`${s==="website"?"Website":"Social Media"} project "${a.name}" created successfully!`),r("/admin/dashboard")};return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12 max-w-4xl",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Create New Project"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Add a new website or social media project to the system"}),n.jsxs(F,{to:"/admin/dashboard",className:"btn-outline inline-flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Dashboard"]})]}),n.jsxs("div",{className:"card mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Project Type"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx("button",{type:"button",onClick:()=>i("website"),className:`p-6 border-2 rounded-lg transition ${s==="website"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("svg",{className:"w-12 h-12 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),n.jsxs("div",{className:"text-left",children:[n.jsx("h3",{className:"font-bold text-lg",children:"Website Project"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Build and maintain a website"})]})]})}),n.jsx("button",{type:"button",onClick:()=>i("social_media"),className:`p-6 border-2 rounded-lg transition ${s==="social_media"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("svg",{className:"w-12 h-12 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})}),n.jsxs("div",{className:"text-left",children:[n.jsx("h3",{className:"font-bold text-lg",children:"Social Media Project"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage social media campaigns"})]})]})})]})]}),n.jsxs("form",{onSubmit:k,className:"card space-y-6",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Project Details"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-foreground mb-2",children:"Project Name *"}),n.jsx("input",{type:"text",id:"name",required:!0,value:a.name,onChange:x=>o({...a,name:x.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter project name"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-foreground mb-2",children:"Description *"}),n.jsx("textarea",{id:"description",required:!0,value:a.description,onChange:x=>o({...a,description:x.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary h-24",placeholder:"Enter project description"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"clientId",className:"block text-sm font-medium text-foreground mb-2",children:"Client *"}),n.jsxs("select",{id:"clientId",required:!0,value:a.clientId,onChange:x=>o({...a,clientId:x.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[n.jsx("option",{value:"",children:"Select a client"}),m.map(x=>n.jsx("option",{value:x.id,children:x.fullName},x.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"currentStage",className:"block text-sm font-medium text-foreground mb-2",children:"Current Stage *"}),n.jsxs("select",{id:"currentStage",required:!0,value:a.currentStage,onChange:x=>o({...a,currentStage:x.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[n.jsx("option",{value:"planning",children:"Planning"}),n.jsx("option",{value:"design",children:"Design"}),n.jsx("option",{value:"development",children:"Development"}),n.jsx("option",{value:"testing",children:"Testing"}),n.jsx("option",{value:"launch",children:"Launch"}),n.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Team Assignment"}),s==="website"&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"webDeveloperId",className:"block text-sm font-medium text-foreground mb-2",children:"Web Developer"}),n.jsxs("select",{id:"webDeveloperId",value:a.webDeveloperId,onChange:x=>o({...a,webDeveloperId:x.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[n.jsx("option",{value:"",children:"Select a developer (optional)"}),f.map(x=>n.jsx("option",{value:x.id,children:x.fullName},x.id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"socialMediaCoordinatorId",className:"block text-sm font-medium text-foreground mb-2",children:["Social Media Coordinator ",s==="social_media"&&"*"]}),n.jsxs("select",{id:"socialMediaCoordinatorId",required:s==="social_media",value:a.socialMediaCoordinatorId,onChange:x=>o({...a,socialMediaCoordinatorId:x.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[n.jsxs("option",{value:"",children:["Select a coordinator ",s==="website"&&"(optional)"]}),p.map(x=>n.jsx("option",{value:x.id,children:x.fullName},x.id))]})]})]}),s==="website"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Website Details"}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"websiteUrl",className:"block text-sm font-medium text-foreground mb-2",children:"Website URL"}),n.jsx("input",{type:"url",id:"websiteUrl",value:a.websiteUrl,onChange:x=>o({...a,websiteUrl:x.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"https://example.com"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"googleAnalyticsPropertyId",className:"block text-sm font-medium text-foreground mb-2",children:"Google Analytics Property ID"}),n.jsx("input",{type:"text",id:"googleAnalyticsPropertyId",value:a.googleAnalyticsPropertyId,onChange:x=>o({...a,googleAnalyticsPropertyId:x.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"G-XXXXXXXXXX"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"googleAnalyticsViewId",className:"block text-sm font-medium text-foreground mb-2",children:"Google Analytics View ID"}),n.jsx("input",{type:"text",id:"googleAnalyticsViewId",value:a.googleAnalyticsViewId,onChange:x=>o({...a,googleAnalyticsViewId:x.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"123456789"})]})]})]}),s==="social_media"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Social Media Campaign Details"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Platforms *"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:b.map(x=>n.jsxs("label",{className:"flex items-center space-x-2 p-3 border border-border rounded-lg cursor-pointer hover:bg-muted/50 transition",children:[n.jsx("input",{type:"checkbox",checked:c.includes(x),onChange:()=>E(x),className:"w-4 h-4 text-primary focus:ring-primary rounded"}),n.jsx("span",{className:"text-sm font-medium capitalize",children:x})]},x))})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"campaignGoals",className:"block text-sm font-medium text-foreground mb-2",children:"Campaign Goals *"}),n.jsx("textarea",{id:"campaignGoals",required:!0,value:a.campaignGoals,onChange:x=>o({...a,campaignGoals:x.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary h-24",placeholder:"e.g., Increase brand awareness by 40%, generate 200+ qualified leads"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"targetAudience",className:"block text-sm font-medium text-foreground mb-2",children:"Target Audience *"}),n.jsx("textarea",{id:"targetAudience",required:!0,value:a.targetAudience,onChange:x=>o({...a,targetAudience:x.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary h-24",placeholder:"e.g., Business owners, HR managers, training coordinators aged 30-55"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-foreground mb-2",children:"Notes"}),n.jsx("textarea",{id:"notes",value:a.notes,onChange:x=>o({...a,notes:x.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary h-24",placeholder:"Additional notes or requirements"})]}),n.jsxs("div",{className:"flex gap-4 pt-4",children:[n.jsxs("button",{type:"submit",className:"btn-primary flex-1",children:["Create ",s==="website"?"Website":"Social Media"," Project"]}),n.jsx("button",{type:"button",onClick:()=>r(-1),className:"btn-outline flex-1",children:"Cancel"})]})]})]})}),n.jsx(he,{})]})}const zw=6048e5,AP=864e5,PP=6e4,Py=Symbol.for("constructDateFrom");function Yt(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Py in t?t[Py](e):t instanceof Date?new t.constructor(e):new Date(e)}function Ze(t,e){return Yt(e||t,t)}function Pc(t,e,r){const s=Ze(t,r==null?void 0:r.in);return isNaN(e)?Yt(t,NaN):(e&&s.setDate(s.getDate()+e),s)}function Ww(t,e,r){const s=Ze(t,r==null?void 0:r.in);if(isNaN(e))return Yt(t,NaN);if(!e)return s;const i=s.getDate(),a=Yt(t,s.getTime());a.setMonth(s.getMonth()+e+1,0);const o=a.getDate();return i>=o?a:(s.setFullYear(a.getFullYear(),a.getMonth(),i),s)}let RP={};function Mo(){return RP}function Wr(t,e){var c,d,u,m;const r=Mo(),s=(e==null?void 0:e.weekStartsOn)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??r.weekStartsOn??((m=(u=r.locale)==null?void 0:u.options)==null?void 0:m.weekStartsOn)??0,i=Ze(t,e==null?void 0:e.in),a=i.getDay(),o=(a<s?7:0)+a-s;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Rc(t,e){return Wr(t,{...e,weekStartsOn:1})}function $w(t,e){const r=Ze(t,e==null?void 0:e.in),s=r.getFullYear(),i=Yt(r,0);i.setFullYear(s+1,0,4),i.setHours(0,0,0,0);const a=Rc(i),o=Yt(r,0);o.setFullYear(s,0,4),o.setHours(0,0,0,0);const c=Rc(o);return r.getTime()>=a.getTime()?s+1:r.getTime()>=c.getTime()?s:s-1}function Ry(t){const e=Ze(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function gd(t,...e){const r=Yt.bind(null,e.find(s=>typeof s=="object"));return e.map(r)}function Dc(t,e){const r=Ze(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function DP(t,e,r){const[s,i]=gd(r==null?void 0:r.in,t,e),a=Dc(s),o=Dc(i),c=+a-Ry(a),d=+o-Ry(o);return Math.round((c-d)/AP)}function MP(t,e){const r=$w(t,e),s=Yt(t,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),Rc(s)}function Hw(t,e,r){return Pc(t,e*7,r)}function Dy(t,e,r){const[s,i]=gd(r==null?void 0:r.in,t,e);return+Dc(s)==+Dc(i)}function LP(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function VP(t){return!(!LP(t)&&typeof t!="number"||isNaN(+Ze(t)))}function OP(t){return e=>{const s=(t?Math[t]:Math.trunc)(e);return s===0?0:s}}function FP(t,e){return+Ze(t)-+Ze(e)}function My(t,e,r){const s=FP(t,e)/PP;return OP(r==null?void 0:r.roundingMethod)(s)}function UP(t,e){const r=Ze(t,e==null?void 0:e.in),s=r.getMonth();return r.setFullYear(r.getFullYear(),s+1,0),r.setHours(23,59,59,999),r}function BP(t,e){const[r,s]=gd(t,e.start,e.end);return{start:r,end:s}}function Ly(t,e){const{start:r,end:s}=BP(e==null?void 0:e.in,t);let i=+r>+s;const a=i?+r:+s,o=i?s:r;o.setHours(0,0,0,0);let c=1;const d=[];for(;+o<=a;)d.push(Yt(r,o)),o.setDate(o.getDate()+c),o.setHours(0,0,0,0);return i?d.reverse():d}function qw(t,e){const r=Ze(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function zP(t,e){const r=Ze(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function WP(t,e){var c,d;const r=Mo(),s=r.weekStartsOn??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=Ze(t,e==null?void 0:e.in),a=i.getDay(),o=(a<s?-7:0)+6-(a-s);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}const $P={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},HP=(t,e,r)=>{let s;const i=$P[t];return typeof i=="string"?s=i:e===1?s=i.one:s=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Nu(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const qP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},GP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},KP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},QP={date:Nu({formats:qP,defaultWidth:"full"}),time:Nu({formats:GP,defaultWidth:"full"}),dateTime:Nu({formats:KP,defaultWidth:"full"})},YP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},XP=(t,e,r,s)=>YP[t];function la(t){return(e,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let i;if(s==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,c=r!=null&&r.width?String(r.width):o;i=t.formattingValues[c]||t.formattingValues[o]}else{const o=t.defaultWidth,c=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[c]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const JP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ZP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},eR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},tR={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},rR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},nR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sR=(t,e)=>{const r=Number(t),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},iR={ordinalNumber:sR,era:la({values:JP,defaultWidth:"wide"}),quarter:la({values:ZP,defaultWidth:"wide",argumentCallback:t=>t-1}),month:la({values:eR,defaultWidth:"wide"}),day:la({values:tR,defaultWidth:"wide"}),dayPeriod:la({values:rR,defaultWidth:"wide",formattingValues:nR,defaultFormattingWidth:"wide"})};function ca(t){return(e,r={})=>{const s=r.width,i=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],c=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(c)?oR(c,f=>f.test(o)):aR(c,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(d):d,u=r.valueCallback?r.valueCallback(u):u;const m=e.slice(o.length);return{value:u,rest:m}}}function aR(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function oR(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function lR(t){return(e,r={})=>{const s=e.match(t.matchPattern);if(!s)return null;const i=s[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const c=e.slice(i.length);return{value:o,rest:c}}}const cR=/^(\d+)(th|st|nd|rd)?/i,dR=/\d+/i,uR={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},hR={any:[/^b/i,/^(a|c)/i]},mR={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fR={any:[/1/i,/2/i,/3/i,/4/i]},pR={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},gR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xR={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},yR={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},vR={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},bR={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},jR={ordinalNumber:lR({matchPattern:cR,parsePattern:dR,valueCallback:t=>parseInt(t,10)}),era:ca({matchPatterns:uR,defaultMatchWidth:"wide",parsePatterns:hR,defaultParseWidth:"any"}),quarter:ca({matchPatterns:mR,defaultMatchWidth:"wide",parsePatterns:fR,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ca({matchPatterns:pR,defaultMatchWidth:"wide",parsePatterns:gR,defaultParseWidth:"any"}),day:ca({matchPatterns:xR,defaultMatchWidth:"wide",parsePatterns:yR,defaultParseWidth:"any"}),dayPeriod:ca({matchPatterns:vR,defaultMatchWidth:"any",parsePatterns:bR,defaultParseWidth:"any"})},wR={code:"en-US",formatDistance:HP,formatLong:QP,formatRelative:XP,localize:iR,match:jR,options:{weekStartsOn:0,firstWeekContainsDate:1}};function NR(t,e){const r=Ze(t,e==null?void 0:e.in);return DP(r,zP(r))+1}function _R(t,e){const r=Ze(t,e==null?void 0:e.in),s=+Rc(r)-+MP(r);return Math.round(s/zw)+1}function Gw(t,e){var m,f,p,b;const r=Ze(t,e==null?void 0:e.in),s=r.getFullYear(),i=Mo(),a=(e==null?void 0:e.firstWeekContainsDate)??((f=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((b=(p=i.locale)==null?void 0:p.options)==null?void 0:b.firstWeekContainsDate)??1,o=Yt((e==null?void 0:e.in)||t,0);o.setFullYear(s+1,0,a),o.setHours(0,0,0,0);const c=Wr(o,e),d=Yt((e==null?void 0:e.in)||t,0);d.setFullYear(s,0,a),d.setHours(0,0,0,0);const u=Wr(d,e);return+r>=+c?s+1:+r>=+u?s:s-1}function kR(t,e){var c,d,u,m;const r=Mo(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(u=r.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??1,i=Gw(t,e),a=Yt((e==null?void 0:e.in)||t,0);return a.setFullYear(i,0,s),a.setHours(0,0,0,0),Wr(a,e)}function ER(t,e){const r=Ze(t,e==null?void 0:e.in),s=+Wr(r,e)-+kR(r,e);return Math.round(s/zw)+1}function ge(t,e){const r=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return r+s}const rn={y(t,e){const r=t.getFullYear(),s=r>0?r:1-r;return ge(e==="yy"?s%100:s,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):ge(r+1,2)},d(t,e){return ge(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return ge(t.getHours()%12||12,e.length)},H(t,e){return ge(t.getHours(),e.length)},m(t,e){return ge(t.getMinutes(),e.length)},s(t,e){return ge(t.getSeconds(),e.length)},S(t,e){const r=e.length,s=t.getMilliseconds(),i=Math.trunc(s*Math.pow(10,r-3));return ge(i,e.length)}},Ms={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Vy={G:function(t,e,r){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const s=t.getFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return rn.y(t,e)},Y:function(t,e,r,s){const i=Gw(t,s),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return ge(o,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):ge(a,e.length)},R:function(t,e){const r=$w(t);return ge(r,e.length)},u:function(t,e){const r=t.getFullYear();return ge(r,e.length)},Q:function(t,e,r){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return ge(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,r){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return ge(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,r){const s=t.getMonth();switch(e){case"M":case"MM":return rn.M(t,e);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,r){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return ge(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,r,s){const i=ER(t,s);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):ge(i,e.length)},I:function(t,e,r){const s=_R(t);return e==="Io"?r.ordinalNumber(s,{unit:"week"}):ge(s,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):rn.d(t,e)},D:function(t,e,r){const s=NR(t);return e==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):ge(s,e.length)},E:function(t,e,r){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,r,s){const i=t.getDay(),a=(i-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return ge(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,s){const i=t.getDay(),a=(i-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return ge(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const s=t.getDay(),i=s===0?7:s;switch(e){case"i":return String(i);case"ii":return ge(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const s=t.getHours();let i;switch(s===12?i=Ms.noon:s===0?i=Ms.midnight:i=s/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const s=t.getHours();let i;switch(s>=17?i=Ms.evening:s>=12?i=Ms.afternoon:s>=4?i=Ms.morning:i=Ms.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return rn.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):rn.H(t,e)},K:function(t,e,r){const s=t.getHours()%12;return e==="Ko"?r.ordinalNumber(s,{unit:"hour"}):ge(s,e.length)},k:function(t,e,r){let s=t.getHours();return s===0&&(s=24),e==="ko"?r.ordinalNumber(s,{unit:"hour"}):ge(s,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):rn.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):rn.s(t,e)},S:function(t,e){return rn.S(t,e)},X:function(t,e,r){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return Fy(s);case"XXXX":case"XX":return ns(s);case"XXXXX":case"XXX":default:return ns(s,":")}},x:function(t,e,r){const s=t.getTimezoneOffset();switch(e){case"x":return Fy(s);case"xxxx":case"xx":return ns(s);case"xxxxx":case"xxx":default:return ns(s,":")}},O:function(t,e,r){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Oy(s,":");case"OOOO":default:return"GMT"+ns(s,":")}},z:function(t,e,r){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Oy(s,":");case"zzzz":default:return"GMT"+ns(s,":")}},t:function(t,e,r){const s=Math.trunc(+t/1e3);return ge(s,e.length)},T:function(t,e,r){return ge(+t,e.length)}};function Oy(t,e=""){const r=t>0?"-":"+",s=Math.abs(t),i=Math.trunc(s/60),a=s%60;return a===0?r+String(i):r+String(i)+e+ge(a,2)}function Fy(t,e){return t%60===0?(t>0?"-":"+")+ge(Math.abs(t)/60,2):ns(t,e)}function ns(t,e=""){const r=t>0?"-":"+",s=Math.abs(t),i=ge(Math.trunc(s/60),2),a=ge(s%60,2);return r+i+e+a}const Uy=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Kw=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},TR=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return Uy(t,e);let a;switch(s){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Uy(s,e)).replace("{{time}}",Kw(i,e))},SR={p:Kw,P:TR},IR=/^D+$/,CR=/^Y+$/,AR=["D","DD","YY","YYYY"];function PR(t){return IR.test(t)}function RR(t){return CR.test(t)}function DR(t,e,r){const s=MR(t,e,r);if(console.warn(s),AR.includes(t))throw new RangeError(s)}function MR(t,e,r){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const LR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,VR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,OR=/^'([^]*?)'?$/,FR=/''/g,UR=/[a-zA-Z]/;function Le(t,e,r){var m,f,p,b;const s=Mo(),i=s.locale??wR,a=s.firstWeekContainsDate??((f=(m=s.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=s.weekStartsOn??((b=(p=s.locale)==null?void 0:p.options)==null?void 0:b.weekStartsOn)??0,c=Ze(t,r==null?void 0:r.in);if(!VP(c))throw new RangeError("Invalid time value");let d=e.match(VR).map(E=>{const k=E[0];if(k==="p"||k==="P"){const x=SR[k];return x(E,i.formatLong)}return E}).join("").match(LR).map(E=>{if(E==="''")return{isToken:!1,value:"'"};const k=E[0];if(k==="'")return{isToken:!1,value:BR(E)};if(Vy[k])return{isToken:!0,value:E};if(k.match(UR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return{isToken:!1,value:E}});i.localize.preprocessor&&(d=i.localize.preprocessor(c,d));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return d.map(E=>{if(!E.isToken)return E.value;const k=E.value;(RR(k)||PR(k))&&DR(k,e,String(t));const x=Vy[k[0]];return x(c,k,i.localize,u)}).join("")}function BR(t){const e=t.match(OR);return e?e[1].replace(FR,"'"):t}function zR(t,e,r){const[s,i]=gd(r==null?void 0:r.in,t,e);return s.getFullYear()===i.getFullYear()&&s.getMonth()===i.getMonth()}function Qw(t,e,r){return Pc(t,-e,r)}function WR(t,e,r){return Ww(t,-1,r)}function $R(t,e,r){return Hw(t,-1,r)}function HR(){const{isSignedIn:t,user:e}=ne(),r=ae(),[s,i]=S.useState([]),[a,o]=S.useState([]),[c,d]=S.useState([]),[u,m]=S.useState(null),[f,p]=S.useState(!1),[b,E]=S.useState({recipientId:"",subject:"",content:"",projectId:"",isBroadcast:!1});S.useEffect(()=>{t||r("/login")},[t,r]),S.useEffect(()=>{e&&(i(Pn(e.id)),o(ve()),d(bt()))},[e]);const k=P=>{gk(P),i(N=>N.map(w=>w.id===P?{...w,isRead:!0}:w))},x=P=>{window.confirm("Are you sure you want to delete this message?")&&xk(P)&&(i(N=>N.filter(w=>w.id!==P)),(u==null?void 0:u.id)===P&&m(null))},y=()=>{if(!e||!b.subject.trim()||!b.content.trim())return;const P={id:`message-${Date.now()}`,senderId:e.id,recipientId:b.isBroadcast?void 0:b.recipientId||void 0,subject:b.subject,content:b.content,isRead:!1,isBroadcast:b.isBroadcast,projectId:b.projectId||void 0,createdAt:new Date,updatedAt:new Date};yk(P),i(N=>[P,...N]),E({recipientId:"",subject:"",content:"",projectId:"",isBroadcast:!1}),p(!1)},v=P=>{const N=a.find(w=>w.id===P);return N?N.fullName:"Unknown"},j=P=>{if(!P)return"Everyone (Broadcast)";const N=a.find(w=>w.id===P);return N?N.fullName:"Unknown"},I=P=>{if(!P)return null;const N=c.find(w=>w.id===P);return N?N.name:null},M=s.filter(P=>!P.isRead&&(P.recipientId===(e==null?void 0:e.id)||P.isBroadcast)).length;return e?n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-8 lg:py-12",children:[n.jsx("div",{className:"mb-8",children:n.jsxs(F,{to:"/dashboard",className:"inline-flex items-center gap-2 text-primary hover:text-primary-dark transition-colors font-medium",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Dashboard"]})}),n.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-6 mb-12",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground mb-3",children:"Messages"}),n.jsxs("p",{className:"text-lg text-muted-foreground leading-relaxed",children:["Communicate with team members and clients",M>0&&n.jsxs("span",{className:"inline-flex items-center gap-2 ml-3 px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium",children:[n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15l-4-4 1.41-1.41L11 14.17l6.59-6.59L19 9l-8 8z"})}),M," unread"]})]})]}),n.jsxs("button",{onClick:()=>p(!0),className:"btn-primary px-6 py-3 self-start lg:self-auto",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Compose Message"]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-8 shadow-sm",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Messages"}),n.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto pr-2",children:s.map(P=>n.jsxs("div",{className:`p-4 rounded-lg cursor-pointer transition-all duration-200 border ${(u==null?void 0:u.id)===P.id?"bg-primary/10 border-primary shadow-sm":"hover:bg-muted/50 border-border/50 hover:border-primary/20"} ${!P.isRead&&(P.recipientId===(e==null?void 0:e.id)||P.isBroadcast)?"border-l-4 border-l-primary bg-secondary/10":""}`,onClick:()=>{m(P),!P.isRead&&(P.recipientId===(e==null?void 0:e.id)||P.isBroadcast)&&k(P.id)},children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("p",{className:"text-sm font-semibold text-foreground truncate",children:[P.senderId===(e==null?void 0:e.id)?"To: ":"From: ",P.senderId===(e==null?void 0:e.id)?j(P.recipientId):v(P.senderId),P.isBroadcast&&" (Broadcast)"]}),n.jsx("p",{className:"text-sm text-muted-foreground truncate font-medium",children:P.subject})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:Le(P.createdAt,"MMM dd")}),n.jsx("button",{onClick:N=>{N.stopPropagation(),x(P.id)},className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50 transition-colors",title:"Delete message",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),!P.isRead&&(P.recipientId===(e==null?void 0:e.id)||P.isBroadcast)&&n.jsx("div",{className:"w-2 h-2 bg-primary rounded-full ml-auto flex-shrink-0"})]},P.id))})]})}),n.jsx("div",{className:"lg:col-span-2",children:u?n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-8 shadow-sm",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:u.subject}),n.jsx("button",{onClick:()=>x(u.id),className:"text-red-500 hover:text-red-700 p-2 rounded hover:bg-red-50 transition-colors",title:"Delete message",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-4",children:[n.jsxs("span",{children:[u.senderId===(e==null?void 0:e.id)?"Sent to ":"From ",u.senderId===(e==null?void 0:e.id)?j(u.recipientId):v(u.senderId),u.isBroadcast&&" (Broadcast)"]}),n.jsx("span",{children:""}),n.jsx("span",{children:Le(u.createdAt,"PPP 'at' p")})]}),I(u.projectId)&&n.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-primary/10 text-primary rounded-full text-sm font-medium",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Project: ",I(u.projectId)]})]}),n.jsx("div",{className:"prose max-w-none",children:n.jsx("p",{className:"whitespace-pre-wrap text-foreground text-lg leading-relaxed",children:u.content})})]}):n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-8 shadow-sm flex items-center justify-center",style:{minHeight:"400px"},children:n.jsxs("div",{className:"text-center",children:[n.jsx("svg",{className:"w-16 h-16 text-muted-foreground/50 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Select a message to view"})]})})})]}),f&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-background rounded-xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Compose New Message"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Send a message to team members or broadcast to everyone"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",id:"broadcast",checked:b.isBroadcast,onChange:P=>E(N=>({...N,isBroadcast:P.target.checked,recipientId:P.target.checked?"":N.recipientId})),className:"w-4 h-4 rounded border-border"}),n.jsx("label",{htmlFor:"broadcast",className:"text-sm font-medium text-foreground",children:"Broadcast to all users"})]}),!b.isBroadcast&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Recipient"}),n.jsxs("select",{value:b.recipientId,onChange:P=>E(N=>({...N,recipientId:P.target.value})),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground",children:[n.jsx("option",{value:"",children:"Select recipient"}),a.filter(P=>P.id!==(e==null?void 0:e.id)&&P.isActive).map(P=>n.jsxs("option",{value:P.id,children:[P.fullName," (",P.role,")"]},P.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Related Project (Optional)"}),n.jsxs("select",{value:b.projectId,onChange:P=>E(N=>({...N,projectId:P.target.value})),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground",children:[n.jsx("option",{value:"",children:"Select project"}),c.map(P=>n.jsx("option",{value:P.id,children:P.name},P.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Subject"}),n.jsx("input",{type:"text",value:b.subject,onChange:P=>E(N=>({...N,subject:P.target.value})),placeholder:"Enter message subject",className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Message"}),n.jsx("textarea",{value:b.content,onChange:P=>E(N=>({...N,content:P.target.value})),placeholder:"Enter your message",rows:6,className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-border",children:[n.jsx("button",{onClick:()=>p(!1),className:"btn-outline px-6 py-2",children:"Cancel"}),n.jsx("button",{onClick:y,disabled:!b.subject.trim()||!b.content.trim()||!b.isBroadcast&&!b.recipientId,className:"btn-primary px-6 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Send Message"})]})]})]})})]})}),n.jsx(he,{})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}function qR(){const{user:t,signOut:e}=ne(),r=ae(),[s,i]=S.useState([]),[a,o]=S.useState([]),[c,d]=S.useState([]),[u,m]=S.useState(!0);S.useEffect(()=>{if(!t){r("/login?portal=client");return}if(t.role!=="client"){r("/dashboard");return}i(kr(t.id,t.role)),o(No(t.id,t.role)),d(Pn(t.id)),m(!1)},[t,r]);const f=async()=>{try{await e(),r("/login?portal=client")}catch(k){console.error("Error signing out:",k)}},p=s.filter(k=>k.status==="active"),b=a.slice(0,3),E=c.filter(k=>!k.isRead&&k.recipientId===(t==null?void 0:t.id));return!t||t.role!=="client"?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):n.jsxs("div",{className:"min-h-screen bg-muted",children:[n.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-border/50 sticky top-0 z-40",children:n.jsx("div",{className:"container mx-auto px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(F,{to:"/client-portal/dashboard",className:"flex items-center gap-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("img",{src:"/Logo.png",alt:"Marketing Website Logo",className:"h-10 w-auto"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold text-primary",children:"Client Portal"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Welcome, ",t.fullName]})]})]})}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(F,{to:"/messages",className:"p-2 rounded-lg hover:bg-muted transition-colors relative",title:"Messages",children:[n.jsx("svg",{className:"w-5 h-5 text-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),E.length>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold",children:E.length>99?"99+":E.length})]}),n.jsx("button",{onClick:f,className:"btn-secondary text-sm",children:"Sign Out"})]})]})})}),n.jsxs("main",{className:"container mx-auto px-6 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"Project Dashboard"}),n.jsx("p",{className:"text-muted-foreground",children:"Track your project progress and communicate with our team"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-primary/10 dark:bg-primary/20 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-foreground",children:p.length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Projects"})]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-foreground",children:a.filter(k=>k.status==="open"||k.status==="in_progress").length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Open Tickets"})]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-foreground",children:E.length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Unread Messages"})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Your Projects"}),n.jsx("span",{className:"text-muted-foreground text-sm",children:"Recent Projects"})]}),n.jsx("div",{className:"space-y-4",children:p.length>0?p.slice(0,3).map(k=>n.jsxs(F,{to:`/client-portal/project/${k.id}`,className:"block p-4 border border-border/50 rounded-lg hover:bg-muted/50 hover:border-primary/20 transition-all duration-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h4",{className:"font-semibold text-foreground",children:k.name}),n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:k.status})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:k.description}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[n.jsxs("span",{children:["Stage: ",k.currentStage]}),n.jsxs("span",{children:["Updated ",Le(k.updatedAt,"MMM dd")]})]})]},k.id)):n.jsxs("div",{className:"text-center py-8",children:[n.jsx("svg",{className:"w-12 h-12 text-muted-foreground/50 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),n.jsx("p",{className:"text-muted-foreground",children:"No active projects yet"})]})})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Recent Activity"}),n.jsx(F,{to:"/client/tickets",className:"text-primary hover:underline text-sm",children:"View All Tickets"})]}),n.jsx("div",{className:"space-y-4",children:b.length>0?b.map(k=>n.jsxs("div",{className:"flex items-start gap-3 p-3 border border-border/50 rounded-lg",children:[n.jsx("div",{className:"p-2 bg-primary/10 dark:bg-primary/20 rounded-lg",children:n.jsx("svg",{className:"w-4 h-4 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-foreground text-sm",children:k.title}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Status: ",k.status]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:Le(k.createdAt,"MMM dd, yyyy")})]})]},k.id)):n.jsxs("div",{className:"text-center py-8",children:[n.jsx("svg",{className:"w-12 h-12 text-muted-foreground/50 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("p",{className:"text-muted-foreground",children:"No recent activity"})]})})]})]})]})]})}function GR(){const{id:t}=jo(),{user:e}=ne(),r=ae(),[s,i]=S.useState(null),[a,o]=S.useState([]),[c,d]=S.useState([]),[u,m]=S.useState(!0);S.useEffect(()=>{if(!e||e.role!=="client"){r("/client-portal/login");return}if(!t){r("/client-portal/dashboard");return}const p=wo(t);if(!p||p.clientId!==e.id){r("/client-portal/dashboard");return}i(p),o(hb(t)),d(Pn(e.id).filter(b=>b.projectId===t)),m(!1)},[e,t,r]);const f=p=>({planning:"bg-primary/10 text-primary",development:"bg-accent/10 text-accent",testing:"bg-warning/10 text-warning",completed:"bg-success/10 text-success"})[status]||"bg-gray-100 text-gray-800";return!e||e.role!=="client"?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):u||!s?n.jsx("div",{className:"min-h-screen bg-muted",children:n.jsx("div",{className:"container mx-auto px-6 py-8",children:n.jsxs("div",{className:"animate-pulse space-y-6",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/3"}),n.jsx("div",{className:"h-32 bg-gray-300 rounded"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx("div",{className:"h-64 bg-gray-300 rounded"}),n.jsx("div",{className:"h-64 bg-gray-300 rounded"})]})]})})}):n.jsxs("div",{className:"min-h-screen bg-muted",children:[n.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-border/50 sticky top-0 z-40",children:n.jsx("div",{className:"container mx-auto px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(F,{to:"/client-portal/dashboard",className:"flex items-center gap-2 text-primary hover:text-primary-dark transition-colors",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Dashboard"]}),n.jsx("div",{className:"flex items-center gap-4",children:n.jsx(F,{to:"/messages",className:"p-2 rounded-lg hover:bg-muted transition-colors relative",title:"Messages",children:n.jsx("svg",{className:"w-5 h-5 text-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})})})]})})}),n.jsxs("main",{className:"container mx-auto px-6 py-8",children:[n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-8 mb-8",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:s.name}),n.jsx("p",{className:"text-muted-foreground mb-4",children:s.description}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${Vw(s.status)}`,children:s.status}),n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${f(s.currentStage)}`,children:s.currentStage}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["Updated ",Le(s.updatedAt,"MMM dd, yyyy")]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(F,{to:"/messages",className:"btn-outline px-4 py-2",children:"Message Team"}),n.jsx(F,{to:"/client-portal/files",className:"btn-outline px-4 py-2",children:"Share Files"}),n.jsx(F,{to:"/client-portal/feedback",className:"btn-primary px-4 py-2",children:"Submit Feedback"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground mb-6",children:"Project Progress"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Overall Progress"}),n.jsxs("span",{className:"font-medium text-foreground",children:[s.currentStage==="planning"&&"25%",s.currentStage==="design"&&"40%",s.currentStage==="development"&&"60%",s.currentStage==="testing"&&"80%",s.currentStage==="launch"&&"100%",s.currentStage==="maintenance"&&"100%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:s.currentStage==="planning"?"25%":s.currentStage==="design"?"40%":s.currentStage==="development"?"60%":s.currentStage==="testing"?"80%":(s.currentStage==="launch","100%")}})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-foreground mb-3",children:"Project Details"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Type:"}),n.jsx("span",{className:"text-foreground capitalize",children:s.projectType.replace("_"," ")})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Start Date:"}),n.jsx("span",{className:"text-foreground",children:Le(s.createdAt,"MMM dd, yyyy")})]}),s.launchDate&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Launch Date:"}),n.jsx("span",{className:"text-foreground",children:Le(s.launchDate,"MMM dd, yyyy")})]}),s.websiteUrl&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Website:"}),n.jsx("a",{href:s.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"View Site"})]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-foreground mb-3",children:"Team Members"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Developer:"}),n.jsx("span",{className:"text-foreground",children:s.webDeveloperId?"Assigned":"Not assigned"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Coordinator:"}),n.jsx("span",{className:"text-foreground",children:s.socialMediaCoordinatorId?"Assigned":"Not assigned"})]})]})]})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground mb-6",children:"Recent Updates"}),n.jsx("div",{className:"space-y-4",children:a.length>0?a.slice(0,5).map(p=>n.jsxs("div",{className:"flex items-start gap-4 p-4 border border-border/50 rounded-lg",children:[n.jsx("div",{className:"p-2 bg-primary/10 dark:bg-primary/20 rounded-lg",children:n.jsx("svg",{className:"w-4 h-4 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-foreground",children:p.title}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:[p.description.substring(0,100),"..."]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[n.jsx("span",{className:`px-2 py-1 rounded-full ${p.status==="open"?"bg-yellow-100 text-yellow-800":p.status==="in_progress"?"bg-primary/10 text-primary":p.status==="resolved"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:p.status.replace("_"," ")}),n.jsx("span",{children:Le(p.createdAt,"MMM dd, yyyy")})]})]})]},p.id)):n.jsxs("div",{className:"text-center py-8",children:[n.jsx("svg",{className:"w-12 h-12 text-muted-foreground/50 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),n.jsx("p",{className:"text-muted-foreground",children:"No updates yet"})]})})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-foreground mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(F,{to:"/messages",className:"block w-full btn-outline text-center py-2",children:"Message Team"}),n.jsx(F,{to:"/client-portal/files",className:"block w-full btn-outline text-center py-2",children:"Share Files"}),n.jsx(F,{to:"/client-portal/feedback",className:"block w-full btn-primary text-center py-2",children:"Submit Feedback"})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-foreground mb-4",children:"Project Stats"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Tickets:"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:a.length})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Open Tickets:"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:a.filter(p=>p.status==="open"||p.status==="in_progress").length})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Messages:"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:c.length})]})]})]})]})]})]})]})}function KR(){const{user:t}=ne(),[e,r]=S.useState([]),[s,i]=S.useState(""),[a,o]=S.useState([]),[c,d]=S.useState(!1);S.useEffect(()=>{if(t&&t.role==="client"){const b=kr(t.id,t.role);r(b),b.length>0&&i(b[0].id)}},[t]);const u=b=>{const E=Array.from(b.target.files||[]);o(k=>[...k,...E])},m=async()=>{!s||a.length===0||(d(!0),await new Promise(b=>setTimeout(b,2e3)),console.log("Uploading files:",a.map(b=>b.name)),console.log("To project:",s),o([]),d(!1),alert("Files uploaded successfully!"))},f=b=>{o(E=>E.filter((k,x)=>x!==b))},p=b=>{if(b===0)return"0 Bytes";const E=1024,k=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(b)/Math.log(E));return parseFloat((b/Math.pow(E,x)).toFixed(2))+" "+k[x]};return!t||t.role!=="client"?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):n.jsxs("div",{className:"min-h-screen bg-muted",children:[n.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-border/50 sticky top-0 z-40",children:n.jsx("div",{className:"container mx-auto px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(F,{to:"/client-portal/dashboard",className:"flex items-center gap-3",children:[n.jsx("img",{src:"/Logo.png",alt:"Logo",className:"h-8 w-auto"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold text-primary",children:"Client Portal"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"File Sharing"})]})]}),n.jsx(F,{to:"/client-portal/dashboard",className:"text-primary hover:text-primary-dark transition-colors",children:" Back to Dashboard"})]})})}),n.jsx("main",{className:"container mx-auto px-6 py-8",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"Share Files with Your Team"}),n.jsx("p",{className:"text-muted-foreground",children:"Upload documents, images, or any files your project team needs to access"})]}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-8 mb-8",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Select Project"}),n.jsx("select",{value:s,onChange:b=>i(b.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground",children:e.map(b=>n.jsx("option",{value:b.id,children:b.name},b.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Upload Files"}),n.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-primary transition-colors",children:[n.jsx("input",{type:"file",multiple:!0,onChange:u,className:"hidden",id:"file-upload",accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif,.svg,.zip,.rar"}),n.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[n.jsx("svg",{className:"w-12 h-12 text-muted-foreground mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),n.jsx("p",{className:"text-lg font-medium text-foreground mb-2",children:"Drop files here or click to browse"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Supports: PDF, DOC, DOCX, TXT, JPG, PNG, GIF, SVG, ZIP, RAR (max 10MB each)"})]})]})]}),a.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Files to Upload"}),n.jsx("div",{className:"space-y-3",children:a.map((b,E)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("svg",{className:"w-5 h-5 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:b.name}),n.jsx("p",{className:"text-xs text-muted-foreground",children:p(b.size)})]})]}),n.jsx("button",{onClick:()=>f(E),className:"p-1 text-muted-foreground hover:text-destructive transition-colors",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},E))})]}),a.length>0&&n.jsx("button",{onClick:m,disabled:c,className:"w-full btn-primary py-3 disabled:opacity-50 disabled:cursor-not-allowed",children:c?n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading Files..."]}):`Upload ${a.length} File${a.length>1?"s":""}`})]})}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-8",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground mb-6",children:"Previously Shared Files"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"text-center py-8",children:[n.jsx("svg",{className:"w-12 h-12 text-muted-foreground/50 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-5.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),n.jsx("p",{className:"text-muted-foreground",children:"No files shared yet"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Files you upload will appear here for your team's access"})]})})]})]})})]})}function QR(){const{user:t}=ne(),[e,r]=S.useState([]),[s,i]=S.useState(""),[a,o]=S.useState({rating:5,category:"overall",comment:"",isPublic:!1}),[c,d]=S.useState(!1);S.useEffect(()=>{if(t&&t.role==="client"){const f=kr(t.id,t.role);r(f),f.length>0&&i(f[0].id)}},[t]);const u=async f=>{if(f.preventDefault(),!s||!a.comment.trim()){alert("Please fill in all required fields");return}d(!0),await new Promise(p=>setTimeout(p,1500)),console.log("Submitting feedback:",{clientId:t==null?void 0:t.id,projectId:s,...a}),o({rating:5,category:"overall",comment:"",isPublic:!1}),d(!1),alert("Thank you for your feedback! We'll review it and get back to you soon.")};if(!t||t.role!=="client")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const m={1:"Poor",2:"Fair",3:"Good",4:"Very Good",5:"Excellent"};return n.jsxs("div",{className:"min-h-screen bg-muted",children:[n.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-border/50 sticky top-0 z-40",children:n.jsx("div",{className:"container mx-auto px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(F,{to:"/client-portal/dashboard",className:"flex items-center gap-3",children:[n.jsx("img",{src:"/Logo.png",alt:"Logo",className:"h-8 w-auto"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold text-primary",children:"Client Portal"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Submit Feedback"})]})]}),n.jsx(F,{to:"/client-portal/dashboard",className:"text-primary hover:text-primary-dark transition-colors",children:" Back to Dashboard"})]})})}),n.jsx("main",{className:"container mx-auto px-6 py-8",children:n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsxs("div",{className:"mb-8 text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"Share Your Feedback"}),n.jsx("p",{className:"text-muted-foreground",children:"Help us improve by sharing your thoughts about our work"})]}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-8",children:n.jsxs("form",{onSubmit:u,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Which project is this feedback about?"}),n.jsx("select",{value:s,onChange:f=>i(f.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground",required:!0,children:e.map(f=>n.jsx("option",{value:f.id,children:f.name},f.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-3",children:"How would you rate our work?"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(f=>n.jsx("button",{type:"button",onClick:()=>o(p=>({...p,rating:f})),className:`w-8 h-8 ${f<=a.rating?"text-yellow-400 fill-current":"text-gray-300"} hover:text-yellow-400 transition-colors`,children:n.jsx("svg",{viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},f))}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:m[a.rating]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"What area does this feedback relate to?"}),n.jsxs("select",{value:a.category,onChange:f=>o(p=>({...p,category:f.target.value})),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground",children:[n.jsx("option",{value:"overall",children:"Overall Experience"}),n.jsx("option",{value:"design",children:"Design Quality"}),n.jsx("option",{value:"functionality",children:"Website Functionality"}),n.jsx("option",{value:"communication",children:"Team Communication"}),n.jsx("option",{value:"timeline",children:"Project Timeline"}),n.jsx("option",{value:"support",children:"Customer Support"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Your Feedback"}),n.jsx("textarea",{value:a.comment,onChange:f=>o(p=>({...p,comment:f.target.value})),placeholder:"Please share your detailed feedback, suggestions for improvement, or any concerns...",rows:6,className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground placeholder-muted-foreground resize-none",required:!0}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Your feedback helps us improve our services. Be as specific as possible."})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",id:"isPublic",checked:a.isPublic,onChange:f=>o(p=>({...p,isPublic:f.target.checked})),className:"w-4 h-4 rounded border-border"}),n.jsx("label",{htmlFor:"isPublic",className:"text-sm text-foreground",children:"Make this feedback public (visible to other clients as testimonials)"})]}),n.jsx("button",{type:"submit",disabled:c,className:"w-full btn-primary py-3 disabled:opacity-50 disabled:cursor-not-allowed",children:c?n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Submitting Feedback..."]}):"Submit Feedback"})]})}),n.jsxs("div",{className:"bg-secondary/10 dark:bg-secondary/20 rounded-xl border border-secondary/20 dark:border-secondary/30 p-6 mt-8",children:[n.jsx("h3",{className:"text-lg font-semibold text-primary dark:text-primary mb-3",children:" Tips for Better Feedback"}),n.jsxs("ul",{className:"space-y-2 text-sm text-primary dark:text-primary",children:[n.jsx("li",{children:" Be specific about what you liked or didn't like"}),n.jsx("li",{children:" Include examples from your experience"}),n.jsx("li",{children:" Suggest improvements when possible"}),n.jsx("li",{children:" Mention both positive aspects and areas for growth"}),n.jsx("li",{children:" Rate based on your overall satisfaction with the work"})]})]})]})})]})}function YR(){const{user:t,isSignedIn:e}=ne(),r=ae(),[s,i]=S.useState("30d"),[a,o]=S.useState({projects:[],tickets:[],website:[],social:[],users:[]}),[c,d]=S.useState(!0);S.useEffect(()=>{if(!e){r("/login");return}if((t==null?void 0:t.role)!=="admin"){r("/dashboard");return}const k=bt(),x=Lt(),y=ub(),v=Km(),j=ve();o({projects:k,tickets:x,website:y,social:v,users:j}),d(!1)},[t,e,r]);const m=(()=>{const x=Qw(new Date,s==="7d"?7:s==="30d"?30:s==="90d"?90:365);return{recentTickets:a.tickets.filter(y=>new Date(y.createdAt)>=x),recentWebsite:a.website.filter(y=>new Date(y.date)>=x),recentSocial:a.social.filter(y=>new Date(y.date)>=x)}})(),f={totalProjects:a.projects.length,activeProjects:a.projects.filter(k=>k.status==="active").length,totalTickets:m.recentTickets.length,resolvedTickets:m.recentTickets.filter(k=>k.status==="resolved").length,avgPageViews:m.recentWebsite.length>0?Math.round(m.recentWebsite.reduce((k,x)=>k+x.pageViews,0)/m.recentWebsite.length):0,totalEngagement:m.recentSocial.reduce((k,x)=>k+x.engagement,0),totalReach:m.recentSocial.reduce((k,x)=>k+x.reach,0)},p={active:a.projects.filter(k=>k.status==="active").length,completed:a.projects.filter(k=>k.status==="completed").length,paused:a.projects.filter(k=>k.status==="paused").length},b={critical:m.recentTickets.filter(k=>k.priority==="critical").length,high:m.recentTickets.filter(k=>k.priority==="high").length,medium:m.recentTickets.filter(k=>k.priority==="medium").length,low:m.recentTickets.filter(k=>k.priority==="low").length},E=[{month:"Jan",projects:12,tickets:45,revenue:25e3},{month:"Feb",projects:15,tickets:52,revenue:32e3},{month:"Mar",projects:18,tickets:38,revenue:28e3},{month:"Apr",projects:22,tickets:61,revenue:41e3},{month:"May",projects:20,tickets:49,revenue:38e3},{month:"Jun",projects:25,tickets:55,revenue:45e3}];return!t||t.role!=="admin"?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-8 lg:py-12",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-6 mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground mb-3",children:"Analytics Dashboard"}),n.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Comprehensive insights into your business performance and project metrics"})]}),n.jsx("div",{className:"flex gap-2",children:[{value:"7d",label:"7 Days"},{value:"30d",label:"30 Days"},{value:"90d",label:"90 Days"},{value:"1y",label:"1 Year"}].map(k=>n.jsx("button",{onClick:()=>i(k.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${s===k.value?"bg-primary text-white":"bg-white dark:bg-gray-800 border border-border hover:bg-muted"}`,children:k.label},k.value))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-primary/10 dark:bg-primary/20 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-foreground",children:f.totalProjects}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Projects"}),n.jsx("p",{className:"text-xs text-green-600",children:"+12% vs last period"})]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-foreground",children:f.activeProjects}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Projects"}),n.jsx("p",{className:"text-xs text-green-600",children:"+8% vs last period"})]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-foreground",children:f.totalTickets}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total Tickets (",s,")"]}),n.jsx("p",{className:"text-xs text-red-600",children:"-5% vs last period"})]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-foreground",children:f.avgPageViews.toLocaleString()}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Page Views"}),n.jsx("p",{className:"text-xs text-green-600",children:"+15% vs last period"})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground mb-6",children:"Project Status Distribution"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),n.jsx("span",{className:"text-sm font-medium",children:"Active"})]}),n.jsx("span",{className:"text-sm font-bold",children:p.active})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-4 h-4 bg-primary rounded"}),n.jsx("span",{className:"text-sm font-medium",children:"Completed"})]}),n.jsx("span",{className:"text-sm font-bold",children:p.completed})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),n.jsx("span",{className:"text-sm font-medium",children:"Paused"})]}),n.jsx("span",{className:"text-sm font-bold",children:p.paused})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground mb-6",children:"Ticket Priority Distribution"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),n.jsx("span",{className:"text-sm font-medium",children:"Critical"})]}),n.jsx("span",{className:"text-sm font-bold",children:b.critical})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),n.jsx("span",{className:"text-sm font-medium",children:"High"})]}),n.jsx("span",{className:"text-sm font-bold",children:b.high})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),n.jsx("span",{className:"text-sm font-medium",children:"Medium"})]}),n.jsx("span",{className:"text-sm font-bold",children:b.medium})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),n.jsx("span",{className:"text-sm font-medium",children:"Low"})]}),n.jsx("span",{className:"text-sm font-bold",children:b.low})]})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6 mb-8",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground mb-6",children:"Monthly Performance Trends"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-border",children:[n.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Month"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Projects"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Tickets"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Revenue"})]})}),n.jsx("tbody",{children:E.map((k,x)=>n.jsxs("tr",{className:x%2===0?"bg-muted/30":"",children:[n.jsx("td",{className:"py-3 px-4 font-medium",children:k.month}),n.jsx("td",{className:"py-3 px-4",children:k.projects}),n.jsx("td",{className:"py-3 px-4",children:k.tickets}),n.jsxs("td",{className:"py-3 px-4 font-medium",children:["$",k.revenue.toLocaleString()]})]},k.month))})]})})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsxs("h3",{className:"text-xl font-bold text-foreground mb-6",children:["Social Media Performance (",s,")"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:f.totalReach.toLocaleString()}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Reach"}),n.jsx("div",{className:"text-xs text-green-600 mt-1",children:"+23% vs last period"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:f.totalEngagement.toLocaleString()}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Engagement"}),n.jsx("div",{className:"text-xs text-green-600 mt-1",children:"+18% vs last period"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:[f.totalEngagement>0?Math.round(f.totalEngagement/f.totalReach*100):0,"%"]}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Engagement Rate"}),n.jsx("div",{className:"text-xs text-green-600 mt-1",children:"+5% vs last period"})]})]})]})]})}),n.jsx(he,{})]})}const XR=[{id:"event-1",title:"SpecCon Website Launch Meeting",description:"Final review before launch",eventType:"meeting",priority:"high",startDate:new Date(2025,0,15,10,0),endDate:new Date(2025,0,15,11,30),allDay:!1,location:"Conference Room A",attendees:["user-1","user-2","user-3","user-5"],organizerId:"user-1",projectId:"proj-1",isRecurring:!1,recurrenceType:"none",reminderMinutes:15,status:"confirmed",notes:"Please review final designs before meeting",createdAt:new Date,updatedAt:new Date},{id:"event-2",title:"Andebe Platform Deadline",description:"Development completion deadline",eventType:"deadline",priority:"critical",startDate:new Date(2025,0,20),endDate:new Date(2025,0,20),allDay:!0,attendees:["user-2","user-3"],organizerId:"user-1",projectId:"proj-2",isRecurring:!1,recurrenceType:"none",reminderMinutes:1440,status:"scheduled",createdAt:new Date,updatedAt:new Date},{id:"event-3",title:"Client Presentation - Megrolowveld",description:"Present design concepts to client",eventType:"presentation",priority:"high",startDate:new Date(2025,0,18,14,0),endDate:new Date(2025,0,18,15,30),allDay:!1,location:"Virtual Meeting",attendees:["user-1","user-4","user-5","user-6"],organizerId:"user-1",projectId:"proj-3",isRecurring:!1,recurrenceType:"none",reminderMinutes:30,status:"scheduled",createdAt:new Date,updatedAt:new Date},{id:"event-4",title:"Weekly Team Standup",description:"Weekly progress update and planning",eventType:"meeting",priority:"medium",startDate:new Date(2025,0,16,9,0),endDate:new Date(2025,0,16,9,30),allDay:!1,location:"Main Conference Room",attendees:["user-1","user-2","user-3","user-4"],organizerId:"user-1",isRecurring:!0,recurrenceType:"weekly",recurrenceEndDate:new Date(2025,11,31),reminderMinutes:5,status:"confirmed",createdAt:new Date,updatedAt:new Date}];function JR(){const{user:t,isSignedIn:e}=ne(),r=ae(),[s,i]=S.useState(new Date),[a,o]=S.useState("month"),[c,d]=S.useState(XR),[u,m]=S.useState([]),[f,p]=S.useState([]),[b,E]=S.useState(null),[k,x]=S.useState(!1);S.useEffect(()=>{if(!e){r("/login");return}m(bt()),p(ve())},[e,r]);const y=A=>c.filter(C=>(C.allDay,Dy(C.startDate,A))),v=()=>{const A=qw(s),C=UP(s);return Ly({start:A,end:C}).map(B=>({date:B,events:y(B)}))},j=()=>{const A=Wr(s),C=WP(s);return Ly({start:A,end:C}).map(B=>({date:B,events:y(B)}))},I=()=>{i(a==="month"?A=>WR(A):a==="week"?A=>$R(A):A=>Pc(A,-1))},M=()=>{i(a==="month"?A=>Ww(A,1):a==="week"?A=>Hw(A,1):A=>Pc(A,1))},P=()=>{i(new Date)},N=A=>({meeting:"bg-primary/10 text-primary border-primary/20",deadline:"bg-red-100 text-red-800 border-red-200",milestone:"bg-green-100 text-green-800 border-green-200",review:"bg-purple-100 text-purple-800 border-purple-200",maintenance:"bg-yellow-100 text-yellow-800 border-yellow-200",kickoff:"bg-indigo-100 text-indigo-800 border-indigo-200",presentation:"bg-pink-100 text-pink-800 border-pink-200"})[A]||"bg-gray-100 text-gray-800 border-gray-200",w=A=>({low:"border-l-4 border-l-green-500",medium:"border-l-4 border-l-yellow-500",high:"border-l-4 border-l-orange-500",critical:"border-l-4 border-l-red-500"})[A]||"",T=A=>{if(!A)return null;const C=u.find(se=>se.id===A);return C==null?void 0:C.name},R=A=>A.map(C=>{const se=f.find(B=>B.id===C);return(se==null?void 0:se.fullName)||"Unknown"}).join(", "),D=A=>A.allDay?"All Day":`${Le(A.startDate,"h:mm a")} - ${Le(A.endDate,"h:mm a")}`;return t?n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-8 lg:py-12",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-6 mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground mb-3",children:"Calendar"}),n.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Schedule meetings, track deadlines, and manage project timelines"})]}),n.jsx("div",{className:"flex gap-3",children:n.jsxs("button",{onClick:()=>x(!0),className:"btn-primary px-6 py-3",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Event"]})})]}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6 mb-8",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:I,className:"p-2 rounded-lg hover:bg-muted transition-colors",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsxs("h2",{className:"text-xl font-semibold text-foreground min-w-[200px] text-center",children:[a==="month"&&Le(s,"MMMM yyyy"),a==="week"&&`Week of ${Le(Wr(s),"MMM dd")}`,a==="day"&&Le(s,"EEEE, MMMM dd, yyyy")]}),n.jsx("button",{onClick:M,className:"p-2 rounded-lg hover:bg-muted transition-colors",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),n.jsx("button",{onClick:P,className:"btn-outline px-4 py-2",children:"Today"})]}),n.jsx("div",{className:"flex bg-muted rounded-lg p-1",children:[{value:"month",label:"Month"},{value:"week",label:"Week"},{value:"day",label:"Day"}].map(A=>n.jsx("button",{onClick:()=>o(A.value),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${a===A.value?"bg-white dark:bg-gray-700 text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:A.label},A.value))})]})}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 overflow-hidden",children:[a==="month"&&n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"grid grid-cols-7 gap-px mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(A=>n.jsx("div",{className:"p-3 text-center font-semibold text-muted-foreground text-sm",children:A},A))}),n.jsx("div",{className:"grid grid-cols-7 gap-px",children:v().map(({date:A,events:C},se)=>n.jsxs("div",{className:`min-h-[120px] p-2 border border-border/20 ${zR(A,s)?"bg-background":"bg-muted/30"}`,children:[n.jsx("div",{className:"text-sm font-medium text-foreground mb-2",children:Le(A,"d")}),n.jsxs("div",{className:"space-y-1",children:[C.slice(0,3).map(B=>n.jsxs("div",{className:`text-xs p-1 rounded border cursor-pointer hover:opacity-80 transition-opacity ${N(B.eventType)} ${w(B.priority)}`,onClick:()=>E(B),children:[n.jsx("div",{className:"font-medium truncate",children:B.title}),!B.allDay&&n.jsx("div",{className:"text-xs opacity-75",children:Le(B.startDate,"h:mm a")})]},B.id)),C.length>3&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",C.length-3," more"]})]})]},se))})]}),a==="week"&&n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"space-y-4",children:j().map(({date:A,events:C})=>n.jsxs("div",{className:"border border-border/50 rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-3",children:Le(A,"EEEE, MMMM dd")}),n.jsx("div",{className:"space-y-2",children:C.length>0?C.map(se=>n.jsx("div",{className:`p-3 rounded-lg border cursor-pointer hover:opacity-90 transition-opacity ${N(se.eventType)} ${w(se.priority)}`,onClick:()=>E(se),children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:se.title}),n.jsx("p",{className:"text-sm opacity-75",children:D(se)}),se.location&&n.jsxs("p",{className:"text-sm opacity-75",children:[" ",se.location]})]}),n.jsx("div",{className:"text-right",children:n.jsx("span",{className:`text-xs px-2 py-1 rounded ${N(se.eventType)}`,children:se.eventType})})]})},se.id)):n.jsx("p",{className:"text-muted-foreground text-sm",children:"No events scheduled"})})]},A.toISOString()))})}),a==="day"&&n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-foreground mb-6",children:Le(s,"EEEE, MMMM dd, yyyy")}),n.jsx("div",{className:"space-y-4",children:y(s).length>0?y(s).map(A=>n.jsxs("div",{className:`p-4 rounded-lg border cursor-pointer hover:shadow-md transition-shadow ${N(A.eventType)} ${w(A.priority)}`,onClick:()=>E(A),children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsx("h4",{className:"text-lg font-semibold",children:A.title}),n.jsx("span",{className:`text-xs px-2 py-1 rounded ${N(A.eventType)}`,children:A.eventType})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Time"}),n.jsx("p",{className:"text-sm",children:D(A)})]}),A.location&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Location"}),n.jsx("p",{className:"text-sm",children:A.location})]})]}),A.description&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Description"}),n.jsx("p",{className:"text-sm",children:A.description})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Attendees"}),n.jsx("p",{className:"text-sm",children:R(A.attendees)})]}),A.projectId&&n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Project"}),n.jsx("p",{className:"text-sm",children:T(A.projectId)})]})]})]},A.id)):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("svg",{className:"w-16 h-16 text-muted-foreground/50 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"No events scheduled for this day"})]})})]})]}),n.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-4 gap-8",children:[n.jsx("div",{className:"lg:col-span-3"}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-foreground mb-4",children:"Upcoming Events"}),n.jsx("div",{className:"space-y-3",children:c.filter(A=>A.startDate>=new Date).sort((A,C)=>A.startDate.getTime()-C.startDate.getTime()).slice(0,5).map(A=>n.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer hover:opacity-90 transition-opacity ${N(A.eventType)} ${w(A.priority)}`,onClick:()=>E(A),children:[n.jsx("h4",{className:"font-medium text-sm mb-1",children:A.title}),n.jsxs("p",{className:"text-xs opacity-75",children:[Le(A.startDate,"MMM dd"),"  ",D(A)]}),A.location&&n.jsxs("p",{className:"text-xs opacity-75",children:[" ",A.location]})]},A.id))}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-border/50",children:[n.jsx("h4",{className:"font-semibold text-foreground mb-3",children:"Legend"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-primary rounded"}),n.jsx("span",{children:"Meeting"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),n.jsx("span",{children:"Deadline"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),n.jsx("span",{children:"Milestone"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded"}),n.jsx("span",{children:"Review"})]})]})]})]})]}),b&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-background rounded-xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsx("h3",{className:"text-2xl font-bold text-foreground",children:b.title}),n.jsx("button",{onClick:()=>E(null),className:"p-2 hover:bg-muted rounded-lg transition-colors",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Date & Time"}),n.jsx("p",{className:"text-foreground",children:Le(b.startDate,"EEEE, MMMM dd, yyyy")}),n.jsx("p",{className:"text-muted-foreground",children:D(b)})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Type & Priority"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("span",{className:`text-xs px-2 py-1 rounded ${N(b.eventType)}`,children:b.eventType}),n.jsx("span",{className:`text-xs px-2 py-1 rounded ${b.priority==="critical"?"bg-red-100 text-red-800":b.priority==="high"?"bg-orange-100 text-orange-800":b.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:b.priority})]})]})]}),b.location&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Location"}),n.jsxs("p",{className:"text-foreground",children:[" ",b.location]})]}),b.description&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Description"}),n.jsx("p",{className:"text-foreground",children:b.description})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Attendees"}),n.jsx("p",{className:"text-foreground",children:R(b.attendees)})]}),b.projectId&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Related Project"}),n.jsx("p",{className:"text-foreground",children:T(b.projectId)})]}),b.notes&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Notes"}),n.jsx("p",{className:"text-foreground",children:b.notes})]}),n.jsx("div",{className:"flex justify-end gap-3 pt-6 border-t border-border",children:n.jsx("button",{onClick:()=>E(null),className:"btn-outline px-6 py-2",children:"Close"})})]})]})})]})}),n.jsx(he,{})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}const ZR=[{id:"timer-1",userId:"user-2",projectId:"proj-1",ticketId:"ticket-1",description:"Working on homepage hero image update",entryType:"development",startTime:new Date,status:"running",accumulatedTime:0,isBillable:!0,hourlyRate:75,tags:["frontend","design"]}],e3=[{id:"entry-1",userId:"user-2",projectId:"proj-1",ticketId:"ticket-1",description:"Homepage hero image implementation",entryType:"development",startTime:new Date(Date.now()-2*60*60*1e3),endTime:new Date(Date.now()-1*60*60*1e3),duration:60,isBillable:!0,hourlyRate:75,tags:["frontend","design"],createdAt:new Date,updatedAt:new Date},{id:"entry-2",userId:"user-3",projectId:"proj-2",description:"Client meeting - Andebe platform requirements",entryType:"meeting",startTime:new Date(Date.now()-24*60*60*1e3),endTime:new Date(Date.now()-23.5*60*60*1e3),duration:30,isBillable:!0,hourlyRate:85,tags:["meeting","client"],createdAt:new Date,updatedAt:new Date}];function t3(){const{user:t,isSignedIn:e}=ne(),r=ae(),[s,i]=S.useState(null),[a,o]=S.useState(ZR),[c,d]=S.useState(e3),[u,m]=S.useState([]),[f,p]=S.useState([]),[b,E]=S.useState([]),[k,x]=S.useState(new Date),[y,v]=S.useState("week"),[j,I]=S.useState({projectId:"",ticketId:"",description:"",entryType:"development",isBillable:!0,tags:""});S.useEffect(()=>{if(!e){r("/login");return}m(bt()),p(Lt()),E(ve());const B=setInterval(()=>{x(new Date)},1e3);return()=>clearInterval(B)},[e,r]);const M=B=>{const J=new Date(B.startTime);return My(k,J)},P=B=>{const J=Math.floor(B/60),Pe=B%60;return`${J.toString().padStart(2,"0")}:${Pe.toString().padStart(2,"0")}`},N=()=>{if(!t||!j.description.trim())return;const B={id:`timer-${Date.now()}`,userId:t.id,projectId:j.projectId||void 0,ticketId:j.ticketId||void 0,description:j.description,entryType:j.entryType,startTime:new Date,status:"running",accumulatedTime:0,isBillable:j.isBillable,tags:j.tags.split(",").map(J=>J.trim()).filter(J=>J)};i(B),o(J=>[B,...J])},w=()=>{if(!s||!t)return;const B=new Date,J=My(B,new Date(s.startTime)),Pe={id:`entry-${Date.now()}`,userId:t.id,projectId:s.projectId,ticketId:s.ticketId,description:s.description,entryType:s.entryType,startTime:s.startTime,endTime:B,duration:J,isBillable:s.isBillable,hourlyRate:s.hourlyRate,tags:s.tags,createdAt:new Date,updatedAt:new Date};d($=>[Pe,...$]),i(null),o($=>$.filter(G=>G.id!==s.id)),I({projectId:"",ticketId:"",description:"",entryType:"development",isBillable:!0,tags:""})},T=()=>{const B=new Date;let J;switch(y){case"today":J=new Date(B.getFullYear(),B.getMonth(),B.getDate());break;case"week":J=Wr(B);break;case"month":J=qw(B);break;default:J=Wr(B)}return c.filter(Pe=>new Date(Pe.startTime)>=J&&Pe.userId===(t==null?void 0:t.id))},R=B=>{const J=B.reduce((G,Z)=>G+Z.duration,0),Pe=B.filter(G=>G.isBillable).reduce((G,Z)=>G+Z.duration,0),$=B.filter(G=>G.isBillable&&G.hourlyRate).reduce((G,Z)=>G+Z.duration/60*(Z.hourlyRate||0),0);return{totalHours:Math.round(J/60*100)/100,billableHours:Math.round(Pe/60*100)/100,totalAmount:Math.round($*100)/100}},D=T(),A=R(D),C=B=>{if(!B)return"No Project";const J=u.find(Pe=>Pe.id===B);return(J==null?void 0:J.name)||"Unknown Project"},se=B=>{if(!B)return null;const J=f.find(Pe=>Pe.id===B);return J==null?void 0:J.title};return t?n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-8 lg:py-12",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-6 mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground mb-3",children:"Time Tracking"}),n.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Track your work hours, monitor productivity, and manage billable time"})]}),n.jsx("div",{className:"flex gap-2",children:[{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"}].map(B=>n.jsx("button",{onClick:()=>v(B.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${y===B.value?"bg-primary text-white":"bg-white dark:bg-gray-800 border border-border hover:bg-muted"}`,children:B.label},B.value))})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:s?"Active Timer":"Start Tracking Time"}),s?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl font-mono font-bold text-primary mb-4",children:P(M(s))}),n.jsx("div",{className:"text-lg text-muted-foreground mb-2",children:s.description}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Project: ",C(s.projectId),s.ticketId&&n.jsxs("span",{children:["  Ticket: ",se(s.ticketId)]})]})]}),n.jsx("div",{className:"flex justify-center",children:n.jsxs("button",{onClick:w,className:"bg-red-600 hover:bg-red-700 text-white px-8 py-3 rounded-lg font-medium transition-colors",children:[n.jsxs("svg",{className:"w-5 h-5 mr-2 inline",fill:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),n.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}),"Stop Timer"]})})]}):n.jsxs("form",{onSubmit:B=>{B.preventDefault(),N()},className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Project"}),n.jsxs("select",{value:j.projectId,onChange:B=>I(J=>({...J,projectId:B.target.value})),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground",children:[n.jsx("option",{value:"",children:"Select Project (Optional)"}),u.map(B=>n.jsx("option",{value:B.id,children:B.name},B.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Ticket"}),n.jsxs("select",{value:j.ticketId,onChange:B=>I(J=>({...J,ticketId:B.target.value})),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground",children:[n.jsx("option",{value:"",children:"Select Ticket (Optional)"}),f.filter(B=>!j.projectId||B.projectId===j.projectId).map(B=>n.jsx("option",{value:B.id,children:B.title},B.id))]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description"}),n.jsx("input",{type:"text",value:j.description,onChange:B=>I(J=>({...J,description:B.target.value})),placeholder:"What are you working on?",className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground placeholder-muted-foreground",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Activity Type"}),n.jsxs("select",{value:j.entryType,onChange:B=>I(J=>({...J,entryType:B.target.value})),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground",children:[n.jsx("option",{value:"development",children:"Development"}),n.jsx("option",{value:"design",children:"Design"}),n.jsx("option",{value:"meeting",children:"Meeting"}),n.jsx("option",{value:"review",children:"Review"}),n.jsx("option",{value:"planning",children:"Planning"}),n.jsx("option",{value:"testing",children:"Testing"}),n.jsx("option",{value:"maintenance",children:"Maintenance"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",id:"billable",checked:j.isBillable,onChange:B=>I(J=>({...J,isBillable:B.target.checked})),className:"w-4 h-4 rounded border-border"}),n.jsx("label",{htmlFor:"billable",className:"text-sm font-medium text-foreground",children:"Billable"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Tags"}),n.jsx("input",{type:"text",value:j.tags,onChange:B=>I(J=>({...J,tags:B.target.value})),placeholder:"frontend, backend, etc.",className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground placeholder-muted-foreground"})]})]}),n.jsxs("button",{type:"submit",className:"w-full btn-primary py-3",children:[n.jsxs("svg",{className:"w-5 h-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("polygon",{points:"10,8 16,12 10,16 10,8"})]}),"Start Timer"]})]})]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsxs("h3",{className:"text-lg font-bold text-foreground mb-4",children:["This ",y.charAt(0).toUpperCase()+y.slice(1)]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Hours"}),n.jsxs("span",{className:"text-xl font-bold text-foreground",children:[A.totalHours,"h"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Billable Hours"}),n.jsxs("span",{className:"text-xl font-bold text-green-600",children:[A.billableHours,"h"]})]}),A.totalAmount>0&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Value"}),n.jsxs("span",{className:"text-xl font-bold text-primary",children:["$",A.totalAmount]})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-foreground mb-4",children:"Quick Stats"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Entries"}),n.jsx("span",{className:"text-sm font-medium",children:D.length})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Avg per day"}),n.jsxs("span",{className:"text-sm font-medium",children:[y==="week"?Math.round(A.totalHours/7*10)/10:y==="month"?Math.round(A.totalHours/30*10)/10:Math.round(A.totalHours*10)/10,"h"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Most active project"}),n.jsx("span",{className:"text-sm font-medium",children:D.length>0?C(D[0].projectId):"None"})]})]})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-border/50",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Time Entries"}),n.jsx("p",{className:"text-muted-foreground",children:"Detailed breakdown of your tracked time"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-muted/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-3 px-6 font-semibold text-foreground",children:"Description"}),n.jsx("th",{className:"text-left py-3 px-6 font-semibold text-foreground",children:"Project"}),n.jsx("th",{className:"text-left py-3 px-6 font-semibold text-foreground",children:"Type"}),n.jsx("th",{className:"text-left py-3 px-6 font-semibold text-foreground",children:"Duration"}),n.jsx("th",{className:"text-left py-3 px-6 font-semibold text-foreground",children:"Date"}),n.jsx("th",{className:"text-left py-3 px-6 font-semibold text-foreground",children:"Billable"})]})}),n.jsxs("tbody",{children:[D.map((B,J)=>n.jsxs("tr",{className:J%2===0?"bg-background":"bg-muted/30",children:[n.jsx("td",{className:"py-3 px-6",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-foreground",children:B.description}),B.tags.length>0&&n.jsxs("div",{className:"flex gap-1 mt-1",children:[B.tags.slice(0,2).map(Pe=>n.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-1 rounded",children:Pe},Pe)),B.tags.length>2&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",B.tags.length-2]})]})]})}),n.jsx("td",{className:"py-3 px-6 text-muted-foreground",children:C(B.projectId)}),n.jsx("td",{className:"py-3 px-6",children:n.jsx("span",{className:`text-xs px-2 py-1 rounded ${B.entryType==="development"?"bg-primary/10 text-primary":B.entryType==="design"?"bg-purple-100 text-purple-800":B.entryType==="meeting"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:B.entryType})}),n.jsxs("td",{className:"py-3 px-6 font-medium",children:[Math.floor(B.duration/60),"h ",B.duration%60,"m"]}),n.jsx("td",{className:"py-3 px-6 text-muted-foreground",children:Le(new Date(B.startTime),"MMM dd")}),n.jsx("td",{className:"py-3 px-6",children:B.isBillable?n.jsx("span",{className:"text-green-600",children:""}):n.jsx("span",{className:"text-muted-foreground",children:""})})]},B.id)),D.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-12 text-center text-muted-foreground",children:"No time entries found for the selected period"})})]})]})})]})]})}),n.jsx(he,{})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}const r3=[{id:"template-1",name:"Basic Business Website",description:"A professional website for small businesses including homepage, about, services, and contact pages.",category:"website",estimatedDuration:21,estimatedBudget:3500,difficulty:"beginner",tags:["business","professional","responsive"],isPublic:!0,createdBy:"user-1",createdAt:new Date,updatedAt:new Date,phases:[{id:"phase-1",name:"Planning & Design",description:"Wireframes, mockups, and design approval",order:1,estimatedDuration:7,dependencies:[],deliverables:["design-mockups","wireframes"]},{id:"phase-2",name:"Development",description:"Website coding and implementation",order:2,estimatedDuration:10,dependencies:["phase-1"],deliverables:["homepage","about-page","services-page","contact-page"]},{id:"phase-3",name:"Testing & Launch",description:"Quality assurance and deployment",order:3,estimatedDuration:4,dependencies:["phase-2"],deliverables:["testing-report","live-website"]}],deliverables:[{id:"design-mockups",name:"Design Mockups",description:"Visual design concepts for all pages",phaseId:"phase-1",type:"design",estimatedHours:16,isRequired:!0},{id:"wireframes",name:"Wireframes",description:"Page structure and layout planning",phaseId:"phase-1",type:"design",estimatedHours:8,isRequired:!0},{id:"homepage",name:"Homepage",description:"Main landing page with hero section",phaseId:"phase-2",type:"code",estimatedHours:12,isRequired:!0},{id:"about-page",name:"About Page",description:"Company information and team section",phaseId:"phase-2",type:"code",estimatedHours:8,isRequired:!0},{id:"services-page",name:"Services Page",description:"Business services and offerings",phaseId:"phase-2",type:"code",estimatedHours:10,isRequired:!0},{id:"contact-page",name:"Contact Page",description:"Contact form and business information",phaseId:"phase-2",type:"code",estimatedHours:6,isRequired:!0}],teamRoles:[{id:"role-1",role:"web_developer",required:!0,estimatedHours:36,skills:["HTML","CSS","JavaScript","React"]},{id:"role-2",role:"social_media_coordinator",required:!1,estimatedHours:8,skills:["Social Media","Content Creation"]}],checklists:[]},{id:"template-2",name:"E-commerce Website",description:"Complete online store with product catalog, shopping cart, and payment integration.",category:"ecommerce",estimatedDuration:35,estimatedBudget:8500,difficulty:"intermediate",tags:["ecommerce","shopping","payments"],isPublic:!0,createdBy:"user-1",createdAt:new Date,updatedAt:new Date,phases:[{id:"phase-1",name:"Planning & Requirements",description:"Product analysis and technical planning",order:1,estimatedDuration:5,dependencies:[],deliverables:["requirements-doc","tech-spec"]},{id:"phase-2",name:"Design & UI/UX",description:"User interface and experience design",order:2,estimatedDuration:8,dependencies:["phase-1"],deliverables:["ui-design","user-flows"]},{id:"phase-3",name:"Development",description:"Full-stack development and integration",order:3,estimatedDuration:18,dependencies:["phase-2"],deliverables:["frontend-code","backend-api","database-setup","payment-integration"]},{id:"phase-4",name:"Testing & Deployment",description:"Quality assurance and production launch",order:4,estimatedDuration:4,dependencies:["phase-3"],deliverables:["testing-report","live-site"]}],deliverables:[{id:"requirements-doc",name:"Requirements Document",description:"Detailed project requirements and specifications",phaseId:"phase-1",type:"document",estimatedHours:16,isRequired:!0},{id:"ui-design",name:"UI Design System",description:"Complete design system and component library",phaseId:"phase-2",type:"design",estimatedHours:24,isRequired:!0}],teamRoles:[{id:"role-1",role:"web_developer",required:!0,estimatedHours:80,skills:["React","Node.js","Database","API Development"]}],checklists:[]},{id:"template-3",name:"Social Media Campaign",description:"Complete social media strategy and content creation for brand awareness.",category:"social_media",estimatedDuration:28,estimatedBudget:4200,difficulty:"intermediate",tags:["social","content","branding"],isPublic:!0,createdBy:"user-1",createdAt:new Date,updatedAt:new Date,phases:[{id:"phase-1",name:"Strategy & Planning",description:"Audience analysis and campaign strategy",order:1,estimatedDuration:7,dependencies:[],deliverables:["strategy-doc","content-calendar"]},{id:"phase-2",name:"Content Creation",description:"Design and create social media content",order:2,estimatedDuration:14,dependencies:["phase-1"],deliverables:["social-posts","graphics","videos"]},{id:"phase-3",name:"Launch & Monitoring",description:"Campaign execution and performance tracking",order:3,estimatedDuration:7,dependencies:["phase-2"],deliverables:["campaign-report","analytics"]}],deliverables:[],teamRoles:[{id:"role-1",role:"social_media_coordinator",required:!0,estimatedHours:56,skills:["Social Media","Content Creation","Graphic Design","Analytics"]}],checklists:[]}];function n3(){const{user:t,isSignedIn:e}=ne(),r=ae(),[s,i]=S.useState(r3),[a,o]=S.useState("all"),[c,d]=S.useState("all"),[u,m]=S.useState(null);S.useEffect(()=>{if(!e){r("/login");return}},[e,r]);const f=[{value:"all",label:"All Categories"},{value:"website",label:"Website"},{value:"social_media",label:"Social Media"},{value:"ecommerce",label:"E-commerce"},{value:"branding",label:"Branding"},{value:"mobile",label:"Mobile App"}],p=[{value:"all",label:"All Levels"},{value:"beginner",label:"Beginner"},{value:"intermediate",label:"Intermediate"},{value:"advanced",label:"Advanced"}],b=s.filter(x=>{const y=a==="all"||x.category===a,v=c==="all"||x.difficulty===c;return y&&v}),E=x=>({beginner:"bg-green-100 text-green-800",intermediate:"bg-yellow-100 text-yellow-800",advanced:"bg-red-100 text-red-800"})[x]||"bg-gray-100 text-gray-800",k=x=>({website:"bg-primary/10 text-primary",social_media:"bg-pink-100 text-pink-800",ecommerce:"bg-purple-100 text-purple-800",branding:"bg-orange-100 text-orange-800",mobile:"bg-indigo-100 text-indigo-800",custom:"bg-gray-100 text-gray-800"})[x]||"bg-gray-100 text-gray-800";return t?n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-8 lg:py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground mb-3",children:"Project Templates"}),n.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Jumpstart your projects with professionally designed templates and predefined workflows"})]}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6 mb-8",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Category"}),n.jsx("select",{value:a,onChange:x=>o(x.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground",children:f.map(x=>n.jsx("option",{value:x.value,children:x.label},x.value))})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Difficulty"}),n.jsx("select",{value:c,onChange:x=>d(x.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground",children:p.map(x=>n.jsx("option",{value:x.value,children:x.label},x.value))})]}),t.role==="admin"&&n.jsx("div",{className:"flex items-end",children:n.jsxs("button",{className:"btn-primary px-6 py-2",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Template"]})})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:b.map(x=>n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6 hover:shadow-lg transition-all duration-200 cursor-pointer group",onClick:()=>m(x),children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground group-hover:text-primary transition-colors",children:x.name}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${E(x.difficulty)}`,children:x.difficulty})]}),n.jsx("p",{className:"text-muted-foreground text-sm mb-4 leading-relaxed",children:x.description})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${k(x.category)}`,children:x.category.replace("_"," ")}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[x.phases.length," phases"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),n.jsxs("span",{className:"font-medium text-foreground ml-1",children:[x.estimatedDuration," days"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Budget:"}),n.jsxs("span",{className:"font-medium text-foreground ml-1",children:["$",x.estimatedBudget.toLocaleString()]})]})]}),n.jsxs("div",{className:"pt-4 border-t border-border/50",children:[n.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[x.tags.slice(0,3).map(y=>n.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-1 rounded",children:y},y)),x.tags.length>3&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",x.tags.length-3," more"]})]}),n.jsx("button",{className:"w-full btn-primary py-2 text-sm",children:"Use This Template"})]})]})]},x.id))}),b.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("svg",{className:"w-16 h-16 text-muted-foreground/50 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"No templates found matching your criteria"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Try adjusting your filters or create a custom template"})]}),u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-background rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:u.name}),n.jsx("p",{className:"text-muted-foreground",children:u.description})]}),n.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-muted rounded-lg transition-colors",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Duration"}),n.jsxs("p",{className:"text-2xl font-bold text-primary",children:[u.estimatedDuration," days"]})]}),n.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Estimated Budget"}),n.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",u.estimatedBudget.toLocaleString()]})]}),n.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Difficulty"}),n.jsx("span",{className:`text-sm px-3 py-1 rounded-full ${E(u.difficulty)}`,children:u.difficulty})]})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground mb-4",children:"Project Phases"}),n.jsx("div",{className:"space-y-4",children:u.phases.map((x,y)=>n.jsxs("div",{className:"flex items-start gap-4 p-4 border border-border/50 rounded-lg",children:[n.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center font-bold text-sm",children:y+1}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold text-foreground",children:x.name}),n.jsx("p",{className:"text-muted-foreground text-sm mb-2",children:x.description}),n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Duration: ",n.jsxs("span",{className:"font-medium text-foreground",children:[x.estimatedDuration," days"]})]}),n.jsxs("span",{className:"text-muted-foreground",children:["Deliverables: ",n.jsx("span",{className:"font-medium text-foreground",children:x.deliverables.length})]})]})]})]},x.id))})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground mb-4",children:"Team Requirements"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.teamRoles.map(x=>n.jsxs("div",{className:"p-4 border border-border/50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-semibold text-foreground capitalize",children:x.role.replace("_"," ")}),x.required&&n.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:"Required"})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Est. ",x.estimatedHours," hours"]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:x.skills.map(y=>n.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-1 rounded",children:y},y))})]},x.id))})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-border",children:[n.jsx("button",{onClick:()=>m(null),className:"btn-outline px-6 py-2",children:"Close"}),n.jsx("button",{className:"btn-primary px-6 py-2",children:"Use This Template"})]})]})})})]})}),n.jsx(he,{})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}function s3(){const{user:t,isSignedIn:e}=ne(),r=ae(),[s,i]=S.useState("30d"),[a,o]=S.useState([]),[c,d]=S.useState([]),[u,m]=S.useState([]),[f,p]=S.useState([]),[b,E]=S.useState([]);S.useEffect(()=>{if(!e){r("/login");return}if((t==null?void 0:t.role)!=="admin"){r("/dashboard");return}o(bt()),d(Lt()),m(ve()),p(ub()),E(Km())},[e,t,r]);const x=(()=>{const T=Qw(new Date,s==="7d"?7:s==="30d"?30:s==="90d"?90:365);return{recentTickets:c.filter(R=>new Date(R.createdAt)>=T),recentProjects:a.filter(R=>new Date(R.createdAt)>=T),recentWebsite:f.filter(R=>new Date(R.date)>=T),recentSocial:b.filter(R=>new Date(R.date)>=T)}})(),y={totalProjects:a.length,activeProjects:a.filter(w=>w.status==="active").length,completedProjects:a.filter(w=>w.status==="completed").length,projectCompletionRate:a.length>0?Math.round(a.filter(w=>w.status==="completed").length/a.length*100):0,totalTickets:x.recentTickets.length,openTickets:x.recentTickets.filter(w=>w.status==="open"||w.status==="in_progress").length,resolvedTickets:x.recentTickets.filter(w=>w.status==="resolved").length,avgResolutionTime:2.4,totalPageViews:x.recentWebsite.reduce((w,T)=>w+T.pageViews,0),uniqueVisitors:x.recentWebsite.length>0?Math.round(x.recentWebsite.reduce((w,T)=>w+T.uniqueVisitors,0)/x.recentWebsite.length):0,avgBounceRate:x.recentWebsite.length>0?Math.round(x.recentWebsite.reduce((w,T)=>w+T.bounceRate,0)/x.recentWebsite.length):0,totalReach:x.recentSocial.reduce((w,T)=>w+T.reach,0),totalEngagement:x.recentSocial.reduce((w,T)=>w+T.engagement,0),engagementRate:x.recentSocial.length>0?Math.round(x.recentSocial.reduce((w,T)=>w+T.engagement,0)/x.recentSocial.reduce((w,T)=>w+T.reach,0)*100):0,totalUsers:u.length,activeUsers:u.filter(w=>w.isActive).length,teamUtilization:78,totalRevenue:156750,avgProjectValue:Math.round(a.reduce((w,T)=>w+3500,0)/a.length),profitMargin:32},v={revenue:[{month:"Jan",value:12500},{month:"Feb",value:15200},{month:"Mar",value:18900},{month:"Apr",value:22100},{month:"May",value:25800},{month:"Jun",value:31200}],projects:[{month:"Jan",value:8},{month:"Feb",value:12},{month:"Mar",value:15},{month:"Apr",value:18},{month:"May",value:22},{month:"Jun",value:25}]},j=a.filter(w=>w.status==="active").sort((w,T)=>new Date(T.updatedAt).getTime()-new Date(w.updatedAt).getTime()).slice(0,5),I=[{type:"project",action:"completed",item:"SpecCon Website",time:"2 hours ago"},{type:"ticket",action:"resolved",item:"Mobile navigation fix",time:"4 hours ago"},{type:"meeting",action:"scheduled",item:"Client presentation",time:"6 hours ago"},{type:"user",action:"joined",item:"Jane Smith",time:"1 day ago"},{type:"analytics",action:"reported",item:"Website traffic up 15%",time:"2 days ago"}],M=w=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(w),P=w=>({project:"",ticket:"",meeting:"",user:"",analytics:""})[w]||"",N=w=>({project:"text-primary",ticket:"text-green-600",meeting:"text-purple-600",user:"text-orange-600",analytics:"text-indigo-600"})[w]||"text-gray-600";return!t||t.role!=="admin"?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-8 lg:py-12",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-6 mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground mb-3",children:"Executive Dashboard"}),n.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Comprehensive business overview and performance insights"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{className:"btn-outline px-4 py-2",children:"Export Report"}),n.jsx("button",{className:"btn-primary px-4 py-2",children:"Schedule Meeting"})]})]}),n.jsx("div",{className:"flex gap-2 mb-8",children:[{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"1y",label:"Last Year"}].map(w=>n.jsx("button",{onClick:()=>i(w.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${s===w.value?"bg-primary text-white":"bg-white dark:bg-gray-800 border border-border hover:bg-muted"}`,children:w.label},w.value))}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-foreground",children:M(y.totalRevenue)}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Revenue"}),n.jsx("p",{className:"text-xs text-green-600 mt-1",children:"+18% vs last period"})]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-primary/10 dark:bg-primary/20 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-foreground",children:y.activeProjects}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Projects"}),n.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[y.projectCompletionRate,"% completion rate"]})]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-foreground",children:y.totalPageViews.toLocaleString()}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Page Views"}),n.jsx("p",{className:"text-xs text-green-600 mt-1",children:"+23% vs last period"})]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[y.teamUtilization,"%"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Team Utilization"}),n.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[y.activeUsers,"/",y.totalUsers," active members"]})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground mb-6",children:"Performance Trends"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-foreground",children:"Revenue Growth"}),n.jsx("span",{className:"text-sm text-green-600",children:"+18%"})]}),n.jsx("div",{className:"flex gap-1 mb-2",children:v.revenue.map((w,T)=>n.jsx("div",{className:"flex-1 bg-primary/20 rounded-sm",style:{height:`${w.value/35e3*60}px`}},w.month))}),n.jsx("div",{className:"flex justify-between text-xs text-muted-foreground",children:v.revenue.map(w=>n.jsx("span",{children:w.month},w.month))})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-foreground",children:"Project Delivery"}),n.jsx("span",{className:"text-sm text-primary",children:"+25%"})]}),n.jsx("div",{className:"flex gap-1 mb-2",children:v.projects.map((w,T)=>n.jsx("div",{className:"flex-1 bg-primary/20 rounded-sm",style:{height:`${w.value/30*60}px`}},w.month))}),n.jsx("div",{className:"flex justify-between text-xs text-muted-foreground",children:v.projects.map(w=>n.jsx("span",{children:w.month},w.month))})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground mb-6",children:"Active Projects"}),n.jsx("div",{className:"space-y-4",children:j.map((w,T)=>n.jsxs("div",{className:"flex items-center justify-between p-3 border border-border/50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-bold text-primary",children:T+1})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-foreground",children:w.name}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.currentStage,"  ",w.projectType]})]})]}),n.jsx("div",{className:"text-right",children:n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${w.status==="active"?"bg-green-100 text-green-800":w.status==="completed"?"bg-success/10 text-success":"bg-yellow-100 text-yellow-800"}`,children:w.status})})]},w.id))})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground mb-6",children:"Recent Activity"}),n.jsx("div",{className:"space-y-4",children:I.map((w,T)=>n.jsxs("div",{className:"flex items-center gap-4 p-3 border border-border/50 rounded-lg",children:[n.jsx("div",{className:"text-xl",children:P(w.type)}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-sm text-foreground",children:[n.jsx("span",{className:`font-medium ${N(w.type)}`,children:w.action.charAt(0).toUpperCase()+w.action.slice(1)})," "+w.item]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:w.time})]})]},T))})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-foreground mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{className:"w-full btn-primary text-left py-3 px-4 rounded-lg",children:[n.jsx("svg",{className:"w-5 h-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Project"]}),n.jsxs("button",{className:"w-full btn-outline text-left py-3 px-4 rounded-lg",children:[n.jsx("svg",{className:"w-5 h-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Send Message"]}),n.jsxs(F,{to:"/analytics",className:"w-full btn-outline text-left py-3 px-4 rounded-lg",children:[n.jsx("svg",{className:"w-5 h-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"View Analytics"]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-foreground mb-4",children:"Key Stats"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Avg. Resolution Time"}),n.jsxs("span",{className:"text-sm font-medium text-foreground",children:[y.avgResolutionTime,"d"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Engagement Rate"}),n.jsxs("span",{className:"text-sm font-medium text-foreground",children:[y.engagementRate,"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Profit Margin"}),n.jsxs("span",{className:"text-sm font-medium text-green-600",children:[y.profitMargin,"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Client Satisfaction"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:"4.8/5.0"})]})]})]})]})]})]})}),n.jsx(he,{})]})}function i3(){const{user:t,isSignedIn:e}=ne(),r=ae(),[s,i]=S.useState(""),[a,o]=S.useState([]),[c,d]=S.useState(!1),[u,m]=S.useState({projects:!0,tickets:!0,users:!0,messages:!0}),[f,p]=S.useState({projects:[],tickets:[],users:[],messages:[]});S.useEffect(()=>{if(!e){r("/login");return}const v=bt(),j=Lt(),I=ve(),M=t?Pn(t.id):[];p({projects:v,tickets:j,users:I,messages:M})},[e,t,r]);const b=v=>{if(!v.trim()){o([]);return}d(!0);const j=[],I=v.toLowerCase().trim();u.projects&&f.projects.forEach(M=>{const P=E(I,[M.name,M.description,M.projectType,M.currentStage,M.status]);P>0&&j.push({id:M.id,type:"project",title:M.name,description:M.description,url:`/admin/projects/${M.id}`,metadata:{status:M.status,stage:M.currentStage,type:M.projectType},relevance:P})}),u.tickets&&f.tickets.forEach(M=>{const P=E(I,[M.title,M.description,M.type,M.priority,M.status]);P>0&&j.push({id:M.id,type:"ticket",title:M.title,description:M.description,url:`/tickets?project=${M.projectId}`,metadata:{priority:M.priority,status:M.status,type:M.type},relevance:P})}),u.users&&f.users.forEach(M=>{const P=E(I,[M.fullName,M.email,M.role]);P>0&&j.push({id:M.id,type:"user",title:M.fullName,description:`${M.role}  ${M.email}`,url:`/admin/users/${M.id}`,metadata:{role:M.role,email:M.email,active:M.isActive},relevance:P})}),u.messages&&f.messages.forEach(M=>{const P=E(I,[M.subject,M.content]);P>0&&j.push({id:M.id,type:"message",title:M.subject,description:M.content.substring(0,100)+"...",url:"/messages",metadata:{sender:M.senderId,date:M.createdAt},relevance:P})}),j.sort((M,P)=>P.relevance-M.relevance),o(j.slice(0,50)),d(!1)},E=(v,j)=>{let I=0;const M=v.split(" ");return j.forEach(P=>{if(!P)return;const N=P.toLowerCase();M.forEach(w=>{N===w?I+=100:N.startsWith(w)?I+=50:N.includes(w)?I+=25:(N.includes(w.slice(0,-1))||N.includes(w.slice(1)))&&(I+=10)})}),I};S.useEffect(()=>{const v=setTimeout(()=>{b(s)},300);return()=>clearTimeout(v)},[s,u]);const k=v=>({project:"",ticket:"",user:"",message:""})[v]||"",x=v=>({project:"bg-primary/10 text-primary",ticket:"bg-green-100 text-green-800",user:"bg-purple-100 text-purple-800",message:"bg-yellow-100 text-yellow-800"})[v]||"bg-gray-100 text-gray-800",y=v=>{switch(v.type){case"project":return`${v.metadata.status}  ${v.metadata.stage}  ${v.metadata.type}`;case"ticket":return`${v.metadata.priority}  ${v.metadata.status}  ${v.metadata.type}`;case"user":return`${v.metadata.role}  ${v.metadata.active?"Active":"Inactive"}`;case"message":return`From ${v.metadata.sender}  ${new Date(v.metadata.date).toLocaleDateString()}`;default:return""}};return t?n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-8 lg:py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground mb-3",children:"Global Search"}),n.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Find anything across your entire workspace - projects, tickets, users, and messages"})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-8 mb-8",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),n.jsx("input",{type:"text",value:s,onChange:v=>i(v.target.value),placeholder:"Search for projects, tickets, users, messages...",className:"w-full pl-12 pr-4 py-4 text-lg border border-border rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",autoFocus:!0}),s&&n.jsx("button",{onClick:()=>i(""),className:"absolute right-4 top-1/2 transform -translate-y-1/2 p-1 hover:bg-muted rounded",children:n.jsx("svg",{className:"w-4 h-4 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),n.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[n.jsx("span",{className:"text-sm font-medium text-foreground",children:"Search in:"}),Object.entries(u).map(([v,j])=>n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:j,onChange:I=>m(M=>({...M,[v]:I.target.checked})),className:"w-4 h-4 rounded border-border"}),n.jsx("span",{className:"text-sm font-medium text-foreground capitalize",children:v.replace("_"," ")})]},v))]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[n.jsx("span",{children:c?"Searching...":`${a.length} results found`}),s&&!c&&n.jsxs("span",{children:['for "',s,'"']})]})]}),a.length>0&&n.jsx("div",{className:"space-y-4",children:["project","ticket","user","message"].map(v=>{const j=a.filter(I=>I.type===v);return j.length===0?null:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-border/50",children:n.jsxs("h3",{className:"text-xl font-bold text-foreground flex items-center gap-3",children:[n.jsx("span",{className:"text-2xl",children:k(v)}),v.charAt(0).toUpperCase()+v.slice(1),"s",n.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["(",j.length," results)"]})]})}),n.jsx("div",{className:"divide-y divide-border/50",children:j.map(I=>n.jsx("div",{className:"p-6 hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>r(I.url),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h4",{className:"text-lg font-semibold text-foreground hover:text-primary transition-colors",children:I.title}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${x(I.type)}`,children:I.type})]}),n.jsx("p",{className:"text-muted-foreground mb-3 leading-relaxed",children:I.description}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[n.jsx("span",{children:y(I)}),n.jsxs("span",{className:"text-xs bg-muted/50 px-2 py-1 rounded",children:["Relevance: ",I.relevance]})]})]}),n.jsx("svg",{className:"w-5 h-5 text-muted-foreground flex-shrink-0 mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},I.id))})]},v)})}),s&&!c&&a.length===0&&n.jsxs("div",{className:"text-center py-16",children:[n.jsx("svg",{className:"w-16 h-16 text-muted-foreground/50 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),n.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No results found"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Try adjusting your search terms or filters"}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:()=>i(""),className:"btn-outline",children:"Clear Search"}),n.jsx("button",{onClick:()=>m({projects:!0,tickets:!0,users:!0,messages:!0}),className:"btn-primary",children:"Search Everything"})]})]}),!s&&n.jsxs("div",{className:"bg-secondary/10 dark:bg-secondary/20 rounded-xl border border-secondary/20 dark:border-secondary/30 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-foreground dark:text-foreground mb-3",children:" Search Tips"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-foreground dark:text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-2",children:"What you can search:"}),n.jsxs("ul",{className:"space-y-1",children:[n.jsx("li",{children:" Project names and descriptions"}),n.jsx("li",{children:" Ticket titles and content"}),n.jsx("li",{children:" User names and roles"}),n.jsx("li",{children:" Message subjects and content"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-2",children:"Advanced features:"}),n.jsxs("ul",{className:"space-y-1",children:[n.jsx("li",{children:" Filter by content type"}),n.jsx("li",{children:" Relevance-based ranking"}),n.jsx("li",{children:" Real-time search results"}),n.jsx("li",{children:" Direct navigation to results"})]})]})]})]})]})}),n.jsx(he,{})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}function a3(){const{user:t,isSignedIn:e}=ne(),r=ae(),[s,i]=S.useState([{id:"notif-1",type:"project",title:"Project Status Updated",message:"SpecCon website project has moved to the testing phase",read:!1,createdAt:new Date(Date.now()-1e3*60*30),actionUrl:"/client-portal/project/proj-1",priority:"medium",sender:"John Developer",metadata:{projectId:"proj-1",oldStatus:"development",newStatus:"testing"}},{id:"notif-2",type:"deadline",title:"Upcoming Deadline",message:"Andebe platform development deadline is approaching (2 days remaining)",read:!1,createdAt:new Date(Date.now()-1e3*60*60*2),actionUrl:"/calendar",priority:"high",metadata:{projectId:"proj-2",deadline:new Date(Date.now()+1e3*60*60*24*2)}},{id:"notif-3",type:"message",title:"New Message from Client",message:"Emma Business sent you a message about the Venueideas project",read:!0,createdAt:new Date(Date.now()-1e3*60*60*4),actionUrl:"/messages",priority:"medium",sender:"Emma Business",metadata:{messageId:"message-6",projectId:"proj-10"}},{id:"notif-4",type:"meeting",title:"Meeting Reminder",message:"Client presentation meeting starts in 1 hour",read:!1,createdAt:new Date(Date.now()-1e3*60*15),actionUrl:"/calendar",priority:"urgent",metadata:{meetingId:"event-3",startTime:new Date(Date.now()+1e3*60*45)}},{id:"notif-5",type:"ticket",title:"Ticket Assigned",message:"New bug report assigned to you: Mobile navigation issue",read:!0,createdAt:new Date(Date.now()-1e3*60*60*6),actionUrl:"/developer/tickets",priority:"high",sender:"Admin User",metadata:{ticketId:"ticket-2",priority:"high"}},{id:"notif-6",type:"system",title:"System Maintenance",message:"Scheduled maintenance will begin tonight at 10 PM",read:!0,createdAt:new Date(Date.now()-1e3*60*60*24),priority:"low",metadata:{maintenanceStart:new Date(Date.now()+1e3*60*60*2)}}]),[a,o]=S.useState("all"),[c,d]=S.useState("all");S.useEffect(()=>{const y=setInterval(()=>{if(Math.random()<.1){const v={id:`notif-${Date.now()}`,type:["project","ticket","message","deadline"][Math.floor(Math.random()*4)],title:"New Activity",message:"Something happened in your workspace",read:!1,createdAt:new Date,priority:["low","medium","high","urgent"][Math.floor(Math.random()*4)]};i(j=>[v,...j])}},5e3);return()=>clearInterval(y)},[]);const u=s.filter(y=>{const v=a==="all"||a==="unread"&&!y.read||a==="read"&&y.read,j=c==="all"||y.type===c;return v&&j}),m=s.filter(y=>!y.read).length,f=y=>{i(v=>v.map(j=>j.id===y?{...j,read:!0}:j))},p=()=>{i(y=>y.map(v=>({...v,read:!0})))},b=y=>{i(v=>v.filter(j=>j.id!==y))},E=y=>({project:"",ticket:"",message:"",deadline:"",meeting:"",system:""})[y]||"",k=y=>({low:"border-l-green-500 bg-green-50 dark:bg-green-900/20",medium:"border-l-yellow-500 bg-yellow-50 dark:bg-yellow-900/20",high:"border-l-orange-500 bg-orange-50 dark:bg-orange-900/20",urgent:"border-l-red-500 bg-red-50 dark:bg-red-900/20"})[y]||"border-l-gray-500 bg-gray-50 dark:bg-gray-900/20",x=y=>{const j=Math.floor((new Date().getTime()-y.getTime())/(1e3*60));if(j<1)return"Just now";if(j<60)return`${j}m ago`;const I=Math.floor(j/60);if(I<24)return`${I}h ago`;const M=Math.floor(I/24);return M<7?`${M}d ago`:Le(y,"MMM dd")};return t?n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-8 lg:py-12",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-6 mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground mb-3",children:"Notifications"}),n.jsxs("p",{className:"text-lg text-muted-foreground leading-relaxed",children:["Stay updated with real-time activity and important alerts",m>0&&n.jsxs("span",{className:"inline-flex items-center gap-2 ml-3 px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium",children:[n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15l-4-4 1.41-1.41L11 14.17l6.59-6.59L19 9l-8 8z"})}),m," unread"]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[m>0&&n.jsx("button",{onClick:p,className:"btn-outline",children:"Mark All Read"}),n.jsx("button",{className:"btn-primary",children:"Notification Settings"})]})]}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6 mb-8",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("span",{className:"text-sm font-medium text-foreground mr-2",children:"Status:"}),[{value:"all",label:"All"},{value:"unread",label:"Unread"},{value:"read",label:"Read"}].map(y=>n.jsx("button",{onClick:()=>o(y.value),className:`px-3 py-1 rounded text-sm transition-colors ${a===y.value?"bg-primary text-white":"bg-muted hover:bg-muted/80 text-foreground"}`,children:y.label},y.value))]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("span",{className:"text-sm font-medium text-foreground mr-2",children:"Type:"}),[{value:"all",label:"All Types"},{value:"project",label:"Projects"},{value:"ticket",label:"Tickets"},{value:"message",label:"Messages"},{value:"meeting",label:"Meetings"},{value:"deadline",label:"Deadlines"},{value:"system",label:"System"}].map(y=>n.jsx("button",{onClick:()=>d(y.value),className:`px-3 py-1 rounded text-sm transition-colors ${c===y.value?"bg-primary text-white":"bg-muted hover:bg-muted/80 text-foreground"}`,children:y.label},y.value))]})]})}),n.jsx("div",{className:"space-y-4",children:u.length>0?u.map(y=>n.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6 transition-all duration-200 hover:shadow-md ${y.read?"":`border-l-4 ${k(y.priority)}`}`,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center text-lg",children:E(y.type)})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-foreground",children:y.title}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[!y.read&&n.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:x(y.createdAt)})]})]}),n.jsx("p",{className:"text-muted-foreground mb-3 leading-relaxed",children:y.message}),n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${y.priority==="urgent"?"bg-red-100 text-red-800":y.priority==="high"?"bg-orange-100 text-orange-800":y.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:y.priority}),y.sender&&n.jsxs("span",{className:"text-muted-foreground",children:["From: ",y.sender]}),n.jsx("span",{className:"text-muted-foreground capitalize",children:y.type})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[y.actionUrl&&n.jsx("button",{onClick:()=>r(y.actionUrl),className:"btn-primary text-sm px-3 py-1",children:"View"}),!y.read&&n.jsx("button",{onClick:()=>f(y.id),className:"btn-outline text-sm px-3 py-1",children:"Mark Read"}),n.jsx("button",{onClick:()=>b(y.id),className:"p-2 text-muted-foreground hover:text-destructive transition-colors",title:"Delete notification",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},y.id)):n.jsxs("div",{className:"text-center py-16",children:[n.jsx("svg",{className:"w-16 h-16 text-muted-foreground/50 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5-5V9a6 6 0 10-12 0v3l-5 5h5m0 0v2a2 2 0 004 0v-2m-4-6h8"})}),n.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No notifications found"}),n.jsx("p",{className:"text-muted-foreground",children:a==="unread"?"All caught up! No unread notifications.":c!=="all"?`No ${c} notifications found.`:"You have no notifications at this time."})]})}),n.jsxs("div",{className:"mt-12 bg-gradient-to-r from-primary/5 to-secondary/5 rounded-xl border border-primary/10 p-8",children:[n.jsx("h3",{className:"text-xl font-bold text-foreground mb-4",children:"Notification Preferences"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Customize when and how you receive notifications to stay informed without being overwhelmed."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-border/50",children:[n.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Project Updates"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Status changes, new milestones"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"Email"})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"In-app"})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-border/50",children:[n.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Ticket Activity"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"New assignments, updates"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"Email"})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"In-app"})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-border/50",children:[n.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Meeting Reminders"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Upcoming meetings, deadlines"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"Email"})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"In-app"})]})]})]})]})]})}),n.jsx(he,{})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}const By=(t,e,r,s)=>{const i=[],a=t.filter(I=>I.status==="completed").length,o=t.length,c=o>0?a/o*100:0;c>80?i.push({type:"success",title:"Excellent Project Completion Rate",description:`Your team has completed ${c.toFixed(1)}% of projects. This indicates high efficiency and client satisfaction.`,recommendation:"Consider taking on more complex projects to further challenge your team's capabilities.",impact:"high",category:"performance"}):c<50&&i.push({type:"warning",title:"Project Completion Rate Needs Improvement",description:`Only ${c.toFixed(1)}% of projects are completed. This may indicate workflow inefficiencies.`,recommendation:"Review project management processes and consider implementing more structured workflows.",impact:"high",category:"performance"});const d=e.filter(I=>I.status==="open"||I.status==="in_progress").length,u=e.filter(I=>I.status==="resolved").length,m=e.length;(m>0?u/m*100:0)<70&&i.push({type:"alert",title:"High Open Ticket Volume",description:`${d} tickets remain unresolved. This may impact client satisfaction.`,recommendation:"Reassign critical tickets and consider hiring additional support staff.",impact:"high",category:"support"});const p=r.filter(I=>I.isActive).length,b=r.length,E=p/b*100;E<80&&i.push({type:"info",title:"Underutilized Team Capacity",description:`${E.toFixed(1)}% of your team is actively engaged. There may be opportunities for growth.`,recommendation:"Consider taking on additional projects or providing professional development opportunities.",impact:"medium",category:"team"});const k=s.filter(I=>!I.isRead).length;k>10&&i.push({type:"warning",title:"High Volume of Unread Messages",description:`${k} messages are unread. This may indicate communication bottlenecks.`,recommendation:"Review team communication patterns and consider implementing daily standups.",impact:"medium",category:"communication"});const x=t.filter(I=>{const M=new Date(I.createdAt);return M.setDate(M.getDate()+30),new Date>M&&I.status!=="completed"});x.length>0&&i.push({type:"urgent",title:"Overdue Projects Detected",description:`${x.length} project(s) are behind schedule.`,recommendation:"Review project timelines and reallocate resources to bring projects back on track.",impact:"high",category:"timeline"});const y=28500;i.push({type:"success",title:"Exceptional Client Satisfaction",description:`Client satisfaction rating of ${4.8}/5.0 shows outstanding service quality.`,recommendation:"Leverage client testimonials in marketing materials and consider referral programs.",impact:"high",category:"client"});const j=y*1.15;return i.push({type:"info",title:"Revenue Growth Projection",description:`Based on current trends, projected monthly revenue could reach $${j.toLocaleString()}.`,recommendation:"Prepare for scaling by investing in team growth and process optimization.",impact:"medium",category:"forecasting"}),i.sort((I,M)=>{const P={high:3,medium:2,low:1},N={urgent:4,alert:3,warning:2,success:1,info:0};return P[I.impact]!==P[M.impact]?P[M.impact]-P[I.impact]:N[M.type]-N[I.type]})};function o3(){const{user:t,isSignedIn:e}=ne(),r=ae(),[s,i]=S.useState([]),[a,o]=S.useState("all"),[c,d]=S.useState("all"),[u,m]=S.useState(!0);S.useEffect(()=>{if(!e){r("/login");return}if((t==null?void 0:t.role)!=="admin"){r("/dashboard");return}m(!0),setTimeout(()=>{const y=bt(),v=Lt(),j=ve(),I=t?Pn(t.id):[],M=By(y,v,j,I);i(M),m(!1)},2e3)},[e,t,r]);const f=[{value:"all",label:"All Insights"},{value:"performance",label:"Performance"},{value:"team",label:"Team"},{value:"client",label:"Client"},{value:"financial",label:"Financial"},{value:"communication",label:"Communication"},{value:"timeline",label:"Timeline"},{value:"forecasting",label:"Forecasting"}],p=[{value:"all",label:"All Priorities"},{value:"high",label:"High Impact"},{value:"medium",label:"Medium Impact"},{value:"low",label:"Low Impact"}],b=s.filter(y=>{const v=a==="all"||y.category===a,j=c==="all"||y.impact===c;return v&&j}),E=y=>({success:"",warning:"",alert:"",urgent:"",info:""})[y]||"",k=y=>({success:"border-green-500 bg-green-50 dark:bg-green-900/20",warning:"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20",alert:"border-orange-500 bg-orange-50 dark:bg-orange-900/20",urgent:"border-red-500 bg-red-50 dark:bg-red-900/20",info:"border-primary bg-secondary/10 dark:bg-secondary/20"})[y]||"border-gray-500 bg-gray-50 dark:bg-gray-900/20",x=y=>({high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"})[y]||"bg-gray-100 text-gray-800";return t?n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-8 lg:py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground mb-3",children:" AI-Powered Insights"}),n.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Intelligent analysis and actionable recommendations to optimize your business performance"})]}),u&&n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-8 mb-8",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Analyzing Your Data..."}),n.jsx("p",{className:"text-muted-foreground",children:"Our AI is processing your business metrics and generating insights"})]})]}),n.jsx("div",{className:"mt-4 bg-muted rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full animate-pulse",style:{width:"60%"}})})]}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6 mb-8",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Category"}),n.jsx("select",{value:a,onChange:y=>o(y.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground",children:f.map(y=>n.jsx("option",{value:y.value,children:y.label},y.value))})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Impact Level"}),n.jsx("select",{value:c,onChange:y=>d(y.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground",children:p.map(y=>n.jsx("option",{value:y.value,children:y.label},y.value))})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{onClick:()=>{m(!0),setTimeout(()=>{const y=bt(),v=Lt(),j=ve(),I=t?Pn(t.id):[],M=By(y,v,j,I);i(M),m(!1)},1500)},className:"btn-primary px-6 py-2",children:" Re-analyze"})})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map((y,v)=>n.jsxs("div",{className:`rounded-xl border-l-4 p-6 ${k(y.type)} hover:shadow-lg transition-all duration-200`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsx("div",{className:"text-3xl",children:E(y.type)}),n.jsxs("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${x(y.impact)}`,children:[y.impact," impact"]})]}),n.jsx("h3",{className:"text-lg font-bold text-foreground mb-3",children:y.title}),n.jsx("p",{className:"text-muted-foreground mb-4 leading-relaxed",children:y.description}),n.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-4",children:[n.jsx("h4",{className:"font-semibold text-foreground mb-2",children:" Recommendation"}),n.jsx("p",{className:"text-sm text-foreground",children:y.recommendation})]}),n.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-muted-foreground",children:[n.jsx("span",{className:"capitalize",children:y.category}),n.jsx("span",{className:"capitalize",children:y.type})]})]},v))}),b.length===0&&!u&&n.jsxs("div",{className:"text-center py-16",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No insights found"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Try adjusting your filters or run a new analysis to generate insights"}),n.jsx("button",{onClick:()=>{o("all"),d("all")},className:"btn-primary",children:"Show All Insights"})]}),n.jsxs("div",{className:"mt-12 bg-gradient-to-r from-primary/5 via-purple-500/5 to-blue-500/5 rounded-xl border border-primary/10 p-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:" AI-Powered Features"}),n.jsx("p",{className:"text-muted-foreground",children:"Advanced machine learning and predictive analytics"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"text-center p-4",children:[n.jsx("div",{className:"text-3xl mb-3",children:""}),n.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Predictive Analytics"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Forecast trends and project outcomes"})]}),n.jsxs("div",{className:"text-center p-4",children:[n.jsx("div",{className:"text-3xl mb-3",children:""}),n.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Smart Recommendations"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Actionable insights for optimization"})]}),n.jsxs("div",{className:"text-center p-4",children:[n.jsx("div",{className:"text-3xl mb-3",children:""}),n.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Pattern Recognition"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Identify trends and anomalies"})]}),n.jsxs("div",{className:"text-center p-4",children:[n.jsx("div",{className:"text-3xl mb-3",children:""}),n.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Real-time Analysis"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Continuous monitoring and alerts"})]})]})]})]})}),n.jsx(he,{})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}const _u=[{id:"slack",name:"Slack",description:"Connect your workspace for real-time notifications and team communication",category:"communication",status:"available",icon:"",features:["Real-time notifications","Channel integration","Team mentions","Status updates"],setupSteps:["Authorize Slack workspace","Select notification channels","Configure message templates","Test integration"],pricing:"Free"},{id:"google-calendar",name:"Google Calendar",description:"Sync your calendar with Google Calendar for seamless scheduling",category:"productivity",status:"available",icon:"",features:["Two-way sync","Meeting invites","Availability sharing","Reminder integration"],setupSteps:["Connect Google account","Grant calendar permissions","Select calendars to sync","Configure sync settings"],pricing:"Free"},{id:"zapier",name:"Zapier",description:"Automate workflows by connecting with 5,000+ apps",category:"automation",status:"available",icon:"",features:["Workflow automation","App integrations","Custom triggers","Data synchronization"],setupSteps:["Create Zapier account","Generate API key","Configure webhooks","Test automation flows"],pricing:"$29.99/month"},{id:"mailchimp",name:"Mailchimp",description:"Sync client data and automate email campaigns",category:"marketing",status:"available",icon:"",features:["Contact synchronization","Automated campaigns","Performance tracking","List management"],setupSteps:["Connect Mailchimp account","Map data fields","Configure sync rules","Set up automation triggers"],pricing:"Free to $299/month"},{id:"stripe",name:"Stripe",description:"Process payments and manage billing automatically",category:"financial",status:"coming_soon",icon:"",features:["Payment processing","Invoice generation","Subscription management","Financial reporting"],setupSteps:["Connect Stripe account","Configure payment methods","Set up webhooks","Test payment flow"],pricing:"2.9% + 30 per transaction"},{id:"github",name:"GitHub",description:"Track development progress and code deployments",category:"development",status:"available",icon:"",features:["Repository monitoring","Deployment tracking","Issue synchronization","Code review integration"],setupSteps:["Authorize GitHub account","Select repositories","Configure webhooks","Set up notifications"],pricing:"Free"},{id:"figma",name:"Figma",description:"Sync design files and track creative project progress",category:"design",status:"coming_soon",icon:"",features:["File synchronization","Version tracking","Comment integration","Design handoff"],setupSteps:["Connect Figma account","Select design files","Configure sync settings","Set up notifications"],pricing:"Free to $144/year"},{id:"hubspot",name:"HubSpot",description:"CRM integration for lead management and client tracking",category:"crm",status:"available",icon:"",features:["Lead synchronization","Contact management","Deal tracking","Email integration"],setupSteps:["Connect HubSpot account","Map data fields","Configure sync rules","Set up automation"],pricing:"Free to $3,600/month"}],zy=[{id:"slack-connected",integrationId:"slack",status:"connected",connectedAt:new Date(Date.now()-7*24*60*60*1e3),lastSync:new Date(Date.now()-30*60*1e3),settings:{channels:["#general","#projects","#client-updates"],notifications:["project_updates","deadline_alerts","client_messages"]}},{id:"google-calendar-connected",integrationId:"google-calendar",status:"connected",connectedAt:new Date(Date.now()-14*24*60*60*1e3),lastSync:new Date(Date.now()-5*60*1e3),settings:{calendars:["Work Calendar","Client Meetings"],syncDirection:"two-way",reminderTime:15}}];function l3(){const{user:t,isSignedIn:e}=ne(),r=ae(),[s,i]=S.useState("all"),[a,o]=S.useState(null);S.useEffect(()=>{if(!e){r("/login");return}if((t==null?void 0:t.role)!=="admin"){r("/dashboard");return}},[e,t,r]);const c=[{value:"all",label:"All Categories"},{value:"communication",label:"Communication"},{value:"productivity",label:"Productivity"},{value:"automation",label:"Automation"},{value:"marketing",label:"Marketing"},{value:"financial",label:"Financial"},{value:"development",label:"Development"},{value:"design",label:"Design"},{value:"crm",label:"CRM"}],d=_u.filter(p=>s==="all"||p.category===s),u=async p=>{var b;o(p),await new Promise(E=>setTimeout(E,2e3)),alert(`Successfully connected to ${(b=_u.find(E=>E.id===p))==null?void 0:b.name}!`),o(null)},m=p=>zy.find(b=>b.integrationId===p),f=p=>({connected:"bg-green-100 text-green-800",available:"bg-secondary/10 text-secondary",coming_soon:"bg-yellow-100 text-yellow-800"})[p]||"bg-gray-100 text-gray-800";return t?n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-8 lg:py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground mb-3",children:" API Integrations Hub"}),n.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Connect with your favorite tools and automate your workflow"})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6 mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Connected Services"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:zy.map(p=>{const b=_u.find(E=>E.id===p.integrationId);return b?n.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("span",{className:"text-2xl",children:b.icon}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:b.name}),n.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Connected"})]})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last sync: ",new Date(p.lastSync).toLocaleString()]})]},p.id):null})})]}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6 mb-8",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Filter by Category"}),n.jsx("select",{value:s,onChange:p=>i(p.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground",children:c.map(p=>n.jsx("option",{value:p.value,children:p.label},p.value))})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.jsxs("p",{className:"font-medium",children:["API Status: ",n.jsx("span",{className:"text-green-600",children:" Online"})]}),n.jsxs("p",{children:["Last updated: ",new Date().toLocaleString()]})]})})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(p=>{const b=m(p.id),E=a===p.id;return n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6 hover:shadow-lg transition-all duration-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-3xl",children:p.icon}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-foreground",children:p.name}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f(p.status)}`,children:p.status.replace("_"," ")})]})]}),b&&n.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})]}),n.jsx("p",{className:"text-muted-foreground mb-6 leading-relaxed",children:p.description}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h4",{className:"font-semibold text-foreground mb-3",children:"Key Features:"}),n.jsx("ul",{className:"space-y-1",children:p.features.slice(0,3).map((k,x)=>n.jsxs("li",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[n.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full flex-shrink-0"}),k]},x))})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("span",{className:"text-sm font-medium text-foreground",children:["Pricing: ",n.jsx("span",{className:"text-primary",children:p.pricing})]})}),n.jsx("div",{className:"flex gap-3",children:b?n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"flex-1 btn-outline text-sm",children:"Configure"}),n.jsx("button",{className:"btn-outline text-red-600 hover:bg-red-50 text-sm px-4",children:"Disconnect"})]}):p.status==="coming_soon"?n.jsx("button",{className:"flex-1 btn-outline text-sm",disabled:!0,children:"Coming Soon"}):n.jsx("button",{onClick:()=>u(p.id),disabled:E,className:"flex-1 btn-primary text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:E?n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Connecting..."]}):"Connect"})}),!b&&p.status==="available"&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-border/50",children:[n.jsx("h5",{className:"text-sm font-semibold text-foreground mb-2",children:"Setup Steps:"}),n.jsx("ol",{className:"text-xs text-muted-foreground space-y-1",children:p.setupSteps.map((k,x)=>n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"flex-shrink-0 w-4 h-4 bg-primary/10 text-primary rounded-full flex items-center justify-center text-xs font-medium",children:x+1}),k]},x))})]})]},p.id)})}),n.jsxs("div",{className:"mt-12 bg-gradient-to-r from-blue-500/5 via-purple-500/5 to-green-500/5 rounded-xl border border-primary/10 p-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:" Why Integrate?"}),n.jsx("p",{className:"text-muted-foreground",children:"Maximize productivity with seamless tool connections"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("h3",{className:"text-lg font-bold text-foreground mb-2",children:"Automate Workflows"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Eliminate manual data entry and repetitive tasks with smart automation"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("h3",{className:"text-lg font-bold text-foreground mb-2",children:"Real-time Sync"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Keep all your tools in sync with instant data synchronization"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("h3",{className:"text-lg font-bold text-foreground mb-2",children:"Unified Analytics"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Get comprehensive insights across all connected platforms"})]})]})]}),n.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:" Developer Resources"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3",children:"REST API"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Build custom integrations with our comprehensive REST API"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("button",{className:"btn-outline text-sm w-full",children:"View API Documentation"}),n.jsx("button",{className:"btn-outline text-sm w-full",children:"Generate API Key"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3",children:"Webhooks"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Receive real-time notifications for system events"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("button",{className:"btn-outline text-sm w-full",children:"Configure Webhooks"}),n.jsx("button",{className:"btn-outline text-sm w-full",children:"View Event Logs"})]})]})]})]})]})}),n.jsx(he,{})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}const c3=[{id:"workflow-1",name:"New Project Welcome Email",description:"Automatically send welcome email when a new project is created",trigger:{type:"project_created",conditions:[]},actions:[{type:"send_email",config:{to:"{{client.email}}",subject:"Welcome to {{project.name}}!",template:"welcome_email"}},{type:"create_task",config:{title:"Send project brief to client",assignee:"account_manager",dueDate:"2 days from now"}}],isActive:!0,createdAt:new Date(Date.now()-30*24*60*60*1e3),lastTriggered:new Date(Date.now()-2*24*60*60*1e3),triggerCount:15},{id:"workflow-2",name:"High Priority Ticket Escalation",description:"Escalate high-priority tickets and notify team leads",trigger:{type:"ticket_created",conditions:[{field:"priority",operator:"equals",value:"critical"}]},actions:[{type:"notify_user",config:{user:"team_lead",message:"Critical ticket created: {{ticket.title}}",channel:"urgent"}},{type:"update_ticket",config:{status:"in_progress",assignee:"senior_developer"}},{type:"create_meeting",config:{title:"Urgent Ticket Review: {{ticket.title}}",attendees:["team_lead","project_manager"],duration:30}}],isActive:!0,createdAt:new Date(Date.now()-45*24*60*60*1e3),lastTriggered:new Date(Date.now()-1*24*60*60*1e3),triggerCount:8},{id:"workflow-3",name:"Project Completion Celebration",description:"Celebrate project completion with automated notifications",trigger:{type:"project_completed",conditions:[]},actions:[{type:"send_notification",config:{to:"all_team_members",message:" Project {{project.name}} completed successfully!",type:"celebration"}},{type:"create_task",config:{title:"Schedule project retrospective meeting",assignee:"project_manager",dueDate:"1 week from now"}},{type:"send_email",config:{to:"{{client.email}}",subject:"Project {{project.name}} Completed!",template:"completion_email"}}],isActive:!0,createdAt:new Date(Date.now()-60*24*60*60*1e3),lastTriggered:new Date(Date.now()-5*24*60*60*1e3),triggerCount:12}],ku=[{id:"project_created",name:"Project Created",icon:"",description:"When a new project is created"},{id:"project_completed",name:"Project Completed",icon:"",description:"When a project status changes to completed"},{id:"ticket_created",name:"Ticket Created",icon:"",description:"When a new ticket is created"},{id:"ticket_updated",name:"Ticket Updated",icon:"",description:"When a ticket is updated"},{id:"client_feedback",name:"Client Feedback",icon:"",description:"When client submits feedback"},{id:"deadline_approaching",name:"Deadline Approaching",icon:"",description:"When a deadline is within 24 hours"}],Eu=[{id:"send_email",name:"Send Email",icon:"",description:"Send an email notification"},{id:"send_notification",name:"Send Notification",icon:"",description:"Send in-app notification"},{id:"create_task",name:"Create Task",icon:"",description:"Create a new task"},{id:"update_ticket",name:"Update Ticket",icon:"",description:"Update ticket properties"},{id:"create_meeting",name:"Create Meeting",icon:"",description:"Schedule a meeting"},{id:"notify_user",name:"Notify User",icon:"",description:"Send notification to specific user"},{id:"webhook",name:"Webhook",icon:"",description:"Send data to external service"}];function d3(){const{user:t,isSignedIn:e}=ne(),r=ae(),[s,i]=S.useState(c3),[a,o]=S.useState(null),[c,d]=S.useState(!1),[u,m]=S.useState({name:"",description:"",trigger:{type:"",conditions:[]},actions:[]});S.useEffect(()=>{if(!e){r("/login");return}if((t==null?void 0:t.role)!=="admin"){r("/dashboard");return}},[e,t,r]);const f=()=>{const x={...u,id:`workflow-${Date.now()}`,isActive:!0,createdAt:new Date,lastTriggered:null,triggerCount:0};i(y=>[x,...y]),m({name:"",description:"",trigger:{type:"",conditions:[]},actions:[]}),d(!1)},p=x=>{i(y=>y.map(v=>v.id===x?{...v,isActive:!v.isActive}:v))},b=x=>{confirm("Are you sure you want to delete this workflow?")&&i(y=>y.filter(v=>v.id!==x))},E=x=>{const y=ku.find(v=>v.id===x);return(y==null?void 0:y.name)||x},k=x=>{const y=Eu.find(v=>v.id===x);return(y==null?void 0:y.name)||x};return t?n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-8 lg:py-12",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-6 mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground mb-3",children:" Workflow Automation"}),n.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Create powerful automations to streamline your business processes"})]}),n.jsxs("button",{onClick:()=>d(!0),className:"btn-primary px-6 py-3",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Workflow"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:s.map(x=>n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6 hover:shadow-lg transition-all duration-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-foreground mb-1",children:x.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:x.description})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${x.isActive?"bg-green-500":"bg-gray-400"}`}),n.jsx("button",{onClick:()=>o(x),className:"p-1 hover:bg-muted rounded",children:n.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Trigger:"}),n.jsx("span",{className:"font-medium",children:E(x.trigger.type)})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Actions:"}),n.jsxs("span",{className:"font-medium",children:[x.actions.length," configured"]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Triggered:"}),n.jsxs("span",{className:"font-medium",children:[x.triggerCount," times"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border/50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>p(x.id),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${x.isActive?"bg-green-600":"bg-gray-200"}`,children:n.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${x.isActive?"translate-x-6":"translate-x-1"}`})}),n.jsx("span",{className:"text-xs text-muted-foreground",children:x.isActive?"Active":"Inactive"})]}),n.jsx("button",{onClick:()=>b(x.id),className:"p-1 text-muted-foreground hover:text-red-600 transition-colors",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},x.id))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Available Triggers"}),n.jsx("div",{className:"space-y-3",children:ku.map(x=>n.jsxs("div",{className:"flex items-center gap-3 p-3 border border-border/50 rounded-lg",children:[n.jsx("span",{className:"text-2xl",children:x.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:x.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:x.description})]})]},x.id))})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Available Actions"}),n.jsx("div",{className:"space-y-3",children:Eu.map(x=>n.jsxs("div",{className:"flex items-center gap-3 p-3 border border-border/50 rounded-lg",children:[n.jsx("span",{className:"text-2xl",children:x.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:x.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:x.description})]})]},x.id))})]})]}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-background rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Create New Workflow"}),n.jsx("button",{onClick:()=>d(!1),className:"p-2 hover:bg-muted rounded-lg transition-colors",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Workflow Name"}),n.jsx("input",{type:"text",value:u.name,onChange:x=>m(y=>({...y,name:x.target.value})),placeholder:"Enter workflow name",className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description"}),n.jsx("textarea",{value:u.description,onChange:x=>m(y=>({...y,description:x.target.value})),placeholder:"Describe what this workflow does",rows:3,className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Trigger Event"}),n.jsxs("select",{value:u.trigger.type,onChange:x=>m(y=>({...y,trigger:{...y.trigger,type:x.target.value}})),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground",children:[n.jsx("option",{value:"",children:"Select a trigger"}),ku.map(x=>n.jsx("option",{value:x.id,children:x.name},x.id))]})]}),n.jsx("div",{className:"bg-secondary/10 dark:bg-secondary/20 p-4 rounded-lg",children:n.jsxs("p",{className:"text-sm text-primary dark:text-primary",children:[" ",n.jsx("strong",{children:"Pro Tip:"})," Start with simple workflows and gradually add complexity. Test your workflows thoroughly before deploying to production."]})}),n.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-border",children:[n.jsx("button",{onClick:()=>d(!1),className:"btn-outline px-6 py-2",children:"Cancel"}),n.jsx("button",{onClick:f,disabled:!u.name.trim()||!u.trigger.type,className:"btn-primary px-6 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Create Workflow"})]})]})]})})}),a&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-background rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:a.name}),n.jsx("p",{className:"text-muted-foreground",children:a.description})]}),n.jsx("button",{onClick:()=>o(null),className:"p-2 hover:bg-muted rounded-lg transition-colors",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Workflow Details"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Status:"}),n.jsx("span",{className:`ml-2 text-sm px-2 py-1 rounded-full ${a.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a.isActive?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Trigger:"}),n.jsx("span",{className:"ml-2 text-sm",children:E(a.trigger.type)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Actions:"}),n.jsxs("span",{className:"ml-2 text-sm",children:[a.actions.length," configured"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Triggered:"}),n.jsxs("span",{className:"ml-2 text-sm",children:[a.triggerCount," times"]})]}),a.lastTriggered&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Last Run:"}),n.jsx("span",{className:"ml-2 text-sm",children:new Date(a.lastTriggered).toLocaleString()})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Configured Actions"}),n.jsxs("div",{className:"space-y-3",children:[a.actions.map((x,y)=>{var v;return n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[n.jsx("span",{className:"text-xl",children:((v=Eu.find(j=>j.id===x.type))==null?void 0:v.icon)||""}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-foreground",children:k(x.type)}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Configured with ",Object.keys(x.config||{}).length," settings"]})]})]},y)}),a.actions.length===0&&n.jsx("p",{className:"text-muted-foreground text-sm",children:"No actions configured yet"})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-border mt-8",children:[n.jsx("button",{onClick:()=>o(null),className:"btn-outline px-6 py-2",children:"Close"}),n.jsx("button",{className:"btn-primary px-6 py-2",children:"Edit Workflow"})]})]})})}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-500/5 via-blue-500/5 to-green-500/5 rounded-xl border border-primary/10 p-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:" Automation Benefits"}),n.jsx("p",{className:"text-muted-foreground",children:"Transform your business with intelligent workflows"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("h3",{className:"text-lg font-bold text-foreground mb-2",children:"Reduce Manual Work"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Automate repetitive tasks and focus on strategic work that matters"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("h3",{className:"text-lg font-bold text-foreground mb-2",children:"Increase Efficiency"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Streamline processes and reduce response times across your organization"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("h3",{className:"text-lg font-bold text-foreground mb-2",children:"Improve Consistency"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Ensure standardized processes and reduce human error in workflows"})]})]})]})]})}),n.jsx(he,{})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}function u3(){const{user:t,isSignedIn:e}=ne(),r=ae(),[s,i]=S.useState([]),[a,o]=S.useState([]),[c,d]=S.useState([]),[u,m]=S.useState([]),[f,p]=S.useState(!0);S.useEffect(()=>{if(!e){r("/login");return}const j=bt(),I=Lt(),M=ve(),P=t?Pn(t.id):[];i(j),o(I),d(M),m(P),p(!1)},[e,t,r]);const b={totalProjects:s.length,activeProjects:s.filter(j=>j.status==="active").length,completedProjects:s.filter(j=>j.status==="completed").length,totalTickets:a.length,openTickets:a.filter(j=>j.status==="open"||j.status==="in_progress").length,resolvedTickets:a.filter(j=>j.status==="resolved").length,totalUsers:c.length,activeUsers:c.filter(j=>j.isActive).length,unreadMessages:u.filter(j=>!j.isRead&&j.recipientId===(t==null?void 0:t.id)).length,totalRevenue:156750},E=[{type:"project",action:"completed",item:"SpecCon Website",user:"John Developer",time:"2 hours ago",icon:""},{type:"ticket",action:"resolved",item:"Mobile navigation fix",user:"Jane Smith",time:"4 hours ago",icon:""},{type:"message",action:"sent",item:"Client feedback received",user:"Emma Business",time:"6 hours ago",icon:""},{type:"meeting",action:"scheduled",item:"Project review meeting",user:"Admin User",time:"1 day ago",icon:""}],k=()=>{if(!t)return[];switch(t.role){case"admin":return[{title:"New Project",description:"Create a new project",icon:"",action:"/admin/projects/new",color:"bg-primary"},{title:"Manage Users",description:"Add or edit team members",icon:"",action:"/admin/users",color:"bg-green-500"},{title:"View Analytics",description:"Business performance data",icon:"",action:"/analytics",color:"bg-purple-500"},{title:"System Reports",description:"Executive dashboard",icon:"",action:"/reports",color:"bg-orange-500"}];case"web_developer":return[{title:"My Tickets",description:"Assigned development tasks",icon:"",action:"/developer/tickets",color:"bg-primary"},{title:"My Projects",description:"Social media campaigns",icon:"",action:"/coordinator/projects",color:"bg-primary"},{title:"Project Status",description:"View project progress",icon:"",action:"/client-portal/dashboard",color:"bg-primary"},{title:"Submit Feedback",description:"Rate our work",icon:"",action:"/client-portal/feedback",color:"bg-green-500"},{title:"Share Files",description:"Upload project assets",icon:"",action:"/client-portal/files",color:"bg-purple-500"},{title:"Message Team",description:"Contact your team",icon:"",action:"/messages",color:"bg-orange-500"}];default:return[]}},x=[{type:"deadline",title:"Project Deadline Approaching",message:"Andebe platform development deadline is in 2 days",priority:"high",action:"/calendar"},{type:"ticket",title:"High Priority Ticket",message:"Critical bug reported in production system",priority:"urgent",action:"/tickets"},{type:"meeting",title:"Meeting Reminder",message:"Client presentation in 1 hour",priority:"medium",action:"/calendar"}],y=j=>({low:"border-green-500 bg-green-50 dark:bg-green-900/20",medium:"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20",high:"border-orange-500 bg-orange-50 dark:bg-orange-900/20",urgent:"border-red-500 bg-red-50 dark:bg-red-900/20"})[j]||"border-gray-500 bg-gray-50 dark:bg-gray-900/20",v=j=>({low:"",medium:"",high:"",urgent:""})[j]||"";return t?n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-8 lg:py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-4xl lg:text-5xl font-bold text-foreground mb-3",children:["Welcome back, ",t.fullName,"! "]}),n.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Here's what's happening in your workspace today"})]}),x.length>0&&n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Priority Alerts"}),n.jsx("div",{className:"space-y-4",children:x.map((j,I)=>n.jsx(F,{to:j.action,className:`block p-4 rounded-xl border-l-4 ${y(j.priority)} hover:shadow-md transition-shadow`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("span",{className:"text-xl",children:v(j.priority)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:j.title}),n.jsx("p",{className:"text-muted-foreground text-sm",children:j.message})]}),n.jsx("svg",{className:"w-5 h-5 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},I))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-primary/10 dark:bg-primary/20 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-foreground",children:b.activeProjects}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Projects"})]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-foreground",children:b.resolvedTickets}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Tickets Resolved"})]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-foreground",children:b.activeUsers}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Team Members"})]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-2xl font-bold text-foreground",children:["$",b.totalRevenue.toLocaleString()]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Revenue"})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Quick Actions"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k().map((j,I)=>n.jsx(F,{to:j.action,className:"group p-4 border border-border/50 rounded-lg hover:border-primary/50 hover:shadow-md transition-all duration-200",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:`w-12 h-12 rounded-lg ${j.color} flex items-center justify-center text-white text-xl group-hover:scale-110 transition-transform`,children:j.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors",children:j.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:j.description})]}),n.jsx("svg",{className:"w-5 h-5 text-muted-foreground group-hover:text-primary transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},I))})]})}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Recent Activity"}),n.jsx("div",{className:"space-y-4",children:E.map((j,I)=>n.jsxs("div",{className:"flex items-start gap-3 p-3 border border-border/50 rounded-lg",children:[n.jsx("div",{className:"text-lg",children:j.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-sm text-foreground",children:[n.jsx("span",{className:"font-medium",children:j.user})," ",j.action," ",n.jsx("span",{className:"font-medium",children:j.item})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:j.time})]})]},I))}),n.jsx("div",{className:"mt-6 pt-4 border-t border-border/50",children:n.jsx(F,{to:"/notifications",className:"text-primary hover:underline text-sm font-medium",children:"View all notifications "})})]})]}),n.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-foreground mb-4",children:"System Health"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Server Status"}),n.jsxs("span",{className:"inline-flex items-center gap-2 px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Online"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Database"}),n.jsxs("span",{className:"inline-flex items-center gap-2 px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Healthy"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"API Response"}),n.jsx("span",{className:"text-sm font-medium text-green-600",children:"120ms"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-foreground mb-4",children:"Team Productivity"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Avg. Daily Hours"}),n.jsx("span",{className:"text-sm font-medium",children:"6.8h"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Tickets/Day"}),n.jsx("span",{className:"text-sm font-medium",children:"4.2"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Response Time"}),n.jsx("span",{className:"text-sm font-medium text-green-600",children:"2.1h"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-border/50 p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-foreground mb-4",children:"Client Satisfaction"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Overall Rating"}),n.jsx("span",{className:"text-sm font-medium",children:"4.8/5.0 "})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Response Rate"}),n.jsx("span",{className:"text-sm font-medium text-green-600",children:"98%"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Retention Rate"}),n.jsx("span",{className:"text-sm font-medium text-green-600",children:"94%"})]})]})]})]})]})}),n.jsx(he,{})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}function h3(){const{isSignedIn:t,user:e}=ne(),r=ae(),i=jo().id,[a,o]=S.useState(!0),[c,d]=S.useState(null),[u,m]=S.useState(null),[f,p]=S.useState(null),[b,E]=S.useState(null),[k,x]=S.useState([]);if(S.useEffect(()=>{t?(e==null?void 0:e.role)!=="admin"&&r("/dashboard"):r("/login")},[t,e,r]),S.useEffect(()=>{if(i){const v=wo(i);if(v){d(v);const j=ve();m(j.find(M=>M.id===v.clientId)||null),p(j.find(M=>M.id===v.webDeveloperId)||null),E(j.find(M=>M.id===v.socialMediaCoordinatorId)||null);const I=hb(i);x(I),o(!1)}else r("/admin/dashboard")}},[i,r]),!e||e.role!=="admin")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});if(a||!c)return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}),n.jsx(he,{})]});const y={totalTickets:k.length,openTickets:k.filter(v=>v.status==="open").length,inProgressTickets:k.filter(v=>v.status==="in_progress").length,resolvedTickets:k.filter(v=>v.status==="resolved"||v.status==="closed").length};return n.jsxs(n.Fragment,{children:[n.jsx(ue,{}),n.jsx("main",{className:"min-h-screen bg-muted",children:n.jsxs("div",{className:"container py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx(F,{to:"/admin/dashboard",className:"text-primary hover:text-primary/80 transition",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),n.jsx("h1",{className:"text-4xl font-bold text-foreground",children:c.name}),n.jsx(It,{status:c.status})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(F,{to:`/admin/projects/${i}/edit`,className:"btn-primary",children:"Edit Project"}),n.jsx(F,{to:`/admin/analytics/${i}`,className:"btn-outline",children:"View Analytics"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Project Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Project Type"}),n.jsx("div",{className:"text-foreground capitalize",children:c.projectType})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Description"}),n.jsx("div",{className:"text-foreground",children:c.description})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Current Stage"}),n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-primary/10 text-primary",children:Fn(c.currentStage)})]}),c.websiteUrl&&n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Website URL"}),n.jsx("a",{href:c.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:c.websiteUrl})]})]})]}),n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Team"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Client"}),u?n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-foreground",children:u.fullName}),n.jsx("div",{className:"text-sm text-muted-foreground",children:u.email})]}):n.jsx("div",{className:"text-sm text-muted-foreground italic",children:"Not assigned"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Web Developer"}),f?n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-foreground",children:f.fullName}),n.jsx("div",{className:"text-sm text-muted-foreground",children:f.email})]}):n.jsx("div",{className:"text-sm text-muted-foreground italic",children:"Not assigned"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Social Media Coordinator"}),b?n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-foreground",children:b.fullName}),n.jsx("div",{className:"text-sm text-muted-foreground",children:b.email})]}):n.jsx("div",{className:"text-sm text-muted-foreground italic",children:"Not assigned"})]})]})]}),c.projectType==="website"&&n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Analytics"}),n.jsxs("div",{className:"space-y-4",children:[c.googleAnalyticsPropertyId&&n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"GA4 Property ID"}),n.jsx("div",{className:"text-foreground font-mono text-sm",children:c.googleAnalyticsPropertyId})]}),c.googleAnalyticsViewId&&n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Analytics View ID"}),n.jsx("div",{className:"text-foreground font-mono text-sm",children:c.googleAnalyticsViewId})]})]})]}),n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Timeline"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Created"}),n.jsx("div",{className:"text-foreground",children:new Date(c.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),c.launchDate&&n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Launch Date"}),n.jsx("div",{className:"text-foreground",children:new Date(c.launchDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Last Updated"}),n.jsx("div",{className:"text-foreground",children:lr(c.updatedAt)})]})]})]})]}),n.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"card text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-foreground",children:y.totalTickets}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Tickets"})]}),n.jsxs("div",{className:"card text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-primary",children:y.openTickets}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Open"})]}),n.jsxs("div",{className:"card text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-orange-600",children:y.inProgressTickets}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"In Progress"})]}),n.jsxs("div",{className:"card text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:y.resolvedTickets}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Resolved"})]})]}),c.notes&&n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Project Notes"}),n.jsx("div",{className:"text-foreground whitespace-pre-wrap",children:c.notes})]}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"text-xl font-bold text-foreground",children:["Tickets (",k.length,")"]}),n.jsx(F,{to:`/admin/tickets?project=${i}`,className:"text-primary hover:underline text-sm",children:"View All Tickets"})]}),k.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No tickets for this project yet"}):n.jsx("div",{className:"space-y-4",children:k.slice(0,10).map(v=>n.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:v.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:v.description})]}),n.jsx(Li,{priority:v.priority})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx(It,{status:v.status}),n.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-800 rounded capitalize",children:v.type.replace("_"," ")}),n.jsx("span",{className:"text-xs text-muted-foreground",children:lr(v.createdAt)})]})]},v.id))})]})]})]})]})}),n.jsx(he,{})]})}function m3(){const{user:t}=ne();return n.jsx(iP,{},(t==null?void 0:t.id)||"guest")}function f3(){return n.jsx(HA,{defaultTheme:"light",storageKey:"marketing-website-theme",children:n.jsx(zA,{children:n.jsxs(q_,{children:[n.jsx(re,{path:"/",element:n.jsx(eP,{})}),n.jsx(re,{path:"/login",element:n.jsx(rP,{})}),n.jsx(re,{path:"/register",element:n.jsx(nP,{})}),n.jsx(re,{path:"/dashboard",element:n.jsx(sP,{})}),n.jsx(re,{path:"/messages",element:n.jsx(HR,{})}),n.jsx(re,{path:"/admin/dashboard",element:n.jsx(m3,{})}),n.jsx(re,{path:"/admin/users",element:n.jsx(mP,{})}),n.jsx(re,{path:"/admin/users/:id/edit",element:n.jsx(fP,{})}),n.jsx(re,{path:"/admin/users/new",element:n.jsx(bP,{})}),n.jsx(re,{path:"/admin/projects",element:n.jsx(pP,{})}),n.jsx(re,{path:"/admin/projects/new",element:n.jsx(CP,{})}),n.jsx(re,{path:"/admin/projects/:id",element:n.jsx(h3,{})}),n.jsx(re,{path:"/admin/projects/:id/edit",element:n.jsx(xP,{})}),n.jsx(re,{path:"/analytics",element:n.jsx(YR,{})}),n.jsx(re,{path:"/admin/analytics/:id",element:n.jsx(yP,{})}),n.jsx(re,{path:"/calendar",element:n.jsx(JR,{})}),n.jsx(re,{path:"/time-tracking",element:n.jsx(t3,{})}),n.jsx(re,{path:"/templates",element:n.jsx(n3,{})}),n.jsx(re,{path:"/reports",element:n.jsx(s3,{})}),n.jsx(re,{path:"/search",element:n.jsx(i3,{})}),n.jsx(re,{path:"/notifications",element:n.jsx(a3,{})}),n.jsx(re,{path:"/ai-insights",element:n.jsx(o3,{})}),n.jsx(re,{path:"/integrations",element:n.jsx(l3,{})}),n.jsx(re,{path:"/automation",element:n.jsx(d3,{})}),n.jsx(re,{path:"/dashboard/enhanced",element:n.jsx(u3,{})}),n.jsx(re,{path:"/admin/tickets",element:n.jsx(gP,{})}),n.jsx(re,{path:"/admin/notifications",element:n.jsx(vP,{})}),n.jsx(re,{path:"/developer/dashboard",element:n.jsx(jP,{})}),n.jsx(re,{path:"/developer/tickets",element:n.jsx(wP,{})}),n.jsx(re,{path:"/coordinator/dashboard",element:n.jsx(NP,{})}),n.jsx(re,{path:"/client/dashboard",element:n.jsx(_P,{})}),n.jsx(re,{path:"/client/projects",element:n.jsx(kP,{})}),n.jsx(re,{path:"/client/tickets",element:n.jsx(EP,{})}),n.jsx(re,{path:"/client/tickets/new",element:n.jsx(TP,{})}),n.jsx(re,{path:"/switch-role",element:n.jsx(IP,{})}),n.jsx(re,{path:"/client-portal/dashboard",element:n.jsx(qR,{})}),n.jsx(re,{path:"/client-portal/project/:id",element:n.jsx(GR,{})}),n.jsx(re,{path:"/client-portal/files",element:n.jsx(KR,{})}),n.jsx(re,{path:"/client-portal/feedback",element:n.jsx(QR,{})}),n.jsx(re,{path:"*",element:n.jsx($_,{to:"/",replace:!0})})]})})})}Tu.createRoot(document.getElementById("root")).render(n.jsx(Zy.StrictMode,{children:n.jsx(ek,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:n.jsx(f3,{})})}));

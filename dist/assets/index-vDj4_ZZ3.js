function IE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function SE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tv={exports:{}},ac={},nv={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yo=Symbol.for("react.element"),bE=Symbol.for("react.portal"),NE=Symbol.for("react.fragment"),AE=Symbol.for("react.strict_mode"),kE=Symbol.for("react.profiler"),CE=Symbol.for("react.provider"),PE=Symbol.for("react.context"),jE=Symbol.for("react.forward_ref"),RE=Symbol.for("react.suspense"),DE=Symbol.for("react.memo"),VE=Symbol.for("react.lazy"),ap=Symbol.iterator;function ME(t){return t===null||typeof t!="object"?null:(t=ap&&t[ap]||t["@@iterator"],typeof t=="function"?t:null)}var rv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sv=Object.assign,iv={};function ri(t,e,n){this.props=t,this.context=e,this.refs=iv,this.updater=n||rv}ri.prototype.isReactComponent={};ri.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ri.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ov(){}ov.prototype=ri.prototype;function ph(t,e,n){this.props=t,this.context=e,this.refs=iv,this.updater=n||rv}var gh=ph.prototype=new ov;gh.constructor=ph;sv(gh,ri.prototype);gh.isPureReactComponent=!0;var lp=Array.isArray,av=Object.prototype.hasOwnProperty,yh={current:null},lv={key:!0,ref:!0,__self:!0,__source:!0};function cv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)av.call(e,r)&&!lv.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Yo,type:t,key:i,ref:o,props:s,_owner:yh.current}}function OE(t,e){return{$$typeof:Yo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yo}function LE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cp=/\/+/g;function cu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LE(""+t.key):e.toString(36)}function Ka(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yo:case bE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+cu(o,0):r,lp(s)?(n="",t!=null&&(n=t.replace(cp,"$&/")+"/"),Ka(s,e,n,"",function(d){return d})):s!=null&&(vh(s)&&(s=OE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(cp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",lp(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+cu(i,c);o+=Ka(i,e,n,u,s)}else if(u=ME(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+cu(i,c++),o+=Ka(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sa(t,e,n){if(t==null)return t;var r=[],s=0;return Ka(t,r,"","",function(i){return e.call(n,i,s++)}),r}function FE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var lt={current:null},Qa={transition:null},UE={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:Qa,ReactCurrentOwner:yh};function uv(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Sa,forEach:function(t,e,n){Sa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sa(t,function(){e++}),e},toArray:function(t){return Sa(t,function(e){return e})||[]},only:function(t){if(!vh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=ri;te.Fragment=NE;te.Profiler=kE;te.PureComponent=ph;te.StrictMode=AE;te.Suspense=RE;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UE;te.act=uv;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=sv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=yh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)av.call(e,u)&&!lv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Yo,type:t.type,key:s,ref:i,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:PE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:CE,_context:t},t.Consumer=t};te.createElement=cv;te.createFactory=function(t){var e=cv.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:jE,render:t}};te.isValidElement=vh;te.lazy=function(t){return{$$typeof:VE,_payload:{_status:-1,_result:t},_init:FE}};te.memo=function(t,e){return{$$typeof:DE,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Qa.transition;Qa.transition={};try{t()}finally{Qa.transition=e}};te.unstable_act=uv;te.useCallback=function(t,e){return lt.current.useCallback(t,e)};te.useContext=function(t){return lt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return lt.current.useDeferredValue(t)};te.useEffect=function(t,e){return lt.current.useEffect(t,e)};te.useId=function(){return lt.current.useId()};te.useImperativeHandle=function(t,e,n){return lt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return lt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return lt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return lt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return lt.current.useReducer(t,e,n)};te.useRef=function(t){return lt.current.useRef(t)};te.useState=function(t){return lt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return lt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return lt.current.useTransition()};te.version="18.3.1";nv.exports=te;var M=nv.exports;const dv=SE(M),zE=IE({__proto__:null,default:dv},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE=M,$E=Symbol.for("react.element"),WE=Symbol.for("react.fragment"),HE=Object.prototype.hasOwnProperty,qE=BE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GE={key:!0,ref:!0,__self:!0,__source:!0};function hv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)HE.call(e,r)&&!GE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:$E,type:t,key:i,ref:o,props:s,_owner:qE.current}}ac.Fragment=WE;ac.jsx=hv;ac.jsxs=hv;tv.exports=ac;var a=tv.exports,Ku={},fv={exports:{}},It={},mv={exports:{}},pv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Q){var J=B.length;B.push(Q);e:for(;0<J;){var pe=J-1>>>1,Ie=B[pe];if(0<s(Ie,Q))B[pe]=Q,B[J]=Ie,J=pe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Q=B[0],J=B.pop();if(J!==Q){B[0]=J;e:for(var pe=0,Ie=B.length,Cr=Ie>>>1;pe<Cr;){var Nt=2*(pe+1)-1,Pr=B[Nt],Ot=Nt+1,Rn=B[Ot];if(0>s(Pr,J))Ot<Ie&&0>s(Rn,Pr)?(B[pe]=Rn,B[Ot]=J,pe=Ot):(B[pe]=Pr,B[Nt]=J,pe=Nt);else if(Ot<Ie&&0>s(Rn,J))B[pe]=Rn,B[Ot]=J,pe=Ot;else break e}}return Q}function s(B,Q){var J=B.sortIndex-Q.sortIndex;return J!==0?J:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],m=1,p=null,g=3,w=!1,k=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(B){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=B)r(d),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(d)}}function D(B){if(C=!1,A(B),!k)if(n(u)!==null)k=!0,gi(F);else{var Q=n(d);Q!==null&&yi(D,Q.startTime-B)}}function F(B,Q){k=!1,C&&(C=!1,_(v),v=-1),w=!0;var J=g;try{for(A(Q),p=n(u);p!==null&&(!(p.expirationTime>Q)||B&&!N());){var pe=p.callback;if(typeof pe=="function"){p.callback=null,g=p.priorityLevel;var Ie=pe(p.expirationTime<=Q);Q=t.unstable_now(),typeof Ie=="function"?p.callback=Ie:p===n(u)&&r(u),A(Q)}else r(u);p=n(u)}if(p!==null)var Cr=!0;else{var Nt=n(d);Nt!==null&&yi(D,Nt.startTime-Q),Cr=!1}return Cr}finally{p=null,g=J,w=!1}}var z=!1,E=null,v=-1,T=5,b=-1;function N(){return!(t.unstable_now()-b<T)}function P(){if(E!==null){var B=t.unstable_now();b=B;var Q=!0;try{Q=E(!0,B)}finally{Q?I():(z=!1,E=null)}}else z=!1}var I;if(typeof x=="function")I=function(){x(P)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,fn=ze.port2;ze.port1.onmessage=P,I=function(){fn.postMessage(null)}}else I=function(){S(P,0)};function gi(B){E=B,z||(z=!0,I())}function yi(B,Q){v=S(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){k||w||(k=!0,gi(F))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var J=g;g=Q;try{return B()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=g;g=B;try{return Q()}finally{g=J}},t.unstable_scheduleCallback=function(B,Q,J){var pe=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?pe+J:pe):J=pe,B){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=J+Ie,B={id:m++,callback:Q,priorityLevel:B,startTime:J,expirationTime:Ie,sortIndex:-1},J>pe?(B.sortIndex=J,e(d,B),n(u)===null&&B===n(d)&&(C?(_(v),v=-1):C=!0,yi(D,J-pe))):(B.sortIndex=Ie,e(u,B),k||w||(k=!0,gi(F))),B},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(B){var Q=g;return function(){var J=g;g=Q;try{return B.apply(this,arguments)}finally{g=J}}}})(pv);mv.exports=pv;var KE=mv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QE=M,Et=KE;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gv=new Set,go={};function ss(t,e){$s(t,e),$s(t+"Capture",e)}function $s(t,e){for(go[t]=e,t=0;t<e.length;t++)gv.add(e[t])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qu=Object.prototype.hasOwnProperty,YE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,up={},dp={};function XE(t){return Qu.call(dp,t)?!0:Qu.call(up,t)?!1:YE.test(t)?dp[t]=!0:(up[t]=!0,!1)}function JE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ZE(t,e,n,r){if(e===null||typeof e>"u"||JE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ct(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qe[t]=new ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qe[e]=new ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qe[t]=new ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qe[t]=new ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qe[t]=new ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qe[t]=new ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qe[t]=new ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qe[t]=new ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qe[t]=new ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var _h=/[\-:]([a-z])/g;function xh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_h,xh);qe[e]=new ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_h,xh);qe[e]=new ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_h,xh);qe[e]=new ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qe[t]=new ct(t,1,!1,t.toLowerCase(),null,!1,!1)});qe.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qe[t]=new ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function wh(t,e,n,r){var s=qe.hasOwnProperty(e)?qe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ZE(e,n,s,r)&&(n=null),r||s===null?XE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Pn=QE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ba=Symbol.for("react.element"),xs=Symbol.for("react.portal"),ws=Symbol.for("react.fragment"),Eh=Symbol.for("react.strict_mode"),Yu=Symbol.for("react.profiler"),yv=Symbol.for("react.provider"),vv=Symbol.for("react.context"),Th=Symbol.for("react.forward_ref"),Xu=Symbol.for("react.suspense"),Ju=Symbol.for("react.suspense_list"),Ih=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),_v=Symbol.for("react.offscreen"),hp=Symbol.iterator;function Di(t){return t===null||typeof t!="object"?null:(t=hp&&t[hp]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,uu;function Bi(t){if(uu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uu=e&&e[1]||""}return`
`+uu+t}var du=!1;function hu(t,e){if(!t||du)return"";du=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{du=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bi(t):""}function eT(t){switch(t.tag){case 5:return Bi(t.type);case 16:return Bi("Lazy");case 13:return Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 2:case 15:return t=hu(t.type,!1),t;case 11:return t=hu(t.type.render,!1),t;case 1:return t=hu(t.type,!0),t;default:return""}}function Zu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ws:return"Fragment";case xs:return"Portal";case Yu:return"Profiler";case Eh:return"StrictMode";case Xu:return"Suspense";case Ju:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vv:return(t.displayName||"Context")+".Consumer";case yv:return(t._context.displayName||"Context")+".Provider";case Th:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ih:return e=t.displayName||null,e!==null?e:Zu(t.type)||"Memo";case Bn:e=t._payload,t=t._init;try{return Zu(t(e))}catch{}}return null}function tT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zu(e);case 8:return e===Eh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nT(t){var e=xv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Na(t){t._valueTracker||(t._valueTracker=nT(t))}function wv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ed(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function fp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ev(t,e){e=e.checked,e!=null&&wh(t,"checked",e,!1)}function td(t,e){Ev(t,e);var n=pr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nd(t,e.type,n):e.hasOwnProperty("defaultValue")&&nd(t,e.type,pr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nd(t,e,n){(e!=="number"||yl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $i=Array.isArray;function Rs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function rd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if($i(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pr(n)}}function Tv(t,e){var n=pr(e.value),r=pr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function gp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Iv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Iv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Aa,Sv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Aa=Aa||document.createElement("div"),Aa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Aa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rT=["Webkit","ms","Moz","O"];Object.keys(Zi).forEach(function(t){rT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zi[e]=Zi[t]})});function bv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zi.hasOwnProperty(t)&&Zi[t]?(""+e).trim():e+"px"}function Nv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=bv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var sT=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function id(t,e){if(e){if(sT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function od(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ad=null;function Sh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ld=null,Ds=null,Vs=null;function yp(t){if(t=Zo(t)){if(typeof ld!="function")throw Error(L(280));var e=t.stateNode;e&&(e=hc(e),ld(t.stateNode,t.type,e))}}function Av(t){Ds?Vs?Vs.push(t):Vs=[t]:Ds=t}function kv(){if(Ds){var t=Ds,e=Vs;if(Vs=Ds=null,yp(t),e)for(t=0;t<e.length;t++)yp(e[t])}}function Cv(t,e){return t(e)}function Pv(){}var fu=!1;function jv(t,e,n){if(fu)return t(e,n);fu=!0;try{return Cv(t,e,n)}finally{fu=!1,(Ds!==null||Vs!==null)&&(Pv(),kv())}}function vo(t,e){var n=t.stateNode;if(n===null)return null;var r=hc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var cd=!1;if(Tn)try{var Vi={};Object.defineProperty(Vi,"passive",{get:function(){cd=!0}}),window.addEventListener("test",Vi,Vi),window.removeEventListener("test",Vi,Vi)}catch{cd=!1}function iT(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var eo=!1,vl=null,_l=!1,ud=null,oT={onError:function(t){eo=!0,vl=t}};function aT(t,e,n,r,s,i,o,c,u){eo=!1,vl=null,iT.apply(oT,arguments)}function lT(t,e,n,r,s,i,o,c,u){if(aT.apply(this,arguments),eo){if(eo){var d=vl;eo=!1,vl=null}else throw Error(L(198));_l||(_l=!0,ud=d)}}function is(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Rv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vp(t){if(is(t)!==t)throw Error(L(188))}function cT(t){var e=t.alternate;if(!e){if(e=is(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return vp(s),t;if(i===r)return vp(s),e;i=i.sibling}throw Error(L(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function Dv(t){return t=cT(t),t!==null?Vv(t):null}function Vv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Vv(t);if(e!==null)return e;t=t.sibling}return null}var Mv=Et.unstable_scheduleCallback,_p=Et.unstable_cancelCallback,uT=Et.unstable_shouldYield,dT=Et.unstable_requestPaint,be=Et.unstable_now,hT=Et.unstable_getCurrentPriorityLevel,bh=Et.unstable_ImmediatePriority,Ov=Et.unstable_UserBlockingPriority,xl=Et.unstable_NormalPriority,fT=Et.unstable_LowPriority,Lv=Et.unstable_IdlePriority,lc=null,en=null;function mT(t){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(lc,t,void 0,(t.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:yT,pT=Math.log,gT=Math.LN2;function yT(t){return t>>>=0,t===0?32:31-(pT(t)/gT|0)|0}var ka=64,Ca=4194304;function Wi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Wi(c):(i&=o,i!==0&&(r=Wi(i)))}else o=n&~s,o!==0?r=Wi(o):i!==0&&(r=Wi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wt(e),s=1<<n,r|=t[n],e&=~s;return r}function vT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _T(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Wt(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=vT(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function dd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Fv(){var t=ka;return ka<<=1,!(ka&4194240)&&(ka=64),t}function mu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wt(e),t[e]=n}function xT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Wt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Nh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var le=0;function Uv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zv,Ah,Bv,$v,Wv,hd=!1,Pa=[],er=null,tr=null,nr=null,_o=new Map,xo=new Map,Wn=[],wT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xp(t,e){switch(t){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":_o.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xo.delete(e.pointerId)}}function Mi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Zo(e),e!==null&&Ah(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ET(t,e,n,r,s){switch(e){case"focusin":return er=Mi(er,t,e,n,r,s),!0;case"dragenter":return tr=Mi(tr,t,e,n,r,s),!0;case"mouseover":return nr=Mi(nr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return _o.set(i,Mi(_o.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,xo.set(i,Mi(xo.get(i)||null,t,e,n,r,s)),!0}return!1}function Hv(t){var e=Ur(t.target);if(e!==null){var n=is(e);if(n!==null){if(e=n.tag,e===13){if(e=Rv(n),e!==null){t.blockedOn=e,Wv(t.priority,function(){Bv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ya(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ad=r,n.target.dispatchEvent(r),ad=null}else return e=Zo(n),e!==null&&Ah(e),t.blockedOn=n,!1;e.shift()}return!0}function wp(t,e,n){Ya(t)&&n.delete(e)}function TT(){hd=!1,er!==null&&Ya(er)&&(er=null),tr!==null&&Ya(tr)&&(tr=null),nr!==null&&Ya(nr)&&(nr=null),_o.forEach(wp),xo.forEach(wp)}function Oi(t,e){t.blockedOn===e&&(t.blockedOn=null,hd||(hd=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,TT)))}function wo(t){function e(s){return Oi(s,t)}if(0<Pa.length){Oi(Pa[0],t);for(var n=1;n<Pa.length;n++){var r=Pa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(er!==null&&Oi(er,t),tr!==null&&Oi(tr,t),nr!==null&&Oi(nr,t),_o.forEach(e),xo.forEach(e),n=0;n<Wn.length;n++)r=Wn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Wn.length&&(n=Wn[0],n.blockedOn===null);)Hv(n),n.blockedOn===null&&Wn.shift()}var Ms=Pn.ReactCurrentBatchConfig,El=!0;function IT(t,e,n,r){var s=le,i=Ms.transition;Ms.transition=null;try{le=1,kh(t,e,n,r)}finally{le=s,Ms.transition=i}}function ST(t,e,n,r){var s=le,i=Ms.transition;Ms.transition=null;try{le=4,kh(t,e,n,r)}finally{le=s,Ms.transition=i}}function kh(t,e,n,r){if(El){var s=fd(t,e,n,r);if(s===null)Iu(t,e,r,Tl,n),xp(t,r);else if(ET(s,t,e,n,r))r.stopPropagation();else if(xp(t,r),e&4&&-1<wT.indexOf(t)){for(;s!==null;){var i=Zo(s);if(i!==null&&zv(i),i=fd(t,e,n,r),i===null&&Iu(t,e,r,Tl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Iu(t,e,r,null,n)}}var Tl=null;function fd(t,e,n,r){if(Tl=null,t=Sh(r),t=Ur(t),t!==null)if(e=is(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Rv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tl=t,null}function qv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hT()){case bh:return 1;case Ov:return 4;case xl:case fT:return 16;case Lv:return 536870912;default:return 16}default:return 16}}var Yn=null,Ch=null,Xa=null;function Gv(){if(Xa)return Xa;var t,e=Ch,n=e.length,r,s="value"in Yn?Yn.value:Yn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Xa=s.slice(t,1<r?1-r:void 0)}function Ja(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ja(){return!0}function Ep(){return!1}function St(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ja:Ep,this.isPropagationStopped=Ep,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ja)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ja)},persist:function(){},isPersistent:ja}),e}var si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ph=St(si),Jo=xe({},si,{view:0,detail:0}),bT=St(Jo),pu,gu,Li,cc=xe({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Li&&(Li&&t.type==="mousemove"?(pu=t.screenX-Li.screenX,gu=t.screenY-Li.screenY):gu=pu=0,Li=t),pu)},movementY:function(t){return"movementY"in t?t.movementY:gu}}),Tp=St(cc),NT=xe({},cc,{dataTransfer:0}),AT=St(NT),kT=xe({},Jo,{relatedTarget:0}),yu=St(kT),CT=xe({},si,{animationName:0,elapsedTime:0,pseudoElement:0}),PT=St(CT),jT=xe({},si,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RT=St(jT),DT=xe({},si,{data:0}),Ip=St(DT),VT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OT[t])?!!e[t]:!1}function jh(){return LT}var FT=xe({},Jo,{key:function(t){if(t.key){var e=VT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ja(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?MT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jh,charCode:function(t){return t.type==="keypress"?Ja(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ja(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),UT=St(FT),zT=xe({},cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sp=St(zT),BT=xe({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jh}),$T=St(BT),WT=xe({},si,{propertyName:0,elapsedTime:0,pseudoElement:0}),HT=St(WT),qT=xe({},cc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GT=St(qT),KT=[9,13,27,32],Rh=Tn&&"CompositionEvent"in window,to=null;Tn&&"documentMode"in document&&(to=document.documentMode);var QT=Tn&&"TextEvent"in window&&!to,Kv=Tn&&(!Rh||to&&8<to&&11>=to),bp=" ",Np=!1;function Qv(t,e){switch(t){case"keyup":return KT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Es=!1;function YT(t,e){switch(t){case"compositionend":return Yv(e);case"keypress":return e.which!==32?null:(Np=!0,bp);case"textInput":return t=e.data,t===bp&&Np?null:t;default:return null}}function XT(t,e){if(Es)return t==="compositionend"||!Rh&&Qv(t,e)?(t=Gv(),Xa=Ch=Yn=null,Es=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Kv&&e.locale!=="ko"?null:e.data;default:return null}}var JT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ap(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JT[t.type]:e==="textarea"}function Xv(t,e,n,r){Av(r),e=Il(e,"onChange"),0<e.length&&(n=new Ph("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var no=null,Eo=null;function ZT(t){l_(t,0)}function uc(t){var e=Ss(t);if(wv(e))return t}function e1(t,e){if(t==="change")return e}var Jv=!1;if(Tn){var vu;if(Tn){var _u="oninput"in document;if(!_u){var kp=document.createElement("div");kp.setAttribute("oninput","return;"),_u=typeof kp.oninput=="function"}vu=_u}else vu=!1;Jv=vu&&(!document.documentMode||9<document.documentMode)}function Cp(){no&&(no.detachEvent("onpropertychange",Zv),Eo=no=null)}function Zv(t){if(t.propertyName==="value"&&uc(Eo)){var e=[];Xv(e,Eo,t,Sh(t)),jv(ZT,e)}}function t1(t,e,n){t==="focusin"?(Cp(),no=e,Eo=n,no.attachEvent("onpropertychange",Zv)):t==="focusout"&&Cp()}function n1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return uc(Eo)}function r1(t,e){if(t==="click")return uc(e)}function s1(t,e){if(t==="input"||t==="change")return uc(e)}function i1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qt=typeof Object.is=="function"?Object.is:i1;function To(t,e){if(qt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Qu.call(e,s)||!qt(t[s],e[s]))return!1}return!0}function Pp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jp(t,e){var n=Pp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pp(n)}}function e_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?e_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function t_(){for(var t=window,e=yl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yl(t.document)}return e}function Dh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function o1(t){var e=t_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&e_(n.ownerDocument.documentElement,n)){if(r!==null&&Dh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=jp(n,i);var o=jp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var a1=Tn&&"documentMode"in document&&11>=document.documentMode,Ts=null,md=null,ro=null,pd=!1;function Rp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pd||Ts==null||Ts!==yl(r)||(r=Ts,"selectionStart"in r&&Dh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ro&&To(ro,r)||(ro=r,r=Il(md,"onSelect"),0<r.length&&(e=new Ph("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ts)))}function Ra(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Is={animationend:Ra("Animation","AnimationEnd"),animationiteration:Ra("Animation","AnimationIteration"),animationstart:Ra("Animation","AnimationStart"),transitionend:Ra("Transition","TransitionEnd")},xu={},n_={};Tn&&(n_=document.createElement("div").style,"AnimationEvent"in window||(delete Is.animationend.animation,delete Is.animationiteration.animation,delete Is.animationstart.animation),"TransitionEvent"in window||delete Is.transitionend.transition);function dc(t){if(xu[t])return xu[t];if(!Is[t])return t;var e=Is[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in n_)return xu[t]=e[n];return t}var r_=dc("animationend"),s_=dc("animationiteration"),i_=dc("animationstart"),o_=dc("transitionend"),a_=new Map,Dp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(t,e){a_.set(t,e),ss(e,[t])}for(var wu=0;wu<Dp.length;wu++){var Eu=Dp[wu],l1=Eu.toLowerCase(),c1=Eu[0].toUpperCase()+Eu.slice(1);Tr(l1,"on"+c1)}Tr(r_,"onAnimationEnd");Tr(s_,"onAnimationIteration");Tr(i_,"onAnimationStart");Tr("dblclick","onDoubleClick");Tr("focusin","onFocus");Tr("focusout","onBlur");Tr(o_,"onTransitionEnd");$s("onMouseEnter",["mouseout","mouseover"]);$s("onMouseLeave",["mouseout","mouseover"]);$s("onPointerEnter",["pointerout","pointerover"]);$s("onPointerLeave",["pointerout","pointerover"]);ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hi));function Vp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,lT(r,e,void 0,t),t.currentTarget=null}function l_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Vp(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Vp(s,c,d),i=u}}}if(_l)throw t=ud,_l=!1,ud=null,t}function he(t,e){var n=e[xd];n===void 0&&(n=e[xd]=new Set);var r=t+"__bubble";n.has(r)||(c_(e,t,2,!1),n.add(r))}function Tu(t,e,n){var r=0;e&&(r|=4),c_(n,t,r,e)}var Da="_reactListening"+Math.random().toString(36).slice(2);function Io(t){if(!t[Da]){t[Da]=!0,gv.forEach(function(n){n!=="selectionchange"&&(u1.has(n)||Tu(n,!1,t),Tu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Da]||(e[Da]=!0,Tu("selectionchange",!1,e))}}function c_(t,e,n,r){switch(qv(e)){case 1:var s=IT;break;case 4:s=ST;break;default:s=kh}n=s.bind(null,e,n,t),s=void 0,!cd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Iu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Ur(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}jv(function(){var d=i,m=Sh(n),p=[];e:{var g=a_.get(t);if(g!==void 0){var w=Ph,k=t;switch(t){case"keypress":if(Ja(n)===0)break e;case"keydown":case"keyup":w=UT;break;case"focusin":k="focus",w=yu;break;case"focusout":k="blur",w=yu;break;case"beforeblur":case"afterblur":w=yu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Tp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=AT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=$T;break;case r_:case s_:case i_:w=PT;break;case o_:w=HT;break;case"scroll":w=bT;break;case"wheel":w=GT;break;case"copy":case"cut":case"paste":w=RT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Sp}var C=(e&4)!==0,S=!C&&t==="scroll",_=C?g!==null?g+"Capture":null:g;C=[];for(var x=d,A;x!==null;){A=x;var D=A.stateNode;if(A.tag===5&&D!==null&&(A=D,_!==null&&(D=vo(x,_),D!=null&&C.push(So(x,D,A)))),S)break;x=x.return}0<C.length&&(g=new w(g,k,null,n,m),p.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==ad&&(k=n.relatedTarget||n.fromElement)&&(Ur(k)||k[In]))break e;if((w||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,w?(k=n.relatedTarget||n.toElement,w=d,k=k?Ur(k):null,k!==null&&(S=is(k),k!==S||k.tag!==5&&k.tag!==6)&&(k=null)):(w=null,k=d),w!==k)){if(C=Tp,D="onMouseLeave",_="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(C=Sp,D="onPointerLeave",_="onPointerEnter",x="pointer"),S=w==null?g:Ss(w),A=k==null?g:Ss(k),g=new C(D,x+"leave",w,n,m),g.target=S,g.relatedTarget=A,D=null,Ur(m)===d&&(C=new C(_,x+"enter",k,n,m),C.target=A,C.relatedTarget=S,D=C),S=D,w&&k)t:{for(C=w,_=k,x=0,A=C;A;A=ms(A))x++;for(A=0,D=_;D;D=ms(D))A++;for(;0<x-A;)C=ms(C),x--;for(;0<A-x;)_=ms(_),A--;for(;x--;){if(C===_||_!==null&&C===_.alternate)break t;C=ms(C),_=ms(_)}C=null}else C=null;w!==null&&Mp(p,g,w,C,!1),k!==null&&S!==null&&Mp(p,S,k,C,!0)}}e:{if(g=d?Ss(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var F=e1;else if(Ap(g))if(Jv)F=s1;else{F=n1;var z=t1}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(F=r1);if(F&&(F=F(t,d))){Xv(p,F,n,m);break e}z&&z(t,g,d),t==="focusout"&&(z=g._wrapperState)&&z.controlled&&g.type==="number"&&nd(g,"number",g.value)}switch(z=d?Ss(d):window,t){case"focusin":(Ap(z)||z.contentEditable==="true")&&(Ts=z,md=d,ro=null);break;case"focusout":ro=md=Ts=null;break;case"mousedown":pd=!0;break;case"contextmenu":case"mouseup":case"dragend":pd=!1,Rp(p,n,m);break;case"selectionchange":if(a1)break;case"keydown":case"keyup":Rp(p,n,m)}var E;if(Rh)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Es?Qv(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Kv&&n.locale!=="ko"&&(Es||v!=="onCompositionStart"?v==="onCompositionEnd"&&Es&&(E=Gv()):(Yn=m,Ch="value"in Yn?Yn.value:Yn.textContent,Es=!0)),z=Il(d,v),0<z.length&&(v=new Ip(v,t,null,n,m),p.push({event:v,listeners:z}),E?v.data=E:(E=Yv(n),E!==null&&(v.data=E)))),(E=QT?YT(t,n):XT(t,n))&&(d=Il(d,"onBeforeInput"),0<d.length&&(m=new Ip("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:d}),m.data=E))}l_(p,e)})}function So(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Il(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=vo(t,n),i!=null&&r.unshift(So(t,i,s)),i=vo(t,e),i!=null&&r.push(So(t,i,s))),t=t.return}return r}function ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Mp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=vo(n,i),u!=null&&o.unshift(So(n,u,c))):s||(u=vo(n,i),u!=null&&o.push(So(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var d1=/\r\n?/g,h1=/\u0000|\uFFFD/g;function Op(t){return(typeof t=="string"?t:""+t).replace(d1,`
`).replace(h1,"")}function Va(t,e,n){if(e=Op(e),Op(t)!==e&&n)throw Error(L(425))}function Sl(){}var gd=null,yd=null;function vd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _d=typeof setTimeout=="function"?setTimeout:void 0,f1=typeof clearTimeout=="function"?clearTimeout:void 0,Lp=typeof Promise=="function"?Promise:void 0,m1=typeof queueMicrotask=="function"?queueMicrotask:typeof Lp<"u"?function(t){return Lp.resolve(null).then(t).catch(p1)}:_d;function p1(t){setTimeout(function(){throw t})}function Su(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),wo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);wo(e)}function rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Fp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ii=Math.random().toString(36).slice(2),Zt="__reactFiber$"+ii,bo="__reactProps$"+ii,In="__reactContainer$"+ii,xd="__reactEvents$"+ii,g1="__reactListeners$"+ii,y1="__reactHandles$"+ii;function Ur(t){var e=t[Zt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[In]||n[Zt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Fp(t);t!==null;){if(n=t[Zt])return n;t=Fp(t)}return e}t=n,n=t.parentNode}return null}function Zo(t){return t=t[Zt]||t[In],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function hc(t){return t[bo]||null}var wd=[],bs=-1;function Ir(t){return{current:t}}function me(t){0>bs||(t.current=wd[bs],wd[bs]=null,bs--)}function ue(t,e){bs++,wd[bs]=t.current,t.current=e}var gr={},nt=Ir(gr),ft=Ir(!1),Gr=gr;function Ws(t,e){var n=t.type.contextTypes;if(!n)return gr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mt(t){return t=t.childContextTypes,t!=null}function bl(){me(ft),me(nt)}function Up(t,e,n){if(nt.current!==gr)throw Error(L(168));ue(nt,e),ue(ft,n)}function u_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(L(108,tT(t)||"Unknown",s));return xe({},n,r)}function Nl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gr,Gr=nt.current,ue(nt,t),ue(ft,ft.current),!0}function zp(t,e,n){var r=t.stateNode;if(!r)throw Error(L(169));n?(t=u_(t,e,Gr),r.__reactInternalMemoizedMergedChildContext=t,me(ft),me(nt),ue(nt,t)):me(ft),ue(ft,n)}var pn=null,fc=!1,bu=!1;function d_(t){pn===null?pn=[t]:pn.push(t)}function v1(t){fc=!0,d_(t)}function Sr(){if(!bu&&pn!==null){bu=!0;var t=0,e=le;try{var n=pn;for(le=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pn=null,fc=!1}catch(s){throw pn!==null&&(pn=pn.slice(t+1)),Mv(bh,Sr),s}finally{le=e,bu=!1}}return null}var Ns=[],As=0,Al=null,kl=0,At=[],kt=0,Kr=null,gn=1,yn="";function Or(t,e){Ns[As++]=kl,Ns[As++]=Al,Al=t,kl=e}function h_(t,e,n){At[kt++]=gn,At[kt++]=yn,At[kt++]=Kr,Kr=t;var r=gn;t=yn;var s=32-Wt(r)-1;r&=~(1<<s),n+=1;var i=32-Wt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,gn=1<<32-Wt(e)+s|n<<s|r,yn=i+t}else gn=1<<i|n<<s|r,yn=t}function Vh(t){t.return!==null&&(Or(t,1),h_(t,1,0))}function Mh(t){for(;t===Al;)Al=Ns[--As],Ns[As]=null,kl=Ns[--As],Ns[As]=null;for(;t===Kr;)Kr=At[--kt],At[kt]=null,yn=At[--kt],At[kt]=null,gn=At[--kt],At[kt]=null}var wt=null,xt=null,ge=!1,zt=null;function f_(t,e){var n=Rt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Bp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wt=t,xt=rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wt=t,xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Kr!==null?{id:gn,overflow:yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wt=t,xt=null,!0):!1;default:return!1}}function Ed(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Td(t){if(ge){var e=xt;if(e){var n=e;if(!Bp(t,e)){if(Ed(t))throw Error(L(418));e=rr(n.nextSibling);var r=wt;e&&Bp(t,e)?f_(r,n):(t.flags=t.flags&-4097|2,ge=!1,wt=t)}}else{if(Ed(t))throw Error(L(418));t.flags=t.flags&-4097|2,ge=!1,wt=t}}}function $p(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wt=t}function Ma(t){if(t!==wt)return!1;if(!ge)return $p(t),ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vd(t.type,t.memoizedProps)),e&&(e=xt)){if(Ed(t))throw m_(),Error(L(418));for(;e;)f_(t,e),e=rr(e.nextSibling)}if($p(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xt=rr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xt=null}}else xt=wt?rr(t.stateNode.nextSibling):null;return!0}function m_(){for(var t=xt;t;)t=rr(t.nextSibling)}function Hs(){xt=wt=null,ge=!1}function Oh(t){zt===null?zt=[t]:zt.push(t)}var _1=Pn.ReactCurrentBatchConfig;function Fi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function Oa(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Wp(t){var e=t._init;return e(t._payload)}function p_(t){function e(_,x){if(t){var A=_.deletions;A===null?(_.deletions=[x],_.flags|=16):A.push(x)}}function n(_,x){if(!t)return null;for(;x!==null;)e(_,x),x=x.sibling;return null}function r(_,x){for(_=new Map;x!==null;)x.key!==null?_.set(x.key,x):_.set(x.index,x),x=x.sibling;return _}function s(_,x){return _=ar(_,x),_.index=0,_.sibling=null,_}function i(_,x,A){return _.index=A,t?(A=_.alternate,A!==null?(A=A.index,A<x?(_.flags|=2,x):A):(_.flags|=2,x)):(_.flags|=1048576,x)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function c(_,x,A,D){return x===null||x.tag!==6?(x=Ru(A,_.mode,D),x.return=_,x):(x=s(x,A),x.return=_,x)}function u(_,x,A,D){var F=A.type;return F===ws?m(_,x,A.props.children,D,A.key):x!==null&&(x.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Bn&&Wp(F)===x.type)?(D=s(x,A.props),D.ref=Fi(_,x,A),D.return=_,D):(D=il(A.type,A.key,A.props,null,_.mode,D),D.ref=Fi(_,x,A),D.return=_,D)}function d(_,x,A,D){return x===null||x.tag!==4||x.stateNode.containerInfo!==A.containerInfo||x.stateNode.implementation!==A.implementation?(x=Du(A,_.mode,D),x.return=_,x):(x=s(x,A.children||[]),x.return=_,x)}function m(_,x,A,D,F){return x===null||x.tag!==7?(x=Hr(A,_.mode,D,F),x.return=_,x):(x=s(x,A),x.return=_,x)}function p(_,x,A){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ru(""+x,_.mode,A),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ba:return A=il(x.type,x.key,x.props,null,_.mode,A),A.ref=Fi(_,null,x),A.return=_,A;case xs:return x=Du(x,_.mode,A),x.return=_,x;case Bn:var D=x._init;return p(_,D(x._payload),A)}if($i(x)||Di(x))return x=Hr(x,_.mode,A,null),x.return=_,x;Oa(_,x)}return null}function g(_,x,A,D){var F=x!==null?x.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return F!==null?null:c(_,x,""+A,D);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ba:return A.key===F?u(_,x,A,D):null;case xs:return A.key===F?d(_,x,A,D):null;case Bn:return F=A._init,g(_,x,F(A._payload),D)}if($i(A)||Di(A))return F!==null?null:m(_,x,A,D,null);Oa(_,A)}return null}function w(_,x,A,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return _=_.get(A)||null,c(x,_,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ba:return _=_.get(D.key===null?A:D.key)||null,u(x,_,D,F);case xs:return _=_.get(D.key===null?A:D.key)||null,d(x,_,D,F);case Bn:var z=D._init;return w(_,x,A,z(D._payload),F)}if($i(D)||Di(D))return _=_.get(A)||null,m(x,_,D,F,null);Oa(x,D)}return null}function k(_,x,A,D){for(var F=null,z=null,E=x,v=x=0,T=null;E!==null&&v<A.length;v++){E.index>v?(T=E,E=null):T=E.sibling;var b=g(_,E,A[v],D);if(b===null){E===null&&(E=T);break}t&&E&&b.alternate===null&&e(_,E),x=i(b,x,v),z===null?F=b:z.sibling=b,z=b,E=T}if(v===A.length)return n(_,E),ge&&Or(_,v),F;if(E===null){for(;v<A.length;v++)E=p(_,A[v],D),E!==null&&(x=i(E,x,v),z===null?F=E:z.sibling=E,z=E);return ge&&Or(_,v),F}for(E=r(_,E);v<A.length;v++)T=w(E,_,v,A[v],D),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?v:T.key),x=i(T,x,v),z===null?F=T:z.sibling=T,z=T);return t&&E.forEach(function(N){return e(_,N)}),ge&&Or(_,v),F}function C(_,x,A,D){var F=Di(A);if(typeof F!="function")throw Error(L(150));if(A=F.call(A),A==null)throw Error(L(151));for(var z=F=null,E=x,v=x=0,T=null,b=A.next();E!==null&&!b.done;v++,b=A.next()){E.index>v?(T=E,E=null):T=E.sibling;var N=g(_,E,b.value,D);if(N===null){E===null&&(E=T);break}t&&E&&N.alternate===null&&e(_,E),x=i(N,x,v),z===null?F=N:z.sibling=N,z=N,E=T}if(b.done)return n(_,E),ge&&Or(_,v),F;if(E===null){for(;!b.done;v++,b=A.next())b=p(_,b.value,D),b!==null&&(x=i(b,x,v),z===null?F=b:z.sibling=b,z=b);return ge&&Or(_,v),F}for(E=r(_,E);!b.done;v++,b=A.next())b=w(E,_,v,b.value,D),b!==null&&(t&&b.alternate!==null&&E.delete(b.key===null?v:b.key),x=i(b,x,v),z===null?F=b:z.sibling=b,z=b);return t&&E.forEach(function(P){return e(_,P)}),ge&&Or(_,v),F}function S(_,x,A,D){if(typeof A=="object"&&A!==null&&A.type===ws&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case ba:e:{for(var F=A.key,z=x;z!==null;){if(z.key===F){if(F=A.type,F===ws){if(z.tag===7){n(_,z.sibling),x=s(z,A.props.children),x.return=_,_=x;break e}}else if(z.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Bn&&Wp(F)===z.type){n(_,z.sibling),x=s(z,A.props),x.ref=Fi(_,z,A),x.return=_,_=x;break e}n(_,z);break}else e(_,z);z=z.sibling}A.type===ws?(x=Hr(A.props.children,_.mode,D,A.key),x.return=_,_=x):(D=il(A.type,A.key,A.props,null,_.mode,D),D.ref=Fi(_,x,A),D.return=_,_=D)}return o(_);case xs:e:{for(z=A.key;x!==null;){if(x.key===z)if(x.tag===4&&x.stateNode.containerInfo===A.containerInfo&&x.stateNode.implementation===A.implementation){n(_,x.sibling),x=s(x,A.children||[]),x.return=_,_=x;break e}else{n(_,x);break}else e(_,x);x=x.sibling}x=Du(A,_.mode,D),x.return=_,_=x}return o(_);case Bn:return z=A._init,S(_,x,z(A._payload),D)}if($i(A))return k(_,x,A,D);if(Di(A))return C(_,x,A,D);Oa(_,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,x!==null&&x.tag===6?(n(_,x.sibling),x=s(x,A),x.return=_,_=x):(n(_,x),x=Ru(A,_.mode,D),x.return=_,_=x),o(_)):n(_,x)}return S}var qs=p_(!0),g_=p_(!1),Cl=Ir(null),Pl=null,ks=null,Lh=null;function Fh(){Lh=ks=Pl=null}function Uh(t){var e=Cl.current;me(Cl),t._currentValue=e}function Id(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Os(t,e){Pl=t,Lh=ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ht=!0),t.firstContext=null)}function Vt(t){var e=t._currentValue;if(Lh!==t)if(t={context:t,memoizedValue:e,next:null},ks===null){if(Pl===null)throw Error(L(308));ks=t,Pl.dependencies={lanes:0,firstContext:t}}else ks=ks.next=t;return e}var zr=null;function zh(t){zr===null?zr=[t]:zr.push(t)}function y_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,zh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Sn(t,r)}function Sn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $n=!1;function Bh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function sr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Sn(t,n)}return s=r.interleaved,s===null?(e.next=e,zh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Sn(t,n)}function Za(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nh(t,n)}}function Hp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jl(t,e,n,r){var s=t.updateQueue;$n=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,m=d=u=null,c=i;do{var g=c.lane,w=c.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:w,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var k=t,C=c;switch(g=e,w=n,C.tag){case 1:if(k=C.payload,typeof k=="function"){p=k.call(w,p,g);break e}p=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=C.payload,g=typeof k=="function"?k.call(w,p,g):k,g==null)break e;p=xe({},p,g);break e;case 2:$n=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else w={eventTime:w,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=w,u=p):m=m.next=w,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Yr|=o,t.lanes=o,t.memoizedState=p}}function qp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(L(191,s));s.call(r)}}}var ea={},tn=Ir(ea),No=Ir(ea),Ao=Ir(ea);function Br(t){if(t===ea)throw Error(L(174));return t}function $h(t,e){switch(ue(Ao,e),ue(No,t),ue(tn,ea),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sd(e,t)}me(tn),ue(tn,e)}function Gs(){me(tn),me(No),me(Ao)}function __(t){Br(Ao.current);var e=Br(tn.current),n=sd(e,t.type);e!==n&&(ue(No,t),ue(tn,n))}function Wh(t){No.current===t&&(me(tn),me(No))}var ye=Ir(0);function Rl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nu=[];function Hh(){for(var t=0;t<Nu.length;t++)Nu[t]._workInProgressVersionPrimary=null;Nu.length=0}var el=Pn.ReactCurrentDispatcher,Au=Pn.ReactCurrentBatchConfig,Qr=0,_e=null,je=null,Le=null,Dl=!1,so=!1,ko=0,x1=0;function Qe(){throw Error(L(321))}function qh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qt(t[n],e[n]))return!1;return!0}function Gh(t,e,n,r,s,i){if(Qr=i,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,el.current=t===null||t.memoizedState===null?I1:S1,t=n(r,s),so){i=0;do{if(so=!1,ko=0,25<=i)throw Error(L(301));i+=1,Le=je=null,e.updateQueue=null,el.current=b1,t=n(r,s)}while(so)}if(el.current=Vl,e=je!==null&&je.next!==null,Qr=0,Le=je=_e=null,Dl=!1,e)throw Error(L(300));return t}function Kh(){var t=ko!==0;return ko=0,t}function Xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?_e.memoizedState=Le=t:Le=Le.next=t,Le}function Mt(){if(je===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=je.next;var e=Le===null?_e.memoizedState:Le.next;if(e!==null)Le=e,je=t;else{if(t===null)throw Error(L(310));je=t,t={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},Le===null?_e.memoizedState=Le=t:Le=Le.next=t}return Le}function Co(t,e){return typeof e=="function"?e(t):e}function ku(t){var e=Mt(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=je,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var m=d.lane;if((Qr&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,o=r):u=u.next=p,_e.lanes|=m,Yr|=m}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,qt(r,e.memoizedState)||(ht=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,_e.lanes|=i,Yr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cu(t){var e=Mt(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);qt(i,e.memoizedState)||(ht=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function x_(){}function w_(t,e){var n=_e,r=Mt(),s=e(),i=!qt(r.memoizedState,s);if(i&&(r.memoizedState=s,ht=!0),r=r.queue,Qh(I_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,Po(9,T_.bind(null,n,r,s,e),void 0,null),Ue===null)throw Error(L(349));Qr&30||E_(n,e,s)}return s}function E_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function T_(t,e,n,r){e.value=n,e.getSnapshot=r,S_(e)&&b_(t)}function I_(t,e,n){return n(function(){S_(e)&&b_(t)})}function S_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qt(t,n)}catch{return!0}}function b_(t){var e=Sn(t,1);e!==null&&Ht(e,t,1,-1)}function Gp(t){var e=Xt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:t},e.queue=t,t=t.dispatch=T1.bind(null,_e,t),[e.memoizedState,t]}function Po(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function N_(){return Mt().memoizedState}function tl(t,e,n,r){var s=Xt();_e.flags|=t,s.memoizedState=Po(1|e,n,void 0,r===void 0?null:r)}function mc(t,e,n,r){var s=Mt();r=r===void 0?null:r;var i=void 0;if(je!==null){var o=je.memoizedState;if(i=o.destroy,r!==null&&qh(r,o.deps)){s.memoizedState=Po(e,n,i,r);return}}_e.flags|=t,s.memoizedState=Po(1|e,n,i,r)}function Kp(t,e){return tl(8390656,8,t,e)}function Qh(t,e){return mc(2048,8,t,e)}function A_(t,e){return mc(4,2,t,e)}function k_(t,e){return mc(4,4,t,e)}function C_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function P_(t,e,n){return n=n!=null?n.concat([t]):null,mc(4,4,C_.bind(null,e,t),n)}function Yh(){}function j_(t,e){var n=Mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function R_(t,e){var n=Mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function D_(t,e,n){return Qr&21?(qt(n,e)||(n=Fv(),_e.lanes|=n,Yr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ht=!0),t.memoizedState=n)}function w1(t,e){var n=le;le=n!==0&&4>n?n:4,t(!0);var r=Au.transition;Au.transition={};try{t(!1),e()}finally{le=n,Au.transition=r}}function V_(){return Mt().memoizedState}function E1(t,e,n){var r=or(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},M_(t))O_(e,n);else if(n=y_(t,e,n,r),n!==null){var s=at();Ht(n,t,r,s),L_(n,e,r)}}function T1(t,e,n){var r=or(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(M_(t))O_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,qt(c,o)){var u=e.interleaved;u===null?(s.next=s,zh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=y_(t,e,s,r),n!==null&&(s=at(),Ht(n,t,r,s),L_(n,e,r))}}function M_(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function O_(t,e){so=Dl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function L_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nh(t,n)}}var Vl={readContext:Vt,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},I1={readContext:Vt,useCallback:function(t,e){return Xt().memoizedState=[t,e===void 0?null:e],t},useContext:Vt,useEffect:Kp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,tl(4194308,4,C_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return tl(4194308,4,t,e)},useInsertionEffect:function(t,e){return tl(4,2,t,e)},useMemo:function(t,e){var n=Xt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=E1.bind(null,_e,t),[r.memoizedState,t]},useRef:function(t){var e=Xt();return t={current:t},e.memoizedState=t},useState:Gp,useDebugValue:Yh,useDeferredValue:function(t){return Xt().memoizedState=t},useTransition:function(){var t=Gp(!1),e=t[0];return t=w1.bind(null,t[1]),Xt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_e,s=Xt();if(ge){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),Ue===null)throw Error(L(349));Qr&30||E_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Kp(I_.bind(null,r,i,t),[t]),r.flags|=2048,Po(9,T_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Xt(),e=Ue.identifierPrefix;if(ge){var n=yn,r=gn;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ko++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=x1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},S1={readContext:Vt,useCallback:j_,useContext:Vt,useEffect:Qh,useImperativeHandle:P_,useInsertionEffect:A_,useLayoutEffect:k_,useMemo:R_,useReducer:ku,useRef:N_,useState:function(){return ku(Co)},useDebugValue:Yh,useDeferredValue:function(t){var e=Mt();return D_(e,je.memoizedState,t)},useTransition:function(){var t=ku(Co)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:x_,useSyncExternalStore:w_,useId:V_,unstable_isNewReconciler:!1},b1={readContext:Vt,useCallback:j_,useContext:Vt,useEffect:Qh,useImperativeHandle:P_,useInsertionEffect:A_,useLayoutEffect:k_,useMemo:R_,useReducer:Cu,useRef:N_,useState:function(){return Cu(Co)},useDebugValue:Yh,useDeferredValue:function(t){var e=Mt();return je===null?e.memoizedState=t:D_(e,je.memoizedState,t)},useTransition:function(){var t=Cu(Co)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:x_,useSyncExternalStore:w_,useId:V_,unstable_isNewReconciler:!1};function Ft(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pc={isMounted:function(t){return(t=t._reactInternals)?is(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=at(),s=or(t),i=xn(r,s);i.payload=e,n!=null&&(i.callback=n),e=sr(t,i,s),e!==null&&(Ht(e,t,s,r),Za(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=at(),s=or(t),i=xn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=sr(t,i,s),e!==null&&(Ht(e,t,s,r),Za(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=at(),r=or(t),s=xn(n,r);s.tag=2,e!=null&&(s.callback=e),e=sr(t,s,r),e!==null&&(Ht(e,t,r,n),Za(e,t,r))}};function Qp(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!To(n,r)||!To(s,i):!0}function F_(t,e,n){var r=!1,s=gr,i=e.contextType;return typeof i=="object"&&i!==null?i=Vt(i):(s=mt(e)?Gr:nt.current,r=e.contextTypes,i=(r=r!=null)?Ws(t,s):gr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Yp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pc.enqueueReplaceState(e,e.state,null)}function bd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Bh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Vt(i):(i=mt(e)?Gr:nt.current,s.context=Ws(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Sd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&pc.enqueueReplaceState(s,s.state,null),jl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ks(t,e){try{var n="",r=e;do n+=eT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Pu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var N1=typeof WeakMap=="function"?WeakMap:Map;function U_(t,e,n){n=xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ol||(Ol=!0,Od=r),Nd(t,e)},n}function z_(t,e,n){n=xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Nd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Nd(t,e),typeof r!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Xp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new N1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=z1.bind(null,t,e,n),e.then(t,t))}function Jp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xn(-1,1),e.tag=2,sr(n,e,1))),n.lanes|=1),t)}var A1=Pn.ReactCurrentOwner,ht=!1;function ot(t,e,n,r){e.child=t===null?g_(e,null,n,r):qs(e,t.child,n,r)}function eg(t,e,n,r,s){n=n.render;var i=e.ref;return Os(e,s),r=Gh(t,e,n,r,i,s),n=Kh(),t!==null&&!ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,bn(t,e,s)):(ge&&n&&Vh(e),e.flags|=1,ot(t,e,r,s),e.child)}function tg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!sf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,B_(t,e,i,r,s)):(t=il(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:To,n(o,r)&&t.ref===e.ref)return bn(t,e,s)}return e.flags|=1,t=ar(i,r),t.ref=e.ref,t.return=e,e.child=t}function B_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(To(i,r)&&t.ref===e.ref)if(ht=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ht=!0);else return e.lanes=t.lanes,bn(t,e,s)}return Ad(t,e,n,r,s)}function $_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(Ps,_t),_t|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(Ps,_t),_t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ue(Ps,_t),_t|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ue(Ps,_t),_t|=r;return ot(t,e,s,n),e.child}function W_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ad(t,e,n,r,s){var i=mt(n)?Gr:nt.current;return i=Ws(e,i),Os(e,s),n=Gh(t,e,n,r,i,s),r=Kh(),t!==null&&!ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,bn(t,e,s)):(ge&&r&&Vh(e),e.flags|=1,ot(t,e,n,s),e.child)}function ng(t,e,n,r,s){if(mt(n)){var i=!0;Nl(e)}else i=!1;if(Os(e,s),e.stateNode===null)nl(t,e),F_(e,n,r),bd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Vt(d):(d=mt(n)?Gr:nt.current,d=Ws(e,d));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Yp(e,o,r,d),$n=!1;var g=e.memoizedState;o.state=g,jl(e,r,o,s),u=e.memoizedState,c!==r||g!==u||ft.current||$n?(typeof m=="function"&&(Sd(e,n,m,r),u=e.memoizedState),(c=$n||Qp(e,n,c,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,v_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Ft(e.type,c),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Vt(u):(u=mt(n)?Gr:nt.current,u=Ws(e,u));var w=n.getDerivedStateFromProps;(m=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||g!==u)&&Yp(e,o,r,u),$n=!1,g=e.memoizedState,o.state=g,jl(e,r,o,s);var k=e.memoizedState;c!==p||g!==k||ft.current||$n?(typeof w=="function"&&(Sd(e,n,w,r),k=e.memoizedState),(d=$n||Qp(e,n,d,r,g,k,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return kd(t,e,n,r,i,s)}function kd(t,e,n,r,s,i){W_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&zp(e,n,!1),bn(t,e,i);r=e.stateNode,A1.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=qs(e,t.child,null,i),e.child=qs(e,null,c,i)):ot(t,e,c,i),e.memoizedState=r.state,s&&zp(e,n,!0),e.child}function H_(t){var e=t.stateNode;e.pendingContext?Up(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Up(t,e.context,!1),$h(t,e.containerInfo)}function rg(t,e,n,r,s){return Hs(),Oh(s),e.flags|=256,ot(t,e,n,r),e.child}var Cd={dehydrated:null,treeContext:null,retryLane:0};function Pd(t){return{baseLanes:t,cachePool:null,transitions:null}}function q_(t,e,n){var r=e.pendingProps,s=ye.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ue(ye,s&1),t===null)return Td(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=vc(o,r,0,null),t=Hr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Pd(n),e.memoizedState=Cd,t):Xh(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return k1(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ar(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=ar(c,i):(i=Hr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Pd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Cd,r}return i=t.child,t=i.sibling,r=ar(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Xh(t,e){return e=vc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function La(t,e,n,r){return r!==null&&Oh(r),qs(e,t.child,null,n),t=Xh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function k1(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Pu(Error(L(422))),La(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=vc({mode:"visible",children:r.children},s,0,null),i=Hr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&qs(e,t.child,null,o),e.child.memoizedState=Pd(o),e.memoizedState=Cd,i);if(!(e.mode&1))return La(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(L(419)),r=Pu(i,r,void 0),La(t,e,o,r)}if(c=(o&t.childLanes)!==0,ht||c){if(r=Ue,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Sn(t,s),Ht(r,t,s,-1))}return rf(),r=Pu(Error(L(421))),La(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=B1.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,xt=rr(s.nextSibling),wt=e,ge=!0,zt=null,t!==null&&(At[kt++]=gn,At[kt++]=yn,At[kt++]=Kr,gn=t.id,yn=t.overflow,Kr=e),e=Xh(e,r.children),e.flags|=4096,e)}function sg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Id(t.return,e,n)}function ju(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function G_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ot(t,e,r.children,n),r=ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sg(t,n,e);else if(t.tag===19)sg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ue(ye,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Rl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ju(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Rl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ju(e,!0,n,null,i);break;case"together":ju(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=ar(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ar(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function C1(t,e,n){switch(e.tag){case 3:H_(e),Hs();break;case 5:__(e);break;case 1:mt(e.type)&&Nl(e);break;case 4:$h(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ue(Cl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ue(ye,ye.current&1),e.flags|=128,null):n&e.child.childLanes?q_(t,e,n):(ue(ye,ye.current&1),t=bn(t,e,n),t!==null?t.sibling:null);ue(ye,ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return G_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ue(ye,ye.current),r)break;return null;case 22:case 23:return e.lanes=0,$_(t,e,n)}return bn(t,e,n)}var K_,jd,Q_,Y_;K_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jd=function(){};Q_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Br(tn.current);var i=null;switch(n){case"input":s=ed(t,s),r=ed(t,r),i=[];break;case"select":s=xe({},s,{value:void 0}),r=xe({},r,{value:void 0}),i=[];break;case"textarea":s=rd(t,s),r=rd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sl)}id(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(go.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(go.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&he("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Y_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ui(t,e){if(!ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ye(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function P1(t,e,n){var r=e.pendingProps;switch(Mh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(e),null;case 1:return mt(e.type)&&bl(),Ye(e),null;case 3:return r=e.stateNode,Gs(),me(ft),me(nt),Hh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ma(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zt!==null&&(Ud(zt),zt=null))),jd(t,e),Ye(e),null;case 5:Wh(e);var s=Br(Ao.current);if(n=e.type,t!==null&&e.stateNode!=null)Q_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return Ye(e),null}if(t=Br(tn.current),Ma(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Zt]=e,r[bo]=i,t=(e.mode&1)!==0,n){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(s=0;s<Hi.length;s++)he(Hi[s],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":fp(r,i),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},he("invalid",r);break;case"textarea":pp(r,i),he("invalid",r)}id(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Va(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Va(r.textContent,c,t),s=["children",""+c]):go.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&he("scroll",r)}switch(n){case"input":Na(r),mp(r,i,!0);break;case"textarea":Na(r),gp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Sl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Iv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Zt]=e,t[bo]=r,K_(t,e,!1,!1),e.stateNode=t;e:{switch(o=od(n,r),n){case"dialog":he("cancel",t),he("close",t),s=r;break;case"iframe":case"object":case"embed":he("load",t),s=r;break;case"video":case"audio":for(s=0;s<Hi.length;s++)he(Hi[s],t);s=r;break;case"source":he("error",t),s=r;break;case"img":case"image":case"link":he("error",t),he("load",t),s=r;break;case"details":he("toggle",t),s=r;break;case"input":fp(t,r),s=ed(t,r),he("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=xe({},r,{value:void 0}),he("invalid",t);break;case"textarea":pp(t,r),s=rd(t,r),he("invalid",t);break;default:s=r}id(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Nv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Sv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&yo(t,u):typeof u=="number"&&yo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(go.hasOwnProperty(i)?u!=null&&i==="onScroll"&&he("scroll",t):u!=null&&wh(t,i,u,o))}switch(n){case"input":Na(t),mp(t,r,!1);break;case"textarea":Na(t),gp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Rs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Rs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Sl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ye(e),null;case 6:if(t&&e.stateNode!=null)Y_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(n=Br(Ao.current),Br(tn.current),Ma(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zt]=e,(i=r.nodeValue!==n)&&(t=wt,t!==null))switch(t.tag){case 3:Va(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Va(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zt]=e,e.stateNode=r}return Ye(e),null;case 13:if(me(ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ge&&xt!==null&&e.mode&1&&!(e.flags&128))m_(),Hs(),e.flags|=98560,i=!1;else if(i=Ma(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(L(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(L(317));i[Zt]=e}else Hs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ye(e),i=!1}else zt!==null&&(Ud(zt),zt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ye.current&1?De===0&&(De=3):rf())),e.updateQueue!==null&&(e.flags|=4),Ye(e),null);case 4:return Gs(),jd(t,e),t===null&&Io(e.stateNode.containerInfo),Ye(e),null;case 10:return Uh(e.type._context),Ye(e),null;case 17:return mt(e.type)&&bl(),Ye(e),null;case 19:if(me(ye),i=e.memoizedState,i===null)return Ye(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ui(i,!1);else{if(De!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Rl(t),o!==null){for(e.flags|=128,Ui(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ue(ye,ye.current&1|2),e.child}t=t.sibling}i.tail!==null&&be()>Qs&&(e.flags|=128,r=!0,Ui(i,!1),e.lanes=4194304)}else{if(!r)if(t=Rl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ui(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ge)return Ye(e),null}else 2*be()-i.renderingStartTime>Qs&&n!==1073741824&&(e.flags|=128,r=!0,Ui(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=be(),e.sibling=null,n=ye.current,ue(ye,r?n&1|2:n&1),e):(Ye(e),null);case 22:case 23:return nf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_t&1073741824&&(Ye(e),e.subtreeFlags&6&&(e.flags|=8192)):Ye(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function j1(t,e){switch(Mh(e),e.tag){case 1:return mt(e.type)&&bl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gs(),me(ft),me(nt),Hh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wh(e),null;case 13:if(me(ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));Hs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return me(ye),null;case 4:return Gs(),null;case 10:return Uh(e.type._context),null;case 22:case 23:return nf(),null;case 24:return null;default:return null}}var Fa=!1,Ze=!1,R1=typeof WeakSet=="function"?WeakSet:Set,W=null;function Cs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Te(t,e,r)}else n.current=null}function Rd(t,e,n){try{n()}catch(r){Te(t,e,r)}}var ig=!1;function D1(t,e){if(gd=El,t=t_(),Dh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,m=0,p=t,g=null;t:for(;;){for(var w;p!==n||s!==0&&p.nodeType!==3||(c=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++m===r&&(u=o),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(yd={focusedElem:t,selectionRange:n},El=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var C=k.memoizedProps,S=k.memoizedState,_=e.stateNode,x=_.getSnapshotBeforeUpdate(e.elementType===e.type?C:Ft(e.type,C),S);_.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(D){Te(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return k=ig,ig=!1,k}function io(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Rd(e,n,i)}s=s.next}while(s!==r)}}function gc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Dd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function X_(t){var e=t.alternate;e!==null&&(t.alternate=null,X_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zt],delete e[bo],delete e[xd],delete e[g1],delete e[y1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function J_(t){return t.tag===5||t.tag===3||t.tag===4}function og(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||J_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sl));else if(r!==4&&(t=t.child,t!==null))for(Vd(t,e,n),t=t.sibling;t!==null;)Vd(t,e,n),t=t.sibling}function Md(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Md(t,e,n),t=t.sibling;t!==null;)Md(t,e,n),t=t.sibling}var Be=null,Ut=!1;function Un(t,e,n){for(n=n.child;n!==null;)Z_(t,e,n),n=n.sibling}function Z_(t,e,n){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(lc,n)}catch{}switch(n.tag){case 5:Ze||Cs(n,e);case 6:var r=Be,s=Ut;Be=null,Un(t,e,n),Be=r,Ut=s,Be!==null&&(Ut?(t=Be,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Be.removeChild(n.stateNode));break;case 18:Be!==null&&(Ut?(t=Be,n=n.stateNode,t.nodeType===8?Su(t.parentNode,n):t.nodeType===1&&Su(t,n),wo(t)):Su(Be,n.stateNode));break;case 4:r=Be,s=Ut,Be=n.stateNode.containerInfo,Ut=!0,Un(t,e,n),Be=r,Ut=s;break;case 0:case 11:case 14:case 15:if(!Ze&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Rd(n,e,o),s=s.next}while(s!==r)}Un(t,e,n);break;case 1:if(!Ze&&(Cs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Te(n,e,c)}Un(t,e,n);break;case 21:Un(t,e,n);break;case 22:n.mode&1?(Ze=(r=Ze)||n.memoizedState!==null,Un(t,e,n),Ze=r):Un(t,e,n);break;default:Un(t,e,n)}}function ag(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new R1),e.forEach(function(r){var s=$1.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Lt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:Be=c.stateNode,Ut=!1;break e;case 3:Be=c.stateNode.containerInfo,Ut=!0;break e;case 4:Be=c.stateNode.containerInfo,Ut=!0;break e}c=c.return}if(Be===null)throw Error(L(160));Z_(i,o,s),Be=null,Ut=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Te(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ex(e,t),e=e.sibling}function ex(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lt(e,t),Yt(t),r&4){try{io(3,t,t.return),gc(3,t)}catch(C){Te(t,t.return,C)}try{io(5,t,t.return)}catch(C){Te(t,t.return,C)}}break;case 1:Lt(e,t),Yt(t),r&512&&n!==null&&Cs(n,n.return);break;case 5:if(Lt(e,t),Yt(t),r&512&&n!==null&&Cs(n,n.return),t.flags&32){var s=t.stateNode;try{yo(s,"")}catch(C){Te(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Ev(s,i),od(c,o);var d=od(c,i);for(o=0;o<u.length;o+=2){var m=u[o],p=u[o+1];m==="style"?Nv(s,p):m==="dangerouslySetInnerHTML"?Sv(s,p):m==="children"?yo(s,p):wh(s,m,p,d)}switch(c){case"input":td(s,i);break;case"textarea":Tv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Rs(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?Rs(s,!!i.multiple,i.defaultValue,!0):Rs(s,!!i.multiple,i.multiple?[]:"",!1))}s[bo]=i}catch(C){Te(t,t.return,C)}}break;case 6:if(Lt(e,t),Yt(t),r&4){if(t.stateNode===null)throw Error(L(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){Te(t,t.return,C)}}break;case 3:if(Lt(e,t),Yt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wo(e.containerInfo)}catch(C){Te(t,t.return,C)}break;case 4:Lt(e,t),Yt(t);break;case 13:Lt(e,t),Yt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ef=be())),r&4&&ag(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Ze=(d=Ze)||m,Lt(e,t),Ze=d):Lt(e,t),Yt(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(W=t,m=t.child;m!==null;){for(p=W=m;W!==null;){switch(g=W,w=g.child,g.tag){case 0:case 11:case 14:case 15:io(4,g,g.return);break;case 1:Cs(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(C){Te(r,n,C)}}break;case 5:Cs(g,g.return);break;case 22:if(g.memoizedState!==null){cg(p);continue}}w!==null?(w.return=g,W=w):cg(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=bv("display",o))}catch(C){Te(t,t.return,C)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(C){Te(t,t.return,C)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Lt(e,t),Yt(t),r&4&&ag(t);break;case 21:break;default:Lt(e,t),Yt(t)}}function Yt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(J_(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(yo(s,""),r.flags&=-33);var i=og(t);Md(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=og(t);Vd(t,c,o);break;default:throw Error(L(161))}}catch(u){Te(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function V1(t,e,n){W=t,tx(t)}function tx(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fa;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Ze;c=Fa;var d=Ze;if(Fa=o,(Ze=u)&&!d)for(W=s;W!==null;)o=W,u=o.child,o.tag===22&&o.memoizedState!==null?ug(s):u!==null?(u.return=o,W=u):ug(s);for(;i!==null;)W=i,tx(i),i=i.sibling;W=s,Fa=c,Ze=d}lg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):lg(t)}}function lg(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ze||gc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ze)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ft(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&qp(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qp(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&wo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Ze||e.flags&512&&Dd(e)}catch(g){Te(e,e.return,g)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function cg(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function ug(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gc(4,e)}catch(u){Te(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Te(e,s,u)}}var i=e.return;try{Dd(e)}catch(u){Te(e,i,u)}break;case 5:var o=e.return;try{Dd(e)}catch(u){Te(e,o,u)}}}catch(u){Te(e,e.return,u)}if(e===t){W=null;break}var c=e.sibling;if(c!==null){c.return=e.return,W=c;break}W=e.return}}var M1=Math.ceil,Ml=Pn.ReactCurrentDispatcher,Jh=Pn.ReactCurrentOwner,Dt=Pn.ReactCurrentBatchConfig,oe=0,Ue=null,ke=null,He=0,_t=0,Ps=Ir(0),De=0,jo=null,Yr=0,yc=0,Zh=0,oo=null,dt=null,ef=0,Qs=1/0,mn=null,Ol=!1,Od=null,ir=null,Ua=!1,Xn=null,Ll=0,ao=0,Ld=null,rl=-1,sl=0;function at(){return oe&6?be():rl!==-1?rl:rl=be()}function or(t){return t.mode&1?oe&2&&He!==0?He&-He:_1.transition!==null?(sl===0&&(sl=Fv()),sl):(t=le,t!==0||(t=window.event,t=t===void 0?16:qv(t.type)),t):1}function Ht(t,e,n,r){if(50<ao)throw ao=0,Ld=null,Error(L(185));Xo(t,n,r),(!(oe&2)||t!==Ue)&&(t===Ue&&(!(oe&2)&&(yc|=n),De===4&&Hn(t,He)),pt(t,r),n===1&&oe===0&&!(e.mode&1)&&(Qs=be()+500,fc&&Sr()))}function pt(t,e){var n=t.callbackNode;_T(t,e);var r=wl(t,t===Ue?He:0);if(r===0)n!==null&&_p(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&_p(n),e===1)t.tag===0?v1(dg.bind(null,t)):d_(dg.bind(null,t)),m1(function(){!(oe&6)&&Sr()}),n=null;else{switch(Uv(r)){case 1:n=bh;break;case 4:n=Ov;break;case 16:n=xl;break;case 536870912:n=Lv;break;default:n=xl}n=cx(n,nx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nx(t,e){if(rl=-1,sl=0,oe&6)throw Error(L(327));var n=t.callbackNode;if(Ls()&&t.callbackNode!==n)return null;var r=wl(t,t===Ue?He:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fl(t,r);else{e=r;var s=oe;oe|=2;var i=sx();(Ue!==t||He!==e)&&(mn=null,Qs=be()+500,Wr(t,e));do try{F1();break}catch(c){rx(t,c)}while(!0);Fh(),Ml.current=i,oe=s,ke!==null?e=0:(Ue=null,He=0,e=De)}if(e!==0){if(e===2&&(s=dd(t),s!==0&&(r=s,e=Fd(t,s))),e===1)throw n=jo,Wr(t,0),Hn(t,r),pt(t,be()),n;if(e===6)Hn(t,r);else{if(s=t.current.alternate,!(r&30)&&!O1(s)&&(e=Fl(t,r),e===2&&(i=dd(t),i!==0&&(r=i,e=Fd(t,i))),e===1))throw n=jo,Wr(t,0),Hn(t,r),pt(t,be()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:Lr(t,dt,mn);break;case 3:if(Hn(t,r),(r&130023424)===r&&(e=ef+500-be(),10<e)){if(wl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){at(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=_d(Lr.bind(null,t,dt,mn),e);break}Lr(t,dt,mn);break;case 4:if(Hn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Wt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*M1(r/1960))-r,10<r){t.timeoutHandle=_d(Lr.bind(null,t,dt,mn),r);break}Lr(t,dt,mn);break;case 5:Lr(t,dt,mn);break;default:throw Error(L(329))}}}return pt(t,be()),t.callbackNode===n?nx.bind(null,t):null}function Fd(t,e){var n=oo;return t.current.memoizedState.isDehydrated&&(Wr(t,e).flags|=256),t=Fl(t,e),t!==2&&(e=dt,dt=n,e!==null&&Ud(e)),t}function Ud(t){dt===null?dt=t:dt.push.apply(dt,t)}function O1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!qt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hn(t,e){for(e&=~Zh,e&=~yc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wt(e),r=1<<n;t[n]=-1,e&=~r}}function dg(t){if(oe&6)throw Error(L(327));Ls();var e=wl(t,0);if(!(e&1))return pt(t,be()),null;var n=Fl(t,e);if(t.tag!==0&&n===2){var r=dd(t);r!==0&&(e=r,n=Fd(t,r))}if(n===1)throw n=jo,Wr(t,0),Hn(t,e),pt(t,be()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Lr(t,dt,mn),pt(t,be()),null}function tf(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(Qs=be()+500,fc&&Sr())}}function Xr(t){Xn!==null&&Xn.tag===0&&!(oe&6)&&Ls();var e=oe;oe|=1;var n=Dt.transition,r=le;try{if(Dt.transition=null,le=1,t)return t()}finally{le=r,Dt.transition=n,oe=e,!(oe&6)&&Sr()}}function nf(){_t=Ps.current,me(Ps)}function Wr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,f1(n)),ke!==null)for(n=ke.return;n!==null;){var r=n;switch(Mh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bl();break;case 3:Gs(),me(ft),me(nt),Hh();break;case 5:Wh(r);break;case 4:Gs();break;case 13:me(ye);break;case 19:me(ye);break;case 10:Uh(r.type._context);break;case 22:case 23:nf()}n=n.return}if(Ue=t,ke=t=ar(t.current,null),He=_t=e,De=0,jo=null,Zh=yc=Yr=0,dt=oo=null,zr!==null){for(e=0;e<zr.length;e++)if(n=zr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}zr=null}return t}function rx(t,e){do{var n=ke;try{if(Fh(),el.current=Vl,Dl){for(var r=_e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dl=!1}if(Qr=0,Le=je=_e=null,so=!1,ko=0,Jh.current=null,n===null||n.return===null){De=1,jo=e,ke=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=He,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=c,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var w=Jp(o);if(w!==null){w.flags&=-257,Zp(w,o,c,i,e),w.mode&1&&Xp(i,d,e),e=w,u=d;var k=e.updateQueue;if(k===null){var C=new Set;C.add(u),e.updateQueue=C}else k.add(u);break e}else{if(!(e&1)){Xp(i,d,e),rf();break e}u=Error(L(426))}}else if(ge&&c.mode&1){var S=Jp(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Zp(S,o,c,i,e),Oh(Ks(u,c));break e}}i=u=Ks(u,c),De!==4&&(De=2),oo===null?oo=[i]:oo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=U_(i,u,e);Hp(i,_);break e;case 1:c=u;var x=i.type,A=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(ir===null||!ir.has(A)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=z_(i,c,e);Hp(i,D);break e}}i=i.return}while(i!==null)}ox(n)}catch(F){e=F,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function sx(){var t=Ml.current;return Ml.current=Vl,t===null?Vl:t}function rf(){(De===0||De===3||De===2)&&(De=4),Ue===null||!(Yr&268435455)&&!(yc&268435455)||Hn(Ue,He)}function Fl(t,e){var n=oe;oe|=2;var r=sx();(Ue!==t||He!==e)&&(mn=null,Wr(t,e));do try{L1();break}catch(s){rx(t,s)}while(!0);if(Fh(),oe=n,Ml.current=r,ke!==null)throw Error(L(261));return Ue=null,He=0,De}function L1(){for(;ke!==null;)ix(ke)}function F1(){for(;ke!==null&&!uT();)ix(ke)}function ix(t){var e=lx(t.alternate,t,_t);t.memoizedProps=t.pendingProps,e===null?ox(t):ke=e,Jh.current=null}function ox(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=j1(n,e),n!==null){n.flags&=32767,ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{De=6,ke=null;return}}else if(n=P1(n,e,_t),n!==null){ke=n;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);De===0&&(De=5)}function Lr(t,e,n){var r=le,s=Dt.transition;try{Dt.transition=null,le=1,U1(t,e,n,r)}finally{Dt.transition=s,le=r}return null}function U1(t,e,n,r){do Ls();while(Xn!==null);if(oe&6)throw Error(L(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(xT(t,i),t===Ue&&(ke=Ue=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ua||(Ua=!0,cx(xl,function(){return Ls(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Dt.transition,Dt.transition=null;var o=le;le=1;var c=oe;oe|=4,Jh.current=null,D1(t,n),ex(n,t),o1(yd),El=!!gd,yd=gd=null,t.current=n,V1(n),dT(),oe=c,le=o,Dt.transition=i}else t.current=n;if(Ua&&(Ua=!1,Xn=t,Ll=s),i=t.pendingLanes,i===0&&(ir=null),mT(n.stateNode),pt(t,be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ol)throw Ol=!1,t=Od,Od=null,t;return Ll&1&&t.tag!==0&&Ls(),i=t.pendingLanes,i&1?t===Ld?ao++:(ao=0,Ld=t):ao=0,Sr(),null}function Ls(){if(Xn!==null){var t=Uv(Ll),e=Dt.transition,n=le;try{if(Dt.transition=null,le=16>t?16:t,Xn===null)var r=!1;else{if(t=Xn,Xn=null,Ll=0,oe&6)throw Error(L(331));var s=oe;for(oe|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(W=d;W!==null;){var m=W;switch(m.tag){case 0:case 11:case 15:io(8,m,i)}var p=m.child;if(p!==null)p.return=m,W=p;else for(;W!==null;){m=W;var g=m.sibling,w=m.return;if(X_(m),m===d){W=null;break}if(g!==null){g.return=w,W=g;break}W=w}}}var k=i.alternate;if(k!==null){var C=k.child;if(C!==null){k.child=null;do{var S=C.sibling;C.sibling=null,C=S}while(C!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:io(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,W=_;break e}W=i.return}}var x=t.current;for(W=x;W!==null;){o=W;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,W=A;else e:for(o=x;W!==null;){if(c=W,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:gc(9,c)}}catch(F){Te(c,c.return,F)}if(c===o){W=null;break e}var D=c.sibling;if(D!==null){D.return=c.return,W=D;break e}W=c.return}}if(oe=s,Sr(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(lc,t)}catch{}r=!0}return r}finally{le=n,Dt.transition=e}}return!1}function hg(t,e,n){e=Ks(n,e),e=U_(t,e,1),t=sr(t,e,1),e=at(),t!==null&&(Xo(t,1,e),pt(t,e))}function Te(t,e,n){if(t.tag===3)hg(t,t,n);else for(;e!==null;){if(e.tag===3){hg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ir===null||!ir.has(r))){t=Ks(n,t),t=z_(e,t,1),e=sr(e,t,1),t=at(),e!==null&&(Xo(e,1,t),pt(e,t));break}}e=e.return}}function z1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=at(),t.pingedLanes|=t.suspendedLanes&n,Ue===t&&(He&n)===n&&(De===4||De===3&&(He&130023424)===He&&500>be()-ef?Wr(t,0):Zh|=n),pt(t,e)}function ax(t,e){e===0&&(t.mode&1?(e=Ca,Ca<<=1,!(Ca&130023424)&&(Ca=4194304)):e=1);var n=at();t=Sn(t,e),t!==null&&(Xo(t,e,n),pt(t,n))}function B1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ax(t,n)}function $1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),ax(t,n)}var lx;lx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ft.current)ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ht=!1,C1(t,e,n);ht=!!(t.flags&131072)}else ht=!1,ge&&e.flags&1048576&&h_(e,kl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;nl(t,e),t=e.pendingProps;var s=Ws(e,nt.current);Os(e,n),s=Gh(null,e,r,t,s,n);var i=Kh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mt(r)?(i=!0,Nl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Bh(e),s.updater=pc,e.stateNode=s,s._reactInternals=e,bd(e,r,t,n),e=kd(null,e,r,!0,i,n)):(e.tag=0,ge&&i&&Vh(e),ot(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(nl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=H1(r),t=Ft(r,t),s){case 0:e=Ad(null,e,r,t,n);break e;case 1:e=ng(null,e,r,t,n);break e;case 11:e=eg(null,e,r,t,n);break e;case 14:e=tg(null,e,r,Ft(r.type,t),n);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ft(r,s),Ad(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ft(r,s),ng(t,e,r,s,n);case 3:e:{if(H_(e),t===null)throw Error(L(387));r=e.pendingProps,i=e.memoizedState,s=i.element,v_(t,e),jl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ks(Error(L(423)),e),e=rg(t,e,r,n,s);break e}else if(r!==s){s=Ks(Error(L(424)),e),e=rg(t,e,r,n,s);break e}else for(xt=rr(e.stateNode.containerInfo.firstChild),wt=e,ge=!0,zt=null,n=g_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Hs(),r===s){e=bn(t,e,n);break e}ot(t,e,r,n)}e=e.child}return e;case 5:return __(e),t===null&&Td(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,vd(r,s)?o=null:i!==null&&vd(r,i)&&(e.flags|=32),W_(t,e),ot(t,e,o,n),e.child;case 6:return t===null&&Td(e),null;case 13:return q_(t,e,n);case 4:return $h(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qs(e,null,r,n):ot(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ft(r,s),eg(t,e,r,s,n);case 7:return ot(t,e,e.pendingProps,n),e.child;case 8:return ot(t,e,e.pendingProps.children,n),e.child;case 12:return ot(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ue(Cl,r._currentValue),r._currentValue=o,i!==null)if(qt(i.value,o)){if(i.children===s.children&&!ft.current){e=bn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=xn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Id(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(L(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Id(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ot(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Os(e,n),s=Vt(s),r=r(s),e.flags|=1,ot(t,e,r,n),e.child;case 14:return r=e.type,s=Ft(r,e.pendingProps),s=Ft(r.type,s),tg(t,e,r,s,n);case 15:return B_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ft(r,s),nl(t,e),e.tag=1,mt(r)?(t=!0,Nl(e)):t=!1,Os(e,n),F_(e,r,s),bd(e,r,s,n),kd(null,e,r,!0,t,n);case 19:return G_(t,e,n);case 22:return $_(t,e,n)}throw Error(L(156,e.tag))};function cx(t,e){return Mv(t,e)}function W1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(t,e,n,r){return new W1(t,e,n,r)}function sf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function H1(t){if(typeof t=="function")return sf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Th)return 11;if(t===Ih)return 14}return 2}function ar(t,e){var n=t.alternate;return n===null?(n=Rt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function il(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")sf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ws:return Hr(n.children,s,i,e);case Eh:o=8,s|=8;break;case Yu:return t=Rt(12,n,e,s|2),t.elementType=Yu,t.lanes=i,t;case Xu:return t=Rt(13,n,e,s),t.elementType=Xu,t.lanes=i,t;case Ju:return t=Rt(19,n,e,s),t.elementType=Ju,t.lanes=i,t;case _v:return vc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yv:o=10;break e;case vv:o=9;break e;case Th:o=11;break e;case Ih:o=14;break e;case Bn:o=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=Rt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Hr(t,e,n,r){return t=Rt(7,t,r,e),t.lanes=n,t}function vc(t,e,n,r){return t=Rt(22,t,r,e),t.elementType=_v,t.lanes=n,t.stateNode={isHidden:!1},t}function Ru(t,e,n){return t=Rt(6,t,null,e),t.lanes=n,t}function Du(t,e,n){return e=Rt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function q1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mu(0),this.expirationTimes=mu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function of(t,e,n,r,s,i,o,c,u){return t=new q1(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Rt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bh(i),t}function G1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ux(t){if(!t)return gr;t=t._reactInternals;e:{if(is(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(mt(n))return u_(t,n,e)}return e}function dx(t,e,n,r,s,i,o,c,u){return t=of(n,r,!0,t,s,i,o,c,u),t.context=ux(null),n=t.current,r=at(),s=or(n),i=xn(r,s),i.callback=e??null,sr(n,i,s),t.current.lanes=s,Xo(t,s,r),pt(t,r),t}function _c(t,e,n,r){var s=e.current,i=at(),o=or(s);return n=ux(n),e.context===null?e.context=n:e.pendingContext=n,e=xn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=sr(s,e,o),t!==null&&(Ht(t,s,o,i),Za(t,s,o)),o}function Ul(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function af(t,e){fg(t,e),(t=t.alternate)&&fg(t,e)}function K1(){return null}var hx=typeof reportError=="function"?reportError:function(t){console.error(t)};function lf(t){this._internalRoot=t}xc.prototype.render=lf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));_c(t,e,null,null)};xc.prototype.unmount=lf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xr(function(){_c(null,t,null,null)}),e[In]=null}};function xc(t){this._internalRoot=t}xc.prototype.unstable_scheduleHydration=function(t){if(t){var e=$v();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Wn.length&&e!==0&&e<Wn[n].priority;n++);Wn.splice(n,0,t),n===0&&Hv(t)}};function cf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function mg(){}function Q1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Ul(o);i.call(d)}}var o=dx(e,r,t,0,null,!1,!1,"",mg);return t._reactRootContainer=o,t[In]=o.current,Io(t.nodeType===8?t.parentNode:t),Xr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Ul(u);c.call(d)}}var u=of(t,0,!1,null,null,!1,!1,"",mg);return t._reactRootContainer=u,t[In]=u.current,Io(t.nodeType===8?t.parentNode:t),Xr(function(){_c(e,u,n,r)}),u}function Ec(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Ul(o);c.call(u)}}_c(e,o,t,s)}else o=Q1(n,e,t,s,r);return Ul(o)}zv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wi(e.pendingLanes);n!==0&&(Nh(e,n|1),pt(e,be()),!(oe&6)&&(Qs=be()+500,Sr()))}break;case 13:Xr(function(){var r=Sn(t,1);if(r!==null){var s=at();Ht(r,t,1,s)}}),af(t,1)}};Ah=function(t){if(t.tag===13){var e=Sn(t,134217728);if(e!==null){var n=at();Ht(e,t,134217728,n)}af(t,134217728)}};Bv=function(t){if(t.tag===13){var e=or(t),n=Sn(t,e);if(n!==null){var r=at();Ht(n,t,e,r)}af(t,e)}};$v=function(){return le};Wv=function(t,e){var n=le;try{return le=t,e()}finally{le=n}};ld=function(t,e,n){switch(e){case"input":if(td(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=hc(r);if(!s)throw Error(L(90));wv(r),td(r,s)}}}break;case"textarea":Tv(t,n);break;case"select":e=n.value,e!=null&&Rs(t,!!n.multiple,e,!1)}};Cv=tf;Pv=Xr;var Y1={usingClientEntryPoint:!1,Events:[Zo,Ss,hc,Av,kv,tf]},zi={findFiberByHostInstance:Ur,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},X1={bundleType:zi.bundleType,version:zi.version,rendererPackageName:zi.rendererPackageName,rendererConfig:zi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dv(t),t===null?null:t.stateNode},findFiberByHostInstance:zi.findFiberByHostInstance||K1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!za.isDisabled&&za.supportsFiber)try{lc=za.inject(X1),en=za}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y1;It.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cf(e))throw Error(L(200));return G1(t,e,null,n)};It.createRoot=function(t,e){if(!cf(t))throw Error(L(299));var n=!1,r="",s=hx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=of(t,1,!1,null,null,n,!1,r,s),t[In]=e.current,Io(t.nodeType===8?t.parentNode:t),new lf(e)};It.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=Dv(e),t=t===null?null:t.stateNode,t};It.flushSync=function(t){return Xr(t)};It.hydrate=function(t,e,n){if(!wc(e))throw Error(L(200));return Ec(null,t,e,!0,n)};It.hydrateRoot=function(t,e,n){if(!cf(t))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=hx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=dx(e,null,t,1,n??null,s,!1,i,o),t[In]=e.current,Io(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new xc(e)};It.render=function(t,e,n){if(!wc(e))throw Error(L(200));return Ec(null,t,e,!1,n)};It.unmountComponentAtNode=function(t){if(!wc(t))throw Error(L(40));return t._reactRootContainer?(Xr(function(){Ec(null,null,t,!1,function(){t._reactRootContainer=null,t[In]=null})}),!0):!1};It.unstable_batchedUpdates=tf;It.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wc(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return Ec(t,e,n,!1,r)};It.version="18.3.1-next-f1338f8080-20240426";function fx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fx)}catch(t){console.error(t)}}fx(),fv.exports=It;var J1=fv.exports,pg=J1;Ku.createRoot=pg.createRoot,Ku.hydrateRoot=pg.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ro(){return Ro=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ro.apply(this,arguments)}var Jn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Jn||(Jn={}));const gg="popstate";function Z1(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return zd("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:zl(s)}return tI(e,n,null,t)}function Ne(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function uf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eI(){return Math.random().toString(36).substr(2,8)}function yg(t,e){return{usr:t.state,key:t.key,idx:e}}function zd(t,e,n,r){return n===void 0&&(n=null),Ro({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?oi(e):e,{state:n,key:e&&e.key||r||eI()})}function zl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function oi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function tI(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c=Jn.Pop,u=null,d=m();d==null&&(d=0,o.replaceState(Ro({},o.state,{idx:d}),""));function m(){return(o.state||{idx:null}).idx}function p(){c=Jn.Pop;let S=m(),_=S==null?null:S-d;d=S,u&&u({action:c,location:C.location,delta:_})}function g(S,_){c=Jn.Push;let x=zd(C.location,S,_);d=m()+1;let A=yg(x,d),D=C.createHref(x);try{o.pushState(A,"",D)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(D)}i&&u&&u({action:c,location:C.location,delta:1})}function w(S,_){c=Jn.Replace;let x=zd(C.location,S,_);d=m();let A=yg(x,d),D=C.createHref(x);o.replaceState(A,"",D),i&&u&&u({action:c,location:C.location,delta:0})}function k(S){let _=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof S=="string"?S:zl(S);return x=x.replace(/ $/,"%20"),Ne(_,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,_)}let C={get action(){return c},get location(){return t(s,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(gg,p),u=S,()=>{s.removeEventListener(gg,p),u=null}},createHref(S){return e(s,S)},createURL:k,encodeLocation(S){let _=k(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:w,go(S){return o.go(S)}};return C}var vg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(vg||(vg={}));function nI(t,e,n){return n===void 0&&(n="/"),rI(t,e,n)}function rI(t,e,n,r){let s=typeof e=="string"?oi(e):e,i=df(s.pathname||"/",n);if(i==null)return null;let o=mx(t);sI(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=gI(i);c=fI(o[u],d)}return c}function mx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Ne(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=lr([r,u.relativePath]),m=n.concat(u);i.children&&i.children.length>0&&(Ne(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),mx(i.children,e,m,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:dI(d,i.index),routesMeta:m})};return t.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,o);else for(let u of px(i.path))s(i,o,u)}),e}function px(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=px(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function sI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:hI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const iI=/^:[\w-]+$/,oI=3,aI=2,lI=1,cI=10,uI=-2,_g=t=>t==="*";function dI(t,e){let n=t.split("/"),r=n.length;return n.some(_g)&&(r+=uI),e&&(r+=aI),n.filter(s=>!_g(s)).reduce((s,i)=>s+(iI.test(i)?oI:i===""?lI:cI),r)}function hI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function fI(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,m=i==="/"?e:e.slice(i.length)||"/",p=mI({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},m),g=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:lr([i,p.pathname]),pathnameBase:wI(lr([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=lr([i,p.pathnameBase]))}return o}function mI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pI(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,m,p)=>{let{paramName:g,isOptional:w}=m;if(g==="*"){let C=c[p]||"";o=i.slice(0,i.length-C.length).replace(/(.)\/+$/,"$1")}const k=c[p];return w&&!k?d[g]=void 0:d[g]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function pI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),uf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function gI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return uf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function df(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const yI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vI=t=>yI.test(t);function _I(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?oi(t):t,i;if(n)if(vI(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),uf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=xg(n.substring(1),"/"):i=xg(n,e)}else i=e;return{pathname:i,search:EI(r),hash:TI(s)}}function xg(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Vu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function hf(t,e){let n=xI(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ff(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=oi(t):(s=Ro({},t),Ne(!s.pathname||!s.pathname.includes("?"),Vu("?","pathname","search",s)),Ne(!s.pathname||!s.pathname.includes("#"),Vu("#","pathname","hash",s)),Ne(!s.search||!s.search.includes("#"),Vu("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}c=p>=0?e[p]:"/"}let u=_I(s,c),d=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||m)&&(u.pathname+="/"),u}const lr=t=>t.join("/").replace(/\/\/+/g,"/"),wI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),EI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,TI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function II(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const gx=["post","put","patch","delete"];new Set(gx);const SI=["get",...gx];new Set(SI);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Do(){return Do=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Do.apply(this,arguments)}const mf=M.createContext(null),bI=M.createContext(null),br=M.createContext(null),Tc=M.createContext(null),Nr=M.createContext({outlet:null,matches:[],isDataRoute:!1}),yx=M.createContext(null);function NI(t,e){let{relative:n}=e===void 0?{}:e;ai()||Ne(!1);let{basename:r,navigator:s}=M.useContext(br),{hash:i,pathname:o,search:c}=_x(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:lr([r,o])),s.createHref({pathname:u,search:c,hash:i})}function ai(){return M.useContext(Tc)!=null}function li(){return ai()||Ne(!1),M.useContext(Tc).location}function vx(t){M.useContext(br).static||M.useLayoutEffect(t)}function gt(){let{isDataRoute:t}=M.useContext(Nr);return t?UI():AI()}function AI(){ai()||Ne(!1);let t=M.useContext(mf),{basename:e,future:n,navigator:r}=M.useContext(br),{matches:s}=M.useContext(Nr),{pathname:i}=li(),o=JSON.stringify(hf(s,n.v7_relativeSplatPath)),c=M.useRef(!1);return vx(()=>{c.current=!0}),M.useCallback(function(d,m){if(m===void 0&&(m={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let p=ff(d,JSON.parse(o),i,m.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:lr([e,p.pathname])),(m.replace?r.replace:r.push)(p,m.state,m)},[e,r,o,i,t])}function _x(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(br),{matches:s}=M.useContext(Nr),{pathname:i}=li(),o=JSON.stringify(hf(s,r.v7_relativeSplatPath));return M.useMemo(()=>ff(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function kI(t,e){return CI(t,e)}function CI(t,e,n,r){ai()||Ne(!1);let{navigator:s}=M.useContext(br),{matches:i}=M.useContext(Nr),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=li(),m;if(e){var p;let S=typeof e=="string"?oi(e):e;u==="/"||(p=S.pathname)!=null&&p.startsWith(u)||Ne(!1),m=S}else m=d;let g=m.pathname||"/",w=g;if(u!=="/"){let S=u.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let k=nI(t,{pathname:w}),C=VI(k&&k.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:lr([u,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:lr([u,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r);return e&&C?M.createElement(Tc.Provider,{value:{location:Do({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Jn.Pop}},C):C}function PI(){let t=FI(),e=II(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:s},n):null,null)}const jI=M.createElement(PI,null);class RI extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Nr.Provider,{value:this.props.routeContext},M.createElement(yx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function DI(t){let{routeContext:e,match:n,children:r}=t,s=M.useContext(mf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Nr.Provider,{value:e},r)}function VI(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let m=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);m>=0||Ne(!1),o=o.slice(0,Math.min(o.length,m+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let p=o[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:g,errors:w}=n,k=p.route.loader&&g[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||k){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((m,p,g)=>{let w,k=!1,C=null,S=null;n&&(w=c&&p.route.id?c[p.route.id]:void 0,C=p.route.errorElement||jI,u&&(d<0&&g===0?(zI("route-fallback"),k=!0,S=null):d===g&&(k=!0,S=p.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,g+1)),x=()=>{let A;return w?A=C:k?A=S:p.route.Component?A=M.createElement(p.route.Component,null):p.route.element?A=p.route.element:A=m,M.createElement(DI,{match:p,routeContext:{outlet:m,matches:_,isDataRoute:n!=null},children:A})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?M.createElement(RI,{location:n.location,revalidation:n.revalidation,component:C,error:w,children:x(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):x()},null)}var xx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(xx||{}),wx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(wx||{});function MI(t){let e=M.useContext(mf);return e||Ne(!1),e}function OI(t){let e=M.useContext(bI);return e||Ne(!1),e}function LI(t){let e=M.useContext(Nr);return e||Ne(!1),e}function Ex(t){let e=LI(),n=e.matches[e.matches.length-1];return n.route.id||Ne(!1),n.route.id}function FI(){var t;let e=M.useContext(yx),n=OI(),r=Ex();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function UI(){let{router:t}=MI(xx.UseNavigateStable),e=Ex(wx.UseNavigateStable),n=M.useRef(!1);return vx(()=>{n.current=!0}),M.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Do({fromRouteId:e},i)))},[t,e])}const wg={};function zI(t,e,n){wg[t]||(wg[t]=!0)}function BI(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function $I(t){let{to:e,replace:n,state:r,relative:s}=t;ai()||Ne(!1);let{future:i,static:o}=M.useContext(br),{matches:c}=M.useContext(Nr),{pathname:u}=li(),d=gt(),m=ff(e,hf(c,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(m);return M.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function vt(t){Ne(!1)}function WI(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Jn.Pop,navigator:i,static:o=!1,future:c}=t;ai()&&Ne(!1);let u=e.replace(/^\/*/,"/"),d=M.useMemo(()=>({basename:u,navigator:i,static:o,future:Do({v7_relativeSplatPath:!1},c)}),[u,c,i,o]);typeof r=="string"&&(r=oi(r));let{pathname:m="/",search:p="",hash:g="",state:w=null,key:k="default"}=r,C=M.useMemo(()=>{let S=df(m,u);return S==null?null:{location:{pathname:S,search:p,hash:g,state:w,key:k},navigationType:s}},[u,m,p,g,w,k,s]);return C==null?null:M.createElement(br.Provider,{value:d},M.createElement(Tc.Provider,{children:n,value:C}))}function HI(t){let{children:e,location:n}=t;return kI(Bd(e),n)}new Promise(()=>{});function Bd(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,s)=>{if(!M.isValidElement(r))return;let i=[...e,s];if(r.type===M.Fragment){n.push.apply(n,Bd(r.props.children,i));return}r.type!==vt&&Ne(!1),!r.props.index||!r.props.children||Ne(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Bd(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $d(){return $d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$d.apply(this,arguments)}function qI(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function GI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function KI(t,e){return t.button===0&&(!e||e==="_self")&&!GI(t)}const QI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],YI="6";try{window.__reactRouterVersion=YI}catch{}const XI="startTransition",Eg=zE[XI];function JI(t){let{basename:e,children:n,future:r,window:s}=t,i=M.useRef();i.current==null&&(i.current=Z1({window:s,v5Compat:!0}));let o=i.current,[c,u]=M.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},m=M.useCallback(p=>{d&&Eg?Eg(()=>u(p)):u(p)},[u,d]);return M.useLayoutEffect(()=>o.listen(m),[o,m]),M.useEffect(()=>BI(r),[r]),M.createElement(WI,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const ZI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",e2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ee=M.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:m,viewTransition:p}=e,g=qI(e,QI),{basename:w}=M.useContext(br),k,C=!1;if(typeof d=="string"&&e2.test(d)&&(k=d,ZI))try{let A=new URL(window.location.href),D=d.startsWith("//")?new URL(A.protocol+d):new URL(d),F=df(D.pathname,w);D.origin===A.origin&&F!=null?d=F+D.search+D.hash:C=!0}catch{}let S=NI(d,{relative:s}),_=t2(d,{replace:o,state:c,target:u,preventScrollReset:m,relative:s,viewTransition:p});function x(A){r&&r(A),A.defaultPrevented||_(A)}return M.createElement("a",$d({},g,{href:k||S,onClick:C||i?r:x,ref:n,target:u}))});var Tg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Tg||(Tg={}));var Ig;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ig||(Ig={}));function t2(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:c}=e===void 0?{}:e,u=gt(),d=li(),m=_x(t,{relative:o});return M.useCallback(p=>{if(KI(p,n)){p.preventDefault();let g=r!==void 0?r:zl(d)===zl(m);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:c})}},[d,u,m,r,s,n,t,i,o,c])}const Ic={USERS:"marketing_management_website_users",PROJECTS:"marketing_management_website_projects",TICKETS:"marketing_management_website_tickets",SOCIAL_ANALYTICS:"marketing_management_website_social_analytics"},n2=[{id:"user-1",email:"admin@system.com",password:"admin123",fullName:"Admin User",phone:"+27821234567",role:"admin",createdAt:new Date("2025-01-01"),updatedAt:new Date("2025-01-01"),isActive:!0},{id:"user-2",email:"dev@system.com",password:"dev123",fullName:"John Developer",phone:"+27821234568",role:"web_developer",createdAt:new Date("2025-01-02"),updatedAt:new Date("2025-01-02"),isActive:!0},{id:"user-3",email:"jane.dev@system.com",password:"dev123",fullName:"Jane Smith",phone:"+27821234569",role:"web_developer",createdAt:new Date("2025-01-02"),updatedAt:new Date("2025-01-02"),isActive:!0},{id:"user-4",email:"social@system.com",password:"social123",fullName:"Sarah Cohen",phone:"+27821234570",role:"social_media_coordinator",createdAt:new Date("2025-01-03"),updatedAt:new Date("2025-01-03"),isActive:!0},{id:"user-5",email:"client@system.com",password:"client123",fullName:"Michael Client",phone:"+27821234571",role:"client",createdAt:new Date("2025-01-04"),updatedAt:new Date("2025-01-04"),isActive:!0},{id:"user-6",email:"client2@company.com",password:"client123",fullName:"Emma Business",phone:"+27821234572",role:"client",createdAt:new Date("2025-01-05"),updatedAt:new Date("2025-01-05"),isActive:!0}],r2=[{id:"proj-1",name:"SpecCon",description:"Main SpecCon corporate website - showcasing our services and portfolio",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",socialMediaCoordinatorId:"user-4",currentStage:"maintenance",status:"active",websiteUrl:"https://speccon.co.za",googleAnalyticsPropertyId:"G-XXXXXXXXXX",googleAnalyticsViewId:"123456789",createdAt:new Date("2024-06-01"),launchDate:new Date("2024-08-15"),updatedAt:new Date("2025-02-08")},{id:"proj-2",name:"Andebe",description:"Andebe Skills Development & Training platform",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",socialMediaCoordinatorId:"user-4",currentStage:"development",status:"active",websiteUrl:"https://andebe.co.za",googleAnalyticsPropertyId:"G-YYYYYYYYYY",googleAnalyticsViewId:"987654321",createdAt:new Date("2024-09-15"),updatedAt:new Date("2025-02-09")},{id:"proj-3",name:"Megrolowveld",description:"Megrolowveld business and services website",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",socialMediaCoordinatorId:"user-4",currentStage:"testing",status:"active",websiteUrl:"https://megrolowveld.co.za",createdAt:new Date("2024-10-01"),updatedAt:new Date("2025-02-05")},{id:"proj-4",name:"Skills Development Facilitation",description:"Skills development facilitation and training coordination platform",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",currentStage:"design",status:"active",createdAt:new Date("2024-11-20"),updatedAt:new Date("2025-02-08")},{id:"proj-5",name:"InfinityNPO",description:"Infinity NPO - Non-profit organization website for community development",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",socialMediaCoordinatorId:"user-4",currentStage:"launch",status:"active",websiteUrl:"https://infinitynpo.co.za",createdAt:new Date("2024-08-10"),launchDate:new Date("2024-12-01"),updatedAt:new Date("2025-02-06")},{id:"proj-6",name:"InfinityLearn",description:"InfinityLearn e-learning platform for online education and training",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",socialMediaCoordinatorId:"user-4",currentStage:"development",status:"active",websiteUrl:"https://infinitylearn.co.za",createdAt:new Date("2024-09-01"),updatedAt:new Date("2025-02-09")},{id:"proj-7",name:"Elearning",description:"General e-learning platform with course management and student tracking",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",currentStage:"development",status:"active",createdAt:new Date("2024-10-15"),updatedAt:new Date("2025-02-08")},{id:"proj-8",name:"TAP",description:"Training and Assessment Platform for skills development",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",socialMediaCoordinatorId:"user-4",currentStage:"testing",status:"active",websiteUrl:"https://tap.co.za",createdAt:new Date("2024-07-20"),updatedAt:new Date("2025-02-07")},{id:"proj-9",name:"LMS",description:"Learning Management System for comprehensive training programs",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",socialMediaCoordinatorId:"user-4",currentStage:"launch",status:"active",websiteUrl:"https://lms.speccon.co.za",createdAt:new Date("2024-05-15"),launchDate:new Date("2024-11-01"),updatedAt:new Date("2025-02-05")},{id:"proj-10",name:"Venueideas",description:"Wedding and event venue booking and discovery platform",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",currentStage:"planning",status:"active",createdAt:new Date("2025-01-10"),updatedAt:new Date("2025-02-08")},{id:"proj-11",name:"Weddingideas",description:"Complete wedding planning resource and vendor directory",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",socialMediaCoordinatorId:"user-4",currentStage:"design",status:"active",createdAt:new Date("2024-12-05"),updatedAt:new Date("2025-02-06")},{id:"proj-12",name:"Workreadiness",description:"Work readiness training and assessment platform for job seekers",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",socialMediaCoordinatorId:"user-4",currentStage:"development",status:"active",websiteUrl:"https://workreadiness.co.za",createdAt:new Date("2024-08-25"),updatedAt:new Date("2025-02-09")},{id:"proj-13",name:"Specconacademy",description:"SpecCon Academy - comprehensive training academy platform",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",currentStage:"testing",status:"active",websiteUrl:"https://specconacademy.co.za",createdAt:new Date("2024-07-10"),updatedAt:new Date("2025-02-07")},{id:"proj-14",name:"Trouidees",description:"Wedding ideas and planning inspiration platform (Afrikaans)",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",socialMediaCoordinatorId:"user-4",currentStage:"design",status:"active",createdAt:new Date("2025-01-05"),updatedAt:new Date("2025-02-08")},{id:"proj-15",name:"Employment Equity Act",description:"Employment Equity Act compliance and reporting platform",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",currentStage:"planning",status:"active",createdAt:new Date("2025-01-20"),updatedAt:new Date("2025-02-05")},{id:"proj-16",name:"Leeromtelees",description:"Afrikaans educational platform for reading and learning",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",socialMediaCoordinatorId:"user-4",currentStage:"development",status:"active",createdAt:new Date("2024-11-01"),updatedAt:new Date("2025-02-09")},{id:"proj-17",name:"Grade.co.za",description:"Grade tracking and academic performance management system",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",socialMediaCoordinatorId:"user-4",currentStage:"testing",status:"active",websiteUrl:"https://grade.co.za",createdAt:new Date("2024-09-20"),updatedAt:new Date("2025-02-08")},{id:"proj-18",name:"SpecCon Buddies Primary Schools",description:"Primary school support and buddy system platform",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",currentStage:"launch",status:"active",websiteUrl:"https://buddies.speccon.co.za",createdAt:new Date("2024-06-15"),launchDate:new Date("2024-10-20"),updatedAt:new Date("2025-02-06")},{id:"proj-19",name:"Coloring",description:"Interactive coloring and creative activities platform for children",projectType:"website",clientId:"user-6",webDeveloperId:"user-3",socialMediaCoordinatorId:"user-4",currentStage:"development",status:"active",createdAt:new Date("2024-12-10"),updatedAt:new Date("2025-02-09")},{id:"proj-20",name:"Classrooms",description:"Virtual classroom management and online teaching platform",projectType:"website",clientId:"user-5",webDeveloperId:"user-2",socialMediaCoordinatorId:"user-4",currentStage:"testing",status:"active",websiteUrl:"https://classrooms.speccon.co.za",createdAt:new Date("2024-08-01"),updatedAt:new Date("2025-02-07")},{id:"proj-21",name:"SpecCon Social Media Campaign Q1 2025",description:"Comprehensive social media strategy for SpecCon brand awareness and lead generation",projectType:"social_media",clientId:"user-5",socialMediaCoordinatorId:"user-4",currentStage:"launch",status:"active",socialMediaPlatforms:["facebook","instagram","linkedin","twitter"],campaignGoals:"Increase brand awareness by 40%, generate 200+ qualified leads, boost engagement rate to 8%",targetAudience:"Business owners, HR managers, training coordinators in South Africa",createdAt:new Date("2024-12-15"),launchDate:new Date("2025-01-01"),updatedAt:new Date("2025-02-09"),notes:"Focus on skills development and training services"},{id:"proj-22",name:"InfinityNPO Community Outreach",description:"Social media campaign to raise awareness for community development initiatives",projectType:"social_media",clientId:"user-6",socialMediaCoordinatorId:"user-4",currentStage:"maintenance",status:"active",socialMediaPlatforms:["facebook","instagram","twitter"],campaignGoals:"Increase volunteer sign-ups by 50%, raise R100k in donations, reach 50k people monthly",targetAudience:"Community members, potential donors, volunteers aged 25-55",createdAt:new Date("2024-11-20"),launchDate:new Date("2024-12-01"),updatedAt:new Date("2025-02-08")},{id:"proj-23",name:"Wedding Ideas Influencer Campaign",description:"Influencer partnership campaign for wedding and venue booking platform",projectType:"social_media",clientId:"user-5",socialMediaCoordinatorId:"user-4",currentStage:"planning",status:"active",socialMediaPlatforms:["instagram","tiktok","facebook"],campaignGoals:"Partner with 20 wedding influencers, reach 500k engaged couples, drive 10k website visits",targetAudience:"Engaged couples aged 24-35, wedding planners, event coordinators",createdAt:new Date("2025-01-15"),updatedAt:new Date("2025-02-09")},{id:"proj-24",name:"Andebe Skills Development Launch",description:"Product launch campaign for new online training platform",projectType:"social_media",clientId:"user-5",socialMediaCoordinatorId:"user-4",currentStage:"development",status:"active",socialMediaPlatforms:["linkedin","facebook","youtube"],campaignGoals:"Generate 500 course enrollments, establish thought leadership, reach 100k professionals",targetAudience:"Working professionals, career changers, recent graduates seeking upskilling",createdAt:new Date("2025-01-20"),updatedAt:new Date("2025-02-08")},{id:"proj-25",name:"Educational Content Series - Grade.co.za",description:"Educational social media content to promote academic tracking platform",projectType:"social_media",clientId:"user-6",socialMediaCoordinatorId:"user-4",currentStage:"launch",status:"active",socialMediaPlatforms:["facebook","instagram","twitter"],campaignGoals:"Engage 5k parents, increase app downloads by 200%, position as education leader",targetAudience:"Parents of school-aged children, teachers, education administrators",createdAt:new Date("2024-12-01"),launchDate:new Date("2025-01-15"),updatedAt:new Date("2025-02-07")}],s2=[{id:"ticket-1",projectId:"proj-1",createdBy:"user-5",assignedTo:"user-2",title:"Update homepage hero image",description:"The current hero image needs to be replaced with the new brand imagery provided in the project assets folder.",type:"content_change",priority:"medium",status:"in_progress",createdAt:new Date("2025-02-01"),updatedAt:new Date("2025-02-08")},{id:"ticket-2",projectId:"proj-1",createdBy:"user-5",assignedTo:"user-2",title:"Fix mobile navigation menu",description:"The hamburger menu on mobile devices is not opening correctly. It seems to be a JavaScript issue.",type:"bug_report",priority:"high",status:"open",createdAt:new Date("2025-02-07"),updatedAt:new Date("2025-02-07")},{id:"ticket-3",projectId:"proj-2",createdBy:"user-6",assignedTo:"user-3",title:"Add product filtering functionality",description:"Users should be able to filter products by category, price range, and availability.",type:"feature_request",priority:"high",status:"in_progress",createdAt:new Date("2025-02-03"),updatedAt:new Date("2025-02-09")},{id:"ticket-4",projectId:"proj-2",createdBy:"user-6",assignedTo:"user-3",title:"Update product descriptions",description:"Need to update all product descriptions with the new copywriting provided by the marketing team.",type:"content_change",priority:"low",status:"resolved",createdAt:new Date("2025-01-28"),updatedAt:new Date("2025-02-05"),resolvedAt:new Date("2025-02-05")},{id:"ticket-5",projectId:"proj-3",createdBy:"user-5",assignedTo:"user-2",title:"Redesign contact form",description:"The contact form needs a visual redesign to match the new brand guidelines.",type:"design_update",priority:"medium",status:"resolved",createdAt:new Date("2025-01-25"),updatedAt:new Date("2025-02-02"),resolvedAt:new Date("2025-02-02")},{id:"ticket-6",projectId:"proj-1",createdBy:"user-2",assignedTo:"user-2",title:"Optimize page load speed",description:"Homepage is loading slowly. Need to optimize images and lazy load components.",type:"bug_report",priority:"high",status:"open",createdAt:new Date("2025-02-08"),updatedAt:new Date("2025-02-08")},{id:"ticket-7",projectId:"proj-4",createdBy:"user-6",title:"Add email notification system",description:"Customers should receive email confirmations when they make a reservation.",type:"feature_request",priority:"critical",status:"open",createdAt:new Date("2025-02-09"),updatedAt:new Date("2025-02-09")},{id:"ticket-8",projectId:"proj-2",createdBy:"user-6",assignedTo:"user-3",title:"Shopping cart calculation error",description:"The shopping cart is not calculating the total correctly when discount codes are applied.",type:"bug_report",priority:"critical",status:"in_progress",createdAt:new Date("2025-02-08"),updatedAt:new Date("2025-02-09")},{id:"ticket-9",projectId:"proj-3",createdBy:"user-5",assignedTo:"user-2",title:"Update team member bios",description:"Need to add two new team members to the About page and update existing bios.",type:"content_change",priority:"low",status:"closed",createdAt:new Date("2025-01-20"),updatedAt:new Date("2025-01-28"),resolvedAt:new Date("2025-01-28")},{id:"ticket-10",projectId:"proj-5",createdBy:"user-5",assignedTo:"user-2",title:"SEO meta tags optimization",description:"Update meta descriptions and keywords for better search engine visibility.",type:"content_change",priority:"medium",status:"resolved",createdAt:new Date("2025-01-30"),updatedAt:new Date("2025-02-04"),resolvedAt:new Date("2025-02-04")}],i2=[{id:"social-1",projectId:"proj-1",platform:"facebook",date:new Date("2025-02-01"),posts:5,engagement:342,reach:4500,followers:2300,likes:280,comments:42,shares:20,recordedBy:"user-4",createdAt:new Date("2025-02-02")},{id:"social-2",projectId:"proj-1",platform:"instagram",date:new Date("2025-02-01"),posts:7,engagement:589,reach:6200,followers:3100,likes:520,comments:69,recordedBy:"user-4",createdAt:new Date("2025-02-02")},{id:"social-3",projectId:"proj-3",platform:"linkedin",date:new Date("2025-02-01"),posts:3,engagement:156,reach:2800,followers:980,likes:120,comments:36,recordedBy:"user-4",createdAt:new Date("2025-02-02")},{id:"social-4",projectId:"proj-2",platform:"twitter",date:new Date("2025-02-05"),posts:8,engagement:421,reach:5100,followers:1850,likes:340,comments:51,shares:30,recordedBy:"user-4",createdAt:new Date("2025-02-06")}];function Sc(t,e){if(typeof window>"u")return e;try{const n=window.localStorage.getItem(t);return n?JSON.parse(n):e}catch(n){return console.error(`Error loading ${t} from localStorage:`,n),e}}function pf(){return Sc(Ic.USERS,n2)}function gf(){return Sc(Ic.PROJECTS,r2)}function Tx(){return Sc(Ic.TICKETS,s2)}function o2(){return Sc(Ic.SOCIAL_ANALYTICS,i2)}function a2(t){return gf().find(e=>e.id===t)}function ta(t,e){const n=gf();return e==="admin"?n:e==="web_developer"?n.filter(r=>r.webDeveloperId===t):e==="social_media_coordinator"?n.filter(r=>r.socialMediaCoordinatorId===t):e==="client"?n.filter(r=>r.clientId===t):[]}function yf(t,e){const n=Tx();if(e==="admin")return n;if(e==="web_developer")return n.filter(r=>r.assignedTo===t);if(e==="client")return n.filter(r=>r.createdBy===t);if(e==="social_media_coordinator"){const s=ta(t,e).map(i=>i.id);return n.filter(i=>s.includes(i.projectId))}return[]}const l2=()=>{};var Sg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},c2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Sx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,m=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,w=d&63;u||(w=64,o||(g=64)),r.push(n[m],n[p],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ix(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):c2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||p==null)throw new u2;const g=i<<2|c>>4;if(r.push(g),d!==64){const w=c<<4&240|d>>2;if(r.push(w),p!==64){const k=d<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class u2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d2=function(t){const e=Ix(t);return Sx.encodeByteArray(e,!0)},Bl=function(t){return d2(t).replace(/\./g,"")},bx=function(t){try{return Sx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=()=>h2().__FIREBASE_DEFAULTS__,m2=()=>{if(typeof process>"u"||typeof Sg>"u")return;const t=Sg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},p2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bx(t[1]);return e&&JSON.parse(e)},bc=()=>{try{return l2()||f2()||m2()||p2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Nx=t=>{var e,n;return(n=(e=bc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},g2=t=>{const e=Nx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ax=()=>{var t;return(t=bc())==null?void 0:t.config},kx=t=>{var e;return(e=bc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Cx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Bl(JSON.stringify(n)),Bl(JSON.stringify(o)),""].join(".")}const lo={};function _2(){const t={prod:[],emulator:[]};for(const e of Object.keys(lo))lo[e]?t.emulator.push(e):t.prod.push(e);return t}function x2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let bg=!1;function Px(t,e){if(typeof window>"u"||typeof document>"u"||!ci(window.location.host)||lo[t]===e||lo[t]||bg)return;lo[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=_2().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{bg=!0,o()},g}function m(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=x2(r),w=n("text"),k=document.getElementById(w)||document.createElement("span"),C=n("learnmore"),S=document.getElementById(C)||document.createElement("a"),_=n("preprendIcon"),x=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const A=g.element;c(A),m(S,C);const D=d();u(x,_),A.append(x,k,S,D),document.body.appendChild(A)}i?(k.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function w2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function E2(){var e;const t=(e=bc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function T2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function I2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function S2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b2(){const t=rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function N2(){return!E2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A2(){try{return typeof indexedDB=="object"}catch{return!1}}function k2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="FirebaseError";class jn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=C2,Object.setPrototypeOf(this,jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,na.prototype.create)}}class na{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?P2(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new jn(s,c,r)}}function P2(t,e){return t.replace(j2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const j2=/\{\$([^}]+)}/g;function R2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ng(i)&&Ng(o)){if(!Jr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ng(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Gi(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function D2(t,e){const n=new V2(t,e);return n.subscribe.bind(n)}class V2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");M2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Mu),s.error===void 0&&(s.error=Mu),s.complete===void 0&&(s.complete=Mu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function M2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t){return t&&t._delegate?t._delegate:t}class Zr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new y2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(F2(e))try{this.getOrInitializeService({instanceIdentifier:Fr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Fr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fr){return this.instances.has(e)}getOptions(e=Fr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:L2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fr){return this.component?this.component.multipleInstances?e:Fr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function L2(t){return t===Fr?void 0:t}function F2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new O2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const z2={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},B2=ne.INFO,$2={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},W2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=$2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vf{constructor(e){this.name=e,this._logLevel=B2,this._logHandler=W2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const H2=(t,e)=>e.some(n=>t instanceof n);let Ag,kg;function q2(){return Ag||(Ag=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G2(){return kg||(kg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jx=new WeakMap,Wd=new WeakMap,Rx=new WeakMap,Ou=new WeakMap,_f=new WeakMap;function K2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(cr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jx.set(n,t)}).catch(()=>{}),_f.set(e,t),e}function Q2(t){if(Wd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Wd.set(t,e)}let Hd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Rx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Y2(t){Hd=t(Hd)}function X2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lu(this),e,...n);return Rx.set(r,e.sort?e.sort():[e]),cr(r)}:G2().includes(t)?function(...e){return t.apply(Lu(this),e),cr(jx.get(this))}:function(...e){return cr(t.apply(Lu(this),e))}}function J2(t){return typeof t=="function"?X2(t):(t instanceof IDBTransaction&&Q2(t),H2(t,q2())?new Proxy(t,Hd):t)}function cr(t){if(t instanceof IDBRequest)return K2(t);if(Ou.has(t))return Ou.get(t);const e=J2(t);return e!==t&&(Ou.set(t,e),_f.set(e,t)),e}const Lu=t=>_f.get(t);function Z2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=cr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(cr(o.result),u.oldVersion,u.newVersion,cr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const eS=["get","getKey","getAll","getAllKeys","count"],tS=["put","add","delete","clear"],Fu=new Map;function Cg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fu.get(e))return Fu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=tS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||eS.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Fu.set(e,i),i}Y2(t=>({...t,get:(e,n,r)=>Cg(e,n)||t.get(e,n,r),has:(e,n)=>!!Cg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qd="@firebase/app",Pg="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new vf("@firebase/app"),sS="@firebase/app-compat",iS="@firebase/analytics-compat",oS="@firebase/analytics",aS="@firebase/app-check-compat",lS="@firebase/app-check",cS="@firebase/auth",uS="@firebase/auth-compat",dS="@firebase/database",hS="@firebase/data-connect",fS="@firebase/database-compat",mS="@firebase/functions",pS="@firebase/functions-compat",gS="@firebase/installations",yS="@firebase/installations-compat",vS="@firebase/messaging",_S="@firebase/messaging-compat",xS="@firebase/performance",wS="@firebase/performance-compat",ES="@firebase/remote-config",TS="@firebase/remote-config-compat",IS="@firebase/storage",SS="@firebase/storage-compat",bS="@firebase/firestore",NS="@firebase/ai",AS="@firebase/firestore-compat",kS="firebase",CS="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="[DEFAULT]",PS={[qd]:"fire-core",[sS]:"fire-core-compat",[oS]:"fire-analytics",[iS]:"fire-analytics-compat",[lS]:"fire-app-check",[aS]:"fire-app-check-compat",[cS]:"fire-auth",[uS]:"fire-auth-compat",[dS]:"fire-rtdb",[hS]:"fire-data-connect",[fS]:"fire-rtdb-compat",[mS]:"fire-fn",[pS]:"fire-fn-compat",[gS]:"fire-iid",[yS]:"fire-iid-compat",[vS]:"fire-fcm",[_S]:"fire-fcm-compat",[xS]:"fire-perf",[wS]:"fire-perf-compat",[ES]:"fire-rc",[TS]:"fire-rc-compat",[IS]:"fire-gcs",[SS]:"fire-gcs-compat",[bS]:"fire-fst",[AS]:"fire-fst-compat",[NS]:"fire-vertex","fire-js":"fire-js",[kS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new Map,jS=new Map,Kd=new Map;function jg(t,e){try{t.container.addComponent(e)}catch(n){Nn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ys(t){const e=t.name;if(Kd.has(e))return Nn.debug(`There were multiple attempts to register component ${e}.`),!1;Kd.set(e,t);for(const n of Vo.values())jg(n,t);for(const n of jS.values())jg(n,t);return!0}function xf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ct(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ur=new na("app","Firebase",RS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=CS;function Dx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Gd,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ur.create("bad-app-name",{appName:String(s)});if(n||(n=Ax()),!n)throw ur.create("no-options");const i=Vo.get(s);if(i){if(Jr(n,i.options)&&Jr(r,i.config))return i;throw ur.create("duplicate-app",{appName:s})}const o=new U2(s);for(const u of Kd.values())o.addComponent(u);const c=new DS(n,r,o);return Vo.set(s,c),c}function Vx(t=Gd){const e=Vo.get(t);if(!e&&t===Gd&&Ax())return Dx();if(!e)throw ur.create("no-app",{appName:t});return e}function Rg(){return Array.from(Vo.values())}function dr(t,e,n){let r=PS[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nn.warn(o.join(" "));return}Ys(new Zr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="firebase-heartbeat-database",MS=1,Mo="firebase-heartbeat-store";let Uu=null;function Mx(){return Uu||(Uu=Z2(VS,MS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mo)}catch(n){console.warn(n)}}}}).catch(t=>{throw ur.create("idb-open",{originalErrorMessage:t.message})})),Uu}async function OS(t){try{const n=(await Mx()).transaction(Mo),r=await n.objectStore(Mo).get(Ox(t));return await n.done,r}catch(e){if(e instanceof jn)Nn.warn(e.message);else{const n=ur.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nn.warn(n.message)}}}async function Dg(t,e){try{const r=(await Mx()).transaction(Mo,"readwrite");await r.objectStore(Mo).put(e,Ox(t)),await r.done}catch(n){if(n instanceof jn)Nn.warn(n.message);else{const r=ur.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Nn.warn(r.message)}}}function Ox(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=1024,FS=30;class US{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Vg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>FS){const o=$S(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Nn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Vg(),{heartbeatsToSend:r,unsentEntries:s}=zS(this._heartbeatsCache.heartbeats),i=Bl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Nn.warn(n),""}}}function Vg(){return new Date().toISOString().substring(0,10)}function zS(t,e=LS){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Mg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Mg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class BS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return A2()?k2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await OS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Dg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Dg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Mg(t){return Bl(JSON.stringify({version:2,heartbeats:t})).length}function $S(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t){Ys(new Zr("platform-logger",e=>new nS(e),"PRIVATE")),Ys(new Zr("heartbeat",e=>new US(e),"PRIVATE")),dr(qd,Pg,t),dr(qd,Pg,"esm2020"),dr("fire-js","")}WS("");var HS="firebase",qS="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr(HS,qS,"app");function Lx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GS=Lx,Fx=new na("auth","Firebase",Lx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=new vf("@firebase/auth");function KS(t,...e){$l.logLevel<=ne.WARN&&$l.warn(`Auth (${ui}): ${t}`,...e)}function ol(t,...e){$l.logLevel<=ne.ERROR&&$l.error(`Auth (${ui}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t,...e){throw wf(t,...e)}function nn(t,...e){return wf(t,...e)}function Ux(t,e,n){const r={...GS(),[e]:n};return new na("auth","Firebase",r).create(e,{appName:t.name})}function wn(t){return Ux(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Fx.create(t,...e)}function G(t,e,...n){if(!t)throw wf(e,...n)}function vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ol(e),new Error(e)}function An(t,e){t||vn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function QS(){return Og()==="http:"||Og()==="https:"}function Og(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QS()||I2()||"connection"in navigator)?navigator.onLine:!0}function XS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.shortDelay=e,this.longDelay=n,An(n>e,"Short delay should be less than long delay!"),this.isMobile=w2()||S2()}get(){return YS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t,e){An(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eb=new sa(3e4,6e4);function Ar(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function kr(t,e,n,r,s={}){return Bx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=ra({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return T2()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&ci(t.emulatorConfig.host)&&(d.credentials="include"),zx.fetch()(await $x(t,t.config.apiHost,n,c),d)})}async function Bx(t,e,n){t._canInitEmulator=!1;const r={...JS,...e};try{const s=new nb(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ba(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ba(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ba(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ba(t,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Ux(t,m,d);Gt(t,m)}}catch(s){if(s instanceof jn)throw s;Gt(t,"network-request-failed",{message:String(s)})}}async function ia(t,e,n,r,s={}){const i=await kr(t,e,n,r,s);return"mfaPendingCredential"in i&&Gt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function $x(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Ef(t.config,s):`${t.config.apiScheme}://${s}`;return ZS.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function tb(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(nn(this.auth,"network-request-failed")),eb.get())})}}function Ba(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=nn(t,e,r);return s.customData._tokenResponse=n,s}function Lg(t){return t!==void 0&&t.enterprise!==void 0}class rb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tb(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sb(t,e){return kr(t,"GET","/v2/recaptchaConfig",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ib(t,e){return kr(t,"POST","/v1/accounts:delete",e)}async function Wl(t,e){return kr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ob(t,e=!1){const n=Tt(t),r=await n.getIdToken(e),s=Tf(r);G(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:co(zu(s.auth_time)),issuedAtTime:co(zu(s.iat)),expirationTime:co(zu(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function zu(t){return Number(t)*1e3}function Tf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ol("JWT malformed, contained fewer than 3 sections"),null;try{const s=bx(n);return s?JSON.parse(s):(ol("Failed to decode base64 JWT payload"),null)}catch(s){return ol("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Fg(t){const e=Tf(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jn&&ab(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ab({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=co(this.lastLoginAt),this.creationTime=co(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(t){var p;const e=t.auth,n=await t.getIdToken(),r=await Oo(t,Wl(e,{idToken:n}));G(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(p=s.providerUserInfo)!=null&&p.length?Wx(s.providerUserInfo):[],o=ub(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Yd(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function cb(t){const e=Tt(t);await Hl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ub(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Wx(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function db(t,e){const n=await Bx(t,{},async()=>{const r=ra({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await $x(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&ci(t.emulatorConfig.host)&&(u.credentials="include"),zx.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hb(t,e){return kr(t,"POST","/v2/accounts:revokeToken",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");const n=Fg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await db(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Fs;return r&&(G(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(G(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(G(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fs,this.toJSON())}_performRefresh(){return vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new lb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yd(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Oo(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ob(this,e)}reload(){return cb(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ct(this.auth.app))return Promise.reject(wn(this.auth));const e=await this.getIdToken();return await Oo(this,ib(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:w,providerData:k,stsTokenManager:C}=n;G(p&&C,e,"internal-error");const S=Fs.fromJSON(this.name,C);G(typeof p=="string",e,"internal-error"),zn(r,e.name),zn(s,e.name),G(typeof g=="boolean",e,"internal-error"),G(typeof w=="boolean",e,"internal-error"),zn(i,e.name),zn(o,e.name),zn(c,e.name),zn(u,e.name),zn(d,e.name),zn(m,e.name);const _=new Bt({uid:p,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:w,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:S,createdAt:d,lastLoginAt:m});return k&&Array.isArray(k)&&(_.providerData=k.map(x=>({...x}))),u&&(_._redirectEventId=u),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new Fs;s.updateFromServerResponse(n);const i=new Bt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Hl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];G(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Wx(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Fs;c.updateFromIdToken(r);const u=new Bt({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Yd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=new Map;function _n(t){An(t instanceof Function,"Expected a class definition");let e=Ug.get(t);return e?(An(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ug.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Hx.type="NONE";const zg=Hx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t,e,n){return`firebase:${t}:${e}:${n}`}class Us{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=al(this.userKey,s.apiKey,i),this.fullPersistenceKey=al("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wl(this.auth,{idToken:e}).catch(()=>{});return n?Bt._fromGetAccountInfoResponse(this.auth,n,e):null}return Bt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Us(_n(zg),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||_n(zg);const o=al(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const m=await d._get(o);if(m){let p;if(typeof m=="string"){const g=await Wl(e,{idToken:m}).catch(()=>{});if(!g)break;p=await Bt._fromGetAccountInfoResponse(e,g,m)}else p=Bt._fromJSON(e,m);d!==i&&(c=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Us(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Us(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Xx(e))return"Blackberry";if(Jx(e))return"Webos";if(Gx(e))return"Safari";if((e.includes("chrome/")||Kx(e))&&!e.includes("edge/"))return"Chrome";if(Yx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qx(t=rt()){return/firefox\//i.test(t)}function Gx(t=rt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kx(t=rt()){return/crios\//i.test(t)}function Qx(t=rt()){return/iemobile/i.test(t)}function Yx(t=rt()){return/android/i.test(t)}function Xx(t=rt()){return/blackberry/i.test(t)}function Jx(t=rt()){return/webos/i.test(t)}function If(t=rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fb(t=rt()){var e;return If(t)&&!!((e=window.navigator)!=null&&e.standalone)}function mb(){return b2()&&document.documentMode===10}function Zx(t=rt()){return If(t)||Yx(t)||Jx(t)||Xx(t)||/windows phone/i.test(t)||Qx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t,e=[]){let n;switch(t){case"Browser":n=Bg(rt());break;case"Worker":n=`${Bg(rt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ui}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gb(t,e={}){return kr(t,"GET","/v2/passwordPolicy",Ar(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=6;class vb{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??yb,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $g(this),this.idTokenSubscription=new $g(this),this.beforeStateQueue=new pb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_n(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Us.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wl(this,{idToken:e}),r=await Bt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ct(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ct(this.app))return Promise.reject(wn(this));const n=e?Tt(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ct(this.app)?Promise.reject(wn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ct(this.app)?Promise.reject(wn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_n(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gb(this),n=new vb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new na("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hb(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_n(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await Us.create(this,[_n(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=e0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ct(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&KS(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function os(t){return Tt(t)}class $g{constructor(e){this.auth=e,this.observer=null,this.addObserver=D2(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xb(t){Nc=t}function t0(t){return Nc.loadJS(t)}function wb(){return Nc.recaptchaEnterpriseScript}function Eb(){return Nc.gapiScript}function Tb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Ib{constructor(){this.enterprise=new Sb}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Sb{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const bb="recaptcha-enterprise",n0="NO_RECAPTCHA";class Nb{constructor(e){this.type=bb,this.auth=os(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{sb(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new rb(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;Lg(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(n0)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ib().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&Lg(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=wb();u.length!==0&&(u+=c),t0(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function Wg(t,e,n,r=!1,s=!1){const i=new Nb(t);let o;if(s)o=n0;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Xd(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Wg(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Wg(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(t,e){const n=xf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Jr(i,e??{}))return s;Gt(s,"already-initialized")}return n.initialize({options:e})}function kb(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_n);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Cb(t,e,n){const r=os(t);G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=r0(e),{host:o,port:c}=Pb(e),u=c===null?"":`:${c}`,d={url:`${i}//${o}${u}/`},m=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){G(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),G(Jr(d,r.config.emulator)&&Jr(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,ci(o)?(Cx(`${i}//${o}${u}`),Px("Auth",!0)):jb()}function r0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Pb(t){const e=r0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Hg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Hg(o)}}}function Hg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jb(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vn("not implemented")}_getIdTokenResponse(e){return vn("not implemented")}_linkToIdToken(e,n){return vn("not implemented")}_getReauthenticationResolver(e){return vn("not implemented")}}async function Rb(t,e){return kr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(t,e){return ia(t,"POST","/v1/accounts:signInWithPassword",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(t,e){return ia(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,e))}async function Mb(t,e){return ia(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Sf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Lo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Lo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xd(e,n,"signInWithPassword",Db);case"emailLink":return Vb(e,{email:this._email,oobCode:this._password});default:Gt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xd(e,r,"signUpPassword",Rb);case"emailLink":return Mb(e,{idToken:n,email:this._email,oobCode:this._password});default:Gt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(t,e){return ia(t,"POST","/v1/accounts:signInWithIdp",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="http://localhost";class es extends Sf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new es(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new es(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return zs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,zs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zs(e,n)}buildRequest(){const e={requestUri:Ob,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ra(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Fb(t){const e=qi(Gi(t)).link,n=e?qi(Gi(e)).deep_link_id:null,r=qi(Gi(t)).deep_link_id;return(r?qi(Gi(r)).link:null)||r||n||e||t}class bf{constructor(e){const n=qi(Gi(e)),r=n.apiKey??null,s=n.oobCode??null,i=Lb(n.mode??null);G(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Fb(e);try{return new bf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.providerId=di.PROVIDER_ID}static credential(e,n){return Lo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=bf.parseLink(n);return G(r,"argument-error"),Lo._fromEmailAndCode(e,r.code,r.tenantId)}}di.PROVIDER_ID="password";di.EMAIL_PASSWORD_SIGN_IN_METHOD="password";di.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends s0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends oa{constructor(){super("facebook.com")}static credential(e){return es._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qn.credential(e.oauthAccessToken)}catch{return null}}}qn.FACEBOOK_SIGN_IN_METHOD="facebook.com";qn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn extends oa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return es._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Gn.credential(n,r)}catch{return null}}}Gn.GOOGLE_SIGN_IN_METHOD="google.com";Gn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn extends oa{constructor(){super("github.com")}static credential(e){return es._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kn.credential(e.oauthAccessToken)}catch{return null}}}Kn.GITHUB_SIGN_IN_METHOD="github.com";Kn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends oa{constructor(){super("twitter.com")}static credential(e,n){return es._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Qn.credential(n,r)}catch{return null}}}Qn.TWITTER_SIGN_IN_METHOD="twitter.com";Qn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ub(t,e){return ia(t,"POST","/v1/accounts:signUp",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Bt._fromIdTokenResponse(e,r,s),o=qg(r);return new ts({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=qg(r);return new ts({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function qg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends jn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ql.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ql(e,n,r,s)}}function i0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ql._fromErrorAndOperation(t,i,e,r):i})}async function zb(t,e,n=!1){const r=await Oo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ts._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bb(t,e,n=!1){const{auth:r}=t;if(Ct(r.app))return Promise.reject(wn(r));const s="reauthenticate";try{const i=await Oo(t,i0(r,s,e,t),n);G(i.idToken,r,"internal-error");const o=Tf(i.idToken);G(o,r,"internal-error");const{sub:c}=o;return G(t.uid===c,r,"user-mismatch"),ts._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Gt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o0(t,e,n=!1){if(Ct(t.app))return Promise.reject(wn(t));const r="signIn",s=await i0(t,r,e),i=await ts._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function $b(t,e){return o0(os(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a0(t){const e=os(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Wb(t,e,n){if(Ct(t.app))return Promise.reject(wn(t));const r=os(t),o=await Xd(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ub).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&a0(t),u}),c=await ts._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function Hb(t,e,n){return Ct(t.app)?Promise.reject(wn(t)):$b(Tt(t),di.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&a0(t),r})}function qb(t,e,n,r){return Tt(t).onIdTokenChanged(e,n,r)}function Gb(t,e,n){return Tt(t).beforeAuthStateChanged(e,n)}function Kb(t,e,n,r){return Tt(t).onAuthStateChanged(e,n,r)}function Qb(t){return Tt(t).signOut()}const Gl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gl,"1"),this.storage.removeItem(Gl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb=1e3,Xb=10;class c0 extends l0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Zx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);mb()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Xb):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Yb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}c0.type="LOCAL";const Jb=c0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0 extends l0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}u0.type="SESSION";const d0=u0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ac(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await Zb(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ac.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=Nf("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(m),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return window}function tN(t){rn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(){return typeof rn().WorkerGlobalScope<"u"&&typeof rn().importScripts=="function"}async function nN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function sN(){return h0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="firebaseLocalStorageDb",iN=1,Kl="firebaseLocalStorage",m0="fbase_key";class aa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kc(t,e){return t.transaction([Kl],e?"readwrite":"readonly").objectStore(Kl)}function oN(){const t=indexedDB.deleteDatabase(f0);return new aa(t).toPromise()}function Jd(){const t=indexedDB.open(f0,iN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kl,{keyPath:m0})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kl)?e(r):(r.close(),await oN(),e(await Jd()))})})}async function Gg(t,e,n){const r=kc(t,!0).put({[m0]:e,value:n});return new aa(r).toPromise()}async function aN(t,e){const n=kc(t,!1).get(e),r=await new aa(n).toPromise();return r===void 0?null:r.value}function Kg(t,e){const n=kc(t,!0).delete(e);return new aa(n).toPromise()}const lN=800,cN=3;class p0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>cN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return h0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ac._getInstance(sN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await nN(),!this.activeServiceWorker)return;this.sender=new eN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jd();return await Gg(e,Gl,"1"),await Kg(e,Gl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>aN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=kc(s,!1).getAll();return new aa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}p0.type="LOCAL";const uN=p0;new sa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t,e){return e?_n(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af extends Sf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hN(t){return o0(t.auth,new Af(t),t.bypassAuthState)}function fN(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),Bb(n,new Af(t),t.bypassAuthState)}async function mN(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),zb(n,new Af(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hN;case"linkViaPopup":case"linkViaRedirect":return mN;case"reauthViaPopup":case"reauthViaRedirect":return fN;default:Gt(this.auth,"internal-error")}}resolve(e){An(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){An(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=new sa(2e3,1e4);class js extends g0{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,js.currentPopupAction&&js.currentPopupAction.cancel(),js.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){An(this.filter.length===1,"Popup operations only handle one event");const e=Nf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(nn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,js.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pN.get())};e()}}js.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="pendingRedirect",ll=new Map;class yN extends g0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ll.get(this.auth._key());if(!e){try{const r=await vN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ll.set(this.auth._key(),e)}return this.bypassAuthState||ll.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vN(t,e){const n=wN(e),r=xN(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function _N(t,e){ll.set(t._key(),e)}function xN(t){return _n(t._redirectPersistence)}function wN(t){return al(gN,t.config.apiKey,t.name)}async function EN(t,e,n=!1){if(Ct(t.app))return Promise.reject(wn(t));const r=os(t),s=dN(r,e),o=await new yN(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=10*60*1e3;class IN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!y0(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(nn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qg(e))}saveEventToCache(e){this.cachedEventUids.add(Qg(e)),this.lastProcessedEventTime=Date.now()}}function Qg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function y0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return y0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(t,e={}){return kr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AN=/^https?/;async function kN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bN(t);for(const n of e)try{if(CN(n))return}catch{}Gt(t,"unauthorized-domain")}function CN(t){const e=Qd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!AN.test(n))return!1;if(NN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=new sa(3e4,6e4);function Yg(){const t=rn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jN(t){return new Promise((e,n)=>{var s,i,o;function r(){Yg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yg(),n(nn(t,"network-request-failed"))},timeout:PN.get()})}if((i=(s=rn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=rn().gapi)!=null&&o.load)r();else{const c=Tb("iframefcb");return rn()[c]=()=>{gapi.load?r():n(nn(t,"network-request-failed"))},t0(`${Eb()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw cl=null,e})}let cl=null;function RN(t){return cl=cl||jN(t),cl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=new sa(5e3,15e3),VN="__/auth/iframe",MN="emulator/auth/iframe",ON={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FN(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ef(e,MN):`https://${t.config.authDomain}/${VN}`,r={apiKey:e.apiKey,appName:t.name,v:ui},s=LN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ra(r).slice(1)}`}async function UN(t){const e=await RN(t),n=rn().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:FN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ON,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=nn(t,"network-request-failed"),c=rn().setTimeout(()=>{i(o)},DN.get());function u(){rn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BN=500,$N=600,WN="_blank",HN="http://localhost";class Xg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qN(t,e,n,r=BN,s=$N){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...zN,width:r.toString(),height:s.toString(),top:i,left:o},d=rt().toLowerCase();n&&(c=Kx(d)?WN:n),qx(d)&&(e=e||HN,u.scrollbars="yes");const m=Object.entries(u).reduce((g,[w,k])=>`${g}${w}=${k},`,"");if(fb(d)&&c!=="_self")return GN(e||"",c),new Xg(null);const p=window.open(e||"",c,m);G(p,t,"popup-blocked");try{p.focus()}catch{}return new Xg(p)}function GN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="__/auth/handler",QN="emulator/auth/handler",YN=encodeURIComponent("fac");async function Jg(t,e,n,r,s,i){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ui,eventId:s};if(e instanceof s0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",R2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof oa){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),d=u?`#${YN}=${encodeURIComponent(u)}`:"";return`${XN(t)}?${ra(c).slice(1)}${d}`}function XN({config:t}){return t.emulator?Ef(t,QN):`https://${t.authDomain}/${KN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu="webStorageSupport";class JN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=d0,this._completeRedirectFn=EN,this._overrideRedirectResult=_N}async _openPopup(e,n,r,s){var o;An((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Jg(e,n,r,Qd(),s);return qN(e,i,Nf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Jg(e,n,r,Qd(),s);return tN(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(An(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await UN(e),r=new IN(e);return n.register("authEvent",s=>(G(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bu,{type:Bu},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Bu];i!==void 0&&n(!!i),Gt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Zx()||Gx()||If()}}const ZN=JN;var Zg="@firebase/auth",ey="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nA(t){Ys(new Zr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;G(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:e0(t)},d=new _b(r,s,i,u);return kb(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ys(new Zr("auth-internal",e=>{const n=os(e.getProvider("auth").getImmediate());return(r=>new eA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dr(Zg,ey,tA(t)),dr(Zg,ey,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=5*60,sA=kx("authIdTokenMaxAge")||rA;let ty=null;const iA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sA)return;const s=n==null?void 0:n.token;ty!==s&&(ty=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function oA(t=Vx()){const e=xf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Ab(t,{popupRedirectResolver:ZN,persistence:[uN,Jb,d0]}),r=kx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=iA(i.toString());Gb(n,o,()=>o(n.currentUser)),qb(n,c=>o(c))}}const s=Nx("auth");return s&&Cb(n,`http://${s}`),n}function aA(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}xb({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=nn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",aA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nA("Browser");var ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hr,v0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,v){function T(){}T.prototype=v.prototype,E.F=v.prototype,E.prototype=new T,E.prototype.constructor=E,E.D=function(b,N,P){for(var I=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)I[ze-2]=arguments[ze];return v.prototype[N].apply(b,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,v,T){T||(T=0);const b=Array(16);if(typeof v=="string")for(var N=0;N<16;++N)b[N]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(N=0;N<16;++N)b[N]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=E.g[0],T=E.g[1],N=E.g[2];let P=E.g[3],I;I=v+(P^T&(N^P))+b[0]+3614090360&4294967295,v=T+(I<<7&4294967295|I>>>25),I=P+(N^v&(T^N))+b[1]+3905402710&4294967295,P=v+(I<<12&4294967295|I>>>20),I=N+(T^P&(v^T))+b[2]+606105819&4294967295,N=P+(I<<17&4294967295|I>>>15),I=T+(v^N&(P^v))+b[3]+3250441966&4294967295,T=N+(I<<22&4294967295|I>>>10),I=v+(P^T&(N^P))+b[4]+4118548399&4294967295,v=T+(I<<7&4294967295|I>>>25),I=P+(N^v&(T^N))+b[5]+1200080426&4294967295,P=v+(I<<12&4294967295|I>>>20),I=N+(T^P&(v^T))+b[6]+2821735955&4294967295,N=P+(I<<17&4294967295|I>>>15),I=T+(v^N&(P^v))+b[7]+4249261313&4294967295,T=N+(I<<22&4294967295|I>>>10),I=v+(P^T&(N^P))+b[8]+1770035416&4294967295,v=T+(I<<7&4294967295|I>>>25),I=P+(N^v&(T^N))+b[9]+2336552879&4294967295,P=v+(I<<12&4294967295|I>>>20),I=N+(T^P&(v^T))+b[10]+4294925233&4294967295,N=P+(I<<17&4294967295|I>>>15),I=T+(v^N&(P^v))+b[11]+2304563134&4294967295,T=N+(I<<22&4294967295|I>>>10),I=v+(P^T&(N^P))+b[12]+1804603682&4294967295,v=T+(I<<7&4294967295|I>>>25),I=P+(N^v&(T^N))+b[13]+4254626195&4294967295,P=v+(I<<12&4294967295|I>>>20),I=N+(T^P&(v^T))+b[14]+2792965006&4294967295,N=P+(I<<17&4294967295|I>>>15),I=T+(v^N&(P^v))+b[15]+1236535329&4294967295,T=N+(I<<22&4294967295|I>>>10),I=v+(N^P&(T^N))+b[1]+4129170786&4294967295,v=T+(I<<5&4294967295|I>>>27),I=P+(T^N&(v^T))+b[6]+3225465664&4294967295,P=v+(I<<9&4294967295|I>>>23),I=N+(v^T&(P^v))+b[11]+643717713&4294967295,N=P+(I<<14&4294967295|I>>>18),I=T+(P^v&(N^P))+b[0]+3921069994&4294967295,T=N+(I<<20&4294967295|I>>>12),I=v+(N^P&(T^N))+b[5]+3593408605&4294967295,v=T+(I<<5&4294967295|I>>>27),I=P+(T^N&(v^T))+b[10]+38016083&4294967295,P=v+(I<<9&4294967295|I>>>23),I=N+(v^T&(P^v))+b[15]+3634488961&4294967295,N=P+(I<<14&4294967295|I>>>18),I=T+(P^v&(N^P))+b[4]+3889429448&4294967295,T=N+(I<<20&4294967295|I>>>12),I=v+(N^P&(T^N))+b[9]+568446438&4294967295,v=T+(I<<5&4294967295|I>>>27),I=P+(T^N&(v^T))+b[14]+3275163606&4294967295,P=v+(I<<9&4294967295|I>>>23),I=N+(v^T&(P^v))+b[3]+4107603335&4294967295,N=P+(I<<14&4294967295|I>>>18),I=T+(P^v&(N^P))+b[8]+1163531501&4294967295,T=N+(I<<20&4294967295|I>>>12),I=v+(N^P&(T^N))+b[13]+2850285829&4294967295,v=T+(I<<5&4294967295|I>>>27),I=P+(T^N&(v^T))+b[2]+4243563512&4294967295,P=v+(I<<9&4294967295|I>>>23),I=N+(v^T&(P^v))+b[7]+1735328473&4294967295,N=P+(I<<14&4294967295|I>>>18),I=T+(P^v&(N^P))+b[12]+2368359562&4294967295,T=N+(I<<20&4294967295|I>>>12),I=v+(T^N^P)+b[5]+4294588738&4294967295,v=T+(I<<4&4294967295|I>>>28),I=P+(v^T^N)+b[8]+2272392833&4294967295,P=v+(I<<11&4294967295|I>>>21),I=N+(P^v^T)+b[11]+1839030562&4294967295,N=P+(I<<16&4294967295|I>>>16),I=T+(N^P^v)+b[14]+4259657740&4294967295,T=N+(I<<23&4294967295|I>>>9),I=v+(T^N^P)+b[1]+2763975236&4294967295,v=T+(I<<4&4294967295|I>>>28),I=P+(v^T^N)+b[4]+1272893353&4294967295,P=v+(I<<11&4294967295|I>>>21),I=N+(P^v^T)+b[7]+4139469664&4294967295,N=P+(I<<16&4294967295|I>>>16),I=T+(N^P^v)+b[10]+3200236656&4294967295,T=N+(I<<23&4294967295|I>>>9),I=v+(T^N^P)+b[13]+681279174&4294967295,v=T+(I<<4&4294967295|I>>>28),I=P+(v^T^N)+b[0]+3936430074&4294967295,P=v+(I<<11&4294967295|I>>>21),I=N+(P^v^T)+b[3]+3572445317&4294967295,N=P+(I<<16&4294967295|I>>>16),I=T+(N^P^v)+b[6]+76029189&4294967295,T=N+(I<<23&4294967295|I>>>9),I=v+(T^N^P)+b[9]+3654602809&4294967295,v=T+(I<<4&4294967295|I>>>28),I=P+(v^T^N)+b[12]+3873151461&4294967295,P=v+(I<<11&4294967295|I>>>21),I=N+(P^v^T)+b[15]+530742520&4294967295,N=P+(I<<16&4294967295|I>>>16),I=T+(N^P^v)+b[2]+3299628645&4294967295,T=N+(I<<23&4294967295|I>>>9),I=v+(N^(T|~P))+b[0]+4096336452&4294967295,v=T+(I<<6&4294967295|I>>>26),I=P+(T^(v|~N))+b[7]+1126891415&4294967295,P=v+(I<<10&4294967295|I>>>22),I=N+(v^(P|~T))+b[14]+2878612391&4294967295,N=P+(I<<15&4294967295|I>>>17),I=T+(P^(N|~v))+b[5]+4237533241&4294967295,T=N+(I<<21&4294967295|I>>>11),I=v+(N^(T|~P))+b[12]+1700485571&4294967295,v=T+(I<<6&4294967295|I>>>26),I=P+(T^(v|~N))+b[3]+2399980690&4294967295,P=v+(I<<10&4294967295|I>>>22),I=N+(v^(P|~T))+b[10]+4293915773&4294967295,N=P+(I<<15&4294967295|I>>>17),I=T+(P^(N|~v))+b[1]+2240044497&4294967295,T=N+(I<<21&4294967295|I>>>11),I=v+(N^(T|~P))+b[8]+1873313359&4294967295,v=T+(I<<6&4294967295|I>>>26),I=P+(T^(v|~N))+b[15]+4264355552&4294967295,P=v+(I<<10&4294967295|I>>>22),I=N+(v^(P|~T))+b[6]+2734768916&4294967295,N=P+(I<<15&4294967295|I>>>17),I=T+(P^(N|~v))+b[13]+1309151649&4294967295,T=N+(I<<21&4294967295|I>>>11),I=v+(N^(T|~P))+b[4]+4149444226&4294967295,v=T+(I<<6&4294967295|I>>>26),I=P+(T^(v|~N))+b[11]+3174756917&4294967295,P=v+(I<<10&4294967295|I>>>22),I=N+(v^(P|~T))+b[2]+718787259&4294967295,N=P+(I<<15&4294967295|I>>>17),I=T+(P^(N|~v))+b[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(N+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+N&4294967295,E.g[3]=E.g[3]+P&4294967295}r.prototype.v=function(E,v){v===void 0&&(v=E.length);const T=v-this.blockSize,b=this.C;let N=this.h,P=0;for(;P<v;){if(N==0)for(;P<=T;)s(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<v;)if(b[N++]=E.charCodeAt(P++),N==this.blockSize){s(this,b),N=0;break}}else for(;P<v;)if(b[N++]=E[P++],N==this.blockSize){s(this,b),N=0;break}}this.h=N,this.o+=v},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;v=this.o*8;for(var T=E.length-8;T<E.length;++T)E[T]=v&255,v/=256;for(this.v(E),E=Array(16),v=0,T=0;T<4;++T)for(let b=0;b<32;b+=8)E[v++]=this.g[T]>>>b&255;return E};function i(E,v){var T=c;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=v(E)}function o(E,v){this.h=v;const T=[];let b=!0;for(let N=E.length-1;N>=0;N--){const P=E[N]|0;b&&P==v||(T[N]=P,b=!1)}this.g=T}var c={};function u(E){return-128<=E&&E<128?i(E,function(v){return new o([v|0],v<0?-1:0)}):new o([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return p;if(E<0)return S(d(-E));const v=[];let T=1;for(let b=0;E>=T;b++)v[b]=E/T|0,T*=4294967296;return new o(v,0)}function m(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return S(m(E.substring(1),v));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=d(Math.pow(v,8));let b=p;for(let P=0;P<E.length;P+=8){var N=Math.min(8,E.length-P);const I=parseInt(E.substring(P,P+N),v);N<8?(N=d(Math.pow(v,N)),b=b.j(N).add(d(I))):(b=b.j(T),b=b.add(d(I)))}return b}var p=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-S(this).m();let E=0,v=1;for(let T=0;T<this.g.length;T++){const b=this.i(T);E+=(b>=0?b:4294967296+b)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(k(this))return"0";if(C(this))return"-"+S(this).toString(E);const v=d(Math.pow(E,6));var T=this;let b="";for(;;){const N=D(T,v).g;T=_(T,N.j(v));let P=((T.g.length>0?T.g[0]:T.h)>>>0).toString(E);if(T=N,k(T))return P+b;for(;P.length<6;)P="0"+P;b=P+b}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function k(E){if(E.h!=0)return!1;for(let v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function C(E){return E.h==-1}t.l=function(E){return E=_(this,E),C(E)?-1:k(E)?0:1};function S(E){const v=E.g.length,T=[];for(let b=0;b<v;b++)T[b]=~E.g[b];return new o(T,~E.h).add(g)}t.abs=function(){return C(this)?S(this):this},t.add=function(E){const v=Math.max(this.g.length,E.g.length),T=[];let b=0;for(let N=0;N<=v;N++){let P=b+(this.i(N)&65535)+(E.i(N)&65535),I=(P>>>16)+(this.i(N)>>>16)+(E.i(N)>>>16);b=I>>>16,P&=65535,I&=65535,T[N]=I<<16|P}return new o(T,T[T.length-1]&-2147483648?-1:0)};function _(E,v){return E.add(S(v))}t.j=function(E){if(k(this)||k(E))return p;if(C(this))return C(E)?S(this).j(S(E)):S(S(this).j(E));if(C(E))return S(this.j(S(E)));if(this.l(w)<0&&E.l(w)<0)return d(this.m()*E.m());const v=this.g.length+E.g.length,T=[];for(var b=0;b<2*v;b++)T[b]=0;for(b=0;b<this.g.length;b++)for(let N=0;N<E.g.length;N++){const P=this.i(b)>>>16,I=this.i(b)&65535,ze=E.i(N)>>>16,fn=E.i(N)&65535;T[2*b+2*N]+=I*fn,x(T,2*b+2*N),T[2*b+2*N+1]+=P*fn,x(T,2*b+2*N+1),T[2*b+2*N+1]+=I*ze,x(T,2*b+2*N+1),T[2*b+2*N+2]+=P*ze,x(T,2*b+2*N+2)}for(E=0;E<v;E++)T[E]=T[2*E+1]<<16|T[2*E];for(E=v;E<2*v;E++)T[E]=0;return new o(T,0)};function x(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function A(E,v){this.g=E,this.h=v}function D(E,v){if(k(v))throw Error("division by zero");if(k(E))return new A(p,p);if(C(E))return v=D(S(E),v),new A(S(v.g),S(v.h));if(C(v))return v=D(E,S(v)),new A(S(v.g),v.h);if(E.g.length>30){if(C(E)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var T=g,b=v;b.l(E)<=0;)T=F(T),b=F(b);var N=z(T,1),P=z(b,1);for(b=z(b,2),T=z(T,2);!k(b);){var I=P.add(b);I.l(E)<=0&&(N=N.add(T),P=I),b=z(b,1),T=z(T,1)}return v=_(E,N.j(v)),new A(N,v)}for(N=p;E.l(v)>=0;){for(T=Math.max(1,Math.floor(E.m()/v.m())),b=Math.ceil(Math.log(T)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),P=d(T),I=P.j(v);C(I)||I.l(E)>0;)T-=b,P=d(T),I=P.j(v);k(P)&&(P=g),N=N.add(P),E=_(E,I)}return new A(N,E)}t.B=function(E){return D(this,E).h},t.and=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let b=0;b<v;b++)T[b]=this.i(b)&E.i(b);return new o(T,this.h&E.h)},t.or=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let b=0;b<v;b++)T[b]=this.i(b)|E.i(b);return new o(T,this.h|E.h)},t.xor=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let b=0;b<v;b++)T[b]=this.i(b)^E.i(b);return new o(T,this.h^E.h)};function F(E){const v=E.g.length+1,T=[];for(let b=0;b<v;b++)T[b]=E.i(b)<<1|E.i(b-1)>>>31;return new o(T,E.h)}function z(E,v){const T=v>>5;v%=32;const b=E.g.length-T,N=[];for(let P=0;P<b;P++)N[P]=v>0?E.i(P+T)>>>v|E.i(P+T+1)<<32-v:E.i(P+T);return new o(N,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,v0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,hr=o}).apply(typeof ny<"u"?ny:typeof self<"u"?self:typeof window<"u"?window:{});var $a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _0,Ki,x0,ul,Zd,w0,E0,T0;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof $a=="object"&&$a];for(var h=0;h<l.length;++h){var f=l[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var f=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var j=l[y];if(!(j in f))break e;f=f[j]}l=l[l.length-1],y=f[l],h=h(y),h!=y&&h!=null&&e(f,l,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(h){var f=[],y;for(y in h)Object.prototype.hasOwnProperty.call(h,y)&&f.push([y,h[y]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,f){return l.call.apply(l.bind,arguments)}function d(l,h,f){return d=u,d.apply(null,arguments)}function m(l,h){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function p(l,h){function f(){}f.prototype=h.prototype,l.Z=h.prototype,l.prototype=new f,l.prototype.constructor=l,l.Ob=function(y,j,R){for(var U=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)U[Z-2]=arguments[Z];return h.prototype[j].apply(y,U)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function w(l){const h=l.length;if(h>0){const f=Array(h);for(let y=0;y<h;y++)f[y]=l[y];return f}return[]}function k(l,h){for(let y=1;y<arguments.length;y++){const j=arguments[y];var f=typeof j;if(f=f!="object"?f:j?Array.isArray(j)?"array":f:"null",f=="array"||f=="object"&&typeof j.length=="number"){f=l.length||0;const R=j.length||0;l.length=f+R;for(let U=0;U<R;U++)l[f+U]=j[U]}else l.push(j)}}class C{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function S(l){o.setTimeout(()=>{throw l},0)}function _(){var l=E;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class x{constructor(){this.h=this.g=null}add(h,f){const y=A.get();y.set(h,f),this.h?this.h.next=y:this.g=y,this.h=y}}var A=new C(()=>new D,l=>l.reset());class D{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let F,z=!1,E=new x,v=()=>{const l=Promise.resolve(void 0);F=()=>{l.then(T)}};function T(){for(var l;l=_();){try{l.h.call(l.g)}catch(f){S(f)}var h=A;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}z=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const f=()=>{};o.addEventListener("test",f,h),o.removeEventListener("test",f,h)}catch{}return l}();function I(l){return/^[\s\xa0]*$/.test(l)}function ze(l,h){N.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}p(ze,N),ze.prototype.init=function(l,h){const f=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(f=="mouseover"?h=l.fromElement:f=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&ze.Z.h.call(this)},ze.prototype.h=function(){ze.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var fn="closure_listenable_"+(Math.random()*1e6|0),gi=0;function yi(l,h,f,y,j){this.listener=l,this.proxy=null,this.src=h,this.type=f,this.capture=!!y,this.ha=j,this.key=++gi,this.da=this.fa=!1}function B(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Q(l,h,f){for(const y in l)h.call(f,l[y],y,l)}function J(l,h){for(const f in l)h.call(void 0,l[f],f,l)}function pe(l){const h={};for(const f in l)h[f]=l[f];return h}const Ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cr(l,h){let f,y;for(let j=1;j<arguments.length;j++){y=arguments[j];for(f in y)l[f]=y[f];for(let R=0;R<Ie.length;R++)f=Ie[R],Object.prototype.hasOwnProperty.call(y,f)&&(l[f]=y[f])}}function Nt(l){this.src=l,this.g={},this.h=0}Nt.prototype.add=function(l,h,f,y,j){const R=l.toString();l=this.g[R],l||(l=this.g[R]=[],this.h++);const U=Ot(l,h,y,j);return U>-1?(h=l[U],f||(h.fa=!1)):(h=new yi(h,this.src,R,!!y,j),h.fa=f,l.push(h)),h};function Pr(l,h){const f=h.type;if(f in l.g){var y=l.g[f],j=Array.prototype.indexOf.call(y,h,void 0),R;(R=j>=0)&&Array.prototype.splice.call(y,j,1),R&&(B(h),l.g[f].length==0&&(delete l.g[f],l.h--))}}function Ot(l,h,f,y){for(let j=0;j<l.length;++j){const R=l[j];if(!R.da&&R.listener==h&&R.capture==!!f&&R.ha==y)return j}return-1}var Rn="closure_lm_"+(Math.random()*1e6|0),Bc={};function cm(l,h,f,y,j){if(Array.isArray(h)){for(let R=0;R<h.length;R++)cm(l,h[R],f,y,j);return null}return f=hm(f),l&&l[fn]?l.J(h,f,c(y)?!!y.capture:!1,j):Qw(l,h,f,!1,y,j)}function Qw(l,h,f,y,j,R){if(!h)throw Error("Invalid event type");const U=c(j)?!!j.capture:!!j;let Z=Wc(l);if(Z||(l[Rn]=Z=new Nt(l)),f=Z.add(h,f,y,U,R),f.proxy)return f;if(y=Yw(),f.proxy=y,y.src=l,y.listener=f,l.addEventListener)P||(j=U),j===void 0&&(j=!1),l.addEventListener(h.toString(),y,j);else if(l.attachEvent)l.attachEvent(dm(h.toString()),y);else if(l.addListener&&l.removeListener)l.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Yw(){function l(f){return h.call(l.src,l.listener,f)}const h=Xw;return l}function um(l,h,f,y,j){if(Array.isArray(h))for(var R=0;R<h.length;R++)um(l,h[R],f,y,j);else y=c(y)?!!y.capture:!!y,f=hm(f),l&&l[fn]?(l=l.i,R=String(h).toString(),R in l.g&&(h=l.g[R],f=Ot(h,f,y,j),f>-1&&(B(h[f]),Array.prototype.splice.call(h,f,1),h.length==0&&(delete l.g[R],l.h--)))):l&&(l=Wc(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Ot(h,f,y,j)),(f=l>-1?h[l]:null)&&$c(f))}function $c(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[fn])Pr(h.i,l);else{var f=l.type,y=l.proxy;h.removeEventListener?h.removeEventListener(f,y,l.capture):h.detachEvent?h.detachEvent(dm(f),y):h.addListener&&h.removeListener&&h.removeListener(y),(f=Wc(h))?(Pr(f,l),f.h==0&&(f.src=null,h[Rn]=null)):B(l)}}}function dm(l){return l in Bc?Bc[l]:Bc[l]="on"+l}function Xw(l,h){if(l.da)l=!0;else{h=new ze(h,this);const f=l.listener,y=l.ha||l.src;l.fa&&$c(l),l=f.call(y,h)}return l}function Wc(l){return l=l[Rn],l instanceof Nt?l:null}var Hc="__closure_events_fn_"+(Math.random()*1e9>>>0);function hm(l){return typeof l=="function"?l:(l[Hc]||(l[Hc]=function(h){return l.handleEvent(h)}),l[Hc])}function Ke(){b.call(this),this.i=new Nt(this),this.M=this,this.G=null}p(Ke,b),Ke.prototype[fn]=!0,Ke.prototype.removeEventListener=function(l,h,f,y){um(this,l,h,f,y)};function st(l,h){var f,y=l.G;if(y)for(f=[];y;y=y.G)f.push(y);if(l=l.M,y=h.type||h,typeof h=="string")h=new N(h,l);else if(h instanceof N)h.target=h.target||l;else{var j=h;h=new N(y,l),Cr(h,j)}j=!0;let R,U;if(f)for(U=f.length-1;U>=0;U--)R=h.g=f[U],j=fa(R,y,!0,h)&&j;if(R=h.g=l,j=fa(R,y,!0,h)&&j,j=fa(R,y,!1,h)&&j,f)for(U=0;U<f.length;U++)R=h.g=f[U],j=fa(R,y,!1,h)&&j}Ke.prototype.N=function(){if(Ke.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const f=l.g[h];for(let y=0;y<f.length;y++)B(f[y]);delete l.g[h],l.h--}}this.G=null},Ke.prototype.J=function(l,h,f,y){return this.i.add(String(l),h,!1,f,y)},Ke.prototype.K=function(l,h,f,y){return this.i.add(String(l),h,!0,f,y)};function fa(l,h,f,y){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let j=!0;for(let R=0;R<h.length;++R){const U=h[R];if(U&&!U.da&&U.capture==f){const Z=U.listener,Pe=U.ha||U.src;U.fa&&Pr(l.i,U),j=Z.call(Pe,y)!==!1&&j}}return j&&!y.defaultPrevented}function Jw(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function fm(l){l.g=Jw(()=>{l.g=null,l.i&&(l.i=!1,fm(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Zw extends b{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:fm(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(l){b.call(this),this.h=l,this.g={}}p(vi,b);var mm=[];function pm(l){Q(l.g,function(h,f){this.g.hasOwnProperty(f)&&$c(h)},l),l.g={}}vi.prototype.N=function(){vi.Z.N.call(this),pm(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qc=o.JSON.stringify,eE=o.JSON.parse,tE=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function gm(){}function ym(){}var _i={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gc(){N.call(this,"d")}p(Gc,N);function Kc(){N.call(this,"c")}p(Kc,N);var jr={},vm=null;function ma(){return vm=vm||new Ke}jr.Ia="serverreachability";function _m(l){N.call(this,jr.Ia,l)}p(_m,N);function xi(l){const h=ma();st(h,new _m(h))}jr.STAT_EVENT="statevent";function xm(l,h){N.call(this,jr.STAT_EVENT,l),this.stat=h}p(xm,N);function it(l){const h=ma();st(h,new xm(h,l))}jr.Ja="timingevent";function wm(l,h){N.call(this,jr.Ja,l),this.size=h}p(wm,N);function wi(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function Ei(){this.g=!0}Ei.prototype.ua=function(){this.g=!1};function nE(l,h,f,y,j,R){l.info(function(){if(l.g)if(R){var U="",Z=R.split("&");for(let ce=0;ce<Z.length;ce++){var Pe=Z[ce].split("=");if(Pe.length>1){const Me=Pe[0];Pe=Pe[1];const Qt=Me.split("_");U=Qt.length>=2&&Qt[1]=="type"?U+(Me+"="+Pe+"&"):U+(Me+"=redacted&")}}}else U=null;else U=R;return"XMLHTTP REQ ("+y+") [attempt "+j+"]: "+h+`
`+f+`
`+U})}function rE(l,h,f,y,j,R,U){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+j+"]: "+h+`
`+f+`
`+R+" "+U})}function ds(l,h,f,y){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+iE(l,f)+(y?" "+y:"")})}function sE(l,h){l.info(function(){return"TIMEOUT: "+h})}Ei.prototype.info=function(){};function iE(l,h){if(!l.g)return h;if(!h)return null;try{const R=JSON.parse(h);if(R){for(l=0;l<R.length;l++)if(Array.isArray(R[l])){var f=R[l];if(!(f.length<2)){var y=f[1];if(Array.isArray(y)&&!(y.length<1)){var j=y[0];if(j!="noop"&&j!="stop"&&j!="close")for(let U=1;U<y.length;U++)y[U]=""}}}}return qc(R)}catch{return h}}var pa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Em={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Tm;function Qc(){}p(Qc,gm),Qc.prototype.g=function(){return new XMLHttpRequest},Tm=new Qc;function Ti(l){return encodeURIComponent(String(l))}function oE(l){var h=1;l=l.split(":");const f=[];for(;h>0&&l.length;)f.push(l.shift()),h--;return l.length&&f.push(l.join(":")),f}function Dn(l,h,f,y){this.j=l,this.i=h,this.l=f,this.S=y||1,this.V=new vi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Im}function Im(){this.i=null,this.g="",this.h=!1}var Sm={},Yc={};function Xc(l,h,f){l.M=1,l.A=ya(Kt(h)),l.u=f,l.R=!0,bm(l,null)}function bm(l,h){l.F=Date.now(),ga(l),l.B=Kt(l.A);var f=l.B,y=l.S;Array.isArray(y)||(y=[String(y)]),Fm(f.i,"t",y),l.C=0,f=l.j.L,l.h=new Im,l.g=rp(l.j,f?h:null,!l.u),l.P>0&&(l.O=new Zw(d(l.Y,l,l.g),l.P)),h=l.V,f=l.g,y=l.ba;var j="readystatechange";Array.isArray(j)||(j&&(mm[0]=j.toString()),j=mm);for(let R=0;R<j.length;R++){const U=cm(f,j[R],y||h.handleEvent,!1,h.h||h);if(!U)break;h.g[U.key]=U}h=l.J?pe(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),xi(),nE(l.i,l.v,l.B,l.l,l.S,l.u)}Dn.prototype.ba=function(l){l=l.target;const h=this.O;h&&On(l)==3?h.j():this.Y(l)},Dn.prototype.Y=function(l){try{if(l==this.g)e:{const Z=On(this.g),Pe=this.g.ya(),ce=this.g.ca();if(!(Z<3)&&(Z!=3||this.g&&(this.h.h||this.g.la()||qm(this.g)))){this.K||Z!=4||Pe==7||(Pe==8||ce<=0?xi(3):xi(2)),Jc(this);var h=this.g.ca();this.X=h;var f=aE(this);if(this.o=h==200,rE(this.i,this.v,this.B,this.l,this.S,Z,h),this.o){if(this.U&&!this.L){t:{if(this.g){var y,j=this.g;if((y=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(y)){var R=y;break t}}R=null}if(l=R)ds(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Zc(this,l);else{this.o=!1,this.m=3,it(12),Rr(this),Ii(this);break e}}if(this.R){l=!0;let Me;for(;!this.K&&this.C<f.length;)if(Me=lE(this,f),Me==Yc){Z==4&&(this.m=4,it(14),l=!1),ds(this.i,this.l,null,"[Incomplete Response]");break}else if(Me==Sm){this.m=4,it(15),ds(this.i,this.l,f,"[Invalid Chunk]"),l=!1;break}else ds(this.i,this.l,Me,null),Zc(this,Me);if(Nm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Z!=4||f.length!=0||this.h.h||(this.m=1,it(16),l=!1),this.o=this.o&&l,!l)ds(this.i,this.l,f,"[Invalid Chunked Response]"),Rr(this),Ii(this);else if(f.length>0&&!this.W){this.W=!0;var U=this.j;U.g==this&&U.aa&&!U.P&&(U.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),au(U),U.P=!0,it(11))}}else ds(this.i,this.l,f,null),Zc(this,f);Z==4&&Rr(this),this.o&&!this.K&&(Z==4?Zm(this.j,this):(this.o=!1,ga(this)))}else EE(this.g),h==400&&f.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),Rr(this),Ii(this)}}}catch{}finally{}};function aE(l){if(!Nm(l))return l.g.la();const h=qm(l.g);if(h==="")return"";let f="";const y=h.length,j=On(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Rr(l),Ii(l),"";l.h.i=new o.TextDecoder}for(let R=0;R<y;R++)l.h.h=!0,f+=l.h.i.decode(h[R],{stream:!(j&&R==y-1)});return h.length=0,l.h.g+=f,l.C=0,l.h.g}function Nm(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function lE(l,h){var f=l.C,y=h.indexOf(`
`,f);return y==-1?Yc:(f=Number(h.substring(f,y)),isNaN(f)?Sm:(y+=1,y+f>h.length?Yc:(h=h.slice(y,y+f),l.C=y+f,h)))}Dn.prototype.cancel=function(){this.K=!0,Rr(this)};function ga(l){l.T=Date.now()+l.H,Am(l,l.H)}function Am(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=wi(d(l.aa,l),h)}function Jc(l){l.D&&(o.clearTimeout(l.D),l.D=null)}Dn.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(sE(this.i,this.B),this.M!=2&&(xi(),it(17)),Rr(this),this.m=2,Ii(this)):Am(this,this.T-l)};function Ii(l){l.j.I==0||l.K||Zm(l.j,l)}function Rr(l){Jc(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,pm(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function Zc(l,h){try{var f=l.j;if(f.I!=0&&(f.g==l||eu(f.h,l))){if(!l.L&&eu(f.h,l)&&f.I==3){try{var y=f.Ba.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var j=y;if(j[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<l.F)Ea(f),xa(f);else break e;ou(f),it(18)}}else f.xa=j[1],0<f.xa-f.K&&j[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=wi(d(f.Va,f),6e3));Pm(f.h)<=1&&f.ta&&(f.ta=void 0)}else Vr(f,11)}else if((l.L||f.g==l)&&Ea(f),!I(h))for(j=f.Ba.g.parse(h),h=0;h<j.length;h++){let ce=j[h];const Me=ce[0];if(!(Me<=f.K))if(f.K=Me,ce=ce[1],f.I==2)if(ce[0]=="c"){f.M=ce[1],f.ba=ce[2];const Qt=ce[3];Qt!=null&&(f.ka=Qt,f.j.info("VER="+f.ka));const Mr=ce[4];Mr!=null&&(f.za=Mr,f.j.info("SVER="+f.za));const Ln=ce[5];Ln!=null&&typeof Ln=="number"&&Ln>0&&(y=1.5*Ln,f.O=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const Fn=l.g;if(Fn){const Ia=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ia){var R=y.h;R.g||Ia.indexOf("spdy")==-1&&Ia.indexOf("quic")==-1&&Ia.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(tu(R,R.h),R.h=null))}if(y.G){const lu=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;lu&&(y.wa=lu,de(y.J,y.G,lu))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-l.F,f.j.info("Handshake RTT: "+f.T+"ms")),y=f;var U=l;if(y.na=np(y,y.L?y.ba:null,y.W),U.L){jm(y.h,U);var Z=U,Pe=y.O;Pe&&(Z.H=Pe),Z.D&&(Jc(Z),ga(Z)),y.g=U}else Xm(y);f.i.length>0&&wa(f)}else ce[0]!="stop"&&ce[0]!="close"||Vr(f,7);else f.I==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?Vr(f,7):iu(f):ce[0]!="noop"&&f.l&&f.l.qa(ce),f.A=0)}}xi(4)}catch{}}var cE=class{constructor(l,h){this.g=l,this.map=h}};function km(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Pm(l){return l.h?1:l.g?l.g.size:0}function eu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function tu(l,h){l.g?l.g.add(h):l.h=h}function jm(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}km.prototype.cancel=function(){if(this.i=Rm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Rm(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const f of l.g.values())h=h.concat(f.G);return h}return w(l.i)}var Dm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uE(l,h){if(l){l=l.split("&");for(let f=0;f<l.length;f++){const y=l[f].indexOf("=");let j,R=null;y>=0?(j=l[f].substring(0,y),R=l[f].substring(y+1)):j=l[f],h(j,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Vn(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof Vn?(this.l=l.l,Si(this,l.j),this.o=l.o,this.g=l.g,bi(this,l.u),this.h=l.h,nu(this,Um(l.i)),this.m=l.m):l&&(h=String(l).match(Dm))?(this.l=!1,Si(this,h[1]||"",!0),this.o=Ni(h[2]||""),this.g=Ni(h[3]||"",!0),bi(this,h[4]),this.h=Ni(h[5]||"",!0),nu(this,h[6]||"",!0),this.m=Ni(h[7]||"")):(this.l=!1,this.i=new ki(null,this.l))}Vn.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(Ai(h,Vm,!0),":");var f=this.g;return(f||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Ai(h,Vm,!0),"@"),l.push(Ti(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&l.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&l.push("/"),l.push(Ai(f,f.charAt(0)=="/"?fE:hE,!0))),(f=this.i.toString())&&l.push("?",f),(f=this.m)&&l.push("#",Ai(f,pE)),l.join("")},Vn.prototype.resolve=function(l){const h=Kt(this);let f=!!l.j;f?Si(h,l.j):f=!!l.o,f?h.o=l.o:f=!!l.g,f?h.g=l.g:f=l.u!=null;var y=l.h;if(f)bi(h,l.u);else if(f=!!l.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var j=h.h.lastIndexOf("/");j!=-1&&(y=h.h.slice(0,j+1)+y)}if(j=y,j==".."||j==".")y="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){y=j.lastIndexOf("/",0)==0,j=j.split("/");const R=[];for(let U=0;U<j.length;){const Z=j[U++];Z=="."?y&&U==j.length&&R.push(""):Z==".."?((R.length>1||R.length==1&&R[0]!="")&&R.pop(),y&&U==j.length&&R.push("")):(R.push(Z),y=!0)}y=R.join("/")}else y=j}return f?h.h=y:f=l.i.toString()!=="",f?nu(h,Um(l.i)):f=!!l.m,f&&(h.m=l.m),h};function Kt(l){return new Vn(l)}function Si(l,h,f){l.j=f?Ni(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function bi(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function nu(l,h,f){h instanceof ki?(l.i=h,gE(l.i,l.l)):(f||(h=Ai(h,mE)),l.i=new ki(h,l.l))}function de(l,h,f){l.i.set(h,f)}function ya(l){return de(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Ni(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ai(l,h,f){return typeof l=="string"?(l=encodeURI(l).replace(h,dE),f&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function dE(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Vm=/[#\/\?@]/g,hE=/[#\?:]/g,fE=/[#\?]/g,mE=/[#\?@]/g,pE=/#/g;function ki(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Dr(l){l.g||(l.g=new Map,l.h=0,l.i&&uE(l.i,function(h,f){l.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=ki.prototype,t.add=function(l,h){Dr(this),this.i=null,l=hs(this,l);let f=this.g.get(l);return f||this.g.set(l,f=[]),f.push(h),this.h+=1,this};function Mm(l,h){Dr(l),h=hs(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Om(l,h){return Dr(l),h=hs(l,h),l.g.has(h)}t.forEach=function(l,h){Dr(this),this.g.forEach(function(f,y){f.forEach(function(j){l.call(h,j,y,this)},this)},this)};function Lm(l,h){Dr(l);let f=[];if(typeof h=="string")Om(l,h)&&(f=f.concat(l.g.get(hs(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)f=f.concat(l[h]);return f}t.set=function(l,h){return Dr(this),this.i=null,l=hs(this,l),Om(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=Lm(this,l),l.length>0?String(l[0]):h):h};function Fm(l,h,f){Mm(l,h),f.length>0&&(l.i=null,l.g.set(hs(l,h),w(f)),l.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let y=0;y<h.length;y++){var f=h[y];const j=Ti(f);f=Lm(this,f);for(let R=0;R<f.length;R++){let U=j;f[R]!==""&&(U+="="+Ti(f[R])),l.push(U)}}return this.i=l.join("&")};function Um(l){const h=new ki;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function hs(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function gE(l,h){h&&!l.j&&(Dr(l),l.i=null,l.g.forEach(function(f,y){const j=y.toLowerCase();y!=j&&(Mm(this,y),Fm(this,j,f))},l)),l.j=h}function yE(l,h){const f=new Ei;if(o.Image){const y=new Image;y.onload=m(Mn,f,"TestLoadImage: loaded",!0,h,y),y.onerror=m(Mn,f,"TestLoadImage: error",!1,h,y),y.onabort=m(Mn,f,"TestLoadImage: abort",!1,h,y),y.ontimeout=m(Mn,f,"TestLoadImage: timeout",!1,h,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else h(!1)}function vE(l,h){const f=new Ei,y=new AbortController,j=setTimeout(()=>{y.abort(),Mn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:y.signal}).then(R=>{clearTimeout(j),R.ok?Mn(f,"TestPingServer: ok",!0,h):Mn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(j),Mn(f,"TestPingServer: error",!1,h)})}function Mn(l,h,f,y,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),y(f)}catch{}}function _E(){this.g=new tE}function ru(l){this.i=l.Sb||null,this.h=l.ab||!1}p(ru,gm),ru.prototype.g=function(){return new va(this.i,this.h)};function va(l,h){Ke.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(va,Ke),t=va.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,Pi(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Pi(this)),this.g&&(this.readyState=3,Pi(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zm(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function zm(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ci(this):Pi(this),this.readyState==3&&zm(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Ci(this))},t.Na=function(l){this.g&&(this.response=l,Ci(this))},t.ga=function(){this.g&&Ci(this)};function Ci(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Pi(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,l.push(f[0]+": "+f[1]),f=h.next();return l.join(`\r
`)};function Pi(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Bm(l){let h="";return Q(l,function(f,y){h+=y,h+=":",h+=f,h+=`\r
`}),h}function su(l,h,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=Bm(f),typeof l=="string"?f!=null&&Ti(f):de(l,h,f))}function Ee(l){Ke.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ee,Ke);var xE=/^https?$/i,wE=["POST","PUT"];t=Ee.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Tm.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(R){$m(this,R);return}if(l=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var j in y)f.set(j,y[j]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const R of y.keys())f.set(R,y.get(R));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),j=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(wE,h,void 0)>=0)||y||j||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[R,U]of f)this.g.setRequestHeader(R,U);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(R){$m(this,R)}};function $m(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,Wm(l),_a(l)}function Wm(l){l.A||(l.A=!0,st(l,"complete"),st(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,st(this,"complete"),st(this,"abort"),_a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_a(this,!0)),Ee.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Hm(this):this.Xa())},t.Xa=function(){Hm(this)};function Hm(l){if(l.h&&typeof i<"u"){if(l.v&&On(l)==4)setTimeout(l.Ca.bind(l),0);else if(st(l,"readystatechange"),On(l)==4){l.h=!1;try{const R=l.ca();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var y;if(y=R===0){let U=String(l.D).match(Dm)[1]||null;!U&&o.self&&o.self.location&&(U=o.self.location.protocol.slice(0,-1)),y=!xE.test(U?U.toLowerCase():"")}f=y}if(f)st(l,"complete"),st(l,"success");else{l.o=6;try{var j=On(l)>2?l.g.statusText:""}catch{j=""}l.l=j+" ["+l.ca()+"]",Wm(l)}}finally{_a(l)}}}}function _a(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const f=l.g;l.g=null,h||st(l,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function On(l){return l.g?l.g.readyState:0}t.ca=function(){try{return On(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),eE(h)}};function qm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function EE(l){const h={};l=(l.g&&On(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<l.length;y++){if(I(l[y]))continue;var f=oE(l[y]);const j=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const R=h[j]||[];h[j]=R,R.push(f)}J(h,function(y){return y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ji(l,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[l]||h}function Gm(l){this.za=0,this.i=[],this.j=new Ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ji("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ji("baseRetryDelayMs",5e3,l),this.Za=ji("retryDelaySeedMs",1e4,l),this.Ta=ji("forwardChannelMaxRetries",2,l),this.va=ji("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new km(l&&l.concurrentRequestLimit),this.Ba=new _E,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Gm.prototype,t.ka=8,t.I=1,t.connect=function(l,h,f,y){it(0),this.W=l,this.H=h||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.J=np(this,null,this.W),wa(this)};function iu(l){if(Km(l),l.I==3){var h=l.V++,f=Kt(l.J);if(de(f,"SID",l.M),de(f,"RID",h),de(f,"TYPE","terminate"),Ri(l,f),h=new Dn(l,l.j,h),h.M=2,h.A=ya(Kt(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=h.A,f=!0),f||(h.g=rp(h.j,null),h.g.ea(h.A)),h.F=Date.now(),ga(h)}tp(l)}function xa(l){l.g&&(au(l),l.g.cancel(),l.g=null)}function Km(l){xa(l),l.v&&(o.clearTimeout(l.v),l.v=null),Ea(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function wa(l){if(!Cm(l.h)&&!l.m){l.m=!0;var h=l.Ea;F||v(),z||(F(),z=!0),E.add(h,l),l.D=0}}function TE(l,h){return Pm(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=wi(d(l.Ea,l,h),ep(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const j=new Dn(this,this.j,l);let R=this.o;if(this.U&&(R?(R=pe(R),Cr(R,this.U)):R=this.U),this.u!==null||this.R||(j.J=R,R=null),this.S)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,h>4096){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=Ym(this,j,h),f=Kt(this.J),de(f,"RID",l),de(f,"CVER",22),this.G&&de(f,"X-HTTP-Session-Id",this.G),Ri(this,f),R&&(this.R?h="headers="+Ti(Bm(R))+"&"+h:this.u&&su(f,this.u,R)),tu(this.h,j),this.Ra&&de(f,"TYPE","init"),this.S?(de(f,"$req",h),de(f,"SID","null"),j.U=!0,Xc(j,f,null)):Xc(j,f,h),this.I=2}}else this.I==3&&(l?Qm(this,l):this.i.length==0||Cm(this.h)||Qm(this))};function Qm(l,h){var f;h?f=h.l:f=l.V++;const y=Kt(l.J);de(y,"SID",l.M),de(y,"RID",f),de(y,"AID",l.K),Ri(l,y),l.u&&l.o&&su(y,l.u,l.o),f=new Dn(l,l.j,f,l.D+1),l.u===null&&(f.J=l.o),h&&(l.i=h.G.concat(l.i)),h=Ym(l,f,1e3),f.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),tu(l.h,f),Xc(f,y,h)}function Ri(l,h){l.H&&Q(l.H,function(f,y){de(h,y,f)}),l.l&&Q({},function(f,y){de(h,y,f)})}function Ym(l,h,f){f=Math.min(l.i.length,f);const y=l.l?d(l.l.Ka,l.l,l):null;e:{var j=l.i;let Z=-1;for(;;){const Pe=["count="+f];Z==-1?f>0?(Z=j[0].g,Pe.push("ofs="+Z)):Z=0:Pe.push("ofs="+Z);let ce=!0;for(let Me=0;Me<f;Me++){var R=j[Me].g;const Qt=j[Me].map;if(R-=Z,R<0)Z=Math.max(0,j[Me].g-100),ce=!1;else try{R="req"+R+"_"||"";try{var U=Qt instanceof Map?Qt:Object.entries(Qt);for(const[Mr,Ln]of U){let Fn=Ln;c(Ln)&&(Fn=qc(Ln)),Pe.push(R+Mr+"="+encodeURIComponent(Fn))}}catch(Mr){throw Pe.push(R+"type="+encodeURIComponent("_badmap")),Mr}}catch{y&&y(Qt)}}if(ce){U=Pe.join("&");break e}}U=void 0}return l=l.i.splice(0,f),h.G=l,U}function Xm(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;F||v(),z||(F(),z=!0),E.add(h,l),l.A=0}}function ou(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=wi(d(l.Da,l),ep(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,Jm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=wi(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),xa(this),Jm(this))};function au(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Jm(l){l.g=new Dn(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=Kt(l.na);de(h,"RID","rpc"),de(h,"SID",l.M),de(h,"AID",l.K),de(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&de(h,"TO",l.ia),de(h,"TYPE","xmlhttp"),Ri(l,h),l.u&&l.o&&su(h,l.u,l.o),l.O&&(l.g.H=l.O);var f=l.g;l=l.ba,f.M=1,f.A=ya(Kt(h)),f.u=null,f.R=!0,bm(f,l)}t.Va=function(){this.C!=null&&(this.C=null,xa(this),ou(this),it(19))};function Ea(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Zm(l,h){var f=null;if(l.g==h){Ea(l),au(l),l.g=null;var y=2}else if(eu(l.h,h))f=h.G,jm(l.h,h),y=1;else return;if(l.I!=0){if(h.o)if(y==1){f=h.u?h.u.length:0,h=Date.now()-h.F;var j=l.D;y=ma(),st(y,new wm(y,f)),wa(l)}else Xm(l);else if(j=h.m,j==3||j==0&&h.X>0||!(y==1&&TE(l,h)||y==2&&ou(l)))switch(f&&f.length>0&&(h=l.h,h.i=h.i.concat(f)),j){case 1:Vr(l,5);break;case 4:Vr(l,10);break;case 3:Vr(l,6);break;default:Vr(l,2)}}}function ep(l,h){let f=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(f*=2),f*h}function Vr(l,h){if(l.j.info("Error code "+h),h==2){var f=d(l.bb,l),y=l.Ua;const j=!y;y=new Vn(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Si(y,"https"),ya(y),j?yE(y.toString(),f):vE(y.toString(),f)}else it(2);l.I=0,l.l&&l.l.pa(h),tp(l),Km(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function tp(l){if(l.I=0,l.ja=[],l.l){const h=Rm(l.h);(h.length!=0||l.i.length!=0)&&(k(l.ja,h),k(l.ja,l.i),l.h.i.length=0,w(l.i),l.i.length=0),l.l.oa()}}function np(l,h,f){var y=f instanceof Vn?Kt(f):new Vn(f);if(y.g!="")h&&(y.g=h+"."+y.g),bi(y,y.u);else{var j=o.location;y=j.protocol,h=h?h+"."+j.hostname:j.hostname,j=+j.port;const R=new Vn(null);y&&Si(R,y),h&&(R.g=h),j&&bi(R,j),f&&(R.h=f),y=R}return f=l.G,h=l.wa,f&&h&&de(y,f,h),de(y,"VER",l.ka),Ri(l,y),y}function rp(l,h,f){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Ee(new ru({ab:f})):new Ee(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sp(){}t=sp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ta(){}Ta.prototype.g=function(l,h){return new yt(l,h)};function yt(l,h){Ke.call(this),this.g=new Gm(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!I(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!I(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new fs(this)}p(yt,Ke),yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yt.prototype.close=function(){iu(this.g)},yt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var f={};f.__data__=l,l=f}else this.v&&(f={},f.__data__=qc(l),l=f);h.i.push(new cE(h.Ya++,l)),h.I==3&&wa(h)},yt.prototype.N=function(){this.g.l=null,delete this.j,iu(this.g),delete this.g,yt.Z.N.call(this)};function ip(l){Gc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const f in h){l=f;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}p(ip,Gc);function op(){Kc.call(this),this.status=1}p(op,Kc);function fs(l){this.g=l}p(fs,sp),fs.prototype.ra=function(){st(this.g,"a")},fs.prototype.qa=function(l){st(this.g,new ip(l))},fs.prototype.pa=function(l){st(this.g,new op)},fs.prototype.oa=function(){st(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,yt.prototype.send=yt.prototype.o,yt.prototype.open=yt.prototype.m,yt.prototype.close=yt.prototype.close,T0=function(){return new Ta},E0=function(){return ma()},w0=jr,Zd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pa.NO_ERROR=0,pa.TIMEOUT=8,pa.HTTP_ERROR=6,ul=pa,Em.COMPLETE="complete",x0=Em,ym.EventType=_i,_i.OPEN="a",_i.CLOSE="b",_i.ERROR="c",_i.MESSAGE="d",Ke.prototype.listen=Ke.prototype.J,Ki=ym,Ee.prototype.listenOnce=Ee.prototype.K,Ee.prototype.getLastError=Ee.prototype.Ha,Ee.prototype.getLastErrorCode=Ee.prototype.ya,Ee.prototype.getStatus=Ee.prototype.ca,Ee.prototype.getResponseJson=Ee.prototype.La,Ee.prototype.getResponseText=Ee.prototype.la,Ee.prototype.send=Ee.prototype.ea,Ee.prototype.setWithCredentials=Ee.prototype.Fa,_0=Ee}).apply(typeof $a<"u"?$a:typeof self<"u"?self:typeof window<"u"?window:{});const ry="@firebase/firestore",sy="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hi="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new vf("@firebase/firestore");function gs(){return ns.logLevel}function $(t,...e){if(ns.logLevel<=ne.DEBUG){const n=e.map(kf);ns.debug(`Firestore (${hi}): ${t}`,...n)}}function kn(t,...e){if(ns.logLevel<=ne.ERROR){const n=e.map(kf);ns.error(`Firestore (${hi}): ${t}`,...n)}}function Xs(t,...e){if(ns.logLevel<=ne.WARN){const n=e.map(kf);ns.warn(`Firestore (${hi}): ${t}`,...n)}}function kf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,I0(t,r,n)}function I0(t,e,n){let r=`FIRESTORE (${hi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw kn(r),new Error(r)}function ae(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||I0(e,s,r)}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends jn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Je.UNAUTHENTICATED))}shutdown(){}}class cA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uA{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ae(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new fr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new fr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string",31837,{l:r}),new S0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string",2055,{h:e}),new Je(e)}}class dA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new dA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ct(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ae(this.o===void 0,3512);const r=i=>{i.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new iy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new iy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=mA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function re(t,e){return t<e?-1:t>e?1:0}function eh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return $u(s)===$u(i)?re(s,i):$u(s)?1:-1}return re(t.length,e.length)}const pA=55296,gA=57343;function $u(t){const e=t.charCodeAt(0);return e>=pA&&e<=gA}function Js(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="__name__";class Jt{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&K(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Jt.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Jt?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Jt.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return re(e.length,n.length)}static compareSegments(e,n){const r=Jt.isNumericId(e),s=Jt.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Jt.extractNumericId(e).compare(Jt.extractNumericId(n)):eh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hr.fromString(e.substring(4,e.length-2))}}class ve extends Jt{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const yA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class We extends Jt{construct(e,n,r){return new We(e,n,r)}static isValidIdentifier(e){return yA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),We.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===oy}static keyField(){return new We([oy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new H(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new H(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new We(n)}static emptyPath(){return new We([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(ve.fromString(e))}static fromName(e){return new q(ve.fromString(e).popFirst(5))}static empty(){return new q(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new ve(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t,e,n){if(!n)throw new H(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _A(t,e,n,r){if(e===!0&&r===!0)throw new H(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ay(t){if(!q.isDocumentKey(t))throw new H(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function b0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Pf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K(12329,{type:typeof t})}function Fo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pf(t);throw new H(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t,e){const n={typeString:t};return e&&(n.value=e),n}function la(t,e){if(!b0(t))throw new H(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new H(O.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=-62135596800,cy=1e6;class fe{static now(){return fe.fromMillis(Date.now())}static fromDate(e){return fe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*cy);return new fe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ly)throw new H(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cy}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(la(e,fe._jsonSchema))return new fe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ly;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}fe._jsonSchemaVersion="firestore/timestamp/1.0",fe._jsonSchema={type:Ce("string",fe._jsonSchemaVersion),seconds:Ce("number"),nanoseconds:Ce("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{static fromTimestamp(e){return new Y(e)}static min(){return new Y(new fe(0,0))}static max(){return new Y(new fe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=-1;function xA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Y.fromTimestamp(r===1e9?new fe(n+1,0):new fe(n,r));return new yr(s,q.empty(),e)}function wA(t){return new yr(t.readTime,t.key,Uo)}class yr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yr(Y.min(),q.empty(),Uo)}static max(){return new yr(Y.max(),q.empty(),Uo)}}function EA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fi(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==TA)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(m=>{o[d]=m,++c,c===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function SA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function mi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=-1;function Pc(t){return t==null}function Ql(t){return t===0&&1/t==-1/0}function bA(t){return typeof t=="number"&&Number.isInteger(t)&&!Ql(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="";function NA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=uy(e)),e=AA(t.get(n),e);return uy(e)}function AA(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case N0:n+="";break;default:n+=i}}return n}function uy(t){return t+N0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function as(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function A0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,n){this.comparator=e,this.root=n||$e.EMPTY}insert(e,n){return new we(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$e.BLACK,null,null))}remove(e){return new we(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$e.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wa(this.root,e,this.comparator,!0)}}class Wa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $e{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??$e.RED,this.left=s??$e.EMPTY,this.right=i??$e.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new $e(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $e.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return $e.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$e.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}}$e.EMPTY=null,$e.RED=!0,$e.BLACK=!1;$e.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new $e(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.comparator=e,this.data=new we(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hy(this.data.getIterator())}getIteratorFrom(e){return new hy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ve)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ve(this.comparator);return n.data=e,n}}class hy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new $t([])}unionWith(e){let n=new Ve(We.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $t(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Js(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new k0("Invalid base64 string: "+i):i}}(e);return new Ge(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ge(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ge.EMPTY_BYTE_STRING=new Ge("");const kA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vr(t){if(ae(!!t,39018),typeof t=="string"){let e=0;const n=kA.exec(t);if(ae(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _r(t){return typeof t=="string"?Ge.fromBase64String(t):Ge.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="server_timestamp",P0="__type__",j0="__previous_value__",R0="__local_write_time__";function Rf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[P0])==null?void 0:r.stringValue)===C0}function jc(t){const e=t.mapValue.fields[j0];return Rf(e)?jc(e):e}function zo(t){const e=vr(t.mapValue.fields[R0].timestampValue);return new fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n,r,s,i,o,c,u,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const Yl="(default)";class Bo{constructor(e,n){this.projectId=e,this.database=n||Yl}static empty(){return new Bo("","")}get isDefaultDatabase(){return this.database===Yl}isEqual(e){return e instanceof Bo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="__type__",PA="__max__",Ha={mapValue:{}},V0="__vector__",Xl="value";function xr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rf(t)?4:RA(t)?9007199254740991:jA(t)?10:11:K(28295,{value:t})}function cn(t,e){if(t===e)return!0;const n=xr(t);if(n!==xr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zo(t).isEqual(zo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=vr(s.timestampValue),c=vr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return _r(s.bytesValue).isEqual(_r(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Se(s.geoPointValue.latitude)===Se(i.geoPointValue.latitude)&&Se(s.geoPointValue.longitude)===Se(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Se(s.integerValue)===Se(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Se(s.doubleValue),c=Se(i.doubleValue);return o===c?Ql(o)===Ql(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Js(t.arrayValue.values||[],e.arrayValue.values||[],cn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(dy(o)!==dy(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!cn(o[u],c[u])))return!1;return!0}(t,e);default:return K(52216,{left:t})}}function $o(t,e){return(t.values||[]).find(n=>cn(n,e))!==void 0}function Zs(t,e){if(t===e)return 0;const n=xr(t),r=xr(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Se(i.integerValue||i.doubleValue),u=Se(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return fy(t.timestampValue,e.timestampValue);case 4:return fy(zo(t),zo(e));case 5:return eh(t.stringValue,e.stringValue);case 6:return function(i,o){const c=_r(i),u=_r(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=re(c[d],u[d]);if(m!==0)return m}return re(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=re(Se(i.latitude),Se(o.latitude));return c!==0?c:re(Se(i.longitude),Se(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return my(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,w,k,C;const c=i.fields||{},u=o.fields||{},d=(g=c[Xl])==null?void 0:g.arrayValue,m=(w=u[Xl])==null?void 0:w.arrayValue,p=re(((k=d==null?void 0:d.values)==null?void 0:k.length)||0,((C=m==null?void 0:m.values)==null?void 0:C.length)||0);return p!==0?p:my(d,m)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ha.mapValue&&o===Ha.mapValue)return 0;if(i===Ha.mapValue)return 1;if(o===Ha.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const g=eh(u[p],m[p]);if(g!==0)return g;const w=Zs(c[u[p]],d[m[p]]);if(w!==0)return w}return re(u.length,m.length)}(t.mapValue,e.mapValue);default:throw K(23264,{he:n})}}function fy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);const n=vr(t),r=vr(e),s=re(n.seconds,r.seconds);return s!==0?s:re(n.nanos,r.nanos)}function my(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Zs(n[s],r[s]);if(i)return i}return re(n.length,r.length)}function ei(t){return th(t)}function th(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=vr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _r(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=th(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${th(n.fields[o])}`;return s+"}"}(t.mapValue):K(61005,{value:t})}function dl(t){switch(xr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jc(t);return e?16+dl(e):16;case 5:return 2*t.stringValue.length;case 6:return _r(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+dl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return as(r.fields,(i,o)=>{s+=i.length+dl(o)}),s}(t.mapValue);default:throw K(13486,{value:t})}}function nh(t){return!!t&&"integerValue"in t}function Df(t){return!!t&&"arrayValue"in t}function py(t){return!!t&&"nullValue"in t}function gy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hl(t){return!!t&&"mapValue"in t}function jA(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[D0])==null?void 0:r.stringValue)===V0}function uo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return as(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=uo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=uo(t.arrayValue.values[n]);return e}return{...t}}function RA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===PA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.value=e}static empty(){return new Pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=uo(n)}setAll(e){let n=We.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=uo(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());hl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];hl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){as(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Pt(uo(this.value))}}function M0(t){const e=[];return as(t.fields,(n,r)=>{const s=new We([n]);if(hl(r)){const i=M0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new $t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new et(e,0,Y.min(),Y.min(),Y.min(),Pt.empty(),0)}static newFoundDocument(e,n,r,s){return new et(e,1,n,Y.min(),r,s,0)}static newNoDocument(e,n){return new et(e,2,n,Y.min(),Y.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new et(e,3,n,Y.min(),Y.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n){this.position=e,this.inclusive=n}}function yy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=Zs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function vy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n="asc"){this.field=e,this.dir=n}}function DA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{}class Re extends O0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new MA(e,n,r):n==="array-contains"?new FA(e,r):n==="in"?new UA(e,r):n==="not-in"?new zA(e,r):n==="array-contains-any"?new BA(e,r):new Re(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new OA(e,r):new LA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zs(n,this.value)):n!==null&&xr(this.value)===xr(n)&&this.matchesComparison(Zs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends O0{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new un(e,n)}matches(e){return L0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function L0(t){return t.op==="and"}function F0(t){return VA(t)&&L0(t)}function VA(t){for(const e of t.filters)if(e instanceof un)return!1;return!0}function rh(t){if(t instanceof Re)return t.field.canonicalString()+t.op.toString()+ei(t.value);if(F0(t))return t.filters.map(e=>rh(e)).join(",");{const e=t.filters.map(n=>rh(n)).join(",");return`${t.op}(${e})`}}function U0(t,e){return t instanceof Re?function(r,s){return s instanceof Re&&r.op===s.op&&r.field.isEqual(s.field)&&cn(r.value,s.value)}(t,e):t instanceof un?function(r,s){return s instanceof un&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&U0(o,s.filters[c]),!0):!1}(t,e):void K(19439)}function z0(t){return t instanceof Re?function(n){return`${n.field.canonicalString()} ${n.op} ${ei(n.value)}`}(t):t instanceof un?function(n){return n.op.toString()+" {"+n.getFilters().map(z0).join(" ,")+"}"}(t):"Filter"}class MA extends Re{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class OA extends Re{constructor(e,n){super(e,"in",n),this.keys=B0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class LA extends Re{constructor(e,n){super(e,"not-in",n),this.keys=B0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function B0(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class FA extends Re{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Df(n)&&$o(n.arrayValue,this.value)}}class UA extends Re{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$o(this.value.arrayValue,n)}}class zA extends Re{constructor(e,n){super(e,"not-in",n)}matches(e){if($o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!$o(this.value.arrayValue,n)}}class BA extends Re{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Df(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$o(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function _y(t,e=null,n=[],r=[],s=null,i=null,o=null){return new $A(t,e,n,r,s,i,o)}function Vf(t){const e=X(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Pc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ei(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ei(r)).join(",")),e.Te=n}return e.Te}function Mf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!U0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vy(t.startAt,e.startAt)&&vy(t.endAt,e.endAt)}function sh(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function WA(t,e,n,r,s,i,o,c){return new Rc(t,e,n,r,s,i,o,c)}function Of(t){return new Rc(t)}function xy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function HA(t){return t.collectionGroup!==null}function ho(t){const e=X(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ve(We.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Zl(i,r))}),n.has(We.keyField().canonicalString())||e.Ie.push(new Zl(We.keyField(),r))}return e.Ie}function sn(t){const e=X(t);return e.Ee||(e.Ee=qA(e,ho(t))),e.Ee}function qA(t,e){if(t.limitType==="F")return _y(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Zl(s.field,i)});const n=t.endAt?new Jl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jl(t.startAt.position,t.startAt.inclusive):null;return _y(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ih(t,e,n){return new Rc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dc(t,e){return Mf(sn(t),sn(e))&&t.limitType===e.limitType}function $0(t){return`${Vf(sn(t))}|lt:${t.limitType}`}function ys(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>z0(s)).join(", ")}]`),Pc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ei(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ei(s)).join(",")),`Target(${r})`}(sn(t))}; limitType=${t.limitType})`}function Vc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ho(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=yy(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,ho(r),s)||r.endAt&&!function(o,c,u){const d=yy(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,ho(r),s))}(t,e)}function GA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function W0(t){return(e,n)=>{let r=!1;for(const s of ho(t)){const i=KA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function KA(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?Zs(u,d):K(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){as(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return A0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=new we(q.comparator);function Cn(){return QA}const H0=new we(q.comparator);function Qi(...t){let e=H0;for(const n of t)e=e.insert(n.key,n);return e}function q0(t){let e=H0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function $r(){return fo()}function G0(){return fo()}function fo(){return new ls(t=>t.toString(),(t,e)=>t.isEqual(e))}const YA=new we(q.comparator),XA=new Ve(q.comparator);function se(...t){let e=XA;for(const n of t)e=e.add(n);return e}const JA=new Ve(re);function ZA(){return JA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ql(e)?"-0":e}}function K0(t){return{integerValue:""+t}}function ek(t,e){return bA(e)?K0(e):Lf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this._=void 0}}function tk(t,e,n){return t instanceof Wo?function(s,i){const o={fields:{[P0]:{stringValue:C0},[R0]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Rf(i)&&(i=jc(i)),i&&(o.fields[j0]=i),{mapValue:o}}(n,e):t instanceof Ho?Y0(t,e):t instanceof qo?X0(t,e):function(s,i){const o=Q0(s,i),c=wy(o)+wy(s.Ae);return nh(o)&&nh(s.Ae)?K0(c):Lf(s.serializer,c)}(t,e)}function nk(t,e,n){return t instanceof Ho?Y0(t,e):t instanceof qo?X0(t,e):n}function Q0(t,e){return t instanceof ec?function(r){return nh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Wo extends Mc{}class Ho extends Mc{constructor(e){super(),this.elements=e}}function Y0(t,e){const n=J0(e);for(const r of t.elements)n.some(s=>cn(s,r))||n.push(r);return{arrayValue:{values:n}}}class qo extends Mc{constructor(e){super(),this.elements=e}}function X0(t,e){let n=J0(e);for(const r of t.elements)n=n.filter(s=>!cn(s,r));return{arrayValue:{values:n}}}class ec extends Mc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function wy(t){return Se(t.integerValue||t.doubleValue)}function J0(t){return Df(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,n){this.field=e,this.transform=n}}function sk(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ho&&s instanceof Ho||r instanceof qo&&s instanceof qo?Js(r.elements,s.elements,cn):r instanceof ec&&s instanceof ec?cn(r.Ae,s.Ae):r instanceof Wo&&s instanceof Wo}(t.transform,e.transform)}class ik{constructor(e,n){this.version=e,this.transformResults=n}}class En{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Oc{}function Z0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tw(t.key,En.none()):new ca(t.key,t.data,En.none());{const n=t.data,r=Pt.empty();let s=new Ve(We.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new cs(t.key,r,new $t(s.toArray()),En.none())}}function ok(t,e,n){t instanceof ca?function(s,i,o){const c=s.value.clone(),u=Ty(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof cs?function(s,i,o){if(!fl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Ty(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(ew(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function mo(t,e,n,r){return t instanceof ca?function(i,o,c,u){if(!fl(i.precondition,o))return c;const d=i.value.clone(),m=Iy(i.fieldTransforms,u,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof cs?function(i,o,c,u){if(!fl(i.precondition,o))return c;const d=Iy(i.fieldTransforms,u,o),m=o.data;return m.setAll(ew(i)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,c){return fl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function ak(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Q0(r.transform,s||null);i!=null&&(n===null&&(n=Pt.empty()),n.set(r.field,i))}return n||null}function Ey(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Js(r,s,(i,o)=>sk(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ca extends Oc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class cs extends Oc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ew(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ty(t,e,n){const r=new Map;ae(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,nk(o,c,n[s]))}return r}function Iy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,tk(i,o,e))}return r}class tw extends Oc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lk extends Oc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ok(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=mo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=mo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=G0();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=Z0(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Js(this.mutations,e.mutations,(n,r)=>Ey(n,r))&&Js(this.baseMutations,e.baseMutations,(n,r)=>Ey(n,r))}}class Ff{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return YA}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ff(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,ie;function hk(t){switch(t){case O.OK:return K(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return K(15467,{code:t})}}function nw(t){if(t===void 0)return kn("GRPC error has no .code"),O.UNKNOWN;switch(t){case Ae.OK:return O.OK;case Ae.CANCELLED:return O.CANCELLED;case Ae.UNKNOWN:return O.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return O.INTERNAL;case Ae.UNAVAILABLE:return O.UNAVAILABLE;case Ae.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Ae.NOT_FOUND:return O.NOT_FOUND;case Ae.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Ae.ABORTED:return O.ABORTED;case Ae.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Ae.DATA_LOSS:return O.DATA_LOSS;default:return K(39323,{code:t})}}(ie=Ae||(Ae={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=new hr([4294967295,4294967295],0);function Sy(t){const e=fk().encode(t),n=new v0;return n.update(e),new Uint8Array(n.digest())}function by(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new hr([n,r],0),new hr([s,i],0)]}class Uf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yi(`Invalid padding: ${n}`);if(r<0)throw new Yi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=hr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(hr.fromNumber(r)));return s.compare(mk)===1&&(s=new hr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Sy(e),[r,s]=by(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Uf(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=Sy(e),[r,s]=by(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Yi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ua.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lc(Y.min(),s,new we(re),Cn(),se())}}class ua{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ua(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class rw{constructor(e,n){this.targetId=e,this.Ce=n}}class sw{constructor(e,n,r=Ge.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ny{constructor(){this.ve=0,this.Fe=Ay(),this.Me=Ge.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=se(),n=se(),r=se();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:K(38017,{changeType:i})}}),new ua(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Ay()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class pk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cn(),this.Je=qa(),this.He=qa(),this.Ye=new we(re)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(sh(i))if(r===0){const o=new q(i.path);this.et(n,o,et.newNoDocument(o,Y.min()))}else ae(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=_r(r).toUint8Array()}catch(u){if(u instanceof k0)return Xs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Uf(o,s,i)}catch(u){return Xs(u instanceof Yi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const c=this.ot(o);if(c){if(i.current&&sh(c.target)){const u=new q(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,et.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=se();this.He.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Lc(e,n,this.Ye,this.je,r);return this.je=Cn(),this.Je=qa(),this.He=qa(),this.Ye=new we(re),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ny,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ve(re),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ve(re),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ny),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function qa(){return new we(q.comparator)}function Ay(){return new we(q.comparator)}const gk={asc:"ASCENDING",desc:"DESCENDING"},yk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vk={and:"AND",or:"OR"};class _k{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function oh(t,e){return t.useProto3Json||Pc(e)?e:{value:e}}function tc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xk(t,e){return tc(t,e.toTimestamp())}function on(t){return ae(!!t,49232),Y.fromTimestamp(function(n){const r=vr(n);return new fe(r.seconds,r.nanos)}(t))}function zf(t,e){return ah(t,e).canonicalString()}function ah(t,e){const n=function(s){return new ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ow(t){const e=ve.fromString(t);return ae(dw(e),10190,{key:e.toString()}),e}function lh(t,e){return zf(t.databaseId,e.path)}function Wu(t,e){const n=ow(e);if(n.get(1)!==t.databaseId.projectId)throw new H(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(lw(n))}function aw(t,e){return zf(t.databaseId,e)}function wk(t){const e=ow(t);return e.length===4?ve.emptyPath():lw(e)}function ch(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lw(t){return ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ky(t,e,n){return{name:lh(t,e),fields:n.value.mapValue.fields}}function Ek(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:K(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(ae(m===void 0||typeof m=="string",58123),Ge.fromBase64String(m||"")):(ae(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Ge.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const m=d.code===void 0?O.UNKNOWN:nw(d.code);return new H(m,d.message||"")}(o);n=new sw(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Wu(t,r.document.name),i=on(r.document.updateTime),o=r.document.createTime?on(r.document.createTime):Y.min(),c=new Pt({mapValue:{fields:r.document.fields}}),u=et.newFoundDocument(s,i,o,c),d=r.targetIds||[],m=r.removedTargetIds||[];n=new ml(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Wu(t,r.document),i=r.readTime?on(r.readTime):Y.min(),o=et.newNoDocument(s,i),c=r.removedTargetIds||[];n=new ml([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Wu(t,r.document),i=r.removedTargetIds||[];n=new ml([],i,s,null)}else{if(!("filter"in e))return K(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new dk(s,i),c=r.targetId;n=new rw(c,o)}}return n}function Tk(t,e){let n;if(e instanceof ca)n={update:ky(t,e.key,e.value)};else if(e instanceof tw)n={delete:lh(t,e.key)};else if(e instanceof cs)n={update:ky(t,e.key,e.data),updateMask:jk(e.fieldMask)};else{if(!(e instanceof lk))return K(16599,{Vt:e.type});n={verify:lh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Wo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ho)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof qo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ec)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw K(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:xk(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:K(27497)}(t,e.precondition)),n}function Ik(t,e){return t&&t.length>0?(ae(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?on(s.updateTime):on(i);return o.isEqual(Y.min())&&(o=on(i)),new ik(o,s.transformResults||[])}(n,e))):[]}function Sk(t,e){return{documents:[aw(t,e.path)]}}function bk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=aw(t,s);const i=function(d){if(d.length!==0)return uw(un.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:vs(g.field),direction:kk(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=oh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function Nk(t){let e=wk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ae(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=cw(p);return g instanceof un&&F0(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(k){return new Zl(_s(k.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,Pc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,w=p.values||[];return new Jl(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,w=p.values||[];return new Jl(w,g)}(n.endAt)),WA(e,s,o,i,c,"F",u,d)}function Ak(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_s(n.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=_s(n.unaryFilter.field);return Re.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_s(n.unaryFilter.field);return Re.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_s(n.unaryFilter.field);return Re.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(t):t.fieldFilter!==void 0?function(n){return Re.create(_s(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return un.create(n.compositeFilter.filters.map(r=>cw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(t):K(30097,{filter:t})}function kk(t){return gk[t]}function Ck(t){return yk[t]}function Pk(t){return vk[t]}function vs(t){return{fieldPath:t.canonicalString()}}function _s(t){return We.fromServerFormat(t.fieldPath)}function uw(t){return t instanceof Re?function(n){if(n.op==="=="){if(gy(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NAN"}};if(py(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gy(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NAN"}};if(py(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vs(n.field),op:Ck(n.op),value:n.value}}}(t):t instanceof un?function(n){const r=n.getFilters().map(s=>uw(s));return r.length===1?r[0]:{compositeFilter:{op:Pk(n.op),filters:r}}}(t):K(54877,{filter:t})}function jk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function dw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,r,s,i=Y.min(),o=Y.min(),c=Ge.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Zn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.yt=e}}function Dk(t){const e=Nk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ih(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.Cn=new Mk}addToCollectionParentIndex(e,n){return this.Cn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(yr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(yr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class Mk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ve(ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ve(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hw=41943040;class ut{static withCacheSize(e){return new ut(e,ut.DEFAULT_COLLECTION_PERCENTILE,ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ut.DEFAULT_COLLECTION_PERCENTILE=10,ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ut.DEFAULT=new ut(hw,ut.DEFAULT_COLLECTION_PERCENTILE,ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ut.DISABLED=new ut(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ti(0)}static cr(){return new ti(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="LruGarbageCollector",Ok=1048576;function jy([t,e],[n,r]){const s=re(t,n);return s===0?re(e,r):s}class Lk{constructor(e){this.Ir=e,this.buffer=new Ve(jy),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();jy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Fk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(Py,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){mi(n)?$(Py,"Ignoring IndexedDB error during garbage collection: ",n):await fi(n)}await this.Vr(3e5)})}}class Uk{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Cc.ce);const r=new Lk(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(Cy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cy):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),gs()<=ne.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function zk(t,e){return new Uk(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this.changes=new ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&mo(r.mutation,s,$t.empty(),fe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const s=$r();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Qi();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=$r();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=Cn();const o=fo(),c=function(){return fo()}();return n.forEach((u,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof cs)?i=i.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),mo(m.mutation,d,m.mutation.getFieldMask(),fe.now())):o.set(d.key,$t.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,m)=>o.set(d,m)),n.forEach((d,m)=>c.set(d,new $k(m,o.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=fo();let s=new we((o,c)=>o-c),i=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let m=r.get(u)||$t.empty();m=c.applyToLocalView(d,m),r.set(u,m);const p=(s.get(c.batchId)||se()).add(u);s=s.insert(c.batchId,p)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,p=G0();m.forEach(g=>{if(!i.has(g)){const w=Z0(n.get(g),r.get(g));w!==null&&p.set(g,w),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):HA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve($r());let c=Uo,u=i;return o.next(d=>V.forEach(d,(m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(m)?V.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{u=u.insert(m,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,se())).next(m=>({batchId:c,changes:q0(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let s=Qi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Qi();return this.indexManager.getCollectionParents(e,i).next(c=>V.forEach(c,u=>{const d=function(p,g){return new Rc(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,et.newInvalidDocument(m)))});let c=Qi();return o.forEach((u,d)=>{const m=i.get(u);m!==void 0&&mo(m.mutation,d,$t.empty(),fe.now()),Vc(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return V.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:on(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Dk(s.bundledQuery),readTime:on(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.overlays=new we(q.comparator),this.qr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$r();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=$r(),i=n.length+1,o=new q(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new we((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=i.get(d.largestBatchId);m===null&&(m=$r(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=$r(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=s)););return V.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new uk(n,r));let i=this.qr.get(n);i===void 0&&(i=se(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(){this.Qr=new Ve(Oe.$r),this.Ur=new Ve(Oe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Oe(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Oe(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new q(new ve([])),r=new Oe(n,e),s=new Oe(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new q(new ve([])),r=new Oe(n,e),s=new Oe(n,e+1);let i=se();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Oe(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Oe{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return q.comparator(e.key,n.key)||re(e.Yr,n.Yr)}static Kr(e,n){return re(e.Yr,n.Yr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ve(Oe.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ck(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new Oe(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?jf:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Oe(n,0),s=new Oe(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const c=this.Xr(o.Yr);i.push(c)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ve(re);return n.forEach(s=>{const i=new Oe(s,0),o=new Oe(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],c=>{r=r.add(c.Yr)})}),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;q.isDocumentKey(i)||(i=i.child(""));const o=new Oe(new q(i),0);let c=new Ve(re);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Yr)),!0)},o),V.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ae(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(n.mutations,s=>{const i=new Oe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Oe(n,0),s=this.Zr.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.ri=e,this.docs=function(){return new we(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():et.newInvalidDocument(n))}getEntries(e,n){let r=Cn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():et.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Cn();const o=n.path,c=new q(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||EA(wA(m),r)<=0||(s.has(m.key)||Vc(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){K(9500)}ii(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Yk(this)}getSize(e){return V.resolve(this.size)}}class Yk extends Bk{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.persistence=e,this.si=new ls(n=>Vf(n),Mf),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.oi=0,this._i=new Bf,this.targetCount=0,this.ai=ti.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),V.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ti(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Pr(n),V.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Cc(0),this.li=!1,this.li=!0,this.hi=new Gk,this.referenceDelegate=e(this),this.Pi=new Xk(this),this.indexManager=new Vk,this.remoteDocumentCache=function(s){return new Qk(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Rk(n),this.Ii=new Hk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Kk(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const s=new Jk(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return V.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Jk extends IA{constructor(e){super(),this.currentSequenceNumber=e}}class $f{constructor(e){this.persistence=e,this.Ri=new Bf,this.Vi=null}static mi(e){return new $f(e)}get fi(){if(this.Vi)return this.Vi;throw K(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),V.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,r=>{const s=q.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Y.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class nc{constructor(e,n){this.persistence=e,this.pi=new ls(r=>NA(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=zk(this,n)}static mi(e,n){return new nc(e,n)}Ei(){}di(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return V.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?V.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(c=>{c||(r++,i.removeEntry(o,Y.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=dl(e.data.value)),n}br(e,n,r){return V.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=se(),s=se();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Wf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return N2()?8:SA(rt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Zk;return this.Ss(e,n,o).next(c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(gs()<=ne.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",ys(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(gs()<=ne.DEBUG&&$("QueryEngine","Query:",ys(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(gs()<=ne.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",ys(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sn(n))):V.resolve())}ys(e,n){if(xy(n))return V.resolve(null);let r=sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ih(n,null,"F"),r=sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=se(...i);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,ih(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return xy(n)||s.isEqual(Y.min())?V.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?V.resolve(null):(gs()<=ne.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ys(n)),this.vs(e,o,n,xA(s,Uo)).next(c=>c))})}Ds(e,n){let r=new Ve(W0(e));return n.forEach((s,i)=>{Vc(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return gs()<=ne.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",ys(n)),this.ps.getDocumentsMatchingQuery(e,n,yr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="LocalStore",tC=3e8;class nC{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new we(re),this.xs=new ls(i=>Vf(i),Mf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function rC(t,e,n,r){return new nC(t,e,n,r)}async function mw(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=se();for(const d of s){o.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of i){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:c}))})})}function sC(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,m){const p=d.batch,g=p.keys();let w=V.resolve();return g.forEach(k=>{w=w.next(()=>m.getEntry(u,k)).next(C=>{const S=d.docVersions.get(k);ae(S!==null,48541),C.version.compareTo(S)<0&&(p.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),m.addEntry(C)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=se();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function pw(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function iC(t,e){const n=X(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach((m,p)=>{const g=s.get(p);if(!g)return;c.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(Ge.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):m.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(m.resumeToken,r)),s=s.insert(p,w),function(C,S,_){return C.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=tC?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(g,w,m)&&c.push(n.Pi.updateTargetData(i,w))});let u=Cn(),d=se();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),c.push(oC(i,o,e.documentUpdates).next(m=>{u=m.ks,d=m.qs})),!r.isEqual(Y.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(m)}return V.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ms=s,i))}function oC(t,e,n){let r=se(),s=se();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Cn();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):$(Hf,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:s}})}function aC(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=jf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lC(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Zn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function uh(t,e,n){const r=X(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!mi(o))throw o;$(Hf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Ry(t,e,n){const r=X(t);let s=Y.min(),i=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,m){const p=X(u),g=p.xs.get(m);return g!==void 0?V.resolve(p.Ms.get(g)):p.Pi.getTargetData(d,m)}(r,o,sn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Y.min(),n?i:se())).next(c=>(cC(r,GA(e),c),{documents:c,Qs:i})))}function cC(t,e,n){let r=t.Os.get(e)||Y.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Dy{constructor(){this.activeTargetIds=ZA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uC{constructor(){this.Mo=new Dy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Dy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="ConnectivityMonitor";class My{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(Vy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$(Vy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga=null;function dh(){return Ga===null?Ga=function(){return 268435456+Math.round(2147483648*Math.random())}():Ga++,"0x"+Ga.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu="RestConnection",hC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Yl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=dh(),c=this.zo(e,n.toUriEncodedString());$(Hu,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:d}=new URL(c),m=ci(d);return this.Jo(e,c,u,r,m).then(p=>($(Hu,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Xs(Hu,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",r),p})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=hC[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe="WebChannelConnection";class pC extends fC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=dh();return new Promise((c,u)=>{const d=new _0;d.setWithCredentials(!0),d.listenOnce(x0.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ul.NO_ERROR:const p=d.getResponseJson();$(Xe,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case ul.TIMEOUT:$(Xe,`RPC '${e}' ${o} timed out`),u(new H(O.DEADLINE_EXCEEDED,"Request time out"));break;case ul.HTTP_ERROR:const g=d.getStatus();if($(Xe,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const k=w==null?void 0:w.error;if(k&&k.status&&k.message){const C=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(x)>=0?x:O.UNKNOWN}(k.status);u(new H(C,k.message))}else u(new H(O.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new H(O.UNAVAILABLE,"Connection failed."));break;default:K(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{$(Xe,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);$(Xe,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",m,r,15)})}T_(e,n,r){const s=dh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=T0(),c=E0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=i.join("");$(Xe,`Creating RPC '${e}' stream ${s}: ${m}`,u);const p=o.createWebChannel(m,u);this.I_(p);let g=!1,w=!1;const k=new mC({Yo:S=>{w?$(Xe,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(g||($(Xe,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),$(Xe,`RPC '${e}' stream ${s} sending:`,S),p.send(S))},Zo:()=>p.close()}),C=(S,_,x)=>{S.listen(_,A=>{try{x(A)}catch(D){setTimeout(()=>{throw D},0)}})};return C(p,Ki.EventType.OPEN,()=>{w||($(Xe,`RPC '${e}' stream ${s} transport opened.`),k.o_())}),C(p,Ki.EventType.CLOSE,()=>{w||(w=!0,$(Xe,`RPC '${e}' stream ${s} transport closed`),k.a_(),this.E_(p))}),C(p,Ki.EventType.ERROR,S=>{w||(w=!0,Xs(Xe,`RPC '${e}' stream ${s} transport errored. Name:`,S.name,"Message:",S.message),k.a_(new H(O.UNAVAILABLE,"The operation could not be completed")))}),C(p,Ki.EventType.MESSAGE,S=>{var _;if(!w){const x=S.data[0];ae(!!x,16349);const A=x,D=(A==null?void 0:A.error)||((_=A[0])==null?void 0:_.error);if(D){$(Xe,`RPC '${e}' stream ${s} received error:`,D);const F=D.status;let z=function(T){const b=Ae[T];if(b!==void 0)return nw(b)}(F),E=D.message;z===void 0&&(z=O.INTERNAL,E="Unknown error status: "+F+" with message "+D.message),w=!0,k.a_(new H(z,E)),p.close()}else $(Xe,`RPC '${e}' stream ${s} received:`,x),k.u_(x)}}),C(c,w0.STAT_EVENT,S=>{S.stat===Zd.PROXY?$(Xe,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===Zd.NOPROXY&&$(Xe,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function qu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t){return new _k(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&$("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="PersistentStream";class yw{constructor(e,n,r,s,i,o,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(kn(n.toString()),kn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new H(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $(Oy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():($(Oy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gC extends yw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Ek(this.serializer,e),r=function(i){if(!("targetChange"in i))return Y.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?on(o.readTime):Y.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=ch(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=sh(u)?{documents:Sk(i,u)}:{query:bk(i,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=iw(i,o.resumeToken);const d=oh(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Y.min())>0){c.readTime=tc(i,o.snapshotVersion.toTimestamp());const d=oh(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=Ak(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=ch(this.serializer),n.removeTarget=e,this.q_(n)}}class yC extends yw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Ik(e.writeResults,e.commitTime),r=on(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ch(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Tk(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{}class _C extends vC{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new H(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,ah(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(O.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,ah(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(O.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class xC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(kn(n),this.aa=!1):$("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="RemoteStore";class wC{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{us(this)&&($(rs,"Restarting streams for network reachability change."),await async function(u){const d=X(u);d.Ea.add(4),await da(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Uc(d)}(this))})}),this.Ra=new xC(r,s)}}async function Uc(t){if(us(t))for(const e of t.da)await e(!0)}async function da(t){for(const e of t.da)await e(!1)}function vw(t,e){const n=X(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Qf(n)?Kf(n):pi(n).O_()&&Gf(n,e))}function qf(t,e){const n=X(t),r=pi(n);n.Ia.delete(e),r.O_()&&_w(n,e),n.Ia.size===0&&(r.O_()?r.L_():us(n)&&n.Ra.set("Unknown"))}function Gf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pi(t).Y_(e)}function _w(t,e){t.Va.Ue(e),pi(t).Z_(e)}function Kf(t){t.Va=new pk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),pi(t).start(),t.Ra.ua()}function Qf(t){return us(t)&&!pi(t).x_()&&t.Ia.size>0}function us(t){return X(t).Ea.size===0}function xw(t){t.Va=void 0}async function EC(t){t.Ra.set("Online")}async function TC(t){t.Ia.forEach((e,n)=>{Gf(t,e)})}async function IC(t,e){xw(t),Qf(t)?(t.Ra.ha(e),Kf(t)):t.Ra.set("Unknown")}async function SC(t,e,n){if(t.Ra.set("Online"),e instanceof sw&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(r){$(rs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rc(t,r)}else if(e instanceof ml?t.Va.Ze(e):e instanceof rw?t.Va.st(e):t.Va.tt(e),!n.isEqual(Y.min()))try{const r=await pw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=i.Ia.get(d);m&&i.Ia.set(d,m.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const m=i.Ia.get(u);if(!m)return;i.Ia.set(u,m.withResumeToken(Ge.EMPTY_BYTE_STRING,m.snapshotVersion)),_w(i,u);const p=new Zn(m.target,u,d,m.sequenceNumber);Gf(i,p)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){$(rs,"Failed to raise snapshot:",r),await rc(t,r)}}async function rc(t,e,n){if(!mi(e))throw e;t.Ea.add(1),await da(t),t.Ra.set("Offline"),n||(n=()=>pw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(rs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Uc(t)})}function ww(t,e){return e().catch(n=>rc(t,n,e))}async function zc(t){const e=X(t),n=wr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jf;for(;bC(e);)try{const s=await aC(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,NC(e,s)}catch(s){await rc(e,s)}Ew(e)&&Tw(e)}function bC(t){return us(t)&&t.Ta.length<10}function NC(t,e){t.Ta.push(e);const n=wr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Ew(t){return us(t)&&!wr(t).x_()&&t.Ta.length>0}function Tw(t){wr(t).start()}async function AC(t){wr(t).ra()}async function kC(t){const e=wr(t);for(const n of t.Ta)e.ea(n.mutations)}async function CC(t,e,n){const r=t.Ta.shift(),s=Ff.from(r,e,n);await ww(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await zc(t)}async function PC(t,e){e&&wr(t).X_&&await async function(r,s){if(function(o){return hk(o)&&o!==O.ABORTED}(s.code)){const i=r.Ta.shift();wr(r).B_(),await ww(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await zc(r)}}(t,e),Ew(t)&&Tw(t)}async function Ly(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),$(rs,"RemoteStore received new credentials");const r=us(n);n.Ea.add(3),await da(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Uc(n)}async function jC(t,e){const n=X(t);e?(n.Ea.delete(2),await Uc(n)):e||(n.Ea.add(2),await da(n),n.Ra.set("Unknown"))}function pi(t){return t.ma||(t.ma=function(n,r,s){const i=X(n);return i.sa(),new gC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:EC.bind(null,t),t_:TC.bind(null,t),r_:IC.bind(null,t),H_:SC.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Qf(t)?Kf(t):t.Ra.set("Unknown")):(await t.ma.stop(),xw(t))})),t.ma}function wr(t){return t.fa||(t.fa=function(n,r,s){const i=X(n);return i.sa(),new yC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:AC.bind(null,t),r_:PC.bind(null,t),ta:kC.bind(null,t),na:CC.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await zc(t)):(await t.fa.stop(),t.Ta.length>0&&($(rs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Yf(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xf(t,e){if(kn("AsyncQueue",`${e}: ${t}`),mi(t))return new H(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{static emptySet(e){return new Bs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=Qi(),this.sortedSet=new we(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Bs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(){this.ga=new we(q.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):K(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ni{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new ni(e,n,Bs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class DC{constructor(){this.queries=Uy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=X(n),i=s.queries;s.queries=Uy(),i.forEach((o,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new H(O.ABORTED,"Firestore shutting down"))}}function Uy(){return new ls(t=>$0(t),Dc)}async function VC(t,e){const n=X(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new RC,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Xf(o,`Initialization of query '${ys(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Jf(n)}async function MC(t,e){const n=X(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function OC(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&Jf(n)}function LC(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Jf(t){t.Ca.forEach(e=>{e.next()})}var hh,zy;(zy=hh||(hh={})).Ma="default",zy.Cache="cache";class FC{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ni(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ni.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==hh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e){this.key=e}}class Sw{constructor(e){this.key=e}}class UC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=se(),this.mutatedKeys=se(),this.eu=W0(e),this.tu=new Bs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Fy,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const g=s.get(m),w=Vc(this.query,p)?p:null,k=!!g&&this.mutatedKeys.has(g.key),C=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let S=!1;g&&w?g.data.isEqual(w.data)?k!==C&&(r.track({type:3,doc:w}),S=!0):this.su(g,w)||(r.track({type:2,doc:w}),S=!0,(u&&this.eu(w,u)>0||d&&this.eu(w,d)<0)&&(c=!0)):!g&&w?(r.track({type:0,doc:w}),S=!0):g&&!w&&(r.track({type:1,doc:g}),S=!0,(u||d)&&(c=!0)),S&&(w?(o=o.add(w),i=C?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(w,k){const C=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{Rt:S})}};return C(w)-C(k)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new ni(this.query,e.tu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Fy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Sw(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Iw(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=se();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ni.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zf="SyncEngine";class zC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class BC{constructor(e){this.key=e,this.hu=!1}}class $C{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ls(c=>$0(c),Dc),this.Iu=new Map,this.Eu=new Set,this.du=new we(q.comparator),this.Au=new Map,this.Ru=new Bf,this.Vu={},this.mu=new Map,this.fu=ti.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WC(t,e,n=!0){const r=Pw(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await bw(r,e,n,!0),s}async function HC(t,e){const n=Pw(t);await bw(n,e,!0,!1)}async function bw(t,e,n,r){const s=await lC(t.localStore,sn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await qC(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&vw(t.remoteStore,s),c}async function qC(t,e,n,r,s){t.pu=(p,g,w)=>async function(C,S,_,x){let A=S.view.ru(_);A.Cs&&(A=await Ry(C.localStore,S.query,!1).then(({documents:E})=>S.view.ru(E,A)));const D=x&&x.targetChanges.get(S.targetId),F=x&&x.targetMismatches.get(S.targetId)!=null,z=S.view.applyChanges(A,C.isPrimaryClient,D,F);return $y(C,S.targetId,z.au),z.snapshot}(t,p,g,w);const i=await Ry(t.localStore,e,!0),o=new UC(e,i.Qs),c=o.ru(i.documents),u=ua.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);$y(t,n,d.au);const m=new zC(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function GC(t,e,n){const r=X(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Dc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await uh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&qf(r.remoteStore,s.targetId),fh(r,s.targetId)}).catch(fi)):(fh(r,s.targetId),await uh(r.localStore,s.targetId,!0))}async function KC(t,e){const n=X(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qf(n.remoteStore,r.targetId))}async function QC(t,e,n){const r=nP(t);try{const s=await function(o,c){const u=X(o),d=fe.now(),m=c.reduce((w,k)=>w.add(k.key),se());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let k=Cn(),C=se();return u.Ns.getEntries(w,m).next(S=>{k=S,k.forEach((_,x)=>{x.isValidDocument()||(C=C.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,k)).next(S=>{p=S;const _=[];for(const x of c){const A=ak(x,p.get(x.key).overlayedDocument);A!=null&&_.push(new cs(x.key,A,M0(A.value.mapValue),En.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,_,c)}).next(S=>{g=S;const _=S.applyToLocalDocumentSet(p,C);return u.documentOverlayCache.saveOverlays(w,S.batchId,_)})}).then(()=>({batchId:g.batchId,changes:q0(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new we(re)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await ha(r,s.changes),await zc(r.remoteStore)}catch(s){const i=Xf(s,"Failed to persist write");n.reject(i)}}async function Nw(t,e){const n=X(t);try{const r=await iC(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ae(o.hu,14607):s.removedDocuments.size>0&&(ae(o.hu,42227),o.hu=!1))}),await ha(n,r,e)}catch(r){await fi(r)}}function By(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=X(o);u.onlineState=c;let d=!1;u.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(c)&&(d=!0)}),d&&Jf(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function YC(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new we(q.comparator);o=o.insert(i,et.newNoDocument(i,Y.min()));const c=se().add(i),u=new Lc(Y.min(),new Map,new we(re),o,c);await Nw(r,u),r.du=r.du.remove(i),r.Au.delete(e),em(r)}else await uh(r.localStore,e,!1).then(()=>fh(r,e,n)).catch(fi)}async function XC(t,e){const n=X(t),r=e.batch.batchId;try{const s=await sC(n.localStore,e);kw(n,r,null),Aw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ha(n,s)}catch(s){await fi(s)}}async function JC(t,e,n){const r=X(t);try{const s=await function(o,c){const u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(ae(p!==null,37113),m=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,e);kw(r,e,n),Aw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ha(r,s)}catch(s){await fi(s)}}function Aw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function kw(t,e,n){const r=X(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function fh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Cw(t,r)})}function Cw(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(qf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),em(t))}function $y(t,e,n){for(const r of n)r instanceof Iw?(t.Ru.addReference(r.key,e),ZC(t,r)):r instanceof Sw?($(Zf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Cw(t,r.key)):K(19791,{wu:r})}function ZC(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||($(Zf,"New document in limbo: "+n),t.Eu.add(r),em(t))}function em(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new q(ve.fromString(e)),r=t.fu.next();t.Au.set(r,new BC(n)),t.du=t.du.insert(n,r),vw(t.remoteStore,new Zn(sn(Of(n.path)),r,"TargetPurposeLimboResolution",Cc.ce))}}async function ha(t,e,n){const r=X(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Wf.As(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,d){const m=X(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(d,g=>V.forEach(g.Es,w=>m.persistence.referenceDelegate.addReference(p,g.targetId,w)).next(()=>V.forEach(g.ds,w=>m.persistence.referenceDelegate.removeReference(p,g.targetId,w)))))}catch(p){if(!mi(p))throw p;$(Hf,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const w=m.Ms.get(g),k=w.snapshotVersion,C=w.withLastLimboFreeSnapshotVersion(k);m.Ms=m.Ms.insert(g,C)}}}(r.localStore,i))}async function eP(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){$(Zf,"User change. New user:",e.toKey());const r=await mw(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new H(O.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ha(n,r.Ls)}}function tP(t,e){const n=X(t),r=n.Au.get(e);if(r&&r.hu)return se().add(r.key);{let s=se();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function Pw(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YC.bind(null,e),e.Pu.H_=OC.bind(null,e.eventManager),e.Pu.yu=LC.bind(null,e.eventManager),e}function nP(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JC.bind(null,e),e}class sc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return rC(this.persistence,new eC,e.initialUser,this.serializer)}Cu(e){return new fw($f.mi,this.serializer)}Du(e){return new uC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sc.provider={build:()=>new sc};class rP extends sc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ae(this.persistence.referenceDelegate instanceof nc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Fk(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ut.withCacheSize(this.cacheSizeBytes):ut.DEFAULT;return new fw(r=>nc.mi(r,n),this.serializer)}}class mh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>By(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eP.bind(null,this.syncEngine),await jC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DC}()}createDatastore(e){const n=Fc(e.databaseInfo.databaseId),r=function(i){return new pC(i)}(e.databaseInfo);return function(i,o,c,u){return new _C(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new wC(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>By(this.syncEngine,n,0),function(){return My.v()?new My:new dC}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,m){const p=new $C(s,i,o,c,u,d);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=X(s);$(rs,"RemoteStore shutting down."),i.Ea.add(5),await da(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}mh.provider={build:()=>new mh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):kn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="FirestoreClient";class iP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Je.UNAUTHENTICATED,this.clientId=Cf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{$(Er,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($(Er,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Xf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gu(t,e){t.asyncQueue.verifyOperationInProgress(),$(Er,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await mw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Wy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oP(t);$(Er,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ly(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ly(e.remoteStore,s)),t._onlineComponents=e}async function oP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(Er,"Using user provided OfflineComponentProvider");try{await Gu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Xs("Error using user provided cache. Falling back to memory cache: "+n),await Gu(t,new sc)}}else $(Er,"Using default OfflineComponentProvider"),await Gu(t,new rP(void 0));return t._offlineComponents}async function jw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(Er,"Using user provided OnlineComponentProvider"),await Wy(t,t._uninitializedComponentsProvider._online)):($(Er,"Using default OnlineComponentProvider"),await Wy(t,new mh))),t._onlineComponents}function aP(t){return jw(t).then(e=>e.syncEngine)}async function lP(t){const e=await jw(t),n=e.eventManager;return n.onListen=WC.bind(null,e.syncEngine),n.onUnlisten=GC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=HC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KC.bind(null,e.syncEngine),n}function cP(t,e,n={}){const r=new fr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const m=new sP({next:g=>{m.Nu(),o.enqueueAndForget(()=>MC(i,p));const w=g.docs.has(c);!w&&g.fromCache?d.reject(new H(O.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new H(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new FC(Of(c.path),m,{includeMetadataChanges:!0,qa:!0});return VC(i,p)}(await lP(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="firestore.googleapis.com",qy=!0;class Gy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new H(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Dw,this.ssl=qy}else this.host=e.host,this.ssl=e.ssl??qy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ok)throw new H(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_A("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rw(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new H(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new H(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new H(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lA;switch(r.type){case"firstParty":return new hA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Hy.get(n);r&&($("ComponentProvider","Removing Datastore"),Hy.delete(n),r.terminate())}(this),Promise.resolve()}}function uP(t,e,n,r={}){var d;t=Fo(t,tm);const s=ci(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Cx(`https://${c}`),Px("Firestore",!0)),i.host!==Dw&&i.host!==c&&Xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!Jr(u,o)&&(t._setSettings(u),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=Je.MOCK_USER;else{m=v2(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new H(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Je(g)}t._authCredentials=new cA(new S0(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new nm(this.firestore,e,this._query)}}class Fe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fe(this.firestore,e,this._key)}toJSON(){return{type:Fe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(la(n,Fe._jsonSchema))return new Fe(e,r||null,new q(ve.fromString(n.referencePath)))}}Fe._jsonSchemaVersion="firestore/documentReference/1.0",Fe._jsonSchema={type:Ce("string",Fe._jsonSchemaVersion),referencePath:Ce("string")};class Go extends nm{constructor(e,n,r){super(e,n,Of(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fe(this.firestore,null,new q(e))}withConverter(e){return new Go(this.firestore,e,this._path)}}function Ky(t,e,...n){if(t=Tt(t),arguments.length===1&&(e=Cf.newId()),vA("doc","path",e),t instanceof tm){const r=ve.fromString(e,...n);return ay(r),new Fe(t,null,new q(r))}{if(!(t instanceof Fe||t instanceof Go))throw new H(O.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return ay(r),new Fe(t.firestore,t instanceof Go?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="AsyncQueue";class Yy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gw(this,"async_queue_retry"),this._c=()=>{const r=qu();r&&$(Qy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=qu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=qu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new fr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!mi(e))throw e;$(Qy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,kn("INTERNAL UNHANDLED ERROR: ",Xy(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Yf.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&K(47125,{Pc:Xy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Xy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class rm extends tm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Yy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yy(e),this._firestoreClient=void 0,await e}}}function dP(t,e){const n=typeof t=="object"?t:Vx(),r=typeof t=="string"?t:Yl,s=xf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=g2("firestore");i&&uP(s,...i)}return s}function Vw(t){if(t._terminated)throw new H(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||hP(t),t._firestoreClient}function hP(t){var r,s,i;const e=t._freezeSettings(),n=function(c,u,d,m){return new CA(c,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Rw(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new iP(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jt(Ge.fromBase64String(e))}catch(n){throw new H(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jt(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(la(e,jt._jsonSchema))return jt.fromBase64String(e.bytes)}}jt._jsonSchemaVersion="firestore/bytes/1.0",jt._jsonSchema={type:Ce("string",jt._jsonSchemaVersion),bytes:Ce("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:an._jsonSchemaVersion}}static fromJSON(e){if(la(e,an._jsonSchema))return new an(e.latitude,e.longitude)}}an._jsonSchemaVersion="firestore/geoPoint/1.0",an._jsonSchema={type:Ce("string",an._jsonSchemaVersion),latitude:Ce("number"),longitude:Ce("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ln._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(la(e,ln._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ln(e.vectorValues);throw new H(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ln._jsonSchemaVersion="firestore/vectorValue/1.0",ln._jsonSchema={type:Ce("string",ln._jsonSchemaVersion),vectorValues:Ce("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=/^__.*__$/;class mP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new ca(e,this.data,n,this.fieldTransforms)}}function Mw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ac:t})}}class om{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new om({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ic(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Mw(this.Ac)&&fP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class pP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fc(e)}Cc(e,n,r,s=!1){return new om({Ac:e,methodName:n,Dc:r,path:We.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gP(t){const e=t._freezeSettings(),n=Fc(t._databaseId);return new pP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yP(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Uw("Data must be an object, but it was:",o,r);const c=Lw(r,o);let u,d;if(i.merge)u=new $t(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=vP(e,p,n);if(!o.contains(g))throw new H(O.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);xP(m,g)||m.push(g)}u=new $t(m),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new mP(new Pt(c),u,d)}class am extends im{_toFieldTransform(e){return new rk(e.path,new Wo)}isEqual(e){return e instanceof am}}function Ow(t,e){if(Fw(t=Tt(t)))return Uw("Unsupported field value:",e,t),Lw(t,e);if(t instanceof im)return function(r,s){if(!Mw(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=Ow(c,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ek(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=fe.fromDate(r);return{timestampValue:tc(s.serializer,i)}}if(r instanceof fe){const i=new fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tc(s.serializer,i)}}if(r instanceof an)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jt)return{bytesValue:iw(s.serializer,r._byteString)};if(r instanceof Fe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ln)return function(o,c){return{mapValue:{fields:{[D0]:{stringValue:V0},[Xl]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return Lf(c.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Pf(r)}`)}(t,e)}function Lw(t,e){const n={};return A0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):as(t,(r,s)=>{const i=Ow(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Fw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof fe||t instanceof an||t instanceof jt||t instanceof Fe||t instanceof im||t instanceof ln)}function Uw(t,e,n){if(!Fw(n)||!b0(n)){const r=Pf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function vP(t,e,n){if((e=Tt(e))instanceof sm)return e._internalPath;if(typeof e=="string")return zw(t,e);throw ic("Field path arguments must be of type string or ",t,!1,void 0,n)}const _P=new RegExp("[~\\*/\\[\\]]");function zw(t,e,n){if(e.search(_P)>=0)throw ic(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sm(...e.split("."))._internalPath}catch{throw ic(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ic(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new H(O.INVALID_ARGUMENT,c+t+u)}function xP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($w("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wP extends Bw{data(){return super.data()}}function $w(t,e){return typeof e=="string"?zw(t,e):e instanceof sm?e._internalPath:e._delegate._internalPath}class EP{convertValue(e,n="none"){switch(xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return as(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Xl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Se(o.doubleValue));return new ln(n)}convertGeoPoint(e){return new an(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(zo(e));default:return null}}convertTimestamp(e){const n=vr(e);return new fe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);ae(dw(r),9688,{name:e});const s=new Bo(r.get(1),r.get(3)),i=new q(r.popFirst(5));return s.isEqual(n)||kn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Xi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qr extends Bw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($w("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=qr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}qr._jsonSchemaVersion="firestore/documentSnapshot/1.0",qr._jsonSchema={type:Ce("string",qr._jsonSchemaVersion),bundleSource:Ce("string","DocumentSnapshot"),bundleName:Ce("string"),bundle:Ce("string")};class pl extends qr{data(e={}){return super.data(e)}}class po{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Xi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new pl(this._firestore,this._userDataWriter,r.key,r,new Xi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new pl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Xi(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new pl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Xi(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:IP(c.type),doc:u,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=po._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function IP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(t){t=Fo(t,Fe);const e=Fo(t.firestore,rm);return cP(Vw(e),t._key).then(n=>kP(e,t,n))}po._jsonSchemaVersion="firestore/querySnapshot/1.0",po._jsonSchema={type:Ce("string",po._jsonSchemaVersion),bundleSource:Ce("string","QuerySnapshot"),bundleName:Ce("string"),bundle:Ce("string")};class bP extends EP{constructor(e){super(),this.firestore=e}convertBytes(e){return new jt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fe(this.firestore,null,n)}}function NP(t,e,n){t=Fo(t,Fe);const r=Fo(t.firestore,rm),s=TP(t.converter,e);return AP(r,[yP(gP(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,En.none())])}function AP(t,e){return function(r,s){const i=new fr;return r.asyncQueue.enqueueAndForget(async()=>QC(await aP(r),s,i)),i.promise}(Vw(t),e)}function kP(t,e,n){const r=n.docs.get(e._key),s=new bP(t);return new qr(t,s,e._key,r,new Xi(n.hasPendingWrites,n.fromCache),e.converter)}function Jy(){return new am("serverTimestamp")}(function(e,n=!0){(function(s){hi=s})(ui),Ys(new Zr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new rm(new uA(r.getProvider("auth-internal")),new fA(o,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new H(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bo(d.options.projectId,m)}(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),dr(ry,sy,e),dr(ry,sy,"esm2020")})();const gl={apiKey:"AIzaSyC4M-yydpp7rWqnLeEPigJXcbfDLlao8zQ",authDomain:"marketing-website-management.firebaseapp.com",projectId:"marketing-website-management",storageBucket:"marketing-website-management.firebasestorage.app",messagingSenderId:"106106592866410",appId:"1:106106592866410:web:19aef77097224acbd54cad"};(!gl.apiKey||!gl.authDomain||!gl.projectId)&&(console.error(" Firebase configuration is missing!"),console.error("Please create a .env file with the following variables:"),console.error("  VITE_FIREBASE_API_KEY"),console.error("  VITE_FIREBASE_AUTH_DOMAIN"),console.error("  VITE_FIREBASE_PROJECT_ID"),console.error("  VITE_FIREBASE_STORAGE_BUCKET"),console.error("  VITE_FIREBASE_MESSAGING_SENDER_ID"),console.error("  VITE_FIREBASE_APP_ID"),console.error(`
Get these from: Firebase Console > Project Settings > Your apps > Web app`));let oc;if(Rg().length===0)try{oc=Dx(gl),console.log(" Firebase initialized successfully")}catch(t){throw console.error(" Firebase initialization failed:",t),t}else oc=Rg()[0];const ps=oA(oc),Zy=dP(oc),Ww=M.createContext(void 0);function CP({children:t}){const[e,n]=M.useState(!1),[r,s]=M.useState(null),[i,o]=M.useState(!0),c=async C=>{try{const S=await SP(Ky(Zy,"users",C.uid));if(!S.exists())return console.error("User document not found in Firestore"),null;const _=S.data();return _.isActive?{id:C.uid,email:_.email||C.email||"",fullName:_.fullName||"",role:_.role,phone:_.phone||""}:(console.error("User account is inactive"),null)}catch(S){return console.error("Error fetching user data:",S),null}};M.useEffect(()=>{const C=Kb(ps,async S=>{if(o(!0),S){const _=await c(S);_?(s(_),n(!0)):(s(null),n(!1))}else s(null),n(!1);o(!1)});return()=>C()},[]);const u=async(C,S)=>{try{if(!ps)throw console.error("Firebase Auth not initialized. Check your Firebase configuration."),new Error("Firebase Auth not initialized. Please check your configuration.");await Hb(ps,C,S)}catch(_){throw console.error("Sign in error:",_),console.error("Error code:",_.code),console.error("Error message:",_.message),_.code==="auth/user-not-found"?new Error("auth/user-not-found - No user found with this email. Please create an account first."):_.code==="auth/wrong-password"?new Error("auth/wrong-password - Incorrect password."):_.code==="auth/invalid-email"?new Error("auth/invalid-email - Invalid email address format."):_.code==="auth/user-disabled"?new Error("auth/user-disabled - This account has been disabled."):_.code==="auth/too-many-requests"?new Error("auth/too-many-requests - Too many failed login attempts. Please try again later."):_.code==="auth/network-request-failed"?new Error("auth/network-request-failed - Network error. Please check your internet connection."):_.code==="auth/invalid-api-key"?new Error("auth/invalid-api-key - Firebase API key is invalid. Check your .env file."):_.code==="auth/configuration-not-found"?new Error("auth/configuration-not-found - Firebase configuration not found. Check your .env file."):new Error(_.message||_.code||"Failed to sign in")}},d=async C=>{try{if(!ps)throw new Error("Firebase Auth not initialized. Please check your configuration.");const _=(await Wb(ps,C.email,C.password)).user;await NP(Ky(Zy,"users",_.uid),{email:C.email,fullName:C.fullName,phone:C.phone,role:C.role,isActive:!0,createdAt:Jy(),updatedAt:Jy()})}catch(S){throw console.error("Sign up error:",S),console.error("Error code:",S.code),console.error("Error message:",S.message),S.code==="auth/email-already-in-use"?new Error("An account with this email already exists."):S.code==="auth/invalid-email"?new Error("Invalid email address format."):S.code==="auth/weak-password"?new Error("Password is too weak. Please use at least 6 characters."):S.code==="auth/operation-not-allowed"?new Error("Email/password accounts are not enabled. Please contact support."):new Error(S.message||"Failed to create account")}},m=async()=>{try{await Qb(ps)}catch(C){throw console.error("Sign out error:",C),new Error(C.message||"Failed to sign out")}},p=C=>{if(!r)return;const S={...r,role:C};s(S)},g=C=>r?C.includes(r.role):!1,w=C=>r?r.role==="admin"?!0:ta(r.id,r.role).some(_=>_.id===C):!1,k=C=>r?r.role==="admin"||r.role==="web_developer"&&C.assignedTo===r.id||r.role==="client"&&C.createdBy===r.id:!1;return a.jsx(Ww.Provider,{value:{isSignedIn:e,user:r,loading:i,signIn:u,signUp:d,signOut:m,switchRole:p,hasRole:g,canAccessProject:w,canManageTicket:k},children:t})}function bt(){const t=M.useContext(Ww);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}const PP={theme:"system",setTheme:()=>null},jP=M.createContext(PP);function RP({children:t,defaultTheme:e="system",storageKey:n="vite-ui-theme",...r}){const[s,i]=M.useState(()=>localStorage.getItem(n)||e);M.useEffect(()=>{const c=window.document.documentElement;if(c.classList.remove("light","dark"),s==="system"){const u=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";c.classList.add(u);return}c.classList.add(s)},[s]);const o={theme:s,setTheme:c=>{localStorage.setItem(n,c),i(c)}};return a.jsx(jP.Provider,{...r,value:o,children:t})}function Hw(t){return(typeof t=="string"?new Date(t):t).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})}function Ko(t){const e=typeof t=="string"?new Date(t):t,r=new Date().getTime()-e.getTime(),s=Math.floor(r/6e4),i=Math.floor(r/36e5),o=Math.floor(r/864e5);return s<1?"just now":s<60?`${s} minute${s>1?"s":""} ago`:i<24?`${i} hour${i>1?"s":""} ago`:o<30?`${o} day${o>1?"s":""} ago`:Hw(e)}function qw(t){return t.charAt(0).toUpperCase()+t.slice(1)}function DP(t){return{admin:"Administrator",web_developer:"Web Developer",social_media_coordinator:"Social Media Coordinator",client:"Client"}[t]}function VP(t){return{admin:"bg-purple-100 text-purple-700 border-purple-200",web_developer:"bg-blue-100 text-blue-700 border-blue-200",social_media_coordinator:"bg-pink-100 text-pink-700 border-pink-200",client:"bg-green-100 text-green-700 border-green-200"}[t]}function Qo(t){return{planning:"Planning",design:"Design",development:"Development",testing:"Testing",launch:"Launch",maintenance:"Maintenance"}[t]}function MP(t){return{planning:16.67,design:33.33,development:50,testing:66.67,launch:83.33,maintenance:100}[t]}function OP(t){return{open:"bg-blue-100 text-blue-700 border-blue-200",in_progress:"bg-yellow-100 text-yellow-700 border-yellow-200",resolved:"bg-green-100 text-green-700 border-green-200",closed:"bg-gray-100 text-gray-700 border-gray-200",active:"bg-green-100 text-green-700 border-green-200",paused:"bg-gray-100 text-gray-700 border-gray-200",completed:"bg-green-100 text-green-700 border-green-200"}[t]||"bg-gray-100 text-gray-700 border-gray-200"}function LP(t){return{open:"Open",in_progress:"In Progress",resolved:"Resolved",closed:"Closed",active:"Active",paused:"Paused",completed:"Completed"}[t]||qw(t)}function FP(t){return{low:"bg-gray-100 text-gray-700 border-gray-200",medium:"bg-blue-100 text-blue-700 border-blue-200",high:"bg-orange-100 text-orange-700 border-orange-200",critical:"bg-red-100 text-red-700 border-red-200"}[t]}function UP(t){return qw(t)}function zP(t){return{bug_report:"Bug Report",content_change:"Content Change",design_update:"Design Update",feature_request:"Feature Request"}[t]}function Ji(t){return new Intl.NumberFormat("en-ZA").format(t)}function BP(t){const e=t.trim().split(" ");return e.length===1?e[0].charAt(0).toUpperCase():(e[0].charAt(0)+e[e.length-1].charAt(0)).toUpperCase()}function $P({role:t,className:e=""}){return a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${VP(t)} ${e}`,children:DP(t)})}const WP=[{value:"admin",label:"ADMIN",description:"Full system access and management"},{value:"web_developer",label:"WEB DEVELOPER",description:"Manage projects and tickets"},{value:"social_media_coordinator",label:"SOCIAL MEDIA COORDINATOR",description:"Manage social media and analytics"},{value:"client",label:"CLIENT",description:"View projects and create tickets"}];function HP({className:t}){const{user:e,switchRole:n}=bt(),r=gt(),[s,i]=M.useState(!1);if(!e)return null;const o=c=>{n(c),i(!1),r(c==="admin"?"/admin/dashboard":"/dashboard")};return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>i(!s),className:`flex items-center gap-2 px-4 py-2 rounded-lg bg-primary/10 hover:bg-primary/20 transition ${t}`,children:[a.jsx("svg",{className:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12M8 12h12m-12 5h12M3 7h.01M3 12h.01M3 17h.01"})}),a.jsx("span",{className:"text-sm font-medium",style:{color:"#12265E"},children:"Switch Role"}),a.jsx("svg",{className:`w-4 h-4 text-muted-foreground transition-transform ${s?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),a.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-border z-50 overflow-hidden",children:[a.jsxs("div",{className:"p-4 bg-gradient-to-r from-[#1e2875] to-[#2a3488] text-white",children:[a.jsx("h3",{className:"text-lg font-bold mb-1",children:"Switch Role"}),a.jsxs("p",{className:"text-sm text-white/80",children:["Current Role: ",e.role.replace("_"," ").toUpperCase()]})]}),a.jsxs("div",{className:"p-2",children:[WP.map(c=>a.jsxs("button",{onClick:()=>o(c.value),disabled:e.role===c.value,className:`w-full text-left p-3 rounded-lg transition mb-2 ${e.role===c.value?"bg-blue-50 border-2 border-[#1e2875] cursor-default":"hover:bg-gray-50 border border-transparent"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"font-semibold text-[#1e2875] text-sm",children:c.label}),e.role===c.value&&a.jsx("span",{className:"text-xs bg-[#1e2875] text-white px-2 py-0.5 rounded",children:"Active"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:c.description})]},c.value)),a.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:a.jsxs(ee,{to:"/switch-role",className:"flex items-center justify-center gap-2 w-full p-3 rounded-lg bg-gradient-to-r from-[#1e2875] to-[#2a3488] text-white hover:from-[#2a3488] hover:to-[#1e2875] transition",onClick:()=>i(!1),children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12M8 12h12m-12 5h12M3 7h.01M3 12h.01M3 17h.01"})}),a.jsx("span",{className:"font-semibold text-sm",children:"View All Roles"})]})})]})]})]})]})}function dn(){const{isSignedIn:t,user:e,signOut:n}=bt(),r=gt(),i=li().pathname,o=async()=>{try{await n(),r("/")}catch(u){console.error("Error signing out:",u),r("/")}},c=i==="/admin/dashboard";return a.jsx("nav",{className:"sticky top-0 z-50 border-b border-border bg-background/95 backdrop-blur",children:a.jsxs("div",{className:"container flex items-center justify-between py-4",children:[a.jsxs(ee,{to:"/",className:"flex items-center gap-2 text-2xl font-bold text-primary",children:[a.jsx("img",{src:"/Logo.png",alt:"Logo",className:"h-10 w-auto"}),a.jsx("span",{children:"Marketing Website"})]}),a.jsx("div",{className:"hidden md:flex items-center gap-8",children:t&&a.jsxs(a.Fragment,{children:[a.jsx(ee,{to:"/dashboard",className:"text-foreground hover:text-primary transition",children:"Dashboard"}),(e==null?void 0:e.role)==="admin"&&a.jsx(ee,{to:"/admin/projects",className:"text-foreground hover:text-primary transition",children:"Projects"}),((e==null?void 0:e.role)==="web_developer"||(e==null?void 0:e.role)==="client")&&a.jsx(ee,{to:"/tickets",className:"text-foreground hover:text-primary transition",children:"Tickets"}),(e==null?void 0:e.role)==="social_media_coordinator"&&a.jsx(ee,{to:"/coordinator/projects",className:"text-foreground hover:text-primary transition",children:"My Projects"})]})}),a.jsx("div",{className:"flex items-center gap-4",children:t&&e?a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(HP,{className:c?"bg-white text-foreground hover:bg-gray-100 [&>svg]:text-foreground":""}),a.jsxs("div",{className:"text-sm text-right",children:[a.jsx("p",{className:"font-semibold text-foreground",children:e.fullName}),a.jsx($P,{role:e.role,className:"mt-1"})]}),a.jsx("button",{onClick:o,className:"btn-secondary text-sm",children:"Sign Out"})]}):a.jsxs(a.Fragment,{children:[a.jsx(ee,{to:"/login",className:"btn-secondary text-sm",children:"Sign In"}),a.jsx(ee,{to:"/register",className:"btn-primary text-sm",children:"Sign Up"})]})})]})})}function hn(){const[t,e]=M.useState(!1),[n,r]=M.useState(!1),[s,i]=M.useState(!1);return a.jsxs(a.Fragment,{children:[a.jsx("footer",{className:"border-t border-border bg-muted py-12",children:a.jsxs("div",{className:"container",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-foreground mb-4",children:"SpecCon Marketing Management Website"}),a.jsx("p",{className:"text-muted-foreground text-sm",children:"Comprehensive project management platform for website development and social media coordination."})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-bold text-foreground mb-3",children:"Platform"}),a.jsx("ul",{className:"space-y-2 text-sm text-muted-foreground",children:a.jsx("li",{children:a.jsx("a",{href:"/dashboard",className:"hover:text-primary",children:"Dashboard"})})})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-bold text-foreground mb-3",children:"Features"}),a.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-primary",children:"Project Management"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-primary",children:"Ticketing System"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-primary",children:"Analytics Tracking"})})]})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-bold text-foreground mb-3",children:"Support"}),a.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[a.jsx("li",{children:a.jsx("button",{onClick:()=>e(!0),className:"hover:text-primary",children:"Help Center"})}),a.jsx("li",{children:a.jsx("button",{onClick:()=>r(!0),className:"hover:text-primary",children:"Privacy"})}),a.jsx("li",{children:a.jsx("button",{onClick:()=>i(!0),className:"hover:text-primary",children:"Terms"})})]})]})]}),a.jsx("div",{className:"border-t border-border pt-8",children:a.jsx("p",{className:"text-center text-sm text-muted-foreground",children:" 2025 SpecCon Marketing Management Website. All rights reserved."})})]})}),t&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-background rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-background border-b border-border p-6 flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Help Center"}),a.jsx("button",{onClick:()=>e(!1),className:"text-muted-foreground hover:text-foreground text-2xl",children:""})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"Getting Started"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"Welcome to SpecCon Marketing Management Website! Here's how to get started:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"Create an account with your assigned role"}),a.jsx("li",{children:"Access your role-specific dashboard"}),a.jsx("li",{children:"View assigned projects and tasks"}),a.jsx("li",{children:"Collaborate with your team members"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"For Clients"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"How to manage your website projects:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"View progress of your website through different stages"}),a.jsx("li",{children:"Create tickets for bug reports or content changes"}),a.jsx("li",{children:"Track analytics and social media performance"}),a.jsx("li",{children:"Communicate with your development team"}),a.jsx("li",{children:"Monitor project milestones and deadlines"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"For Developers"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"Managing your assigned projects:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"Access all your assigned website projects"}),a.jsx("li",{children:"Update project stages as work progresses"}),a.jsx("li",{children:"Manage and resolve client tickets"}),a.jsx("li",{children:"Track time and deliverables"}),a.jsx("li",{children:"Collaborate with social media coordinators"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"For Social Media Coordinators"}),a.jsx("p",{className:"text-muted-foreground",children:"Track and manage social media analytics for your assigned projects. Add analytics entries for reach, engagement, and posts across different platforms. Generate reports and monitor performance trends."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"Ticketing System"}),a.jsx("p",{className:"text-muted-foreground",children:"Create tickets for bug reports, content changes, design updates, or feature requests. All tickets are tracked and assigned to the appropriate team member. Monitor ticket status from creation to resolution."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"Account Security"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"Keep your account secure:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"Use a strong, unique password"}),a.jsx("li",{children:"Never share your login credentials"}),a.jsx("li",{children:"Enable two-factor authentication when available"}),a.jsx("li",{children:"Log out from shared devices"}),a.jsx("li",{children:"Report suspicious activity immediately"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"Contact Support"}),a.jsx("p",{className:"text-muted-foreground",children:"Need more help? Contact our support team:"}),a.jsxs("p",{className:"text-muted-foreground mt-2",children:["Email: support@speccon.co.za",a.jsx("br",{}),"Phone: +27 21 123 4567",a.jsx("br",{}),"Hours: Monday - Friday, 9:00 AM - 5:00 PM SAST"]})]})]}),a.jsx("div",{className:"sticky bottom-0 bg-background border-t border-border p-6",children:a.jsx("button",{onClick:()=>e(!1),className:"w-full btn-primary",children:"Close"})})]})}),n&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-background rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-background border-b border-border p-6 flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Privacy Policy"}),a.jsx("button",{onClick:()=>r(!1),className:"text-muted-foreground hover:text-foreground text-2xl",children:""})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"1. Information We Collect"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"When you use SpecCon Marketing Management Website, we collect the following information:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"Personal information (name, email address, phone number)"}),a.jsx("li",{children:"Project files, documents, and assets"}),a.jsx("li",{children:"Website analytics and social media metrics"}),a.jsx("li",{children:"Ticket history and communications"}),a.jsx("li",{children:"Device information and IP address for security purposes"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"2. How We Use Your Information"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"We use your information to:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"Manage and track website development projects"}),a.jsx("li",{children:"Facilitate team collaboration and communication"}),a.jsx("li",{children:"Store and track analytics data"}),a.jsx("li",{children:"Communicate with you about your projects and tickets"}),a.jsx("li",{children:"Prevent unauthorized access and ensure platform security"}),a.jsx("li",{children:"Improve our services and user experience"}),a.jsx("li",{children:"Comply with legal obligations"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"3. Information Sharing"}),a.jsx("p",{className:"text-muted-foreground",children:"We do not sell your personal information. We may share your information with:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4 mt-2",children:[a.jsx("li",{children:"Team members assigned to the same projects"}),a.jsx("li",{children:"Service providers who assist in operating our platform"}),a.jsx("li",{children:"Law enforcement when required by law"}),a.jsx("li",{children:"Other users (limited information) necessary for project collaboration"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"4. Data Security"}),a.jsx("p",{className:"text-muted-foreground",children:"We implement industry-standard security measures to protect your personal information, including encryption, secure servers, and regular security audits. However, no method of transmission over the internet is 100% secure, and we cannot guarantee absolute security."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"5. Data Retention"}),a.jsx("p",{className:"text-muted-foreground",children:"We retain your personal information for as long as your account is active or as needed to provide services. Project records and analytics data are kept for 7 years to comply with South African business regulations."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"6. Your Rights"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"Under the Protection of Personal Information Act (POPIA), you have the right to:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"Access your personal information"}),a.jsx("li",{children:"Correct inaccurate information"}),a.jsx("li",{children:"Request deletion of your information (subject to legal requirements)"}),a.jsx("li",{children:"Object to processing of your information"}),a.jsx("li",{children:"Withdraw consent at any time"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"7. Cookies"}),a.jsx("p",{className:"text-muted-foreground",children:"We use cookies and similar technologies to improve your experience, analyze site usage, and assist in our marketing efforts. You can control cookie preferences through your browser settings."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"8. Third-Party Links"}),a.jsx("p",{className:"text-muted-foreground",children:"Our platform may contain links to third-party websites. We are not responsible for the privacy practices of these websites. We encourage you to review their privacy policies."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"9. Children's Privacy"}),a.jsx("p",{className:"text-muted-foreground",children:"SpecCon Marketing Management Website is a business platform not intended for users under the age of 18. We do not knowingly collect personal information from children."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"10. Changes to This Policy"}),a.jsx("p",{className:"text-muted-foreground",children:"We may update this privacy policy from time to time. We will notify you of any significant changes by email or through a notice on our platform."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"11. Contact Us"}),a.jsx("p",{className:"text-muted-foreground",children:"If you have questions about this privacy policy or how we handle your personal information, please contact us at:"}),a.jsxs("p",{className:"text-muted-foreground mt-2",children:["Email: privacy@speccon.co.za",a.jsx("br",{}),"Address: Cape Town, South Africa"]})]}),a.jsx("div",{className:"bg-muted p-4 rounded-lg",children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.jsx("strong",{children:"Last Updated:"})," January 2025",a.jsx("br",{}),a.jsx("strong",{children:"Effective Date:"})," January 2025"]})})]}),a.jsx("div",{className:"sticky bottom-0 bg-background border-t border-border p-6",children:a.jsx("button",{onClick:()=>r(!1),className:"w-full btn-primary",children:"Close"})})]})}),s&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-background rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-background border-b border-border p-6 flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Terms & Conditions"}),a.jsx("button",{onClick:()=>i(!1),className:"text-muted-foreground hover:text-foreground text-2xl",children:""})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"1. Acceptance of Terms"}),a.jsx("p",{className:"text-muted-foreground",children:"By accessing and using SpecCon Marketing Management Website, you accept and agree to be bound by these Terms and Conditions. If you do not agree to these terms, please do not use our platform."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"2. Eligibility"}),a.jsx("p",{className:"text-muted-foreground",children:"You must be at least 18 years old and authorized to use SpecCon Marketing Management Website. By using our platform, you represent and warrant that you meet this age requirement and have the legal capacity to enter into binding contracts."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"3. User Accounts"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"When creating an account, you agree to:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"Provide accurate and complete information"}),a.jsx("li",{children:"Maintain the security of your account credentials"}),a.jsx("li",{children:"Accept responsibility for all activities under your account"}),a.jsx("li",{children:"Notify us immediately of any unauthorized use"}),a.jsx("li",{children:"Not create multiple accounts or share accounts"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"4. User Responsibilities"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"All users agree to:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"Perform assigned tasks professionally and on time"}),a.jsx("li",{children:"Maintain confidentiality of client information"}),a.jsx("li",{children:"Communicate effectively with team members"}),a.jsx("li",{children:"Provide accurate project updates and analytics"}),a.jsx("li",{children:"Not engage in unauthorized access or data manipulation"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"5. Project Management"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"Users agree to:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"Update project stages accurately as work progresses"}),a.jsx("li",{children:"Respond to tickets within agreed timeframes"}),a.jsx("li",{children:"Submit accurate analytics data"}),a.jsx("li",{children:"Respect intellectual property rights"}),a.jsx("li",{children:"Maintain professional communication standards"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"6. Service Terms"}),a.jsx("p",{className:"text-muted-foreground",children:"SpecCon Marketing Management Website provides project management and collaboration tools. Service levels and pricing are determined by your organization's agreement. All project data remains the property of the client organization."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"7. Prohibited Activities"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"Users are prohibited from:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"Unauthorized access to other users' projects or data"}),a.jsx("li",{children:"Sharing confidential client information"}),a.jsx("li",{children:"Submitting false or misleading analytics data"}),a.jsx("li",{children:"Harassing other users or team members"}),a.jsx("li",{children:"Attempting to circumvent security measures"}),a.jsx("li",{children:"Reverse engineering or scraping the platform"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"8. Dispute Resolution"}),a.jsx("p",{className:"text-muted-foreground",children:"In case of disputes between team members or regarding project deliverables, administrators will act as mediators. We reserve the right to suspend accounts or take legal action if terms are violated."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"9. Limitation of Liability"}),a.jsx("p",{className:"text-muted-foreground",children:"SpecCon Marketing Management Website provides project management tools as-is. We are not responsible for project outcomes, the actions of users, or disputes arising from collaborations. Our liability is limited to the service fees paid."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"10. Intellectual Property"}),a.jsx("p",{className:"text-muted-foreground",children:"All platform content, trademarks, and intellectual property belong to SpecCon or our licensors. Project content belongs to the respective client organizations. You may not use, copy, or distribute our platform content without written permission."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"11. Account Termination"}),a.jsx("p",{className:"text-muted-foreground",children:"We reserve the right to suspend or terminate accounts that violate these terms, engage in fraudulent activity, or pose a risk to the platform or other users. Termination may result in forfeiture of pending transactions."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"12. Changes to Terms"}),a.jsx("p",{className:"text-muted-foreground",children:"We may modify these terms at any time. Continued use of the platform after changes constitutes acceptance of the new terms. We will notify users of significant changes via email."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"13. Governing Law"}),a.jsx("p",{className:"text-muted-foreground",children:"These terms are governed by the laws of South Africa. Any disputes will be resolved in the courts of South Africa."})]}),a.jsx("div",{className:"bg-muted p-4 rounded-lg",children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.jsx("strong",{children:"Last Updated:"})," January 2025",a.jsx("br",{}),a.jsx("strong",{children:"Effective Date:"})," January 2025"]})})]}),a.jsx("div",{className:"sticky bottom-0 bg-background border-t border-border p-6",children:a.jsx("button",{onClick:()=>i(!1),className:"w-full btn-primary",children:"Close"})})]})})]})}function qP(){const{isSignedIn:t}=bt();return a.jsxs(a.Fragment,{children:[a.jsx(dn,{}),a.jsxs("main",{className:"flex flex-col",children:[a.jsxs("section",{className:"relative py-20 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('https://images.unsplash.com/photo-1522071820081-009f0129c71c?q=80&w=2070&auto=format&fit=crop')"}}),a.jsx("div",{className:"absolute inset-0 bg-black/50"}),a.jsxs("div",{className:"container text-center relative z-10",children:[a.jsx("h1",{className:"text-5xl font-bold mb-6 text-balance text-white !text-white",children:"Manage Websites. Track Social Media. Collaborate Better"}),a.jsx("p",{className:"text-xl text-white/95 mb-8 max-w-2xl mx-auto text-balance",children:"Marketing Management Website is your complete project management platform for website development and social media coordination with team collaboration and ticketing."}),a.jsxs("div",{className:"flex gap-4 justify-center flex-wrap",children:[a.jsx(ee,{to:t?"/dashboard":"/register",className:"bg-white text-primary px-8 py-3 rounded-lg font-bold hover:bg-gray-100 transition",children:t?"Go to Dashboard":"Get Started"}),a.jsx(ee,{to:"/login",className:"bg-primary text-white px-8 py-3 rounded-lg font-bold hover:bg-primary/90 transition border-2 border-white",children:"Sign In"})]})]})]}),a.jsx("section",{className:"py-16 bg-background",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"How Marketing Management Website Works"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"card text-center",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-3xl",children:""})})}),a.jsx("h3",{className:"font-bold text-lg mb-2",children:"Team Collaboration"}),a.jsx("p",{className:"text-muted-foreground",children:"Assign developers and coordinators to projects. Track progress and manage team workload efficiently."})]}),a.jsxs("div",{className:"card text-center",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-3xl",children:""})})}),a.jsx("h3",{className:"font-bold text-lg mb-2",children:"Project Tracking"}),a.jsx("p",{className:"text-muted-foreground",children:"Monitor website building stages from planning to launch. View progress and milestones in real-time."})]}),a.jsxs("div",{className:"card text-center",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-3xl",children:""})})}),a.jsx("h3",{className:"font-bold text-lg mb-2",children:"Analytics Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Track website traffic and social media engagement. Get insights into performance metrics."})]})]})]})}),a.jsx("section",{className:"py-16 bg-muted",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{className:"text-3xl font-bold text-center mb-4",children:"Built for Every Role"}),a.jsx("p",{className:"text-center text-muted-foreground mb-12",children:"Tailored experiences for your entire team"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"mb-4",children:a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-700 border border-purple-200",children:"Administrator"})}),a.jsx("h3",{className:"font-bold text-lg mb-2",children:"Admin"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage all projects, assign team members, and oversee the entire system."})]}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"mb-4",children:a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-700 border border-blue-200",children:"Web Developer"})}),a.jsx("h3",{className:"font-bold text-lg mb-2",children:"Developer"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Work on assigned projects, manage tickets, and track development stages."})]}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"mb-4",children:a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-pink-100 text-pink-700 border border-pink-200",children:"Social Media Coordinator"})}),a.jsx("h3",{className:"font-bold text-lg mb-2",children:"Coordinator"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Track social media metrics and manage analytics for assigned projects."})]}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"mb-4",children:a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-700 border border-green-200",children:"Client"})}),a.jsx("h3",{className:"font-bold text-lg mb-2",children:"Client"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"View project progress, create tickets, and communicate with your team."})]})]})]})}),a.jsx("section",{className:"py-16 bg-primary text-white",children:a.jsxs("div",{className:"container text-center",children:[a.jsx("h2",{className:"text-4xl font-bold mb-6",children:"Ready to Get Started?"}),a.jsx("p",{className:"text-xl mb-8 text-white/90",children:"Join teams managing their websites and social media with Marketing Management Website."}),a.jsxs("div",{className:"flex gap-4 justify-center flex-wrap",children:[a.jsx(ee,{to:t?"/dashboard":"/register",className:"bg-white text-primary px-8 py-3 rounded-lg font-bold hover:bg-gray-100 transition",children:t?"Go to Dashboard":"Get Started Now"}),a.jsx(ee,{to:"/login",className:"border-2 border-white text-white px-8 py-3 rounded-lg font-bold hover:bg-white/10 transition",children:"Sign In"})]})]})})]}),a.jsx(hn,{})]})}let GP=0;const Gw=()=>{const[t,e]=M.useState([]);return{toasts:t,showToast:(r,s="info")=>{const i=String(GP++),o={id:i,message:r,type:s};e(c=>[...c,o]),setTimeout(()=>{e(c=>c.filter(u=>u.id!==i))},3e3)}}};function Kw({toasts:t}){return a.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:t.map(e=>a.jsx("div",{className:`rounded-lg px-4 py-3 text-white text-sm font-medium shadow-lg transition-all ${e.type==="success"?"bg-success":e.type==="error"?"bg-danger":"bg-primary"}`,children:e.message},e.id))})}function KP(){const t=gt(),{toasts:e,showToast:n}=Gw(),{signIn:r,loading:s,isSignedIn:i}=bt(),[o,c]=M.useState(""),[u,d]=M.useState(""),[m,p]=M.useState(!1);M.useEffect(()=>{i&&!s&&t("/dashboard")},[i,s,t]);const g=async w=>{if(w.preventDefault(),!o||!u){n("Please fill in all fields","error");return}p(!0);try{await r(o,u),n("Signing in...","success")}catch(k){let C="Failed to sign in. Please try again.";k.message&&(k.message.includes("auth/user-not-found")||k.message.includes("auth/wrong-password")?C="Invalid email or password":k.message.includes("auth/invalid-email")?C="Invalid email address":k.message.includes("auth/too-many-requests")?C="Too many failed attempts. Please try again later.":k.message.includes("auth/user-disabled")?C="This account has been disabled":C=k.message),n(C,"error")}finally{p(!1)}};return a.jsxs(a.Fragment,{children:[a.jsx(dn,{}),a.jsx("main",{className:"min-h-screen bg-muted flex items-center justify-center py-12",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Sign In"}),a.jsx("p",{className:"text-muted-foreground",children:"Access your Marketing Management Website account"})]}),a.jsxs("div",{className:"card",children:[a.jsxs("form",{onSubmit:g,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Email Address"}),a.jsx("input",{type:"email",value:o,onChange:w=>c(w.target.value),placeholder:"you@example.com",className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Password"}),a.jsx("input",{type:"password",value:u,onChange:w=>d(w.target.value),placeholder:"",className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",className:"rounded"}),a.jsx("span",{className:"text-sm text-foreground",children:"Remember me"})]}),a.jsx(ee,{to:"#",className:"text-sm text-primary hover:underline",children:"Forgot password?"})]}),a.jsx("button",{type:"submit",disabled:m||s,className:"w-full btn-primary py-3 font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:m||s?"Signing in...":"Sign In"})]}),a.jsxs("div",{className:"relative my-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-border"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-background text-muted-foreground",children:"Or"})})]}),a.jsx("div",{className:"space-y-3",children:a.jsxs("button",{className:"w-full flex items-center justify-center gap-2 border border-border rounded-lg py-3 font-semibold text-foreground hover:bg-muted transition",children:[a.jsx("span",{children:""})," Continue with Google"]})}),a.jsxs("p",{className:"text-center mt-6 text-sm text-muted-foreground",children:["Don't have an account?"," ",a.jsx(ee,{to:"/register",className:"text-primary font-semibold hover:underline",children:"Sign up here"})]})]}),a.jsxs("div",{className:"mt-8 text-center",children:[a.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Professional Project Management"}),a.jsxs("div",{className:"flex items-center justify-center gap-4",children:[a.jsx("span",{className:"text-lg",children:" Secure"}),a.jsx("span",{className:"text-lg",children:" Collaborative"}),a.jsx("span",{className:"text-lg",children:" Efficient"})]})]})]})}),a.jsx(Kw,{toasts:e}),a.jsx(hn,{})]})}function QP(){const t=gt(),{toasts:e,showToast:n}=Gw(),{signUp:r,isSignedIn:s,loading:i}=bt(),[o,c]=M.useState("client"),[u,d]=M.useState(""),[m,p]=M.useState(""),[g,w]=M.useState(""),[k,C]=M.useState(""),[S,_]=M.useState(""),[x,A]=M.useState(!1),[D,F]=M.useState(!1),[z,E]=M.useState(!1),[v,T]=M.useState(!1);M.useEffect(()=>{s&&!i&&t("/dashboard")},[s,i,t]);const b=async N=>{if(N.preventDefault(),!u||!m||!g||!k||!S){n("Please fill in all fields","error");return}if(k!==S){n("Passwords do not match","error");return}if(k.length<6){n("Password must be at least 6 characters","error");return}if(!x){n("Please agree to terms and conditions","error");return}T(!0);try{await r({email:m,password:k,fullName:u,phone:g,role:o}),n("Account created successfully!","success")}catch(P){n(P.message||"Failed to create account","error")}finally{T(!1)}};return a.jsxs(a.Fragment,{children:[a.jsx(dn,{}),a.jsx("main",{className:"min-h-screen bg-muted py-12",children:a.jsxs("div",{className:"container max-w-2xl",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Create Your Account"}),a.jsx("p",{className:"text-muted-foreground",children:"Join SpecCon Marketing Management Website platform"}),a.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4 mt-6 max-w-xl mx-auto",children:a.jsxs("p",{className:"text-sm text-foreground",children:[a.jsx("span",{className:"font-semibold",children:" Note:"})," Select your role carefully. Admin approval may be required for certain roles."]})})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("label",{className:"block text-sm font-semibold text-foreground mb-4",children:"Select Your Role"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("button",{onClick:()=>c("client"),className:`p-6 rounded-lg border-2 transition text-center ${o==="client"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("h3",{className:"font-bold text-foreground mb-1",children:"Client"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Track your website projects"})]}),a.jsxs("button",{onClick:()=>c("web_developer"),className:`p-6 rounded-lg border-2 transition text-center ${o==="web_developer"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("h3",{className:"font-bold text-foreground mb-1",children:"Web Developer"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Build and manage websites"})]}),a.jsxs("button",{onClick:()=>c("social_media_coordinator"),className:`p-6 rounded-lg border-2 transition text-center ${o==="social_media_coordinator"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("h3",{className:"font-bold text-foreground mb-1",children:"Social Media Coordinator"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Track social media analytics"})]})]})]}),a.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Full Name"}),a.jsx("input",{type:"text",value:u,onChange:N=>d(N.target.value),placeholder:"John Doe",className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Email Address"}),a.jsx("input",{type:"email",value:m,onChange:N=>p(N.target.value),placeholder:"you@example.com",className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",value:g,onChange:N=>w(N.target.value),placeholder:"+27 123 456 7890",className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Password"}),a.jsx("input",{type:"password",value:k,onChange:N=>C(N.target.value),placeholder:"",className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Confirm Password"}),a.jsx("input",{type:"password",value:S,onChange:N=>_(N.target.value),placeholder:"",className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20"})]}),a.jsx("div",{className:"bg-muted rounded-lg p-4 space-y-2",children:a.jsxs("label",{className:"flex items-start gap-3",children:[a.jsx("input",{type:"checkbox",checked:x,onChange:N=>A(N.target.checked),className:"mt-1"}),a.jsxs("span",{className:"text-sm text-foreground",children:["I agree to SpecCon Marketing Management Website's"," ",a.jsx("button",{type:"button",onClick:()=>F(!0),className:"text-primary hover:underline",children:"Terms of Service"})," ","and"," ",a.jsx("button",{type:"button",onClick:()=>E(!0),className:"text-primary hover:underline",children:"Privacy Policy"})]})]})}),a.jsx("button",{type:"submit",disabled:v||i,className:"w-full btn-primary py-3 font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Creating Account...":"Create Account"})]}),a.jsxs("p",{className:"text-center mt-6 text-sm text-muted-foreground",children:["Already have an account?"," ",a.jsx(ee,{to:"/login",className:"text-primary font-semibold hover:underline",children:"Sign in here"})]})]})]})}),a.jsx(Kw,{toasts:e}),D&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-background rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-background border-b border-border p-6 flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Terms of Service"}),a.jsx("button",{onClick:()=>F(!1),className:"text-muted-foreground hover:text-foreground text-2xl",children:""})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"1. Acceptance of Terms"}),a.jsx("p",{className:"text-muted-foreground",children:"By accessing and using SpecCon Marketing Management Website, you accept and agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our platform."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"2. Eligibility"}),a.jsx("p",{className:"text-muted-foreground",children:"You must be at least 18 years old to use SpecCon Marketing Management Website. By using our platform, you represent and warrant that you meet this age requirement and have the legal capacity to enter into binding contracts."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"3. User Accounts"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"When creating an account, you agree to:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"Provide accurate and complete information"}),a.jsx("li",{children:"Maintain the security of your account credentials"}),a.jsx("li",{children:"Accept responsibility for all activities under your account"}),a.jsx("li",{children:"Notify us immediately of any unauthorized use"}),a.jsx("li",{children:"Not create multiple accounts or share accounts"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"4. User Responsibilities"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"All users agree to:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"Perform assigned tasks professionally and on time"}),a.jsx("li",{children:"Maintain confidentiality of client information"}),a.jsx("li",{children:"Communicate effectively with team members"}),a.jsx("li",{children:"Provide accurate project updates and analytics"}),a.jsx("li",{children:"Not engage in unauthorized access or data manipulation"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"5. Service Terms"}),a.jsx("p",{className:"text-muted-foreground",children:"SpecCon Marketing Management Website provides project management and collaboration tools. All project data remains the property of the client organization."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"6. Prohibited Activities"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"Users are prohibited from:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"Unauthorized access to other users' projects or data"}),a.jsx("li",{children:"Sharing confidential client information"}),a.jsx("li",{children:"Submitting false or misleading analytics data"}),a.jsx("li",{children:"Harassing other users or team members"}),a.jsx("li",{children:"Attempting to circumvent security measures"}),a.jsx("li",{children:"Reverse engineering or scraping the platform"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"7. Account Termination"}),a.jsx("p",{className:"text-muted-foreground",children:"We reserve the right to suspend or terminate accounts that violate these terms or engage in unauthorized activity."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"8. Governing Law"}),a.jsx("p",{className:"text-muted-foreground",children:"These terms are governed by the laws of South Africa. Any disputes will be resolved in the courts of South Africa."})]}),a.jsx("div",{className:"bg-muted p-4 rounded-lg",children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.jsx("strong",{children:"Last Updated:"})," January 2025",a.jsx("br",{}),a.jsx("strong",{children:"Effective Date:"})," January 2025"]})})]}),a.jsx("div",{className:"sticky bottom-0 bg-background border-t border-border p-6",children:a.jsx("button",{onClick:()=>F(!1),className:"w-full btn-primary",children:"Close"})})]})}),z&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-background rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-background border-b border-border p-6 flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Privacy Policy"}),a.jsx("button",{onClick:()=>E(!1),className:"text-muted-foreground hover:text-foreground text-2xl",children:""})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"1. Information We Collect"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"When you use SpecCon Marketing Management Website, we collect the following information:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"Personal information (name, email address, phone number)"}),a.jsx("li",{children:"Project files, documents, and assets"}),a.jsx("li",{children:"Website analytics and social media metrics"}),a.jsx("li",{children:"Ticket history and communications"}),a.jsx("li",{children:"Device information and IP address for security purposes"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"2. How We Use Your Information"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"We use your information to:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"Manage and track website development projects"}),a.jsx("li",{children:"Facilitate team collaboration and communication"}),a.jsx("li",{children:"Store and track analytics data"}),a.jsx("li",{children:"Communicate with you about your projects and tickets"}),a.jsx("li",{children:"Prevent unauthorized access and ensure platform security"}),a.jsx("li",{children:"Improve our services and user experience"}),a.jsx("li",{children:"Comply with legal obligations"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"3. Information Sharing"}),a.jsx("p",{className:"text-muted-foreground",children:"We do not sell your personal information. We may share your information with:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4 mt-2",children:[a.jsx("li",{children:"Payment processors to complete transactions"}),a.jsx("li",{children:"Service providers who assist in operating our platform"}),a.jsx("li",{children:"Law enforcement when required by law"}),a.jsx("li",{children:"Other users (limited information) necessary to complete transactions"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"4. Data Security"}),a.jsx("p",{className:"text-muted-foreground",children:"We implement industry-standard security measures to protect your personal information, including encryption, secure servers, and regular security audits. However, no method of transmission over the internet is 100% secure, and we cannot guarantee absolute security."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"5. Data Retention"}),a.jsx("p",{className:"text-muted-foreground",children:"We retain your personal information for as long as your account is active or as needed to provide services. Transaction records are kept for 7 years to comply with South African tax and financial regulations."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"6. Your Rights"}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"Under the Protection of Personal Information Act (POPIA), you have the right to:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[a.jsx("li",{children:"Access your personal information"}),a.jsx("li",{children:"Correct inaccurate information"}),a.jsx("li",{children:"Request deletion of your information (subject to legal requirements)"}),a.jsx("li",{children:"Object to processing of your information"}),a.jsx("li",{children:"Withdraw consent at any time"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"7. Cookies"}),a.jsx("p",{className:"text-muted-foreground",children:"We use cookies and similar technologies to improve your experience, analyze site usage, and assist in our marketing efforts. You can control cookie preferences through your browser settings."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"8. Third-Party Links"}),a.jsx("p",{className:"text-muted-foreground",children:"Our platform may contain links to third-party websites. We are not responsible for the privacy practices of these websites. We encourage you to review their privacy policies."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"5. Children's Privacy"}),a.jsx("p",{className:"text-muted-foreground",children:"SpecCon Marketing Management Website is a business platform not intended for users under the age of 18. We do not knowingly collect personal information from children."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-foreground mb-2",children:"6. Contact Us"}),a.jsx("p",{className:"text-muted-foreground",children:"If you have questions about this privacy policy, please contact us at:"}),a.jsxs("p",{className:"text-muted-foreground mt-2",children:["Email: privacy@speccon.co.za",a.jsx("br",{}),"Address: Cape Town, South Africa"]})]}),a.jsx("div",{className:"bg-muted p-4 rounded-lg",children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.jsx("strong",{children:"Last Updated:"})," January 2025",a.jsx("br",{}),a.jsx("strong",{children:"Effective Date:"})," January 2025"]})})]}),a.jsx("div",{className:"sticky bottom-0 bg-background border-t border-border p-6",children:a.jsx("button",{onClick:()=>E(!1),className:"w-full btn-primary",children:"Close"})})]})}),a.jsx(hn,{})]})}function YP(){const{isSignedIn:t,user:e,loading:n}=bt(),r=gt();return M.useEffect(()=>{if(!n){if(!t){r("/login");return}if(e)switch(e.role){case"admin":r("/admin/dashboard");break;case"web_developer":r("/developer/dashboard");break;case"social_media_coordinator":r("/coordinator/dashboard");break;case"client":r("/client/dashboard");break;default:r("/")}}},[t,e,n,r]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading your dashboard..."})]})})}function tt({title:t,value:e,icon:n,trend:r,className:s=""}){return a.jsx("div",{className:`card ${s}`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:t}),a.jsx("p",{className:"text-2xl font-bold text-foreground",children:typeof e=="number"?Ji(e):e}),r&&a.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[a.jsxs("span",{className:`text-xs ${r.isPositive?"text-green-600":"text-red-600"}`,children:[r.isPositive?"":""," ",Math.abs(r.value),"%"]}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last period"})]})]}),n&&a.jsx("div",{className:"text-primary opacity-20",children:n})]})})}function mr({status:t,className:e=""}){return a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${OP(t)} ${e}`,children:LP(t)})}function lm({priority:t,className:e=""}){const n={low:"",medium:"",high:"",critical:""}[t];return a.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium border ${FP(t)} ${e}`,children:[a.jsx("span",{children:n}),UP(t)]})}function XP(){const{isSignedIn:t,user:e}=bt(),n=gt();if(M.useEffect(()=>{t?(e==null?void 0:e.role)!=="admin"&&n("/dashboard"):n("/login")},[t,e,n]),!e||e.role!=="admin")return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const r=gf(),s=Tx(),i=pf(),o={totalProjects:r.length,activeProjects:r.filter(m=>m.status==="active").length,totalUsers:i.length,openTickets:s.filter(m=>m.status==="open"||m.status==="in_progress").length},c=r.slice(0,5),u=s.slice(0,5),d=m=>s.filter(p=>p.projectId===m).length;return a.jsxs(a.Fragment,{children:[a.jsx(dn,{}),a.jsx("main",{className:"min-h-screen bg-muted",children:a.jsxs("div",{className:"container py-12",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Admin Dashboard"}),a.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",e.fullName,"! Here's your system overview."]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx(tt,{title:"Total Projects",value:o.totalProjects,icon:a.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),a.jsx(tt,{title:"Active Projects",value:o.activeProjects,icon:a.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),a.jsx(tt,{title:"Total Users",value:o.totalUsers,icon:a.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),a.jsx(tt,{title:"Open Tickets",value:o.openTickets,icon:a.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})})]}),a.jsxs("div",{className:"card mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"flex gap-4 flex-wrap",children:[a.jsx(ee,{to:"/admin/projects/new",className:"btn-primary",children:"+ New Project"}),a.jsx(ee,{to:"/admin/projects",className:"btn-outline",children:"Manage Projects"}),a.jsx(ee,{to:"/admin/users",className:"btn-outline",children:"Manage Users"})]})]}),a.jsxs("div",{className:"card mb-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"All Projects"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("label",{className:"text-sm text-muted-foreground",children:["Show"," ",a.jsxs("select",{className:"border border-border rounded px-2 py-1 bg-background text-foreground",children:[a.jsx("option",{children:"10"}),a.jsx("option",{children:"25"}),a.jsx("option",{defaultValue:"50",children:"50"}),a.jsx("option",{children:"100"})]})," ","entries"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Search:"}),a.jsx("input",{type:"text",className:"border border-border rounded px-3 py-1 bg-background text-foreground",placeholder:"Search projects..."})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-[#1e2875] text-white",children:[a.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-[#2a3488]",children:"#"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-[#2a3488]",children:"Project Name"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-[#2a3488]",children:"Status"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-[#2a3488]",children:"Current Stage"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-[#2a3488]",children:"Developer"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-[#2a3488]",children:"My Tickets"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold border-r border-[#2a3488]",children:"Analytics"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Actions"})]})}),a.jsx("tbody",{children:r.map((m,p)=>{const g=i.find(k=>k.id===m.webDeveloperId);i.find(k=>k.id===m.socialMediaCoordinatorId);const w=d(m.id);return a.jsxs("tr",{className:`${p%2===0?"bg-white":"bg-gray-50"} hover:bg-blue-50 transition border-b border-gray-200`,children:[a.jsx("td",{className:"px-4 py-3 text-sm",children:p+1}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-foreground",children:m.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:m.description})]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx(mr,{status:m.status})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:Qo(m.currentStage)})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("div",{className:"text-sm",children:g?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"font-medium text-foreground",children:g.fullName}),a.jsx("div",{className:"text-xs text-muted-foreground",children:g.email})]}):a.jsx("span",{className:"text-xs text-muted-foreground italic",children:"Not assigned"})})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 text-blue-800 font-semibold text-sm",children:w}),a.jsx(ee,{to:`/tickets?project=${m.id}`,className:"text-xs text-primary hover:underline",children:"View"})]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs(ee,{to:`/analytics/${m.id}`,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-[#1e2875] text-white rounded text-xs font-medium hover:bg-[#2a3488] transition",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Analytics"]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ee,{to:`/admin/projects/${m.id}`,className:"text-xs text-primary hover:underline",children:"View"}),a.jsx(ee,{to:`/admin/projects/${m.id}/edit`,className:"text-xs text-primary hover:underline",children:"Edit"})]})})]},m.id)})})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Recent Projects"}),a.jsx(ee,{to:"/admin/projects",className:"text-primary hover:underline text-sm",children:"View All"})]}),a.jsx("div",{className:"space-y-4",children:c.map(m=>{const p=i.find(g=>g.id===m.clientId);return a.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-foreground",children:m.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:p==null?void 0:p.fullName})]}),a.jsx(mr,{status:m.status})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[a.jsxs("span",{className:"text-muted-foreground",children:["Stage: ",a.jsx("span",{className:"text-foreground",children:Qo(m.currentStage)})]}),a.jsx("span",{className:"text-muted-foreground",children:Ko(m.updatedAt)})]})]},m.id)})})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Recent Tickets"}),a.jsx(ee,{to:"/tickets",className:"text-primary hover:underline text-sm",children:"View All"})]}),a.jsx("div",{className:"space-y-4",children:u.map(m=>{const p=r.find(g=>g.id===m.projectId);return a.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-foreground",children:m.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:p==null?void 0:p.name})]}),a.jsx(lm,{priority:m.priority})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx(mr,{status:m.status}),a.jsx("span",{className:"text-xs text-muted-foreground",children:Ko(m.createdAt)})]})]},m.id)})})]})]})]})}),a.jsx(hn,{})]})}function JP(){const{isSignedIn:t,user:e}=bt(),n=gt();if(M.useEffect(()=>{t?(e==null?void 0:e.role)!=="web_developer"&&n("/dashboard"):n("/login")},[t,e,n]),!e||e.role!=="web_developer")return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const r=ta(e.id,e.role),s=yf(e.id,e.role),i={assignedProjects:r.length,openTickets:s.filter(u=>u.status==="open").length,inProgressTickets:s.filter(u=>u.status==="in_progress").length,resolvedTickets:s.filter(u=>u.status==="resolved").length},o=r.slice(0,3),c=s.slice(0,5);return a.jsxs(a.Fragment,{children:[a.jsx(dn,{}),a.jsx("main",{className:"min-h-screen bg-muted",children:a.jsxs("div",{className:"container py-12",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Developer Dashboard"}),a.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",e.fullName,"! Here's your project overview."]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx(tt,{title:"Assigned Projects",value:i.assignedProjects,icon:a.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),a.jsx(tt,{title:"Open Tickets",value:i.openTickets,icon:a.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx(tt,{title:"In Progress",value:i.inProgressTickets,icon:a.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx(tt,{title:"Resolved",value:i.resolvedTickets,icon:a.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),a.jsxs("div",{className:"card mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"flex gap-4 flex-wrap",children:[a.jsx(ee,{to:"/developer/projects",className:"btn-primary",children:"View All Projects"}),a.jsx(ee,{to:"/developer/tickets",className:"btn-outline",children:"View All Tickets"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:"My Projects"}),a.jsx(ee,{to:"/developer/projects",className:"text-primary hover:underline text-sm",children:"View All"})]}),o.length>0?a.jsx("div",{className:"space-y-4",children:o.map(u=>a.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-foreground",children:u.name}),a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:u.description})]}),a.jsx(mr,{status:u.status})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm mt-3",children:[a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md bg-blue-50 text-blue-700 text-xs font-medium",children:Qo(u.currentStage)}),a.jsxs("span",{className:"text-muted-foreground text-xs",children:["Updated ",Ko(u.updatedAt)]})]})]},u.id))}):a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:a.jsx("p",{children:"No projects assigned yet."})})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:"My Tickets"}),a.jsx(ee,{to:"/developer/tickets",className:"text-primary hover:underline text-sm",children:"View All"})]}),c.length>0?a.jsx("div",{className:"space-y-4",children:c.map(u=>a.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-foreground",children:u.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:zP(u.type)})]}),a.jsx(lm,{priority:u.priority})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-3",children:[a.jsx(mr,{status:u.status}),a.jsx("span",{className:"text-xs text-muted-foreground",children:Ko(u.createdAt)})]})]},u.id))}):a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:a.jsx("p",{children:"No tickets assigned yet."})})]})]})]})}),a.jsx(hn,{})]})}function ZP(){const{isSignedIn:t,user:e}=bt(),n=gt(),[r,s]=M.useState("all");if(M.useEffect(()=>{t?(e==null?void 0:e.role)!=="web_developer"&&n("/dashboard"):n("/login")},[t,e,n]),!e||e.role!=="web_developer")return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const i=yf(e.id,e.role),o=r==="all"?i:i.filter(d=>d.status===r),c={totalAssigned:i.length,critical:i.filter(d=>d.priority==="critical"&&d.status!=="resolved"&&d.status!=="closed").length,overSevenDays:i.filter(d=>Math.floor((new Date().getTime()-new Date(d.createdAt).getTime())/864e5)>7&&d.status!=="resolved"&&d.status!=="closed").length},u=d=>Math.floor((new Date().getTime()-new Date(d).getTime())/(1e3*60*60*24));return a.jsxs(a.Fragment,{children:[a.jsx(dn,{}),a.jsx("main",{className:"min-h-screen bg-muted",children:a.jsxs("div",{className:"container py-12",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"My Tickets"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage and track your assigned tickets"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-white rounded-lg border-2 border-amber-400 p-6",children:[a.jsx("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"TOTAL ASSIGNED"}),a.jsx("div",{className:"text-4xl font-bold text-gray-900",children:c.totalAssigned})]}),a.jsxs("div",{className:"bg-red-50 rounded-lg border-2 border-red-400 p-6",children:[a.jsx("div",{className:"text-sm font-medium text-red-800 mb-2",children:"CRITICAL"}),a.jsx("div",{className:"text-4xl font-bold text-red-600",children:c.critical})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"> 7 DAYS"}),a.jsx("div",{className:"text-4xl font-bold text-blue-600",children:c.overSevenDays})]})]}),a.jsx("div",{className:"card mb-6",children:a.jsxs("div",{className:"flex gap-4 flex-wrap",children:[a.jsx("button",{onClick:()=>s("all"),className:`px-4 py-2 rounded-md font-medium transition ${r==="all"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/70"}`,children:"All Tickets"}),a.jsx("button",{onClick:()=>s("open"),className:`px-4 py-2 rounded-md font-medium transition ${r==="open"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/70"}`,children:"Open"}),a.jsx("button",{onClick:()=>s("in_progress"),className:`px-4 py-2 rounded-md font-medium transition ${r==="in_progress"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/70"}`,children:"In Progress"}),a.jsx("button",{onClick:()=>s("resolved"),className:`px-4 py-2 rounded-md font-medium transition ${r==="resolved"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/70"}`,children:"Resolved"})]})}),a.jsx("div",{className:"card overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-navy-900",children:a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-white uppercase tracking-wider bg-[#1e293b]",children:"PROJECT"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-white uppercase tracking-wider bg-[#1e293b]",children:"TITLE"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-white uppercase tracking-wider bg-[#1e293b]",children:"STATUS"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-white uppercase tracking-wider bg-[#1e293b]",children:"SEVERITY"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-white uppercase tracking-wider bg-[#1e293b]",children:"DAYS OPEN"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length>0?o.map(d=>{const m=a2(d.projectId),p=u(d.createdAt);return a.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(ee,{to:`/projects/${d.projectId}`,className:"text-blue-600 hover:text-blue-800 hover:underline",children:(m==null?void 0:m.name)||"Unknown Project"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.title})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.status==="in_progress"&&a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:"Dev started working on ticket"}),d.status==="resolved"&&a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"Resolved"}),d.status==="open"&&a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800",children:"Open"}),d.status==="closed"&&a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-400 text-white",children:"Closed"})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.priority==="critical"&&a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-red-500 text-white uppercase",children:"CRITICAL"}),d.priority==="high"&&a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-orange-400 text-white uppercase",children:"HIGH"}),d.priority==="medium"&&a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-amber-400 text-gray-900 uppercase",children:"MEDIUM"}),d.priority==="low"&&a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-green-400 text-gray-900 uppercase",children:"LOW"})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-900 font-medium",children:p})})]},d.id)}):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:"No tickets found matching the selected filter."})})})]})})})]})}),a.jsx(hn,{})]})}function ej(){const{isSignedIn:t,user:e}=bt(),n=gt();if(M.useEffect(()=>{t?(e==null?void 0:e.role)!=="social_media_coordinator"&&n("/dashboard"):n("/login")},[t,e,n]),!e||e.role!=="social_media_coordinator")return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const r=ta(e.id,e.role),s=o2(),i=r.map(w=>w.id),o=s.filter(w=>i.includes(w.projectId)),c=o.reduce((w,k)=>w+k.reach,0),u=o.reduce((w,k)=>w+k.engagement,0),d=o.reduce((w,k)=>w+k.posts,0),m={assignedProjects:r.length,totalReach:c,totalEngagement:u,totalPosts:d},p=r.slice(0,3),g=o.slice(0,5);return a.jsxs(a.Fragment,{children:[a.jsx(dn,{}),a.jsx("main",{className:"min-h-screen bg-muted",children:a.jsxs("div",{className:"container py-12",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Social Media Coordinator Dashboard"}),a.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",e.fullName,"! Here's your analytics overview."]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx(tt,{title:"Assigned Projects",value:m.assignedProjects,icon:a.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),a.jsx(tt,{title:"Total Reach",value:Ji(m.totalReach),icon:a.jsxs("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),a.jsx(tt,{title:"Total Engagement",value:Ji(m.totalEngagement),icon:a.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),a.jsx(tt,{title:"Total Posts",value:m.totalPosts,icon:a.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})})]}),a.jsxs("div",{className:"card mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"flex gap-4 flex-wrap",children:[a.jsx(ee,{to:"/coordinator/projects",className:"btn-primary",children:"View All Projects"}),a.jsx(ee,{to:"/coordinator/analytics/new",className:"btn-outline",children:"+ Add Analytics Entry"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:"My Projects"}),a.jsx(ee,{to:"/coordinator/projects",className:"text-primary hover:underline text-sm",children:"View All"})]}),p.length>0?a.jsx("div",{className:"space-y-4",children:p.map(w=>a.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-semibold text-foreground",children:w.name}),w.projectType==="social_media"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800",children:"Social Media"}),w.projectType==="website"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Website"})]}),a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:w.description})]}),a.jsx(mr,{status:w.status})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm mt-3 flex-wrap",children:[a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md bg-pink-50 text-pink-700 text-xs font-medium",children:Qo(w.currentStage)}),w.projectType==="social_media"&&w.socialMediaPlatforms&&a.jsxs("div",{className:"flex gap-1",children:[w.socialMediaPlatforms.slice(0,3).map(k=>a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-700 capitalize",children:k},k)),w.socialMediaPlatforms.length>3&&a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-700",children:["+",w.socialMediaPlatforms.length-3]})]})]})]},w.id))}):a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:a.jsx("p",{children:"No projects assigned yet."})})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Recent Analytics Entries"}),a.jsx(ee,{to:"/coordinator/analytics/new",className:"text-primary hover:underline text-sm",children:"+ Add Entry"})]}),g.length>0?a.jsx("div",{className:"space-y-4",children:g.map(w=>{const k=r.find(C=>C.id===w.projectId);return a.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-foreground capitalize",children:w.platform}),a.jsx("p",{className:"text-sm text-muted-foreground",children:k==null?void 0:k.name})]}),a.jsx("span",{className:"text-xs text-muted-foreground",children:Hw(w.date)})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Reach"}),a.jsx("p",{className:"font-semibold text-foreground",children:Ji(w.reach)})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Engagement"}),a.jsx("p",{className:"font-semibold text-foreground",children:Ji(w.engagement)})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Posts"}),a.jsx("p",{className:"font-semibold text-foreground",children:w.posts})]})]})]},w.id)})}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx("p",{children:"No analytics entries yet."}),a.jsx(ee,{to:"/coordinator/analytics/new",className:"text-primary hover:underline text-sm mt-2 inline-block",children:"Add your first entry"})]})]})]})]})}),a.jsx(hn,{})]})}function ev({fullName:t,profileImage:e,size:n="md",className:r=""}){const s={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-16 h-16 text-lg"};return a.jsx("div",{className:`${s[n]} rounded-full bg-primary text-white flex items-center justify-center font-semibold ${r}`,title:t,children:e?a.jsx("img",{src:e,alt:t,className:"w-full h-full rounded-full object-cover"}):BP(t)})}function tj(){const{isSignedIn:t,user:e}=bt(),n=gt();if(M.useEffect(()=>{t?(e==null?void 0:e.role)!=="client"&&n("/dashboard"):n("/login")},[t,e,n]),!e||e.role!=="client")return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const r=ta(e.id,e.role),s=yf(e.id,e.role),i=pf(),o={myProjects:r.length,activeTickets:s.filter(d=>d.status==="open"||d.status==="in_progress").length,resolvedTickets:s.filter(d=>d.status==="resolved").length,inProgressProjects:r.filter(d=>d.status==="active").length},c=r.slice(0,3),u=s.slice(0,5);return a.jsxs(a.Fragment,{children:[a.jsx(dn,{}),a.jsx("main",{className:"min-h-screen bg-muted",children:a.jsxs("div",{className:"container py-12",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Client Dashboard"}),a.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",e.fullName,"! Here's your project status."]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx(tt,{title:"My Projects",value:o.myProjects,icon:a.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),a.jsx(tt,{title:"In Progress",value:o.inProgressProjects,icon:a.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx(tt,{title:"Active Tickets",value:o.activeTickets,icon:a.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}),a.jsx(tt,{title:"Resolved",value:o.resolvedTickets,icon:a.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),a.jsxs("div",{className:"card mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"flex gap-4 flex-wrap",children:[a.jsx(ee,{to:"/client/tickets/new",className:"btn-primary",children:"+ Create New Ticket"}),a.jsx(ee,{to:"/client/projects",className:"btn-outline",children:"View All Projects"}),a.jsx(ee,{to:"/client/tickets",className:"btn-outline",children:"View All Tickets"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:"My Projects"}),a.jsx(ee,{to:"/client/projects",className:"text-primary hover:underline text-sm",children:"View All"})]}),c.length>0?a.jsx("div",{className:"space-y-4",children:c.map(d=>{const m=i.find(w=>w.id===d.webDeveloperId),p=i.find(w=>w.id===d.socialMediaCoordinatorId),g=MP(d.currentStage);return a.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-foreground",children:d.name}),a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:d.description})]}),a.jsx(mr,{status:d.status})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Progress"}),a.jsxs("span",{className:"font-medium text-foreground",children:[g.toFixed(0),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-primary rounded-full h-2 transition-all",style:{width:`${g}%`}})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md bg-green-50 text-green-700 text-xs font-medium",children:Qo(d.currentStage)}),a.jsxs("div",{className:"flex items-center gap-1",children:[m&&a.jsx(ev,{fullName:m.fullName,size:"sm"}),p&&a.jsx(ev,{fullName:p.fullName,size:"sm"})]})]})]},d.id)})}):a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:a.jsx("p",{children:"No projects yet."})})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:"My Tickets"}),a.jsx(ee,{to:"/client/tickets/new",className:"text-primary hover:underline text-sm",children:"+ Create Ticket"})]}),u.length>0?a.jsx("div",{className:"space-y-4",children:u.map(d=>{const m=i.find(p=>p.id===d.assignedTo);return a.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-foreground",children:d.title}),m&&a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Assigned to ",m.fullName]})]}),a.jsx(lm,{priority:d.priority})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-3",children:[a.jsx(mr,{status:d.status}),a.jsx("span",{className:"text-xs text-muted-foreground",children:Ko(d.createdAt)})]})]},d.id)})}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx("p",{children:"No tickets yet."}),a.jsx(ee,{to:"/client/tickets/new",className:"text-primary hover:underline text-sm mt-2 inline-block",children:"Create your first ticket"})]})]})]})]})}),a.jsx(hn,{})]})}const nj=[{value:"admin",label:"ADMIN",description:"Full system access - Manage all projects, users, and system settings"},{value:"web_developer",label:"WEB DEVELOPER",description:"Manage assigned projects, handle tickets, and update project status"},{value:"social_media_coordinator",label:"SOCIAL MEDIA COORDINATOR",description:"Manage social media analytics, campaigns, and content for assigned projects"},{value:"client",label:"CLIENT",description:"View your projects, create tickets, and track progress"}];function rj(){const{isSignedIn:t,user:e,switchRole:n}=bt(),r=gt();if(M.useEffect(()=>{t||r("/login")},[t,r]),!e)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const s=i=>{n(i),setTimeout(()=>{r(i==="admin"?"/admin/dashboard":"/dashboard")},300)};return a.jsxs(a.Fragment,{children:[a.jsx(dn,{}),a.jsx("main",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:a.jsx("div",{className:"container py-20",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-5xl font-bold text-[#1e2875] mb-4",children:"Switch Role"}),a.jsxs("p",{className:"text-lg text-muted-foreground",children:["Currently signed in as ",a.jsx("span",{className:"font-semibold text-foreground",children:e.fullName})]}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Current Role:"," ",a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-[#1e2875] text-white",children:e.role.replace("_"," ").toUpperCase()})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:nj.map(i=>{const o=e.role===i.value;return a.jsxs("button",{onClick:()=>!o&&s(i.value),disabled:o,className:`relative p-8 rounded-xl shadow-lg transition-all duration-300 text-left ${o?"bg-gradient-to-br from-[#1e2875] to-[#2a3488] text-white cursor-default ring-4 ring-blue-300":"bg-white hover:shadow-2xl hover:-translate-y-1 hover:ring-2 hover:ring-[#1e2875]"}`,children:[o&&a.jsx("div",{className:"absolute top-4 right-4",children:a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-bold bg-white/20 backdrop-blur",children:[a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"ACTIVE"]})}),a.jsxs("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-4 ${o?"bg-white/20":"bg-[#1e2875]/10"}`,children:[i.value==="admin"&&a.jsx("svg",{className:`w-8 h-8 ${o?"text-white":"text-[#1e2875]"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),i.value==="web_developer"&&a.jsx("svg",{className:`w-8 h-8 ${o?"text-white":"text-[#1e2875]"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),i.value==="social_media_coordinator"&&a.jsx("svg",{className:`w-8 h-8 ${o?"text-white":"text-[#1e2875]"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),i.value==="client"&&a.jsx("svg",{className:`w-8 h-8 ${o?"text-white":"text-[#1e2875]"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})]}),a.jsx("h2",{className:`text-2xl font-bold mb-3 ${o?"text-white":"text-[#1e2875]"}`,children:i.label}),a.jsx("p",{className:`text-sm leading-relaxed ${o?"text-white/90":"text-muted-foreground"}`,children:i.description}),!o&&a.jsxs("div",{className:"mt-6 flex items-center gap-2 text-[#1e2875] font-semibold text-sm",children:[a.jsx("span",{children:"Click to switch"}),a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},i.value)})}),a.jsx("div",{className:"text-center",children:a.jsxs("button",{onClick:()=>r(-1),className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg bg-white shadow-md hover:shadow-lg transition text-[#1e2875] font-semibold",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Dashboard"]})})]})})}),a.jsx(hn,{})]})}function sj(){const{isSignedIn:t,user:e}=bt(),n=gt(),[r,s]=M.useState("website"),[i,o]=M.useState({name:"",description:"",clientId:"",webDeveloperId:"",socialMediaCoordinatorId:"",currentStage:"planning",status:"active",websiteUrl:"",googleAnalyticsPropertyId:"",googleAnalyticsViewId:"",notes:"",campaignGoals:"",targetAudience:""}),[c,u]=M.useState([]);if(M.useEffect(()=>{t?(e==null?void 0:e.role)!=="admin"&&n("/dashboard"):n("/login")},[t,e,n]),!e||e.role!=="admin")return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const d=pf(),m=d.filter(S=>S.role==="client"),p=d.filter(S=>S.role==="web_developer"),g=d.filter(S=>S.role==="social_media_coordinator"),w=["facebook","instagram","twitter","linkedin","tiktok","youtube"],k=S=>{u(_=>_.includes(S)?_.filter(x=>x!==S):[..._,S])},C=S=>{S.preventDefault();const _={id:`proj-${Date.now()}`,...i,projectType:r,socialMediaPlatforms:r==="social_media"?c:void 0,createdAt:new Date,updatedAt:new Date};console.log("Creating new project:",_),alert(`${r==="website"?"Website":"Social Media"} project "${i.name}" created successfully!`),n("/admin/dashboard")};return a.jsxs(a.Fragment,{children:[a.jsx(dn,{}),a.jsx("main",{className:"min-h-screen bg-muted",children:a.jsxs("div",{className:"container py-12 max-w-4xl",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Create New Project"}),a.jsx("p",{className:"text-muted-foreground",children:"Add a new website or social media project to the system"})]}),a.jsxs("div",{className:"card mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Project Type"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("button",{type:"button",onClick:()=>s("website"),className:`p-6 border-2 rounded-lg transition ${r==="website"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("svg",{className:"w-12 h-12 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("h3",{className:"font-bold text-lg",children:"Website Project"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Build and maintain a website"})]})]})}),a.jsx("button",{type:"button",onClick:()=>s("social_media"),className:`p-6 border-2 rounded-lg transition ${r==="social_media"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("svg",{className:"w-12 h-12 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("h3",{className:"font-bold text-lg",children:"Social Media Project"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage social media campaigns"})]})]})})]})]}),a.jsxs("form",{onSubmit:C,className:"card space-y-6",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Project Details"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-foreground mb-2",children:"Project Name *"}),a.jsx("input",{type:"text",id:"name",required:!0,value:i.name,onChange:S=>o({...i,name:S.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter project name"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-foreground mb-2",children:"Description *"}),a.jsx("textarea",{id:"description",required:!0,value:i.description,onChange:S=>o({...i,description:S.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary h-24",placeholder:"Enter project description"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"clientId",className:"block text-sm font-medium text-foreground mb-2",children:"Client *"}),a.jsxs("select",{id:"clientId",required:!0,value:i.clientId,onChange:S=>o({...i,clientId:S.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[a.jsx("option",{value:"",children:"Select a client"}),m.map(S=>a.jsx("option",{value:S.id,children:S.fullName},S.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"currentStage",className:"block text-sm font-medium text-foreground mb-2",children:"Current Stage *"}),a.jsxs("select",{id:"currentStage",required:!0,value:i.currentStage,onChange:S=>o({...i,currentStage:S.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[a.jsx("option",{value:"planning",children:"Planning"}),a.jsx("option",{value:"design",children:"Design"}),a.jsx("option",{value:"development",children:"Development"}),a.jsx("option",{value:"testing",children:"Testing"}),a.jsx("option",{value:"launch",children:"Launch"}),a.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Team Assignment"}),r==="website"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"webDeveloperId",className:"block text-sm font-medium text-foreground mb-2",children:"Web Developer"}),a.jsxs("select",{id:"webDeveloperId",value:i.webDeveloperId,onChange:S=>o({...i,webDeveloperId:S.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[a.jsx("option",{value:"",children:"Select a developer (optional)"}),p.map(S=>a.jsx("option",{value:S.id,children:S.fullName},S.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"socialMediaCoordinatorId",className:"block text-sm font-medium text-foreground mb-2",children:["Social Media Coordinator ",r==="social_media"&&"*"]}),a.jsxs("select",{id:"socialMediaCoordinatorId",required:r==="social_media",value:i.socialMediaCoordinatorId,onChange:S=>o({...i,socialMediaCoordinatorId:S.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[a.jsxs("option",{value:"",children:["Select a coordinator ",r==="website"&&"(optional)"]}),g.map(S=>a.jsx("option",{value:S.id,children:S.fullName},S.id))]})]})]}),r==="website"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Website Details"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"websiteUrl",className:"block text-sm font-medium text-foreground mb-2",children:"Website URL"}),a.jsx("input",{type:"url",id:"websiteUrl",value:i.websiteUrl,onChange:S=>o({...i,websiteUrl:S.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"https://example.com"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"googleAnalyticsPropertyId",className:"block text-sm font-medium text-foreground mb-2",children:"Google Analytics Property ID"}),a.jsx("input",{type:"text",id:"googleAnalyticsPropertyId",value:i.googleAnalyticsPropertyId,onChange:S=>o({...i,googleAnalyticsPropertyId:S.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"G-XXXXXXXXXX"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"googleAnalyticsViewId",className:"block text-sm font-medium text-foreground mb-2",children:"Google Analytics View ID"}),a.jsx("input",{type:"text",id:"googleAnalyticsViewId",value:i.googleAnalyticsViewId,onChange:S=>o({...i,googleAnalyticsViewId:S.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"123456789"})]})]})]}),r==="social_media"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Social Media Campaign Details"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Platforms *"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:w.map(S=>a.jsxs("label",{className:"flex items-center space-x-2 p-3 border border-border rounded-lg cursor-pointer hover:bg-muted/50 transition",children:[a.jsx("input",{type:"checkbox",checked:c.includes(S),onChange:()=>k(S),className:"w-4 h-4 text-primary focus:ring-primary rounded"}),a.jsx("span",{className:"text-sm font-medium capitalize",children:S})]},S))})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"campaignGoals",className:"block text-sm font-medium text-foreground mb-2",children:"Campaign Goals *"}),a.jsx("textarea",{id:"campaignGoals",required:!0,value:i.campaignGoals,onChange:S=>o({...i,campaignGoals:S.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary h-24",placeholder:"e.g., Increase brand awareness by 40%, generate 200+ qualified leads"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"targetAudience",className:"block text-sm font-medium text-foreground mb-2",children:"Target Audience *"}),a.jsx("textarea",{id:"targetAudience",required:!0,value:i.targetAudience,onChange:S=>o({...i,targetAudience:S.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary h-24",placeholder:"e.g., Business owners, HR managers, training coordinators aged 30-55"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-foreground mb-2",children:"Notes"}),a.jsx("textarea",{id:"notes",value:i.notes,onChange:S=>o({...i,notes:S.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary h-24",placeholder:"Additional notes or requirements"})]}),a.jsxs("div",{className:"flex gap-4 pt-4",children:[a.jsxs("button",{type:"submit",className:"btn-primary flex-1",children:["Create ",r==="website"?"Website":"Social Media"," Project"]}),a.jsx("button",{type:"button",onClick:()=>n(-1),className:"btn-outline flex-1",children:"Cancel"})]})]})]})}),a.jsx(hn,{})]})}function ij(){return a.jsx(RP,{defaultTheme:"light",storageKey:"marketing-website-theme",children:a.jsx(CP,{children:a.jsxs(HI,{children:[a.jsx(vt,{path:"/",element:a.jsx(qP,{})}),a.jsx(vt,{path:"/login",element:a.jsx(KP,{})}),a.jsx(vt,{path:"/register",element:a.jsx(QP,{})}),a.jsx(vt,{path:"/dashboard",element:a.jsx(YP,{})}),a.jsx(vt,{path:"/admin/dashboard",element:a.jsx(XP,{})}),a.jsx(vt,{path:"/admin/projects/new",element:a.jsx(sj,{})}),a.jsx(vt,{path:"/developer/dashboard",element:a.jsx(JP,{})}),a.jsx(vt,{path:"/developer/tickets",element:a.jsx(ZP,{})}),a.jsx(vt,{path:"/coordinator/dashboard",element:a.jsx(ej,{})}),a.jsx(vt,{path:"/client/dashboard",element:a.jsx(tj,{})}),a.jsx(vt,{path:"/switch-role",element:a.jsx(rj,{})}),a.jsx(vt,{path:"*",element:a.jsx($I,{to:"/",replace:!0})})]})})})}Ku.createRoot(document.getElementById("root")).render(a.jsx(dv.StrictMode,{children:a.jsx(JI,{children:a.jsx(ij,{})})}));
